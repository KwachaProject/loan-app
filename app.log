[2025-08-08 14:08:37,441] INFO in app: ==================================================
[2025-08-08 14:08:37,457] INFO in app: Application logging initialized successfully
[2025-08-08 14:08:37,460] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-08 14:08:37,469] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-08 14:08:37,472] INFO in app: System encoding: utf-8
[2025-08-08 14:08:37,474] INFO in app: ==================================================
2025-08-08 14:08:37,856 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-08 14:08:37,861 - INFO - Added job "snapshot_par" to job store "default"
2025-08-08 14:08:37,861 - INFO - Scheduler started
2025-08-08 14:08:37,896 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-08 14:08:37,898 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-08 14:08:37,913 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-08 14:08:37,914 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-08 14:26:07,275] INFO in app: ==================================================
[2025-08-08 14:26:07,284] INFO in app: Application logging initialized successfully
[2025-08-08 14:26:07,285] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-08 14:26:07,289] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-08 14:26:07,293] INFO in app: System encoding: utf-8
[2025-08-08 14:26:07,299] INFO in app: ==================================================
2025-08-08 14:26:07,657 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-08 14:26:07,661 - INFO - Added job "snapshot_par" to job store "default"
2025-08-08 14:26:07,661 - INFO - Scheduler started
2025-08-08 14:26:07,706 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-08 14:26:07,707 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-08 14:26:07,731 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-08 14:26:07,731 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-08 14:35:22,367] INFO in app: ==================================================
[2025-08-08 14:35:22,377] INFO in app: Application logging initialized successfully
[2025-08-08 14:35:22,382] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-08 14:35:22,391] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-08 14:35:22,394] INFO in app: System encoding: utf-8
[2025-08-08 14:35:22,395] INFO in app: ==================================================
2025-08-08 14:35:22,996 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-08 14:35:22,998 - INFO - Added job "snapshot_par" to job store "default"
2025-08-08 14:35:22,998 - INFO - Scheduler started
2025-08-08 14:35:23,023 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-08 14:35:23,024 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-08 14:35:23,034 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-08 14:35:23,034 - INFO - [33mPress CTRL+C to quit[0m
2025-08-08 14:44:40,492 - INFO - 127.0.0.1 - - [08/Aug/2025 14:44:40] "GET /income_report HTTP/1.1" 200 -
2025-08-08 14:44:40,781 - INFO - 127.0.0.1 - - [08/Aug/2025 14:44:40] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-08 14:45:09,085 - INFO - 127.0.0.1 - - [08/Aug/2025 14:45:09] "POST /income_report HTTP/1.1" 200 -
2025-08-08 14:45:32,202 - INFO - 127.0.0.1 - - [08/Aug/2025 14:45:32] "GET /loanbook HTTP/1.1" 200 -
2025-08-08 14:45:45,050 - INFO - 127.0.0.1 - - [08/Aug/2025 14:45:45] "GET /loan/148000014/statement HTTP/1.1" 200 -
[2025-08-08 14:49:18,343] INFO in app: ==================================================
[2025-08-08 14:49:18,356] INFO in app: Application logging initialized successfully
[2025-08-08 14:49:18,364] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-08 14:49:18,380] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-08 14:49:18,383] INFO in app: System encoding: utf-8
[2025-08-08 14:49:18,385] INFO in app: ==================================================
2025-08-08 14:49:18,876 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-08 14:49:18,880 - INFO - Added job "snapshot_par" to job store "default"
2025-08-08 14:49:18,880 - INFO - Scheduler started
2025-08-08 14:49:18,928 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-08 14:49:18,929 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-08 14:49:18,947 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-08 14:49:18,947 - INFO - [33mPress CTRL+C to quit[0m
2025-08-08 14:49:24,648 - INFO - 127.0.0.1 - - [08/Aug/2025 14:49:24] "GET /placements HTTP/1.1" 200 -
2025-08-08 14:49:25,149 - INFO - 127.0.0.1 - - [08/Aug/2025 14:49:25] "GET /income_report HTTP/1.1" 200 -
2025-08-08 14:49:43,955 - INFO - 127.0.0.1 - - [08/Aug/2025 14:49:43] "POST /income_report HTTP/1.1" 200 -
2025-08-08 14:49:46,883 - INFO - 127.0.0.1 - - [08/Aug/2025 14:49:46] "GET /export_income_report_csv?start_date=2025-01-01&end_date=2025-08-31 HTTP/1.1" 200 -
[2025-08-08 14:51:26,733] INFO in app: ==================================================
[2025-08-08 14:51:26,750] INFO in app: Application logging initialized successfully
[2025-08-08 14:51:26,754] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-08 14:51:26,755] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-08 14:51:26,770] INFO in app: System encoding: utf-8
[2025-08-08 14:51:26,774] INFO in app: ==================================================
2025-08-08 14:51:27,289 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-08 14:51:27,291 - INFO - Added job "snapshot_par" to job store "default"
2025-08-08 14:51:27,291 - INFO - Scheduler started
2025-08-08 14:51:27,337 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-08 14:51:27,338 - INFO - Added job "send_sales_notification_email" to job store "default"
[2025-08-08 14:53:46,899] INFO in app: ==================================================
[2025-08-08 14:53:46,935] INFO in app: Application logging initialized successfully
[2025-08-08 14:53:46,937] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-08 14:53:46,941] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-08 14:53:46,943] INFO in app: System encoding: utf-8
[2025-08-08 14:53:46,955] INFO in app: ==================================================
2025-08-08 14:53:47,421 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-08 14:53:47,423 - INFO - Added job "snapshot_par" to job store "default"
2025-08-08 14:53:47,423 - INFO - Scheduler started
2025-08-08 14:53:47,472 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-08 14:53:47,473 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-08 14:53:47,486 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-08 14:53:47,487 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-08 15:15:48,567] INFO in app: ==================================================
[2025-08-08 15:15:48,576] INFO in app: Application logging initialized successfully
[2025-08-08 15:15:48,584] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-08 15:15:48,588] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-08 15:15:48,591] INFO in app: System encoding: utf-8
[2025-08-08 15:15:48,593] INFO in app: ==================================================
2025-08-08 15:15:49,217 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-08 15:15:49,219 - INFO - Added job "snapshot_par" to job store "default"
2025-08-08 15:15:49,220 - INFO - Scheduler started
2025-08-08 15:15:49,263 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-08 15:15:49,263 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-08 15:15:49,279 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-08 15:15:49,279 - INFO - [33mPress CTRL+C to quit[0m
2025-08-08 15:16:03,319 - INFO - 127.0.0.1 - - [08/Aug/2025 15:16:03] "POST /income_report HTTP/1.1" 200 -
2025-08-08 15:16:04,052 - INFO - 127.0.0.1 - - [08/Aug/2025 15:16:04] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-08 15:16:20,066 - INFO - 127.0.0.1 - - [08/Aug/2025 15:16:20] "POST /income_report HTTP/1.1" 200 -
2025-08-08 15:16:22,829 - INFO - 127.0.0.1 - - [08/Aug/2025 15:16:22] "POST /income_report HTTP/1.1" 200 -
2025-08-08 15:16:29,942 - INFO - 127.0.0.1 - - [08/Aug/2025 15:16:29] "GET /detailed_income_breakdown HTTP/1.1" 200 -
[2025-08-08 15:17:22,340] INFO in app: ==================================================
[2025-08-08 15:17:22,353] INFO in app: Application logging initialized successfully
[2025-08-08 15:17:22,358] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-08 15:17:22,363] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-08 15:17:22,371] INFO in app: System encoding: utf-8
[2025-08-08 15:17:22,377] INFO in app: ==================================================
2025-08-08 15:17:22,842 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-08 15:17:22,845 - INFO - Added job "snapshot_par" to job store "default"
2025-08-08 15:17:22,845 - INFO - Scheduler started
2025-08-08 15:17:22,891 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-08 15:17:22,891 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-08 15:17:22,904 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-08 15:17:22,905 - INFO - [33mPress CTRL+C to quit[0m
2025-08-08 15:17:25,854 - INFO - 127.0.0.1 - - [08/Aug/2025 15:17:25] "GET /detailed_income_breakdown HTTP/1.1" 200 -
2025-08-08 15:17:27,108 - INFO - 127.0.0.1 - - [08/Aug/2025 15:17:27] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-08 15:40:22,325] INFO in app: ==================================================
[2025-08-08 15:40:22,337] INFO in app: Application logging initialized successfully
[2025-08-08 15:40:22,340] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-08 15:40:22,342] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-08 15:40:22,352] INFO in app: System encoding: utf-8
[2025-08-08 15:40:22,356] INFO in app: ==================================================
2025-08-08 15:40:22,763 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-08 15:40:22,778 - INFO - Added job "snapshot_par" to job store "default"
2025-08-08 15:40:22,778 - INFO - Scheduler started
2025-08-08 15:40:22,822 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-08 15:40:22,822 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-08 15:40:22,841 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-08 15:40:22,841 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-08 15:41:06,610] INFO in app: ==================================================
[2025-08-08 15:41:06,621] INFO in app: Application logging initialized successfully
[2025-08-08 15:41:06,628] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-08 15:41:06,640] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-08 15:41:06,646] INFO in app: System encoding: utf-8
[2025-08-08 15:41:06,656] INFO in app: ==================================================
2025-08-08 15:41:07,178 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-08 15:41:07,181 - INFO - Added job "snapshot_par" to job store "default"
2025-08-08 15:41:07,181 - INFO - Scheduler started
2025-08-08 15:41:07,233 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-08 15:41:07,234 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-08 15:41:07,248 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-08 15:41:07,248 - INFO - [33mPress CTRL+C to quit[0m
2025-08-08 15:46:07,238 - INFO - Running job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 15:46:07 CAT)" (scheduled at 2025-08-08 15:46:07.232596+02:00)
2025-08-08 15:46:07,239 - INFO - {"event": "auto_post_start", "date": "2025-08-08", "timestamp": "2025-08-08 15:46:07.239268"}
2025-08-08 15:46:07,250 - INFO - {"event": "schedules_fetched", "count": 0, "schedule_ids": [], "due_dates": []}
2025-08-08 15:46:07,251 - INFO - {"event": "auto_post_complete", "posted_count": 0, "backdated_count": 0}
2025-08-08 15:46:07,251 - INFO - Job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 15:51:07 CAT)" executed successfully
2025-08-08 15:51:07,244 - INFO - Running job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 15:56:07 CAT)" (scheduled at 2025-08-08 15:51:07.232596+02:00)
2025-08-08 15:51:07,246 - INFO - {"event": "auto_post_start", "date": "2025-08-08", "timestamp": "2025-08-08 15:51:07.246149"}
2025-08-08 15:51:07,249 - INFO - {"event": "schedules_fetched", "count": 0, "schedule_ids": [], "due_dates": []}
2025-08-08 15:51:07,249 - INFO - {"event": "auto_post_complete", "posted_count": 0, "backdated_count": 0}
2025-08-08 15:51:07,250 - INFO - Job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 15:56:07 CAT)" executed successfully
2025-08-08 15:56:07,245 - INFO - Running job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:01:07 CAT)" (scheduled at 2025-08-08 15:56:07.232596+02:00)
2025-08-08 15:56:07,246 - INFO - {"event": "auto_post_start", "date": "2025-08-08", "timestamp": "2025-08-08 15:56:07.246270"}
2025-08-08 15:56:07,247 - INFO - {"event": "schedules_fetched", "count": 0, "schedule_ids": [], "due_dates": []}
2025-08-08 15:56:07,247 - INFO - {"event": "auto_post_complete", "posted_count": 0, "backdated_count": 0}
2025-08-08 15:56:07,248 - INFO - Job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:01:07 CAT)" executed successfully
2025-08-08 16:01:07,234 - INFO - Running job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:06:07 CAT)" (scheduled at 2025-08-08 16:01:07.232596+02:00)
2025-08-08 16:01:07,234 - INFO - {"event": "auto_post_start", "date": "2025-08-08", "timestamp": "2025-08-08 16:01:07.234823"}
2025-08-08 16:01:07,236 - INFO - {"event": "schedules_fetched", "count": 0, "schedule_ids": [], "due_dates": []}
2025-08-08 16:01:07,236 - INFO - {"event": "auto_post_complete", "posted_count": 0, "backdated_count": 0}
2025-08-08 16:01:07,237 - INFO - Job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:06:07 CAT)" executed successfully
2025-08-08 16:06:07,235 - INFO - Running job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:11:07 CAT)" (scheduled at 2025-08-08 16:06:07.232596+02:00)
2025-08-08 16:06:07,235 - INFO - {"event": "auto_post_start", "date": "2025-08-08", "timestamp": "2025-08-08 16:06:07.235673"}
2025-08-08 16:06:07,238 - INFO - {"event": "schedules_fetched", "count": 0, "schedule_ids": [], "due_dates": []}
2025-08-08 16:06:07,238 - INFO - {"event": "auto_post_complete", "posted_count": 0, "backdated_count": 0}
2025-08-08 16:06:07,238 - INFO - Job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:11:07 CAT)" executed successfully
2025-08-08 16:11:07,244 - INFO - Running job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:16:07 CAT)" (scheduled at 2025-08-08 16:11:07.232596+02:00)
2025-08-08 16:11:07,246 - INFO - {"event": "auto_post_start", "date": "2025-08-08", "timestamp": "2025-08-08 16:11:07.245948"}
2025-08-08 16:11:07,249 - INFO - {"event": "schedules_fetched", "count": 0, "schedule_ids": [], "due_dates": []}
2025-08-08 16:11:07,250 - INFO - {"event": "auto_post_complete", "posted_count": 0, "backdated_count": 0}
2025-08-08 16:11:07,250 - INFO - Job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:16:07 CAT)" executed successfully
2025-08-08 16:16:07,243 - INFO - Running job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:21:07 CAT)" (scheduled at 2025-08-08 16:16:07.232596+02:00)
2025-08-08 16:16:07,244 - INFO - {"event": "auto_post_start", "date": "2025-08-08", "timestamp": "2025-08-08 16:16:07.244170"}
2025-08-08 16:16:07,246 - INFO - {"event": "schedules_fetched", "count": 0, "schedule_ids": [], "due_dates": []}
2025-08-08 16:16:07,246 - INFO - {"event": "auto_post_complete", "posted_count": 0, "backdated_count": 0}
2025-08-08 16:16:07,246 - INFO - Job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:21:07 CAT)" executed successfully
2025-08-08 16:21:07,241 - INFO - Running job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:26:07 CAT)" (scheduled at 2025-08-08 16:21:07.232596+02:00)
2025-08-08 16:21:07,242 - INFO - {"event": "auto_post_start", "date": "2025-08-08", "timestamp": "2025-08-08 16:21:07.242327"}
2025-08-08 16:21:07,244 - INFO - {"event": "schedules_fetched", "count": 0, "schedule_ids": [], "due_dates": []}
2025-08-08 16:21:07,244 - INFO - {"event": "auto_post_complete", "posted_count": 0, "backdated_count": 0}
2025-08-08 16:21:07,245 - INFO - Job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:26:07 CAT)" executed successfully
2025-08-08 16:26:07,247 - INFO - Running job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:31:07 CAT)" (scheduled at 2025-08-08 16:26:07.232596+02:00)
2025-08-08 16:26:07,252 - INFO - {"event": "auto_post_start", "date": "2025-08-08", "timestamp": "2025-08-08 16:26:07.252630"}
2025-08-08 16:26:07,257 - INFO - {"event": "schedules_fetched", "count": 0, "schedule_ids": [], "due_dates": []}
2025-08-08 16:26:07,257 - INFO - {"event": "auto_post_complete", "posted_count": 0, "backdated_count": 0}
2025-08-08 16:26:07,257 - INFO - Job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:31:07 CAT)" executed successfully
2025-08-08 16:31:07,238 - INFO - Running job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:36:07 CAT)" (scheduled at 2025-08-08 16:31:07.232596+02:00)
2025-08-08 16:31:07,239 - INFO - {"event": "auto_post_start", "date": "2025-08-08", "timestamp": "2025-08-08 16:31:07.239542"}
2025-08-08 16:31:07,242 - INFO - {"event": "schedules_fetched", "count": 0, "schedule_ids": [], "due_dates": []}
2025-08-08 16:31:07,242 - INFO - {"event": "auto_post_complete", "posted_count": 0, "backdated_count": 0}
2025-08-08 16:31:07,243 - INFO - Job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:36:07 CAT)" executed successfully
2025-08-08 16:36:07,248 - INFO - Running job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:41:07 CAT)" (scheduled at 2025-08-08 16:36:07.232596+02:00)
2025-08-08 16:36:07,249 - INFO - {"event": "auto_post_start", "date": "2025-08-08", "timestamp": "2025-08-08 16:36:07.249695"}
2025-08-08 16:36:07,252 - INFO - {"event": "schedules_fetched", "count": 0, "schedule_ids": [], "due_dates": []}
2025-08-08 16:36:07,252 - INFO - {"event": "auto_post_complete", "posted_count": 0, "backdated_count": 0}
2025-08-08 16:36:07,252 - INFO - Job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:41:07 CAT)" executed successfully
[2025-08-08 16:37:05,672] INFO in app: ==================================================
[2025-08-08 16:37:05,789] INFO in app: Application logging initialized successfully
[2025-08-08 16:37:05,823] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-08 16:37:05,841] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-08 16:37:05,907] INFO in app: System encoding: utf-8
[2025-08-08 16:37:05,957] INFO in app: ==================================================
2025-08-08 16:37:07,821 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-08 16:37:07,823 - INFO - Added job "snapshot_par" to job store "default"
2025-08-08 16:37:07,824 - INFO - Scheduler started
2025-08-08 16:37:08,037 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-08 16:37:08,038 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-08 16:37:08,256 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-08 16:37:08,256 - INFO - [33mPress CTRL+C to quit[0m
2025-08-08 16:42:08,046 - INFO - Running job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:42:08 CAT)" (scheduled at 2025-08-08 16:42:08.037297+02:00)
2025-08-08 16:42:08,048 - INFO - {"event": "auto_post_start", "date": "2025-08-08", "timestamp": "2025-08-08 16:42:08.048259"}
2025-08-08 16:42:08,077 - INFO - {"event": "schedules_fetched", "count": 0, "schedule_ids": [], "due_dates": []}
2025-08-08 16:42:08,079 - INFO - {"event": "auto_post_complete", "posted_count": 0, "backdated_count": 0}
2025-08-08 16:42:08,079 - INFO - Job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:47:08 CAT)" executed successfully
2025-08-08 16:47:08,053 - INFO - Running job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:52:08 CAT)" (scheduled at 2025-08-08 16:47:08.037297+02:00)
2025-08-08 16:47:08,053 - INFO - {"event": "auto_post_start", "date": "2025-08-08", "timestamp": "2025-08-08 16:47:08.053608"}
2025-08-08 16:47:08,058 - INFO - {"event": "schedules_fetched", "count": 0, "schedule_ids": [], "due_dates": []}
2025-08-08 16:47:08,058 - INFO - {"event": "auto_post_complete", "posted_count": 0, "backdated_count": 0}
2025-08-08 16:47:08,059 - INFO - Job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:52:08 CAT)" executed successfully
2025-08-08 16:52:08,054 - INFO - Running job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:57:08 CAT)" (scheduled at 2025-08-08 16:52:08.037297+02:00)
2025-08-08 16:52:08,055 - INFO - {"event": "auto_post_start", "date": "2025-08-08", "timestamp": "2025-08-08 16:52:08.054990"}
2025-08-08 16:52:08,057 - INFO - {"event": "schedules_fetched", "count": 0, "schedule_ids": [], "due_dates": []}
2025-08-08 16:52:08,058 - INFO - {"event": "auto_post_complete", "posted_count": 0, "backdated_count": 0}
2025-08-08 16:52:08,058 - INFO - Job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 16:57:08 CAT)" executed successfully
2025-08-08 16:57:08,050 - INFO - Running job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 17:02:08 CAT)" (scheduled at 2025-08-08 16:57:08.037297+02:00)
2025-08-08 16:57:08,057 - INFO - {"event": "auto_post_start", "date": "2025-08-08", "timestamp": "2025-08-08 16:57:08.057481"}
2025-08-08 16:57:08,059 - INFO - {"event": "schedules_fetched", "count": 0, "schedule_ids": [], "due_dates": []}
2025-08-08 16:57:08,060 - INFO - {"event": "auto_post_complete", "posted_count": 0, "backdated_count": 0}
2025-08-08 16:57:08,061 - INFO - Job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 17:02:08 CAT)" executed successfully
2025-08-08 17:00:00,131 - INFO - Running job "send_sales_notification_email (trigger: cron[hour='17', minute='0'], next run at: 2025-08-09 17:00:00 CAT)" (scheduled at 2025-08-08 17:00:00+02:00)
[2025-08-08 17:00:00,160] ERROR in app: Sales data error: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 8294, in get_sales_data
    today_sales = get_today_sales(today)
  File "C:\Users\pc\loan-app\app.py", line 8259, in get_today_sales
    return db.session.query(
           ~~~~~~~~~~~~~~~~^
        func.coalesce(func.sum(LoanApplication.loan_amount), 0.0)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).filter(
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 1681, in query
    return self._proxied.query(*entities, **kwargs)
           ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 197, in _proxied
    return self.registry()
           ~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 634, in __call__
    key = self.scopefunc()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_sqlalchemy\session.py", line 111, in _app_ctx_id
    return id(app_ctx._get_current_object())  # type: ignore[attr-defined]
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
2025-08-08 17:00:00,160 - ERROR - Sales data error: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 8294, in get_sales_data
    today_sales = get_today_sales(today)
  File "C:\Users\pc\loan-app\app.py", line 8259, in get_today_sales
    return db.session.query(
           ~~~~~~~~~~~~~~~~^
        func.coalesce(func.sum(LoanApplication.loan_amount), 0.0)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).filter(
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 1681, in query
    return self._proxied.query(*entities, **kwargs)
           ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 197, in _proxied
    return self.registry()
           ~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 634, in __call__
    key = self.scopefunc()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_sqlalchemy\session.py", line 111, in _app_ctx_id
    return id(app_ctx._get_current_object())  # type: ignore[attr-defined]
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
2025-08-08 17:00:00,656 - ERROR - Job "send_sales_notification_email (trigger: cron[hour='17', minute='0'], next run at: 2025-08-09 17:00:00 CAT)" raised an exception
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\apscheduler\executors\base.py", line 131, in run_job
    retval = job.func(*job.args, **job.kwargs)
  File "C:\Users\pc\loan-app\app.py", line 9119, in send_sales_notification_email
    db.session.rollback()
    ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 1794, in rollback
    return self._proxied.rollback()
           ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 197, in _proxied
    return self.registry()
           ~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 634, in __call__
    key = self.scopefunc()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_sqlalchemy\session.py", line 111, in _app_ctx_id
    return id(app_ctx._get_current_object())  # type: ignore[attr-defined]
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
2025-08-08 17:00:00,739 - INFO - Running job "send_sales_notification_email (trigger: cron[hour='17', minute='0'], next run at: 2025-08-09 17:00:00 CAT)" (scheduled at 2025-08-08 17:00:00+02:00)
[2025-08-08 17:00:00,908] ERROR in app: Sales data error: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 8295, in get_sales_data
    mtd_sales = get_mtd_sales(comparisons['start_of_month'])
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8260, in get_today_sales
        func.coalesce(func.sum(LoanApplication.loan_amount), 0.0)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).filter(
    ^^^^^^^^^
        func.date(LoanApplication.created_at) == today
    
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 1681, in query
    return self._proxied.query(*entities, **kwargs)
           ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 197, in _proxied
    return self.registry()
           ~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 634, in __call__
    key = self.scopefunc()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_sqlalchemy\session.py", line 111, in _app_ctx_id
    return id(app_ctx._get_current_object())  # type: ignore[attr-defined]
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
2025-08-08 17:00:00,908 - ERROR - Sales data error: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 8295, in get_sales_data
    mtd_sales = get_mtd_sales(comparisons['start_of_month'])
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8260, in get_today_sales
        func.coalesce(func.sum(LoanApplication.loan_amount), 0.0)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).filter(
    ^^^^^^^^^
        func.date(LoanApplication.created_at) == today
    
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 1681, in query
    return self._proxied.query(*entities, **kwargs)
           ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 197, in _proxied
    return self.registry()
           ~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 634, in __call__
    key = self.scopefunc()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_sqlalchemy\session.py", line 111, in _app_ctx_id
    return id(app_ctx._get_current_object())  # type: ignore[attr-defined]
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
2025-08-08 17:00:01,575 - ERROR - Job "send_sales_notification_email (trigger: cron[hour='17', minute='0'], next run at: 2025-08-09 17:00:00 CAT)" raised an exception
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\apscheduler\executors\base.py", line 131, in run_job
    retval = job.func(*job.args, **job.kwargs)
  File "C:\Users\pc\loan-app\app.py", line 9120, in send_sales_notification_email
    current_app.logger.error(f"Email failed: {str(e)}")
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 1794, in rollback
    return self._proxied.rollback()
           ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 197, in _proxied
    return self.registry()
           ~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 634, in __call__
    key = self.scopefunc()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_sqlalchemy\session.py", line 111, in _app_ctx_id
    return id(app_ctx._get_current_object())  # type: ignore[attr-defined]
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
2025-08-08 17:02:08,050 - INFO - Running job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 17:07:08 CAT)" (scheduled at 2025-08-08 17:02:08.037297+02:00)
2025-08-08 17:02:08,051 - INFO - {"event": "auto_post_start", "date": "2025-08-08", "timestamp": "2025-08-08 17:02:08.051154"}
2025-08-08 17:02:08,054 - INFO - {"event": "schedules_fetched", "count": 0, "schedule_ids": [], "due_dates": []}
2025-08-08 17:02:08,055 - INFO - {"event": "auto_post_complete", "posted_count": 0, "backdated_count": 0}
2025-08-08 17:02:08,055 - INFO - Job "auto_post_payments (trigger: interval[0:05:00], next run at: 2025-08-08 17:07:08 CAT)" executed successfully
[2025-08-08 17:06:31,248] INFO in app: ==================================================
[2025-08-08 17:06:31,264] INFO in app: Application logging initialized successfully
[2025-08-08 17:06:31,268] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-08 17:06:31,275] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-08 17:06:31,284] INFO in app: System encoding: utf-8
[2025-08-08 17:06:31,286] INFO in app: ==================================================
2025-08-08 17:06:31,790 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-08 17:06:31,793 - INFO - Added job "snapshot_par" to job store "default"
2025-08-08 17:06:31,793 - INFO - Scheduler started
2025-08-08 17:06:31,845 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-08 17:06:31,846 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-08 17:06:31,869 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-08 17:06:31,869 - INFO - [33mPress CTRL+C to quit[0m
2025-08-08 17:51:01,565 - INFO - 127.0.0.1 - - [08/Aug/2025 17:51:01] "GET /income_report HTTP/1.1" 200 -
2025-08-08 18:41:41,302 - INFO - 127.0.0.1 - - [08/Aug/2025 18:41:41] "GET /detailed_income_breakdown HTTP/1.1" 200 -
2025-08-08 18:41:46,460 - INFO - 127.0.0.1 - - [08/Aug/2025 18:41:46] "GET /loanbook HTTP/1.1" 200 -
2025-08-08 18:41:51,049 - INFO - 127.0.0.1 - - [08/Aug/2025 18:41:51] "GET /loanbook HTTP/1.1" 200 -
2025-08-08 18:42:07,625 - INFO - 127.0.0.1 - - [08/Aug/2025 18:42:07] "GET /income_report HTTP/1.1" 200 -
[2025-08-12 09:09:23,328] INFO in app: ==================================================
[2025-08-12 09:09:23,417] INFO in app: Application logging initialized successfully
[2025-08-12 09:09:23,419] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-12 09:09:23,421] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-12 09:09:23,422] INFO in app: System encoding: utf-8
[2025-08-12 09:09:23,432] INFO in app: ==================================================
[2025-08-12 09:17:48,048] INFO in app: ==================================================
[2025-08-12 09:17:48,056] INFO in app: Application logging initialized successfully
[2025-08-12 09:17:48,064] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-12 09:17:48,068] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-12 09:17:48,074] INFO in app: System encoding: utf-8
[2025-08-12 09:17:48,081] INFO in app: ==================================================
2025-08-12 09:17:48,518 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-12 09:17:48,558 - INFO - Added job "snapshot_par" to job store "default"
2025-08-12 09:17:48,558 - INFO - Scheduler started
2025-08-12 09:17:48,607 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-12 09:17:48,607 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-12 09:17:48,647 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-12 09:17:48,647 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-12 09:30:10,864] INFO in app: ==================================================
[2025-08-12 09:30:10,873] INFO in app: Application logging initialized successfully
[2025-08-12 09:30:10,878] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-12 09:30:10,880] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-12 09:30:10,886] INFO in app: System encoding: utf-8
[2025-08-12 09:30:10,889] INFO in app: ==================================================
2025-08-12 09:30:11,192 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-12 09:30:11,193 - INFO - Added job "snapshot_par" to job store "default"
2025-08-12 09:30:11,194 - INFO - Scheduler started
2025-08-12 09:30:11,279 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-12 09:30:11,279 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-12 09:30:11,292 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-12 09:30:11,293 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-12 09:31:55,855] INFO in app: ==================================================
[2025-08-12 09:31:55,863] INFO in app: Application logging initialized successfully
[2025-08-12 09:31:55,869] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-12 09:31:55,872] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-12 09:31:55,876] INFO in app: System encoding: utf-8
[2025-08-12 09:31:55,878] INFO in app: ==================================================
2025-08-12 09:31:56,162 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-12 09:31:56,166 - INFO - Added job "snapshot_par" to job store "default"
2025-08-12 09:31:56,166 - INFO - Scheduler started
2025-08-12 09:31:56,196 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-12 09:31:56,197 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-12 09:31:56,211 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-12 09:31:56,211 - INFO - [33mPress CTRL+C to quit[0m
2025-08-12 09:32:04,816 - INFO - 127.0.0.1 - - [12/Aug/2025 09:32:04] "[32mGET /admin/dashboard?section=sales_report HTTP/1.1[0m" 302 -
2025-08-12 09:32:04,906 - INFO - 127.0.0.1 - - [12/Aug/2025 09:32:04] "GET /login?next=/admin/dashboard?section%3Dsales_report HTTP/1.1" 200 -
2025-08-12 09:32:05,622 - INFO - 127.0.0.1 - - [12/Aug/2025 09:32:05] "GET /static/img/logo.png HTTP/1.1" 200 -
2025-08-12 09:32:08,100 - INFO - 127.0.0.1 - - [12/Aug/2025 09:32:08] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-12 09:32:11,612 - INFO - 127.0.0.1 - - [12/Aug/2025 09:32:11] "[32mPOST /login?next=/admin/dashboard?section%3Dsales_report HTTP/1.1[0m" 302 -
2025-08-12 09:32:11,683 - INFO - 127.0.0.1 - - [12/Aug/2025 09:32:11] "GET / HTTP/1.1" 200 -
2025-08-12 09:32:16,287 - INFO - 127.0.0.1 - - [12/Aug/2025 09:32:16] "GET /customers HTTP/1.1" 200 -
2025-08-12 09:32:19,766 - INFO - 127.0.0.1 - - [12/Aug/2025 09:32:19] "GET /customer/1/edit HTTP/1.1" 200 -
[2025-08-12 09:32:32,154] ERROR in app: Exception on /loans [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 4749, in view_loans
    return render_template('view_loans.html', loans=processed_loans)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\view_loans.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 177, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\view_loans.html", line 83, in block 'content'
    <a href="{{ url_for('edit_loan', loan_id=entry.loan.id) }}"
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'edit_loan' with values ['loan_id']. Did you mean 'settle_loan' instead?
2025-08-12 09:32:32,154 - ERROR - Exception on /loans [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 4749, in view_loans
    return render_template('view_loans.html', loans=processed_loans)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\view_loans.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 177, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\view_loans.html", line 83, in block 'content'
    <a href="{{ url_for('edit_loan', loan_id=entry.loan.id) }}"
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'edit_loan' with values ['loan_id']. Did you mean 'settle_loan' instead?
2025-08-12 09:32:32,306 - INFO - 127.0.0.1 - - [12/Aug/2025 09:32:32] "[35m[1mGET /loans HTTP/1.1[0m" 500 -
[2025-08-12 09:34:14,270] INFO in app: ==================================================
[2025-08-12 09:34:14,281] INFO in app: Application logging initialized successfully
[2025-08-12 09:34:14,290] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-12 09:34:14,297] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-12 09:34:14,299] INFO in app: System encoding: utf-8
[2025-08-12 09:34:14,305] INFO in app: ==================================================
2025-08-12 09:34:14,673 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-12 09:34:14,675 - INFO - Added job "snapshot_par" to job store "default"
2025-08-12 09:34:14,675 - INFO - Scheduler started
2025-08-12 09:34:14,706 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-12 09:34:14,706 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-12 09:34:14,715 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-12 09:34:14,715 - INFO - [33mPress CTRL+C to quit[0m
2025-08-12 09:34:19,975 - INFO - 127.0.0.1 - - [12/Aug/2025 09:34:19] "GET /loans HTTP/1.1" 200 -
2025-08-12 09:34:21,378 - INFO - 127.0.0.1 - - [12/Aug/2025 09:34:21] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-12 09:34:28,844 - INFO - 127.0.0.1 - - [12/Aug/2025 09:34:28] "GET /loans/1/edit HTTP/1.1" 200 -
2025-08-12 09:34:53,036 - INFO - 127.0.0.1 - - [12/Aug/2025 09:34:53] "GET /loans HTTP/1.1" 200 -
[2025-08-12 09:53:26,152] INFO in app: ==================================================
[2025-08-12 09:53:26,168] INFO in app: Application logging initialized successfully
[2025-08-12 09:53:26,172] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-12 09:53:26,179] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-12 09:53:26,182] INFO in app: System encoding: utf-8
[2025-08-12 09:53:26,184] INFO in app: ==================================================
2025-08-12 09:53:26,772 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-12 09:53:26,775 - INFO - Added job "snapshot_par" to job store "default"
2025-08-12 09:53:26,775 - INFO - Scheduler started
2025-08-12 09:53:26,841 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-12 09:53:26,842 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-12 09:53:26,867 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-12 09:53:26,867 - INFO - [33mPress CTRL+C to quit[0m
2025-08-12 09:53:34,889 - INFO - 127.0.0.1 - - [12/Aug/2025 09:53:34] "GET /loans HTTP/1.1" 200 -
2025-08-12 09:53:36,158 - INFO - 127.0.0.1 - - [12/Aug/2025 09:53:36] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-12 09:53:38,857 - INFO - 127.0.0.1 - - [12/Aug/2025 09:53:38] "GET /loans/1/edit HTTP/1.1" 200 -
2025-08-12 09:53:52,979 - INFO - 127.0.0.1 - - [12/Aug/2025 09:53:52] "[32mPOST /loans/1/edit HTTP/1.1[0m" 302 -
2025-08-12 09:53:53,580 - INFO - 127.0.0.1 - - [12/Aug/2025 09:53:53] "GET /loans HTTP/1.1" 200 -
2025-08-12 09:54:08,565 - INFO - 127.0.0.1 - - [12/Aug/2025 09:54:08] "GET /loans/9/edit HTTP/1.1" 200 -
2025-08-12 09:54:15,645 - INFO - 127.0.0.1 - - [12/Aug/2025 09:54:15] "[32mPOST /loans/9/edit HTTP/1.1[0m" 302 -
2025-08-12 09:54:15,885 - INFO - 127.0.0.1 - - [12/Aug/2025 09:54:15] "GET /loans HTTP/1.1" 200 -
2025-08-12 09:54:21,483 - INFO - 127.0.0.1 - - [12/Aug/2025 09:54:21] "GET /loans/8/edit HTTP/1.1" 200 -
2025-08-12 09:54:27,163 - INFO - 127.0.0.1 - - [12/Aug/2025 09:54:27] "[32mPOST /loans/8/edit HTTP/1.1[0m" 302 -
2025-08-12 09:54:27,413 - INFO - 127.0.0.1 - - [12/Aug/2025 09:54:27] "GET /loans HTTP/1.1" 200 -
2025-08-12 09:54:49,780 - INFO - 127.0.0.1 - - [12/Aug/2025 09:54:49] "GET /loanbook HTTP/1.1" 200 -
2025-08-12 09:55:01,442 - INFO - 127.0.0.1 - - [12/Aug/2025 09:55:01] "GET /loan/136000013/statement HTTP/1.1" 200 -
2025-08-12 09:55:42,279 - INFO - 127.0.0.1 - - [12/Aug/2025 09:55:42] "GET / HTTP/1.1" 200 -
2025-08-12 09:55:45,148 - INFO - 127.0.0.1 - - [12/Aug/2025 09:55:45] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-12 09:55:45,332 - INFO - 127.0.0.1 - - [12/Aug/2025 09:55:45] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-12 09:56:03,521 - INFO - 127.0.0.1 - - [12/Aug/2025 09:56:03] "GET /loans HTTP/1.1" 200 -
2025-08-12 09:56:10,235 - INFO - 127.0.0.1 - - [12/Aug/2025 09:56:10] "GET /loans/5/edit HTTP/1.1" 200 -
2025-08-12 09:56:24,115 - INFO - 127.0.0.1 - - [12/Aug/2025 09:56:24] "[32mPOST /loans/5/edit HTTP/1.1[0m" 302 -
2025-08-12 09:56:24,648 - INFO - 127.0.0.1 - - [12/Aug/2025 09:56:24] "GET /loans HTTP/1.1" 200 -
2025-08-12 09:56:34,090 - INFO - 127.0.0.1 - - [12/Aug/2025 09:56:34] "GET / HTTP/1.1" 200 -
2025-08-12 09:56:36,358 - INFO - 127.0.0.1 - - [12/Aug/2025 09:56:36] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-12 09:56:36,428 - INFO - 127.0.0.1 - - [12/Aug/2025 09:56:36] "GET /notifications/sales-summary HTTP/1.1" 200 -
[2025-08-12 10:41:34,937] INFO in app: ==================================================
[2025-08-12 10:41:35,029] INFO in app: Application logging initialized successfully
[2025-08-12 10:41:35,030] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-12 10:41:35,032] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-12 10:41:35,033] INFO in app: System encoding: utf-8
[2025-08-12 10:41:35,035] INFO in app: ==================================================
2025-08-12 10:41:35,438 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-12 10:41:35,450 - INFO - Added job "snapshot_par" to job store "default"
2025-08-12 10:41:35,450 - INFO - Scheduler started
2025-08-12 10:41:35,493 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-12 10:41:35,494 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-12 10:41:35,536 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-12 10:41:35,536 - INFO - [33mPress CTRL+C to quit[0m
2025-08-12 10:41:48,224 - INFO - 127.0.0.1 - - [12/Aug/2025 10:41:48] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-12 10:41:48,572 - INFO - 127.0.0.1 - - [12/Aug/2025 10:41:48] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-12 10:41:49,288 - INFO - 127.0.0.1 - - [12/Aug/2025 10:41:49] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-12 10:41:54,141 - INFO - 127.0.0.1 - - [12/Aug/2025 10:41:54] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-12 10:42:01,948 - INFO - 127.0.0.1 - - [12/Aug/2025 10:42:01] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-12 10:42:02,015 - INFO - 127.0.0.1 - - [12/Aug/2025 10:42:02] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-12 10:42:07,634 - INFO - 127.0.0.1 - - [12/Aug/2025 10:42:07] "GET /dashboard/analytics HTTP/1.1" 200 -
2025-08-12 10:42:08,402 - INFO - 127.0.0.1 - - [12/Aug/2025 10:42:08] "GET /api/loans-by-region HTTP/1.1" 200 -
2025-08-12 10:42:08,408 - INFO - 127.0.0.1 - - [12/Aug/2025 10:42:08] "GET /api/loans-by-district HTTP/1.1" 200 -
2025-08-12 10:42:08,723 - INFO - 127.0.0.1 - - [12/Aug/2025 10:42:08] "GET /api/average-ticket-size HTTP/1.1" 200 -
2025-08-12 10:42:48,627 - INFO - 127.0.0.1 - - [12/Aug/2025 10:42:48] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-12 10:42:48,721 - INFO - 127.0.0.1 - - [12/Aug/2025 10:42:48] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-12 10:43:08,092 - INFO - 127.0.0.1 - - [12/Aug/2025 10:43:08] "GET / HTTP/1.1" 200 -
2025-08-12 10:43:09,359 - INFO - 127.0.0.1 - - [12/Aug/2025 10:43:09] "GET /register HTTP/1.1" 200 -
2025-08-12 10:43:10,462 - INFO - 127.0.0.1 - - [12/Aug/2025 10:43:10] "GET /approve_customers HTTP/1.1" 200 -
2025-08-12 10:43:11,370 - INFO - 127.0.0.1 - - [12/Aug/2025 10:43:11] "GET /customers HTTP/1.1" 200 -
2025-08-12 10:43:12,625 - INFO - 127.0.0.1 - - [12/Aug/2025 10:43:12] "GET /loans HTTP/1.1" 200 -
[2025-08-12 10:43:13,893] INFO in app: [DISBURSEMENT] Loan #112000001 | Top-up of: None | Cash to Client: 1000000.0
2025-08-12 10:43:13,893 - INFO - [DISBURSEMENT] Loan #112000001 | Top-up of: None | Cash to Client: 1000000.0
[2025-08-12 10:43:13,899] INFO in app: [DISBURSEMENT] Loan #136000002 | Top-up of: None | Cash to Client: 1500000.0
2025-08-12 10:43:13,899 - INFO - [DISBURSEMENT] Loan #136000002 | Top-up of: None | Cash to Client: 1500000.0
[2025-08-12 10:43:13,901] INFO in app: [DISBURSEMENT] Loan #124000003 | Top-up of: None | Cash to Client: 1200000.0
2025-08-12 10:43:13,901 - INFO - [DISBURSEMENT] Loan #124000003 | Top-up of: None | Cash to Client: 1200000.0
[2025-08-12 10:43:13,902] INFO in app: [DISBURSEMENT] Loan #118000004 | Top-up of: 1 | Cash to Client: 738713.64
2025-08-12 10:43:13,902 - INFO - [DISBURSEMENT] Loan #118000004 | Top-up of: 1 | Cash to Client: 738713.64
[2025-08-12 10:43:13,916] INFO in app: [DISBURSEMENT] Loan #136000005 | Top-up of: 4 | Cash to Client: 1276296.29
2025-08-12 10:43:13,916 - INFO - [DISBURSEMENT] Loan #136000005 | Top-up of: 4 | Cash to Client: 1276296.29
[2025-08-12 10:43:13,920] INFO in app: [DISBURSEMENT] Loan #136000006 | Top-up of: 2 | Cash to Client: 777034.17
2025-08-12 10:43:13,920 - INFO - [DISBURSEMENT] Loan #136000006 | Top-up of: 2 | Cash to Client: 777034.17
[2025-08-12 10:43:13,932] INFO in app: [DISBURSEMENT] Loan #124000007 | Top-up of: 6 | Cash to Client: 3557378.79
2025-08-12 10:43:13,932 - INFO - [DISBURSEMENT] Loan #124000007 | Top-up of: 6 | Cash to Client: 3557378.79
[2025-08-12 10:43:13,937] INFO in app: [DISBURSEMENT] Loan #124000008 | Top-up of: 3 | Cash to Client: 2360732.08
2025-08-12 10:43:13,937 - INFO - [DISBURSEMENT] Loan #124000008 | Top-up of: 3 | Cash to Client: 2360732.08
[2025-08-12 10:43:13,953] INFO in app: [DISBURSEMENT] Loan #103000009 | Top-up of: None | Cash to Client: 1200000.0
2025-08-12 10:43:13,953 - INFO - [DISBURSEMENT] Loan #103000009 | Top-up of: None | Cash to Client: 1200000.0
[2025-08-12 10:43:13,963] INFO in app: [DISBURSEMENT] Loan #124000012 | Top-up of: 7 | Cash to Client: 4090282.96
2025-08-12 10:43:13,963 - INFO - [DISBURSEMENT] Loan #124000012 | Top-up of: 7 | Cash to Client: 4090282.96
2025-08-12 10:43:14,021 - INFO - 127.0.0.1 - - [12/Aug/2025 10:43:14] "GET /disbursements HTTP/1.1" 200 -
2025-08-12 10:43:16,970 - INFO - 127.0.0.1 - - [12/Aug/2025 10:43:16] "GET /payments HTTP/1.1" 200 -
2025-08-12 10:43:17,909 - INFO - 127.0.0.1 - - [12/Aug/2025 10:43:17] "GET /placements HTTP/1.1" 200 -
2025-08-12 10:43:21,119 - INFO - 127.0.0.1 - - [12/Aug/2025 10:43:21] "GET /loanbook HTTP/1.1" 200 -
2025-08-12 10:43:23,455 - INFO - 127.0.0.1 - - [12/Aug/2025 10:43:23] "GET /income_report HTTP/1.1" 200 -
2025-08-12 10:43:29,326 - INFO - 127.0.0.1 - - [12/Aug/2025 10:43:29] "GET /admin/dashboard HTTP/1.1" 200 -
2025-08-12 10:43:37,559 - INFO - 127.0.0.1 - - [12/Aug/2025 10:43:37] "GET /admin/notifications HTTP/1.1" 200 -
2025-08-12 10:43:56,089 - INFO - 127.0.0.1 - - [12/Aug/2025 10:43:56] "GET /admin/dashboard?section=cutoff_dates HTTP/1.1" 200 -
2025-08-12 10:43:58,200 - INFO - 127.0.0.1 - - [12/Aug/2025 10:43:58] "GET /admin/reports HTTP/1.1" 200 -
2025-08-12 10:44:01,552 - INFO - 127.0.0.1 - - [12/Aug/2025 10:44:01] "GET /settlement_report HTTP/1.1" 200 -
2025-08-12 10:44:04,336 - INFO - 127.0.0.1 - - [12/Aug/2025 10:44:04] "GET / HTTP/1.1" 200 -
[2025-08-12 12:46:16,047] INFO in app: ==================================================
[2025-08-12 12:46:16,053] INFO in app: Application logging initialized successfully
[2025-08-12 12:46:16,055] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-12 12:46:16,057] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-12 12:46:16,059] INFO in app: System encoding: utf-8
[2025-08-12 12:46:16,065] INFO in app: ==================================================
2025-08-12 12:46:16,344 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-12 12:46:16,346 - INFO - Added job "snapshot_par" to job store "default"
2025-08-12 12:46:16,346 - INFO - Scheduler started
2025-08-12 12:46:16,374 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-12 12:46:16,374 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-12 12:46:16,389 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-12 12:46:16,390 - INFO - [33mPress CTRL+C to quit[0m
2025-08-12 16:38:46,381 - INFO - 127.0.0.1 - - [12/Aug/2025 16:38:46] "GET /loans HTTP/1.1" 200 -
2025-08-12 17:00:00,056 - INFO - Running job "send_sales_notification_email (trigger: cron[hour='17', minute='0'], next run at: 2025-08-12 17:00:00 CAT)" (scheduled at 2025-08-12 17:00:00+02:00)
[2025-08-12 17:00:00,059] ERROR in app: Sales data error: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 8372, in get_sales_data
    today_sales = get_today_sales(today)
  File "C:\Users\pc\loan-app\app.py", line 8337, in get_today_sales
    return db.session.query(
           ~~~~~~~~~~~~~~~~^
        func.coalesce(func.sum(LoanApplication.loan_amount), 0.0)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).filter(
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 1681, in query
    return self._proxied.query(*entities, **kwargs)
           ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 197, in _proxied
    return self.registry()
           ~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 634, in __call__
    key = self.scopefunc()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_sqlalchemy\session.py", line 111, in _app_ctx_id
    return id(app_ctx._get_current_object())  # type: ignore[attr-defined]
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
2025-08-12 17:00:00,059 - ERROR - Sales data error: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 8372, in get_sales_data
    today_sales = get_today_sales(today)
  File "C:\Users\pc\loan-app\app.py", line 8337, in get_today_sales
    return db.session.query(
           ~~~~~~~~~~~~~~~~^
        func.coalesce(func.sum(LoanApplication.loan_amount), 0.0)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).filter(
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 1681, in query
    return self._proxied.query(*entities, **kwargs)
           ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 197, in _proxied
    return self.registry()
           ~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 634, in __call__
    key = self.scopefunc()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_sqlalchemy\session.py", line 111, in _app_ctx_id
    return id(app_ctx._get_current_object())  # type: ignore[attr-defined]
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
2025-08-12 17:00:00,310 - ERROR - Job "send_sales_notification_email (trigger: cron[hour='17', minute='0'], next run at: 2025-08-13 17:00:00 CAT)" raised an exception
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\apscheduler\executors\base.py", line 131, in run_job
    retval = job.func(*job.args, **job.kwargs)
  File "C:\Users\pc\loan-app\app.py", line 9197, in send_sales_notification_email
    db.session.rollback()
    ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 1794, in rollback
    return self._proxied.rollback()
           ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 197, in _proxied
    return self.registry()
           ~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 634, in __call__
    key = self.scopefunc()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_sqlalchemy\session.py", line 111, in _app_ctx_id
    return id(app_ctx._get_current_object())  # type: ignore[attr-defined]
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
[2025-08-13 15:04:02,713] INFO in app: ==================================================
[2025-08-13 15:04:02,903] INFO in app: Application logging initialized successfully
[2025-08-13 15:04:02,911] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 15:04:02,916] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 15:04:02,934] INFO in app: System encoding: utf-8
[2025-08-13 15:04:02,946] INFO in app: ==================================================
2025-08-13 15:04:03,649 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 15:04:03,652 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 15:04:03,652 - INFO - Scheduler started
2025-08-13 15:04:03,747 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 15:04:03,748 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 15:04:03,832 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 15:04:03,832 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-13 15:11:36,298] INFO in app: ==================================================
[2025-08-13 15:11:36,337] INFO in app: Application logging initialized successfully
[2025-08-13 15:11:36,343] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 15:11:36,345] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 15:11:36,349] INFO in app: System encoding: utf-8
[2025-08-13 15:11:36,363] INFO in app: ==================================================
2025-08-13 15:11:36,749 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 15:11:36,751 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 15:11:36,752 - INFO - Scheduler started
2025-08-13 15:11:36,797 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 15:11:36,798 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 15:11:36,810 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 15:11:36,810 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 17:00:00,103 - INFO - Running job "send_sales_notification_email (trigger: cron[hour='17', minute='0'], next run at: 2025-08-14 17:00:00 CAT)" (scheduled at 2025-08-13 17:00:00+02:00)
[2025-08-13 17:00:00,150] ERROR in app: Sales data error: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 8372, in get_sales_data
    today_sales = get_today_sales(today)
  File "C:\Users\pc\loan-app\app.py", line 8337, in get_today_sales
    return db.session.query(
           ~~~~~~~~~~~~~~~~^
        func.coalesce(func.sum(LoanApplication.loan_amount), 0.0)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).filter(
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 1681, in query
    return self._proxied.query(*entities, **kwargs)
           ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 197, in _proxied
    return self.registry()
           ~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 634, in __call__
    key = self.scopefunc()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_sqlalchemy\session.py", line 111, in _app_ctx_id
    return id(app_ctx._get_current_object())  # type: ignore[attr-defined]
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
2025-08-13 17:00:00,150 - ERROR - Sales data error: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 8372, in get_sales_data
    today_sales = get_today_sales(today)
  File "C:\Users\pc\loan-app\app.py", line 8337, in get_today_sales
    return db.session.query(
           ~~~~~~~~~~~~~~~~^
        func.coalesce(func.sum(LoanApplication.loan_amount), 0.0)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).filter(
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 1681, in query
    return self._proxied.query(*entities, **kwargs)
           ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 197, in _proxied
    return self.registry()
           ~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 634, in __call__
    key = self.scopefunc()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_sqlalchemy\session.py", line 111, in _app_ctx_id
    return id(app_ctx._get_current_object())  # type: ignore[attr-defined]
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
2025-08-13 17:00:00,332 - ERROR - Job "send_sales_notification_email (trigger: cron[hour='17', minute='0'], next run at: 2025-08-14 17:00:00 CAT)" raised an exception
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\apscheduler\executors\base.py", line 131, in run_job
    retval = job.func(*job.args, **job.kwargs)
  File "C:\Users\pc\loan-app\app.py", line 9197, in send_sales_notification_email
    db.session.rollback()
    ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 1794, in rollback
    return self._proxied.rollback()
           ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 197, in _proxied
    return self.registry()
           ~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 634, in __call__
    key = self.scopefunc()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_sqlalchemy\session.py", line 111, in _app_ctx_id
    return id(app_ctx._get_current_object())  # type: ignore[attr-defined]
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
[2025-08-13 17:18:20,661] INFO in app: ==================================================
[2025-08-13 17:18:20,669] INFO in app: Application logging initialized successfully
[2025-08-13 17:18:20,675] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 17:18:20,677] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 17:18:20,681] INFO in app: System encoding: utf-8
[2025-08-13 17:18:20,686] INFO in app: ==================================================
2025-08-13 17:18:20,985 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 17:18:20,987 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 17:18:20,988 - INFO - Scheduler started
2025-08-13 17:18:21,015 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 17:18:21,015 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 17:18:21,026 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 17:18:21,026 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 17:21:36,616 - INFO - 127.0.0.1 - - [13/Aug/2025 17:21:36] "GET /loans HTTP/1.1" 200 -
2025-08-13 17:21:37,839 - INFO - 127.0.0.1 - - [13/Aug/2025 17:21:37] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-13 17:34:39,476] INFO in app: ==================================================
[2025-08-13 17:34:39,485] INFO in app: Application logging initialized successfully
[2025-08-13 17:34:39,492] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 17:34:39,497] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 17:34:39,499] INFO in app: System encoding: utf-8
[2025-08-13 17:34:39,501] INFO in app: ==================================================
2025-08-13 17:34:39,885 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 17:34:39,888 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 17:34:39,889 - INFO - Scheduler started
2025-08-13 17:34:39,930 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 17:34:39,930 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 17:34:39,945 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 17:34:39,945 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 17:34:47,129 - INFO - 127.0.0.1 - - [13/Aug/2025 17:34:47] "GET /loans HTTP/1.1" 200 -
2025-08-13 17:34:52,594 - INFO - 127.0.0.1 - - [13/Aug/2025 17:34:52] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 17:34:54,992 - INFO - 127.0.0.1 - - [13/Aug/2025 17:34:54] "GET / HTTP/1.1" 200 -
[2025-08-13 17:34:58,524] ERROR in app: Exception on /dashboard/sales [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8098, in sales_dashboard
    return render_template(
        "dashboard/sales_dashboard.html",
    ...<5 lines>...
        notif=notif
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 177, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 17, in block 'content'
    {% include "dashboard/_tabs.html" with context %}
    ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\_tabs.html", line 22, in top-level template code
    href="{{ url_for('sales_by_gender') }}">
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'sales_by_gender'. Did you mean 'dashboard_gender_data' instead?
2025-08-13 17:34:58,524 - ERROR - Exception on /dashboard/sales [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8098, in sales_dashboard
    return render_template(
        "dashboard/sales_dashboard.html",
    ...<5 lines>...
        notif=notif
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 177, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 17, in block 'content'
    {% include "dashboard/_tabs.html" with context %}
    ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\_tabs.html", line 22, in top-level template code
    href="{{ url_for('sales_by_gender') }}">
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'sales_by_gender'. Did you mean 'dashboard_gender_data' instead?
2025-08-13 17:34:58,569 - INFO - 127.0.0.1 - - [13/Aug/2025 17:34:58] "[35m[1mGET /dashboard/sales HTTP/1.1[0m" 500 -
[2025-08-13 17:36:23,229] INFO in app: ==================================================
[2025-08-13 17:36:23,239] INFO in app: Application logging initialized successfully
[2025-08-13 17:36:23,242] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 17:36:23,243] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 17:36:23,245] INFO in app: System encoding: utf-8
[2025-08-13 17:36:23,249] INFO in app: ==================================================
2025-08-13 17:36:23,543 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 17:36:23,545 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 17:36:23,545 - INFO - Scheduler started
2025-08-13 17:36:23,578 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 17:36:23,579 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 17:36:23,590 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 17:36:23,590 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 17:36:26,143 - INFO - 127.0.0.1 - - [13/Aug/2025 17:36:26] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-13 17:36:27,368 - INFO - 127.0.0.1 - - [13/Aug/2025 17:36:27] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-13 17:36:30,659 - INFO - 127.0.0.1 - - [13/Aug/2025 17:36:30] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-13 17:36:34,511] ERROR in app: Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8376, in dashboard_gender_data
    case(
    ~~~~^
        [(((today.month, today.day) <
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        else_=0
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\_elements_constructors.py", line 853, in case
    return Case(*whens, value=value, else_=else_)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 3339, in __init__
    new_whens: Iterable[Any] = coercions._expression_collection_was_a_list(
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        "whens", "case", whens
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 151, in _expression_collection_was_a_list
    raise exc.ArgumentError(
    ...<4 lines>...
    )
sqlalchemy.exc.ArgumentError: The "whens" argument to case(), when referring to a sequence of items, is now passed as a series of positional elements, rather than as a list. 
2025-08-13 17:36:34,511 - ERROR - Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8376, in dashboard_gender_data
    case(
    ~~~~^
        [(((today.month, today.day) <
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        else_=0
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\_elements_constructors.py", line 853, in case
    return Case(*whens, value=value, else_=else_)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 3339, in __init__
    new_whens: Iterable[Any] = coercions._expression_collection_was_a_list(
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        "whens", "case", whens
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 151, in _expression_collection_was_a_list
    raise exc.ArgumentError(
    ...<4 lines>...
    )
sqlalchemy.exc.ArgumentError: The "whens" argument to case(), when referring to a sequence of items, is now passed as a series of positional elements, rather than as a list. 
2025-08-13 17:36:34,559 - INFO - 127.0.0.1 - - [13/Aug/2025 17:36:34] "[35m[1mGET /dashboard-gender-data HTTP/1.1[0m" 500 -
[2025-08-13 17:39:49,692] INFO in app: ==================================================
[2025-08-13 17:39:49,704] INFO in app: Application logging initialized successfully
[2025-08-13 17:39:49,707] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 17:39:49,710] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 17:39:49,713] INFO in app: System encoding: utf-8
[2025-08-13 17:39:49,715] INFO in app: ==================================================
2025-08-13 17:39:50,175 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 17:39:50,177 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 17:39:50,177 - INFO - Scheduler started
2025-08-13 17:39:50,208 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 17:39:50,209 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 17:39:50,219 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 17:39:50,219 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 17:39:54,601 - INFO - 127.0.0.1 - - [13/Aug/2025 17:39:54] "GET /dashboard-gender-data HTTP/1.1" 200 -
2025-08-13 17:39:54,677 - INFO - 127.0.0.1 - - [13/Aug/2025 17:39:54] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-13 17:46:19,774] INFO in app: ==================================================
[2025-08-13 17:46:19,782] INFO in app: Application logging initialized successfully
[2025-08-13 17:46:19,790] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 17:46:19,795] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 17:46:19,797] INFO in app: System encoding: utf-8
[2025-08-13 17:46:19,799] INFO in app: ==================================================
2025-08-13 17:46:20,159 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 17:46:20,161 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 17:46:20,161 - INFO - Scheduler started
2025-08-13 17:46:20,197 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 17:46:20,197 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 17:46:20,209 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 17:46:20,209 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 17:46:27,110 - INFO - 127.0.0.1 - - [13/Aug/2025 17:46:27] "GET /dashboard-gender-data HTTP/1.1" 200 -
2025-08-13 17:46:27,164 - INFO - 127.0.0.1 - - [13/Aug/2025 17:46:27] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-13 17:48:13,304] INFO in app: ==================================================
[2025-08-13 17:48:13,327] INFO in app: Application logging initialized successfully
[2025-08-13 17:48:13,333] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 17:48:13,341] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 17:48:13,343] INFO in app: System encoding: utf-8
[2025-08-13 17:48:13,356] INFO in app: ==================================================
2025-08-13 17:48:13,852 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 17:48:13,854 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 17:48:13,854 - INFO - Scheduler started
2025-08-13 17:48:13,910 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 17:48:13,910 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 17:48:13,927 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 17:48:13,927 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 17:48:17,448 - INFO - 127.0.0.1 - - [13/Aug/2025 17:48:17] "GET /dashboard-gender-data HTTP/1.1" 200 -
2025-08-13 17:48:17,491 - INFO - 127.0.0.1 - - [13/Aug/2025 17:48:17] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 17:48:20,902 - INFO - 127.0.0.1 - - [13/Aug/2025 17:48:20] "GET /dashboard-gender-data HTTP/1.1" 200 -
2025-08-13 17:48:21,215 - INFO - 127.0.0.1 - - [13/Aug/2025 17:48:21] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 17:49:52,837 - INFO - 127.0.0.1 - - [13/Aug/2025 17:49:52] "GET /dashboard-gender-data HTTP/1.1" 200 -
[2025-08-13 17:55:30,855] INFO in app: ==================================================
[2025-08-13 17:55:30,862] INFO in app: Application logging initialized successfully
[2025-08-13 17:55:30,868] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 17:55:30,873] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 17:55:30,877] INFO in app: System encoding: utf-8
[2025-08-13 17:55:30,879] INFO in app: ==================================================
2025-08-13 17:55:31,325 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 17:55:31,326 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 17:55:31,326 - INFO - Scheduler started
2025-08-13 17:55:31,371 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 17:55:31,371 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 17:55:31,388 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 17:55:31,388 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-13 17:56:25,837] ERROR in app: Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8380, in dashboard_gender_data
    age_expr = today.year - func.extract('year', Customer.dob) - case(
                                                                 ~~~~^
        ((today.month, today.day) < (func.extract('month', Customer.dob), func.extract('day', Customer.dob))),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        else_=0
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\_elements_constructors.py", line 853, in case
    return Case(*whens, value=value, else_=else_)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 3356, in __init__
    for (c, r) in new_whens
        ^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\operators.py", line 659, in __getitem__
    return self.operate(getitem, index)
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 1523, in operate
    return op(self.comparator, *other, **kwargs)  # type: ignore[no-any-return]  # noqa: E501
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\operators.py", line 659, in __getitem__
    return self.operate(getitem, index)
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\type_api.py", line 212, in operate
    return op_fn(self.expr, op, *other, **addtl_kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\default_comparator.py", line 243, in _getitem_impl
    _unsupported_impl(expr, op, other, **kw)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\default_comparator.py", line 249, in _unsupported_impl
    raise NotImplementedError(
        "Operator '%s' is not supported on this expression" % op.__name__
    )
NotImplementedError: Operator 'getitem' is not supported on this expression
2025-08-13 17:56:25,837 - ERROR - Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8380, in dashboard_gender_data
    age_expr = today.year - func.extract('year', Customer.dob) - case(
                                                                 ~~~~^
        ((today.month, today.day) < (func.extract('month', Customer.dob), func.extract('day', Customer.dob))),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        else_=0
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\_elements_constructors.py", line 853, in case
    return Case(*whens, value=value, else_=else_)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 3356, in __init__
    for (c, r) in new_whens
        ^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\operators.py", line 659, in __getitem__
    return self.operate(getitem, index)
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 1523, in operate
    return op(self.comparator, *other, **kwargs)  # type: ignore[no-any-return]  # noqa: E501
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\operators.py", line 659, in __getitem__
    return self.operate(getitem, index)
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\type_api.py", line 212, in operate
    return op_fn(self.expr, op, *other, **addtl_kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\default_comparator.py", line 243, in _getitem_impl
    _unsupported_impl(expr, op, other, **kw)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\default_comparator.py", line 249, in _unsupported_impl
    raise NotImplementedError(
        "Operator '%s' is not supported on this expression" % op.__name__
    )
NotImplementedError: Operator 'getitem' is not supported on this expression
2025-08-13 17:56:25,899 - INFO - 127.0.0.1 - - [13/Aug/2025 17:56:25] "[35m[1mGET /dashboard-gender-data HTTP/1.1[0m" 500 -
2025-08-13 17:56:25,965 - INFO - 127.0.0.1 - - [13/Aug/2025 17:56:25] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-13 17:58:40,285] INFO in app: ==================================================
[2025-08-13 17:58:40,295] INFO in app: Application logging initialized successfully
[2025-08-13 17:58:40,298] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 17:58:40,301] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 17:58:40,307] INFO in app: System encoding: utf-8
[2025-08-13 17:58:40,309] INFO in app: ==================================================
2025-08-13 17:58:40,656 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 17:58:40,658 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 17:58:40,658 - INFO - Scheduler started
2025-08-13 17:58:40,692 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 17:58:40,692 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 17:58:40,703 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 17:58:40,704 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-13 17:58:45,300] ERROR in app: Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8383, in dashboard_gender_data
    - case(
      ~~~~^
        [
        ^
    ...<11 lines>...
        else_=0
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\_elements_constructors.py", line 853, in case
    return Case(*whens, value=value, else_=else_)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 3339, in __init__
    new_whens: Iterable[Any] = coercions._expression_collection_was_a_list(
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        "whens", "case", whens
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 151, in _expression_collection_was_a_list
    raise exc.ArgumentError(
    ...<4 lines>...
    )
sqlalchemy.exc.ArgumentError: The "whens" argument to case(), when referring to a sequence of items, is now passed as a series of positional elements, rather than as a list. 
2025-08-13 17:58:45,300 - ERROR - Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8383, in dashboard_gender_data
    - case(
      ~~~~^
        [
        ^
    ...<11 lines>...
        else_=0
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\_elements_constructors.py", line 853, in case
    return Case(*whens, value=value, else_=else_)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 3339, in __init__
    new_whens: Iterable[Any] = coercions._expression_collection_was_a_list(
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        "whens", "case", whens
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 151, in _expression_collection_was_a_list
    raise exc.ArgumentError(
    ...<4 lines>...
    )
sqlalchemy.exc.ArgumentError: The "whens" argument to case(), when referring to a sequence of items, is now passed as a series of positional elements, rather than as a list. 
2025-08-13 17:58:45,325 - INFO - 127.0.0.1 - - [13/Aug/2025 17:58:45] "[35m[1mGET /dashboard-gender-data HTTP/1.1[0m" 500 -
2025-08-13 17:58:45,376 - INFO - 127.0.0.1 - - [13/Aug/2025 17:58:45] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-13 18:00:15,525] INFO in app: ==================================================
[2025-08-13 18:00:15,532] INFO in app: Application logging initialized successfully
[2025-08-13 18:00:15,543] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:00:15,545] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:00:15,547] INFO in app: System encoding: utf-8
[2025-08-13 18:00:15,549] INFO in app: ==================================================
2025-08-13 18:00:16,078 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 18:00:16,080 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 18:00:16,080 - INFO - Scheduler started
2025-08-13 18:00:16,110 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 18:00:16,111 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 18:00:16,123 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 18:00:16,123 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 18:00:21,081 - INFO - 127.0.0.1 - - [13/Aug/2025 18:00:21] "GET /dashboard-gender-data HTTP/1.1" 200 -
2025-08-13 18:00:21,126 - INFO - 127.0.0.1 - - [13/Aug/2025 18:00:21] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-13 18:02:59,361] INFO in app: ==================================================
[2025-08-13 18:02:59,371] INFO in app: Application logging initialized successfully
[2025-08-13 18:02:59,374] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:02:59,375] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:02:59,380] INFO in app: System encoding: utf-8
[2025-08-13 18:02:59,383] INFO in app: ==================================================
2025-08-13 18:02:59,667 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 18:02:59,669 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 18:02:59,669 - INFO - Scheduler started
2025-08-13 18:02:59,699 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 18:02:59,700 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 18:02:59,708 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 18:02:59,708 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 18:03:04,002 - INFO - 127.0.0.1 - - [13/Aug/2025 18:03:04] "GET /dashboard-gender-data HTTP/1.1" 200 -
2025-08-13 18:03:04,046 - INFO - 127.0.0.1 - - [13/Aug/2025 18:03:04] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 18:03:06,296 - INFO - 127.0.0.1 - - [13/Aug/2025 18:03:06] "GET /dashboard-gender-data HTTP/1.1" 200 -
2025-08-13 18:03:06,619 - INFO - 127.0.0.1 - - [13/Aug/2025 18:03:06] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 18:03:07,462 - INFO - 127.0.0.1 - - [13/Aug/2025 18:03:07] "GET /dashboard-gender-data HTTP/1.1" 200 -
2025-08-13 18:03:07,508 - INFO - 127.0.0.1 - - [13/Aug/2025 18:03:07] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-13 18:04:38,787] INFO in app: ==================================================
[2025-08-13 18:04:38,813] INFO in app: Application logging initialized successfully
[2025-08-13 18:04:38,820] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:04:38,838] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:04:38,853] INFO in app: System encoding: utf-8
[2025-08-13 18:04:38,882] INFO in app: ==================================================
2025-08-13 18:04:39,248 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 18:04:39,251 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 18:04:39,252 - INFO - Scheduler started
2025-08-13 18:04:39,282 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 18:04:39,282 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 18:04:39,292 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 18:04:39,292 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-13 18:04:48,353] INFO in app: ==================================================
[2025-08-13 18:04:48,359] INFO in app: Application logging initialized successfully
[2025-08-13 18:04:48,362] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:04:48,367] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:04:48,371] INFO in app: System encoding: utf-8
[2025-08-13 18:04:48,373] INFO in app: ==================================================
2025-08-13 18:04:48,713 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 18:04:48,714 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 18:04:48,715 - INFO - Scheduler started
2025-08-13 18:04:48,745 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 18:04:48,745 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 18:04:48,754 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 18:04:48,754 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 18:04:52,132 - INFO - 127.0.0.1 - - [13/Aug/2025 18:04:52] "GET /dashboard-gender-data HTTP/1.1" 200 -
2025-08-13 18:04:52,173 - INFO - 127.0.0.1 - - [13/Aug/2025 18:04:52] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 18:04:54,933 - INFO - 127.0.0.1 - - [13/Aug/2025 18:04:54] "GET /dashboard-gender-data HTTP/1.1" 200 -
2025-08-13 18:04:55,236 - INFO - 127.0.0.1 - - [13/Aug/2025 18:04:55] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 18:04:55,613 - INFO - 127.0.0.1 - - [13/Aug/2025 18:04:55] "GET /dashboard-gender-data HTTP/1.1" 200 -
2025-08-13 18:04:55,660 - INFO - 127.0.0.1 - - [13/Aug/2025 18:04:55] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 18:04:55,872 - INFO - 127.0.0.1 - - [13/Aug/2025 18:04:55] "GET /dashboard-gender-data HTTP/1.1" 200 -
2025-08-13 18:04:56,088 - INFO - 127.0.0.1 - - [13/Aug/2025 18:04:56] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-13 18:07:19,400] INFO in app: ==================================================
[2025-08-13 18:07:19,416] INFO in app: Application logging initialized successfully
[2025-08-13 18:07:19,420] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:07:19,425] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:07:19,428] INFO in app: System encoding: utf-8
[2025-08-13 18:07:19,431] INFO in app: ==================================================
2025-08-13 18:07:19,823 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 18:07:19,825 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 18:07:19,825 - INFO - Scheduler started
2025-08-13 18:07:19,857 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 18:07:19,857 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 18:07:19,871 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 18:07:19,871 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 18:07:24,341 - INFO - 127.0.0.1 - - [13/Aug/2025 18:07:24] "GET /dashboard-gender-data HTTP/1.1" 200 -
2025-08-13 18:07:24,382 - INFO - 127.0.0.1 - - [13/Aug/2025 18:07:24] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-13 18:07:55,429] INFO in app: ==================================================
[2025-08-13 18:07:55,439] INFO in app: Application logging initialized successfully
[2025-08-13 18:07:55,442] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:07:55,444] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:07:55,449] INFO in app: System encoding: utf-8
[2025-08-13 18:07:55,453] INFO in app: ==================================================
2025-08-13 18:07:55,771 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 18:07:55,773 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 18:07:55,773 - INFO - Scheduler started
2025-08-13 18:07:55,809 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 18:07:55,809 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 18:07:55,820 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 18:07:55,820 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 18:08:00,454 - INFO - 127.0.0.1 - - [13/Aug/2025 18:08:00] "GET /dashboard-gender-data HTTP/1.1" 200 -
2025-08-13 18:08:00,496 - INFO - 127.0.0.1 - - [13/Aug/2025 18:08:00] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-13 18:12:55,867] INFO in app: ==================================================
[2025-08-13 18:12:55,873] INFO in app: Application logging initialized successfully
[2025-08-13 18:12:55,876] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:12:55,878] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:12:55,881] INFO in app: System encoding: utf-8
[2025-08-13 18:12:55,887] INFO in app: ==================================================
2025-08-13 18:12:56,182 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 18:12:56,184 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 18:12:56,184 - INFO - Scheduler started
2025-08-13 18:12:56,216 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 18:12:56,217 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 18:12:56,226 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 18:12:56,226 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 18:13:05,296 - INFO - 127.0.0.1 - - [13/Aug/2025 18:13:05] "GET /dashboard-gender-data HTTP/1.1" 200 -
2025-08-13 18:13:05,346 - INFO - 127.0.0.1 - - [13/Aug/2025 18:13:05] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 18:13:12,015 - INFO - 127.0.0.1 - - [13/Aug/2025 18:13:12] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-13 18:13:12,441 - INFO - 127.0.0.1 - - [13/Aug/2025 18:13:12] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-13 18:13:13,100 - INFO - 127.0.0.1 - - [13/Aug/2025 18:13:13] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 18:13:14,783 - INFO - 127.0.0.1 - - [13/Aug/2025 18:13:14] "GET /dashboard-gender-data HTTP/1.1" 200 -
[2025-08-13 18:18:38,694] INFO in app: ==================================================
[2025-08-13 18:18:38,704] INFO in app: Application logging initialized successfully
[2025-08-13 18:18:38,706] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:18:38,707] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:18:38,709] INFO in app: System encoding: utf-8
[2025-08-13 18:18:38,715] INFO in app: ==================================================
2025-08-13 18:18:39,002 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 18:18:39,003 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 18:18:39,003 - INFO - Scheduler started
2025-08-13 18:18:39,037 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 18:18:39,038 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 18:18:39,051 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 18:18:39,051 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 18:18:47,608 - INFO - 127.0.0.1 - - [13/Aug/2025 18:18:47] "GET /dashboard-gender-data HTTP/1.1" 200 -
2025-08-13 18:18:47,658 - INFO - 127.0.0.1 - - [13/Aug/2025 18:18:47] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 18:18:49,668 - INFO - 127.0.0.1 - - [13/Aug/2025 18:18:49] "GET /dashboard-gender-data HTTP/1.1" 200 -
2025-08-13 18:18:49,974 - INFO - 127.0.0.1 - - [13/Aug/2025 18:18:49] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 18:18:53,908 - INFO - 127.0.0.1 - - [13/Aug/2025 18:18:53] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-13 18:18:57,704 - INFO - 127.0.0.1 - - [13/Aug/2025 18:18:57] "GET /dashboard/analytics HTTP/1.1" 200 -
2025-08-13 18:18:58,024 - INFO - 127.0.0.1 - - [13/Aug/2025 18:18:58] "GET /api/loans-by-region HTTP/1.1" 200 -
2025-08-13 18:18:58,328 - INFO - 127.0.0.1 - - [13/Aug/2025 18:18:58] "GET /api/loans-by-district HTTP/1.1" 200 -
2025-08-13 18:18:58,334 - INFO - 127.0.0.1 - - [13/Aug/2025 18:18:58] "GET /api/average-ticket-size HTTP/1.1" 200 -
2025-08-13 18:19:01,950 - INFO - 127.0.0.1 - - [13/Aug/2025 18:19:01] "GET /dashboard-gender-data HTTP/1.1" 200 -
2025-08-13 18:19:05,442 - INFO - 127.0.0.1 - - [13/Aug/2025 18:19:05] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-13 18:19:05,486 - INFO - 127.0.0.1 - - [13/Aug/2025 18:19:05] "GET /notifications/sales-summary HTTP/1.1" 200 -
[2025-08-13 18:25:03,792] INFO in app: ==================================================
[2025-08-13 18:25:03,800] INFO in app: Application logging initialized successfully
[2025-08-13 18:25:03,802] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:25:03,807] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:25:03,809] INFO in app: System encoding: utf-8
[2025-08-13 18:25:03,813] INFO in app: ==================================================
2025-08-13 18:25:04,242 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 18:25:04,244 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 18:25:04,244 - INFO - Scheduler started
2025-08-13 18:25:04,301 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 18:25:04,302 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 18:25:04,314 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 18:25:04,314 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 18:25:08,948 - INFO - 127.0.0.1 - - [13/Aug/2025 18:25:08] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-13 18:25:11,433 - INFO - 127.0.0.1 - - [13/Aug/2025 18:25:11] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-13 18:25:11,997 - INFO - 127.0.0.1 - - [13/Aug/2025 18:25:11] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 18:25:13,647 - INFO - 127.0.0.1 - - [13/Aug/2025 18:25:13] "GET /dashboard-gender-data HTTP/1.1" 200 -
[2025-08-13 18:36:35,489] INFO in app: ==================================================
[2025-08-13 18:36:35,495] INFO in app: Application logging initialized successfully
[2025-08-13 18:36:35,497] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:36:35,500] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:36:35,503] INFO in app: System encoding: utf-8
[2025-08-13 18:36:35,507] INFO in app: ==================================================
2025-08-13 18:36:35,762 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 18:36:35,764 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 18:36:35,764 - INFO - Scheduler started
2025-08-13 18:36:35,792 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 18:36:35,792 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 18:36:35,805 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 18:36:35,805 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 18:36:41,848 - INFO - 127.0.0.1 - - [13/Aug/2025 18:36:41] "GET /dashboard-gender-data HTTP/1.1" 200 -
2025-08-13 18:36:41,896 - INFO - 127.0.0.1 - - [13/Aug/2025 18:36:41] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 18:36:44,106 - INFO - 127.0.0.1 - - [13/Aug/2025 18:36:44] "GET /dashboard-gender-data HTTP/1.1" 200 -
2025-08-13 18:36:44,428 - INFO - 127.0.0.1 - - [13/Aug/2025 18:36:44] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-13 18:36:49,344] ERROR in app: Exception on /dashboard/sales [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8098, in sales_dashboard
    return render_template(
        "dashboard/sales_dashboard.html",
    ...<5 lines>...
        notif=notif
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 177, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 17, in block 'content'
    {% include "dashboard/_tabs.html" with context %}
    ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\_tabs.html", line 22, in top-level template code
    href="{{ url_for('gender_dashboard') }}">
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'gender_dashboard'. Did you mean 'team_leader_dashboard' instead?
2025-08-13 18:36:49,344 - ERROR - Exception on /dashboard/sales [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8098, in sales_dashboard
    return render_template(
        "dashboard/sales_dashboard.html",
    ...<5 lines>...
        notif=notif
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 177, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 17, in block 'content'
    {% include "dashboard/_tabs.html" with context %}
    ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\_tabs.html", line 22, in top-level template code
    href="{{ url_for('gender_dashboard') }}">
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'gender_dashboard'. Did you mean 'team_leader_dashboard' instead?
2025-08-13 18:36:49,378 - INFO - 127.0.0.1 - - [13/Aug/2025 18:36:49] "[35m[1mGET /dashboard/sales HTTP/1.1[0m" 500 -
2025-08-13 18:36:49,430 - INFO - 127.0.0.1 - - [13/Aug/2025 18:36:49] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-13 18:37:31,194] INFO in app: ==================================================
[2025-08-13 18:37:31,200] INFO in app: Application logging initialized successfully
[2025-08-13 18:37:31,202] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:37:31,204] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:37:31,206] INFO in app: System encoding: utf-8
[2025-08-13 18:37:31,209] INFO in app: ==================================================
2025-08-13 18:37:31,462 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 18:37:31,463 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 18:37:31,464 - INFO - Scheduler started
2025-08-13 18:37:31,489 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 18:37:31,489 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 18:37:31,501 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 18:37:31,501 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 18:37:34,862 - INFO - 127.0.0.1 - - [13/Aug/2025 18:37:34] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-13 18:37:35,236 - INFO - 127.0.0.1 - - [13/Aug/2025 18:37:35] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-13 18:37:36,092 - INFO - 127.0.0.1 - - [13/Aug/2025 18:37:36] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-13 18:37:38,688] ERROR in app: Exception on /sales-by-gender [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8374, in gender_dashboard
    return render_template("sales_by_gender.html", active_tab='gender')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 65, in get_source
    return self._get_source_fast(environment, template)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 99, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: sales_by_gender.html
2025-08-13 18:37:38,688 - ERROR - Exception on /sales-by-gender [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8374, in gender_dashboard
    return render_template("sales_by_gender.html", active_tab='gender')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 65, in get_source
    return self._get_source_fast(environment, template)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 99, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: sales_by_gender.html
2025-08-13 18:37:38,714 - INFO - 127.0.0.1 - - [13/Aug/2025 18:37:38] "[35m[1mGET /sales-by-gender HTTP/1.1[0m" 500 -
[2025-08-13 18:38:26,782] INFO in app: ==================================================
[2025-08-13 18:38:26,788] INFO in app: Application logging initialized successfully
[2025-08-13 18:38:26,790] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:38:26,792] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:38:26,794] INFO in app: System encoding: utf-8
[2025-08-13 18:38:26,798] INFO in app: ==================================================
2025-08-13 18:38:27,067 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 18:38:27,069 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 18:38:27,069 - INFO - Scheduler started
2025-08-13 18:38:27,092 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 18:38:27,092 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 18:38:27,102 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 18:38:27,102 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 18:38:29,343 - INFO - 127.0.0.1 - - [13/Aug/2025 18:38:29] "GET /sales-by-gender HTTP/1.1" 200 -
2025-08-13 18:38:30,593 - INFO - 127.0.0.1 - - [13/Aug/2025 18:38:30] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 18:38:50,639 - INFO - 127.0.0.1 - - [13/Aug/2025 18:38:50] "GET /sales-by-gender?start_date=2025-04-01&end_date=2025-08-30&metric=total_sales HTTP/1.1" 200 -
2025-08-13 18:39:10,456 - INFO - 127.0.0.1 - - [13/Aug/2025 18:39:10] "GET /sales-by-gender?start_date=2025-05-01&end_date=2025-08-31&metric=total_sales HTTP/1.1" 200 -
2025-08-13 18:39:54,759 - INFO - 127.0.0.1 - - [13/Aug/2025 18:39:54] "GET /sales-by-gender?start_date=2025-05-01&end_date=2025-08-31&metric=total_sales HTTP/1.1" 200 -
2025-08-13 18:39:56,017 - INFO - 127.0.0.1 - - [13/Aug/2025 18:39:56] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-13 18:40:05,639] INFO in app: ==================================================
[2025-08-13 18:40:05,646] INFO in app: Application logging initialized successfully
[2025-08-13 18:40:05,648] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:40:05,650] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:40:05,652] INFO in app: System encoding: utf-8
[2025-08-13 18:40:05,655] INFO in app: ==================================================
2025-08-13 18:40:05,920 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 18:40:05,922 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 18:40:05,922 - INFO - Scheduler started
2025-08-13 18:40:05,950 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 18:40:05,950 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 18:40:05,966 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 18:40:05,966 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 18:40:11,195 - INFO - 127.0.0.1 - - [13/Aug/2025 18:40:11] "GET /sales-by-gender?start_date=2025-05-01&end_date=2025-08-31&metric=total_sales HTTP/1.1" 200 -
2025-08-13 18:40:11,678 - INFO - 127.0.0.1 - - [13/Aug/2025 18:40:11] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-13 18:41:35,756] INFO in app: ==================================================
[2025-08-13 18:41:35,764] INFO in app: Application logging initialized successfully
[2025-08-13 18:41:35,767] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:41:35,769] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:41:35,772] INFO in app: System encoding: utf-8
[2025-08-13 18:41:35,776] INFO in app: ==================================================
2025-08-13 18:41:36,158 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 18:41:36,160 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 18:41:36,160 - INFO - Scheduler started
2025-08-13 18:41:36,198 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 18:41:36,199 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 18:41:36,210 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 18:41:36,210 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 18:41:40,689 - INFO - 127.0.0.1 - - [13/Aug/2025 18:41:40] "GET /sales-by-gender?start_date=2025-05-01&end_date=2025-08-31&metric=total_sales HTTP/1.1" 200 -
2025-08-13 18:41:42,059 - INFO - 127.0.0.1 - - [13/Aug/2025 18:41:42] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 18:41:55,699 - INFO - 127.0.0.1 - - [13/Aug/2025 18:41:55] "GET /sales-by-gender?start_date=2025-03-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
2025-08-13 18:41:59,774 - INFO - 127.0.0.1 - - [13/Aug/2025 18:41:59] "GET /sales-by-gender?start_date=&end_date=&metric=total_sales HTTP/1.1" 200 -
[2025-08-13 18:48:56,236] INFO in app: ==================================================
[2025-08-13 18:48:56,244] INFO in app: Application logging initialized successfully
[2025-08-13 18:48:56,246] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:48:56,247] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:48:56,249] INFO in app: System encoding: utf-8
[2025-08-13 18:48:56,253] INFO in app: ==================================================
2025-08-13 18:48:56,537 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 18:48:56,538 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 18:48:56,539 - INFO - Scheduler started
2025-08-13 18:48:56,568 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 18:48:56,568 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 18:48:56,578 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 18:48:56,578 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 18:49:01,433 - INFO - 127.0.0.1 - - [13/Aug/2025 18:49:01] "GET /sales-by-gender?start_date=&end_date=&metric=total_sales HTTP/1.1" 200 -
2025-08-13 18:49:02,678 - INFO - 127.0.0.1 - - [13/Aug/2025 18:49:02] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 18:49:38,523 - INFO - 127.0.0.1 - - [13/Aug/2025 18:49:38] "GET /sales-by-gender?start_date=2024-05-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
[2025-08-13 18:51:59,474] INFO in app: ==================================================
[2025-08-13 18:51:59,483] INFO in app: Application logging initialized successfully
[2025-08-13 18:51:59,486] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:51:59,489] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:51:59,497] INFO in app: System encoding: utf-8
[2025-08-13 18:51:59,499] INFO in app: ==================================================
2025-08-13 18:51:59,904 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 18:51:59,908 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 18:51:59,908 - INFO - Scheduler started
2025-08-13 18:51:59,955 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 18:51:59,955 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 18:51:59,972 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 18:51:59,972 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 18:52:05,788 - INFO - 127.0.0.1 - - [13/Aug/2025 18:52:05] "GET /sales-by-gender?start_date=2024-05-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
2025-08-13 18:52:06,781 - INFO - 127.0.0.1 - - [13/Aug/2025 18:52:06] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 18:52:21,548 - INFO - 127.0.0.1 - - [13/Aug/2025 18:52:21] "GET /sales-by-gender?start_date=2025-02-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
[2025-08-13 18:55:06,829] INFO in app: ==================================================
[2025-08-13 18:55:06,836] INFO in app: Application logging initialized successfully
[2025-08-13 18:55:06,838] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:55:06,840] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:55:06,841] INFO in app: System encoding: utf-8
[2025-08-13 18:55:06,848] INFO in app: ==================================================
2025-08-13 18:55:07,137 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 18:55:07,138 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 18:55:07,138 - INFO - Scheduler started
2025-08-13 18:55:07,165 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 18:55:07,165 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 18:55:07,176 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 18:55:07,176 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-13 18:55:13,947] ERROR in app: Exception on /sales-by-gender [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8374, in gender_dashboard
    return render_template("sales_by_gender.html", active_tab='gender')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 65, in get_source
    return self._get_source_fast(environment, template)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 99, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: sales_by_gender.html
2025-08-13 18:55:13,947 - ERROR - Exception on /sales-by-gender [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8374, in gender_dashboard
    return render_template("sales_by_gender.html", active_tab='gender')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 65, in get_source
    return self._get_source_fast(environment, template)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 99, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: sales_by_gender.html
2025-08-13 18:55:13,965 - INFO - 127.0.0.1 - - [13/Aug/2025 18:55:13] "[35m[1mGET /sales-by-gender?start_date=2025-02-01&end_date=2025-08-13&metric=total_sales HTTP/1.1[0m" 500 -
2025-08-13 18:55:14,026 - INFO - 127.0.0.1 - - [13/Aug/2025 18:55:14] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-13 18:55:48,093] INFO in app: ==================================================
[2025-08-13 18:55:48,099] INFO in app: Application logging initialized successfully
[2025-08-13 18:55:48,103] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:55:48,105] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:55:48,107] INFO in app: System encoding: utf-8
[2025-08-13 18:55:48,111] INFO in app: ==================================================
2025-08-13 18:55:48,400 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 18:55:48,402 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 18:55:48,402 - INFO - Scheduler started
2025-08-13 18:55:48,432 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 18:55:48,432 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 18:55:48,442 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 18:55:48,442 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 18:55:50,778 - INFO - 127.0.0.1 - - [13/Aug/2025 18:55:50] "GET /sales-by-gender?start_date=2025-02-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
2025-08-13 18:55:51,547 - INFO - 127.0.0.1 - - [13/Aug/2025 18:55:51] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 18:56:27,773 - INFO - 127.0.0.1 - - [13/Aug/2025 18:56:27] "GET /sales-by-gender?start_date=2024-06-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
[2025-08-13 18:58:12,524] INFO in app: ==================================================
[2025-08-13 18:58:12,530] INFO in app: Application logging initialized successfully
[2025-08-13 18:58:12,534] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:58:12,539] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:58:12,542] INFO in app: System encoding: utf-8
[2025-08-13 18:58:12,544] INFO in app: ==================================================
2025-08-13 18:58:12,840 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 18:58:12,842 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 18:58:12,842 - INFO - Scheduler started
2025-08-13 18:58:12,876 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 18:58:12,876 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 18:58:12,889 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 18:58:12,889 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 18:58:19,420 - INFO - 127.0.0.1 - - [13/Aug/2025 18:58:19] "GET /sales-by-gender?start_date=2024-06-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
2025-08-13 18:58:20,173 - INFO - 127.0.0.1 - - [13/Aug/2025 18:58:20] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 18:58:45,683 - INFO - 127.0.0.1 - - [13/Aug/2025 18:58:45] "GET /sales-by-gender?start_date=2023-01-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
[2025-08-13 19:05:10,452] INFO in app: ==================================================
[2025-08-13 19:05:10,466] INFO in app: Application logging initialized successfully
[2025-08-13 19:05:10,469] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 19:05:10,470] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 19:05:10,472] INFO in app: System encoding: utf-8
[2025-08-13 19:05:10,481] INFO in app: ==================================================
2025-08-13 19:05:10,835 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 19:05:10,837 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 19:05:10,837 - INFO - Scheduler started
2025-08-13 19:05:10,870 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 19:05:10,870 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 19:05:10,882 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 19:05:10,882 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 19:05:26,492 - INFO - 127.0.0.1 - - [13/Aug/2025 19:05:26] "GET /sales-by-gender?start_date=2023-01-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
2025-08-13 19:05:27,646 - INFO - 127.0.0.1 - - [13/Aug/2025 19:05:27] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 19:05:42,966 - INFO - 127.0.0.1 - - [13/Aug/2025 19:05:42] "GET /sales-by-gender?start_date=2024-02-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
2025-08-13 19:06:30,837 - INFO - 127.0.0.1 - - [13/Aug/2025 19:06:30] "GET /sales-by-gender?start_date=2022-01-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
[2025-08-13 19:13:16,746] INFO in app: ==================================================
[2025-08-13 19:13:16,758] INFO in app: Application logging initialized successfully
[2025-08-13 19:13:16,775] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 19:13:16,849] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 19:13:16,852] INFO in app: System encoding: utf-8
[2025-08-13 19:13:16,902] INFO in app: ==================================================
2025-08-13 19:13:17,913 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 19:13:17,965 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 19:13:17,965 - INFO - Scheduler started
2025-08-13 19:13:18,186 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 19:13:18,186 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 19:13:18,394 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 19:13:18,394 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 19:14:25,281 - INFO - 127.0.0.1 - - [13/Aug/2025 19:14:25] "GET /sales-by-gender?start_date=2022-01-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
2025-08-13 19:14:26,588 - INFO - 127.0.0.1 - - [13/Aug/2025 19:14:26] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 19:14:45,830 - INFO - 127.0.0.1 - - [13/Aug/2025 19:14:45] "GET /sales-by-gender?start_date=2021-01-13&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
[2025-08-13 19:16:35,949] INFO in app: ==================================================
[2025-08-13 19:16:35,956] INFO in app: Application logging initialized successfully
[2025-08-13 19:16:35,958] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 19:16:35,969] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 19:16:35,971] INFO in app: System encoding: utf-8
[2025-08-13 19:16:35,972] INFO in app: ==================================================
2025-08-13 19:16:36,303 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 19:16:36,305 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 19:16:36,305 - INFO - Scheduler started
2025-08-13 19:16:36,338 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 19:16:36,338 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 19:16:36,352 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 19:16:36,352 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-13 19:16:53,879] ERROR in app: Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8387, in dashboard_gender_data
    case(
    ~~~~^
        [
        ^
    ...<9 lines>...
        else_=0
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\_elements_constructors.py", line 853, in case
    return Case(*whens, value=value, else_=else_)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 3339, in __init__
    new_whens: Iterable[Any] = coercions._expression_collection_was_a_list(
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        "whens", "case", whens
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 151, in _expression_collection_was_a_list
    raise exc.ArgumentError(
    ...<4 lines>...
    )
sqlalchemy.exc.ArgumentError: The "whens" argument to case(), when referring to a sequence of items, is now passed as a series of positional elements, rather than as a list. 
2025-08-13 19:16:53,879 - ERROR - Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8387, in dashboard_gender_data
    case(
    ~~~~^
        [
        ^
    ...<9 lines>...
        else_=0
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\_elements_constructors.py", line 853, in case
    return Case(*whens, value=value, else_=else_)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 3339, in __init__
    new_whens: Iterable[Any] = coercions._expression_collection_was_a_list(
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        "whens", "case", whens
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 151, in _expression_collection_was_a_list
    raise exc.ArgumentError(
    ...<4 lines>...
    )
sqlalchemy.exc.ArgumentError: The "whens" argument to case(), when referring to a sequence of items, is now passed as a series of positional elements, rather than as a list. 
2025-08-13 19:16:53,915 - INFO - 127.0.0.1 - - [13/Aug/2025 19:16:53] "[35m[1mGET /dashboard-gender-data?start_date=2023-01-01&end_date=2023-12-31 HTTP/1.1[0m" 500 -
2025-08-13 19:20:57,166 - INFO - 127.0.0.1 - - [13/Aug/2025 19:20:57] "GET /sales-by-gender?start_date=2021-01-13&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
2025-08-13 19:20:58,022 - INFO - 127.0.0.1 - - [13/Aug/2025 19:20:58] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 19:21:06,583 - INFO - 127.0.0.1 - - [13/Aug/2025 19:21:06] "GET / HTTP/1.1" 200 -
2025-08-13 19:21:10,571 - INFO - 127.0.0.1 - - [13/Aug/2025 19:21:10] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-13 19:21:10,613 - INFO - 127.0.0.1 - - [13/Aug/2025 19:21:10] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-13 19:21:12,677 - INFO - 127.0.0.1 - - [13/Aug/2025 19:21:12] "GET /sales-by-gender HTTP/1.1" 200 -
2025-08-13 19:21:28,459 - INFO - 127.0.0.1 - - [13/Aug/2025 19:21:28] "GET /sales-by-gender?start_date=2021-01-01&end_date=2025-08-13&metric=sales_count HTTP/1.1" 200 -
2025-08-13 19:21:45,459 - INFO - 127.0.0.1 - - [13/Aug/2025 19:21:45] "GET /sales-by-gender?start_date=2025-04-13&end_date=2025-08-13&metric=sales_count HTTP/1.1" 200 -
[2025-08-13 19:23:27,478] INFO in app: ==================================================
[2025-08-13 19:23:27,486] INFO in app: Application logging initialized successfully
[2025-08-13 19:23:27,490] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 19:23:27,495] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 19:23:27,501] INFO in app: System encoding: utf-8
[2025-08-13 19:23:27,506] INFO in app: ==================================================
2025-08-13 19:23:28,119 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 19:23:28,122 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 19:23:28,122 - INFO - Scheduler started
2025-08-13 19:23:28,211 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 19:23:28,212 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 19:23:28,252 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 19:23:28,252 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 19:23:32,129 - INFO - 127.0.0.1 - - [13/Aug/2025 19:23:32] "GET /sales-by-gender?start_date=2025-04-13&end_date=2025-08-13&metric=sales_count HTTP/1.1" 200 -
2025-08-13 19:23:32,935 - INFO - 127.0.0.1 - - [13/Aug/2025 19:23:32] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 19:23:48,415 - INFO - 127.0.0.1 - - [13/Aug/2025 19:23:48] "GET /sales-by-gender?start_date=2025-05-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
[2025-08-13 19:28:14,215] INFO in app: ==================================================
[2025-08-13 19:28:14,221] INFO in app: Application logging initialized successfully
[2025-08-13 19:28:14,225] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 19:28:14,227] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 19:28:14,232] INFO in app: System encoding: utf-8
[2025-08-13 19:28:14,233] INFO in app: ==================================================
2025-08-13 19:28:14,536 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 19:28:14,538 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 19:28:14,538 - INFO - Scheduler started
2025-08-13 19:28:14,570 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 19:28:14,570 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 19:28:14,581 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 19:28:14,582 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 19:29:55,469 - INFO - 127.0.0.1 - - [13/Aug/2025 19:29:55] "GET /sales-by-gender?start_date=2025-05-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
2025-08-13 19:29:56,198 - INFO - 127.0.0.1 - - [13/Aug/2025 19:29:56] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 19:30:10,297 - INFO - 127.0.0.1 - - [13/Aug/2025 19:30:10] "GET /sales-by-gender?start_date=2022-01-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
[2025-08-13 19:31:31,849] INFO in app: ==================================================
[2025-08-13 19:31:31,860] INFO in app: Application logging initialized successfully
[2025-08-13 19:31:31,863] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 19:31:31,865] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 19:31:31,868] INFO in app: System encoding: utf-8
[2025-08-13 19:31:31,869] INFO in app: ==================================================
2025-08-13 19:31:32,317 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 19:31:32,318 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 19:31:32,318 - INFO - Scheduler started
2025-08-13 19:31:32,354 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 19:31:32,354 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 19:31:32,368 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 19:31:32,368 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 19:31:39,080 - INFO - 127.0.0.1 - - [13/Aug/2025 19:31:39] "GET /sales-by-gender?start_date=2022-01-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
2025-08-13 19:31:45,300 - INFO - 127.0.0.1 - - [13/Aug/2025 19:31:45] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 19:32:19,382 - INFO - 127.0.0.1 - - [13/Aug/2025 19:32:19] "GET /sales-by-gender?start_date=2023-01-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
[2025-08-13 19:40:34,850] INFO in app: ==================================================
[2025-08-13 19:40:34,863] INFO in app: Application logging initialized successfully
[2025-08-13 19:40:34,866] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 19:40:34,871] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 19:40:34,877] INFO in app: System encoding: utf-8
[2025-08-13 19:40:34,882] INFO in app: ==================================================
2025-08-13 19:40:35,362 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 19:40:35,364 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 19:40:35,364 - INFO - Scheduler started
2025-08-13 19:40:35,419 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 19:40:35,420 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 19:40:35,433 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 19:40:35,434 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 19:40:39,442 - INFO - 127.0.0.1 - - [13/Aug/2025 19:40:39] "GET /sales-by-gender?start_date=2023-01-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
2025-08-13 19:40:40,104 - INFO - 127.0.0.1 - - [13/Aug/2025 19:40:40] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 19:40:54,602 - INFO - 127.0.0.1 - - [13/Aug/2025 19:40:54] "GET /sales-by-gender?start_date=2025-01-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
2025-08-13 19:41:32,152 - INFO - 127.0.0.1 - - [13/Aug/2025 19:41:32] "GET /dashboard_gender_data HTTP/1.1" 200 -
[2025-08-13 19:47:07,555] INFO in app: ==================================================
[2025-08-13 19:47:07,566] INFO in app: Application logging initialized successfully
[2025-08-13 19:47:07,568] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 19:47:07,570] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 19:47:07,576] INFO in app: System encoding: utf-8
[2025-08-13 19:47:07,582] INFO in app: ==================================================
2025-08-13 19:47:07,950 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 19:47:07,951 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 19:47:07,952 - INFO - Scheduler started
2025-08-13 19:47:07,999 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 19:47:08,000 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 19:47:08,020 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 19:47:08,020 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 19:47:12,586 - INFO - 127.0.0.1 - - [13/Aug/2025 19:47:12] "GET /dashboard_gender_data HTTP/1.1" 200 -
2025-08-13 19:47:12,648 - INFO - 127.0.0.1 - - [13/Aug/2025 19:47:12] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 19:47:17,100 - INFO - 127.0.0.1 - - [13/Aug/2025 19:47:17] "GET /sales-by-gender?start_date=2025-01-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
2025-08-13 19:47:18,316 - INFO - 127.0.0.1 - - [13/Aug/2025 19:47:18] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 19:47:30,563 - INFO - 127.0.0.1 - - [13/Aug/2025 19:47:30] "GET /sales-by-gender?start_date=2025-01-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
[2025-08-13 19:50:06,416] INFO in app: ==================================================
[2025-08-13 19:50:06,426] INFO in app: Application logging initialized successfully
[2025-08-13 19:50:06,432] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 19:50:06,440] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 19:50:06,443] INFO in app: System encoding: utf-8
[2025-08-13 19:50:06,445] INFO in app: ==================================================
2025-08-13 19:50:06,906 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 19:50:06,908 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 19:50:06,908 - INFO - Scheduler started
2025-08-13 19:50:06,960 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 19:50:06,961 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 19:50:06,975 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 19:50:06,975 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 19:50:12,258 - INFO - 127.0.0.1 - - [13/Aug/2025 19:50:12] "GET /sales-by-gender?start_date=2025-01-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
2025-08-13 19:50:13,288 - INFO - 127.0.0.1 - - [13/Aug/2025 19:50:13] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 19:50:22,473 - INFO - 127.0.0.1 - - [13/Aug/2025 19:50:22] "GET /sales-by-gender?start_date=2025-07-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
[2025-08-13 19:50:38,133] INFO in app: ==================================================
[2025-08-13 19:50:38,145] INFO in app: Application logging initialized successfully
[2025-08-13 19:50:38,147] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 19:50:38,149] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 19:50:38,151] INFO in app: System encoding: utf-8
[2025-08-13 19:50:38,160] INFO in app: ==================================================
2025-08-13 19:50:38,463 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 19:50:38,464 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 19:50:38,464 - INFO - Scheduler started
2025-08-13 19:50:38,497 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 19:50:38,497 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 19:50:38,511 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 19:50:38,511 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 19:50:41,671 - INFO - 127.0.0.1 - - [13/Aug/2025 19:50:41] "GET /sales-by-gender?start_date=2025-07-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
2025-08-13 19:50:42,380 - INFO - 127.0.0.1 - - [13/Aug/2025 19:50:42] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 19:50:58,420 - INFO - 127.0.0.1 - - [13/Aug/2025 19:50:58] "GET /sales-by-gender?start_date=2017-01-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
[2025-08-13 21:18:30,548] INFO in app: ==================================================
[2025-08-13 21:18:30,741] INFO in app: Application logging initialized successfully
[2025-08-13 21:18:30,745] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 21:18:30,751] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 21:18:30,763] INFO in app: System encoding: utf-8
[2025-08-13 21:18:30,765] INFO in app: ==================================================
2025-08-13 21:18:31,716 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 21:18:31,719 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 21:18:31,719 - INFO - Scheduler started
2025-08-13 21:18:31,792 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 21:18:31,793 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 21:18:31,839 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 21:18:31,839 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 22:16:19,623 - INFO - 127.0.0.1 - - [13/Aug/2025 22:16:19] "GET /sales-by-gender?start_date=2017-01-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
2025-08-13 22:16:31,426 - INFO - 127.0.0.1 - - [13/Aug/2025 22:16:31] "GET /sales-by-gender?start_date=2025-06-03&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
[2025-08-13 22:43:45,558] INFO in app: ==================================================
[2025-08-13 22:43:45,564] INFO in app: Application logging initialized successfully
[2025-08-13 22:43:45,566] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 22:43:45,570] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 22:43:45,572] INFO in app: System encoding: utf-8
[2025-08-13 22:43:45,575] INFO in app: ==================================================
2025-08-13 22:43:45,840 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-13 22:43:45,841 - INFO - Added job "snapshot_par" to job store "default"
2025-08-13 22:43:45,841 - INFO - Scheduler started
2025-08-13 22:43:45,871 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-13 22:43:45,872 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-13 22:43:45,885 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-13 22:43:45,885 - INFO - [33mPress CTRL+C to quit[0m
2025-08-13 22:43:50,609 - INFO - 127.0.0.1 - - [13/Aug/2025 22:43:50] "GET /sales-by-gender?start_date=2025-06-03&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
2025-08-13 22:43:51,348 - INFO - 127.0.0.1 - - [13/Aug/2025 22:43:51] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-13 22:44:03,130 - INFO - 127.0.0.1 - - [13/Aug/2025 22:44:03] "GET /sales-by-gender?start_date=2025-03-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
2025-08-13 22:45:05,344 - INFO - 127.0.0.1 - - [13/Aug/2025 22:45:05] "[33mGET /dashboard_gender_data HTTP/1.1[0m" 404 -
[2025-08-14 17:04:24,697] INFO in app: ==================================================
[2025-08-14 17:04:24,784] INFO in app: Application logging initialized successfully
[2025-08-14 17:04:24,785] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 17:04:24,787] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 17:04:24,788] INFO in app: System encoding: utf-8
[2025-08-14 17:04:24,790] INFO in app: ==================================================
2025-08-14 17:04:25,308 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-14 17:04:25,310 - INFO - Added job "snapshot_par" to job store "default"
2025-08-14 17:04:25,310 - INFO - Scheduler started
2025-08-14 17:04:25,376 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-14 17:04:25,376 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-14 17:04:25,419 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-14 17:04:25,419 - INFO - [33mPress CTRL+C to quit[0m
2025-08-14 17:04:30,712 - INFO - 127.0.0.1 - - [14/Aug/2025 17:04:30] "GET /sales-by-gender?start_date=2025-03-01&end_date=2025-08-13&metric=total_sales HTTP/1.1" 200 -
2025-08-14 17:04:31,310 - INFO - 127.0.0.1 - - [14/Aug/2025 17:04:31] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-14 17:04:51,306 - INFO - 127.0.0.1 - - [14/Aug/2025 17:04:51] "GET /sales-by-gender?start_date=2021-01-01&end_date=2025-08-14&metric=total_sales HTTP/1.1" 200 -
2025-08-14 17:05:21,772 - INFO - 127.0.0.1 - - [14/Aug/2025 17:05:21] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-08-14 17:05:49,407 - INFO - 127.0.0.1 - - [14/Aug/2025 17:05:49] "GET /sales-by-gender?start_date=2021-01-01&end_date=2025-08-14&metric=total_sales HTTP/1.1" 200 -
2025-08-14 17:05:49,466 - INFO - 127.0.0.1 - - [14/Aug/2025 17:05:49] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-08-14 17:05:49,926 - INFO - 127.0.0.1 - - [14/Aug/2025 17:05:49] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-14 17:07:31,842 - INFO - 127.0.0.1 - - [14/Aug/2025 17:07:31] "GET /sales-by-gender?start_date=2022-01-01&end_date=2025-08-14&metric=total_sales HTTP/1.1" 200 -
2025-08-14 17:07:31,939 - INFO - 127.0.0.1 - - [14/Aug/2025 17:07:31] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
[2025-08-14 17:11:30,154] INFO in app: ==================================================
[2025-08-14 17:11:30,164] INFO in app: Application logging initialized successfully
[2025-08-14 17:11:30,165] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 17:11:30,167] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 17:11:30,172] INFO in app: System encoding: utf-8
[2025-08-14 17:11:30,175] INFO in app: ==================================================
2025-08-14 17:11:30,467 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-14 17:11:30,469 - INFO - Added job "snapshot_par" to job store "default"
2025-08-14 17:11:30,469 - INFO - Scheduler started
2025-08-14 17:11:30,500 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-14 17:11:30,500 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-14 17:11:30,511 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-14 17:11:30,511 - INFO - [33mPress CTRL+C to quit[0m
2025-08-14 17:11:36,988 - INFO - 127.0.0.1 - - [14/Aug/2025 17:11:36] "GET /sales-by-gender?start_date=2022-01-01&end_date=2025-08-14&metric=total_sales HTTP/1.1" 200 -
2025-08-14 17:11:37,040 - INFO - 127.0.0.1 - - [14/Aug/2025 17:11:37] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-08-14 17:11:38,627 - INFO - 127.0.0.1 - - [14/Aug/2025 17:11:38] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-14 17:11:56,674 - INFO - 127.0.0.1 - - [14/Aug/2025 17:11:56] "GET /sales-by-gender?start_date=2025-02-01&end_date=2025-08-14&metric=total_sales HTTP/1.1" 200 -
2025-08-14 17:11:56,735 - INFO - 127.0.0.1 - - [14/Aug/2025 17:11:56] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
[2025-08-14 17:20:25,168] INFO in app: ==================================================
[2025-08-14 17:20:25,177] INFO in app: Application logging initialized successfully
[2025-08-14 17:20:25,179] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 17:20:25,181] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 17:20:25,183] INFO in app: System encoding: utf-8
[2025-08-14 17:20:25,185] INFO in app: ==================================================
2025-08-14 17:20:25,522 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-14 17:20:25,534 - INFO - Added job "snapshot_par" to job store "default"
2025-08-14 17:20:25,534 - INFO - Scheduler started
2025-08-14 17:20:25,569 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-14 17:20:25,570 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-14 17:20:25,585 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-14 17:20:25,585 - INFO - [33mPress CTRL+C to quit[0m
2025-08-14 17:20:43,971 - INFO - 127.0.0.1 - - [14/Aug/2025 17:20:43] "GET /sales-by-gender?start_date=2025-02-01&end_date=2025-08-14&metric=total_sales HTTP/1.1" 200 -
2025-08-14 17:20:44,019 - INFO - 127.0.0.1 - - [14/Aug/2025 17:20:44] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-08-14 17:20:44,615 - INFO - 127.0.0.1 - - [14/Aug/2025 17:20:44] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-14 17:21:06,411 - INFO - 127.0.0.1 - - [14/Aug/2025 17:21:06] "GET /sales-by-gender?start_date=2025-01-01&end_date=2025-08-14&metric=total_sales HTTP/1.1" 200 -
2025-08-14 17:21:06,473 - INFO - 127.0.0.1 - - [14/Aug/2025 17:21:06] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-08-14 17:21:49,899 - INFO - 127.0.0.1 - - [14/Aug/2025 17:21:49] "GET /sales-by-gender?start_date=2025-08-01&end_date=2025-08-14&metric=total_sales HTTP/1.1" 200 -
2025-08-14 17:21:50,207 - INFO - 127.0.0.1 - - [14/Aug/2025 17:21:50] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
[2025-08-14 17:30:00,393] INFO in app: ==================================================
[2025-08-14 17:30:00,418] INFO in app: Application logging initialized successfully
[2025-08-14 17:30:00,421] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 17:30:00,424] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 17:30:00,438] INFO in app: System encoding: utf-8
[2025-08-14 17:30:00,441] INFO in app: ==================================================
2025-08-14 17:30:00,822 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-14 17:30:00,835 - INFO - Added job "snapshot_par" to job store "default"
2025-08-14 17:30:00,835 - INFO - Scheduler started
2025-08-14 17:30:00,863 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-14 17:30:00,863 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-14 17:30:00,876 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-14 17:30:00,876 - INFO - [33mPress CTRL+C to quit[0m
2025-08-14 17:32:33,963 - INFO - 127.0.0.1 - - [14/Aug/2025 17:32:33] "GET /sales-by-gender?start_date=2025-08-01&end_date=2025-08-14&metric=total_sales HTTP/1.1" 200 -
2025-08-14 17:32:34,010 - INFO - 127.0.0.1 - - [14/Aug/2025 17:32:34] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-08-14 17:32:34,640 - INFO - 127.0.0.1 - - [14/Aug/2025 17:32:34] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-14 17:32:45,866 - INFO - 127.0.0.1 - - [14/Aug/2025 17:32:45] "GET /sales-by-gender?start_date=2025-05-01&end_date=2025-08-14&metric=total_sales HTTP/1.1" 200 -
2025-08-14 17:32:45,941 - INFO - 127.0.0.1 - - [14/Aug/2025 17:32:45] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-08-14 17:32:58,119 - INFO - 127.0.0.1 - - [14/Aug/2025 17:32:58] "GET /sales-by-gender?start_date=2025-07-01&end_date=2025-08-14&metric=total_sales HTTP/1.1" 200 -
[2025-08-14 17:40:17,548] INFO in app: ==================================================
[2025-08-14 17:40:17,555] INFO in app: Application logging initialized successfully
[2025-08-14 17:40:17,558] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 17:40:17,560] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 17:40:17,562] INFO in app: System encoding: utf-8
[2025-08-14 17:40:17,567] INFO in app: ==================================================
2025-08-14 17:40:17,863 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-14 17:40:17,864 - INFO - Added job "snapshot_par" to job store "default"
2025-08-14 17:40:17,864 - INFO - Scheduler started
2025-08-14 17:40:17,894 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-14 17:40:17,895 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-14 17:40:17,904 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-14 17:40:17,904 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-14 17:40:45,964] ERROR in app: Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such function: str_to_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8429, in dashboard_gender_data
    results = query.group_by(category).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such function: str_to_date
[SQL: SELECT CASE WHEN (lower(customers.gender) LIKE lower(?)) THEN ? WHEN (lower(customers.gender) LIKE lower(?)) THEN ? WHEN ((? - CAST(STRFTIME('%Y', str_to_date(customers.dob, ?)) AS INTEGER)) - CASE WHEN (CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) < ? OR CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) = ? AND CAST(STRFTIME('%d', str_to_date(customers.dob, ?)) AS INTEGER) <= ?) THEN ? ELSE ? END < ?) THEN ? ELSE ? END AS category, count(loan_applications.id) AS sales_count, coalesce(sum(loan_applications.loan_amount), ?) AS total_sales 
FROM loan_applications JOIN customers ON customers.id = loan_applications.customer_id GROUP BY CASE WHEN (lower(customers.gender) LIKE lower(?)) THEN ? WHEN (lower(customers.gender) LIKE lower(?)) THEN ? WHEN ((? - CAST(STRFTIME('%Y', str_to_date(customers.dob, ?)) AS INTEGER)) - CASE WHEN (CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) < ? OR CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) = ? AND CAST(STRFTIME('%d', str_to_date(customers.dob, ?)) AS INTEGER) <= ?) THEN ? ELSE ? END < ?) THEN ? ELSE ? END]
[parameters: ('male', 'Male', 'female', 'Female', 2025, '%Y-%m-%d', '%Y-%m-%d', 8, '%Y-%m-%d', 8, '%Y-%m-%d', 14, 1, 0, 35, 'Youth', 'Other', 0, 'male', 'Male', 'female', 'Female', 2025, '%Y-%m-%d', '%Y-%m-%d', 8, '%Y-%m-%d', 8, '%Y-%m-%d', 14, 1, 0, 35, 'Youth', 'Other')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-14 17:40:45,964 - ERROR - Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such function: str_to_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8429, in dashboard_gender_data
    results = query.group_by(category).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such function: str_to_date
[SQL: SELECT CASE WHEN (lower(customers.gender) LIKE lower(?)) THEN ? WHEN (lower(customers.gender) LIKE lower(?)) THEN ? WHEN ((? - CAST(STRFTIME('%Y', str_to_date(customers.dob, ?)) AS INTEGER)) - CASE WHEN (CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) < ? OR CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) = ? AND CAST(STRFTIME('%d', str_to_date(customers.dob, ?)) AS INTEGER) <= ?) THEN ? ELSE ? END < ?) THEN ? ELSE ? END AS category, count(loan_applications.id) AS sales_count, coalesce(sum(loan_applications.loan_amount), ?) AS total_sales 
FROM loan_applications JOIN customers ON customers.id = loan_applications.customer_id GROUP BY CASE WHEN (lower(customers.gender) LIKE lower(?)) THEN ? WHEN (lower(customers.gender) LIKE lower(?)) THEN ? WHEN ((? - CAST(STRFTIME('%Y', str_to_date(customers.dob, ?)) AS INTEGER)) - CASE WHEN (CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) < ? OR CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) = ? AND CAST(STRFTIME('%d', str_to_date(customers.dob, ?)) AS INTEGER) <= ?) THEN ? ELSE ? END < ?) THEN ? ELSE ? END]
[parameters: ('male', 'Male', 'female', 'Female', 2025, '%Y-%m-%d', '%Y-%m-%d', 8, '%Y-%m-%d', 8, '%Y-%m-%d', 14, 1, 0, 35, 'Youth', 'Other', 0, 'male', 'Male', 'female', 'Female', 2025, '%Y-%m-%d', '%Y-%m-%d', 8, '%Y-%m-%d', 8, '%Y-%m-%d', 14, 1, 0, 35, 'Youth', 'Other')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-14 17:40:46,129 - INFO - 127.0.0.1 - - [14/Aug/2025 17:40:46] "[35m[1mGET /dashboard-gender-data HTTP/1.1[0m" 500 -
[2025-08-14 17:45:34,758] INFO in app: ==================================================
[2025-08-14 17:45:34,785] INFO in app: Application logging initialized successfully
[2025-08-14 17:45:34,789] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 17:45:34,791] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 17:45:34,803] INFO in app: System encoding: utf-8
[2025-08-14 17:45:34,806] INFO in app: ==================================================
2025-08-14 17:45:35,198 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-14 17:45:35,200 - INFO - Added job "snapshot_par" to job store "default"
2025-08-14 17:45:35,200 - INFO - Scheduler started
2025-08-14 17:45:35,236 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-14 17:45:35,237 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-14 17:45:35,253 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-14 17:45:35,253 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-14 17:45:41,802] ERROR in app: Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such function: str_to_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8437, in dashboard_gender_data
    results = query.group_by(category).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such function: str_to_date
[SQL: SELECT CASE WHEN ((? - CAST(STRFTIME('%Y', str_to_date(customers.dob, ?)) AS INTEGER)) - CASE WHEN (CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) < ? OR CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) = ? AND CAST(STRFTIME('%d', str_to_date(customers.dob, ?)) AS INTEGER) <= ?) THEN ? ELSE ? END < ?) THEN ? WHEN (lower(customers.gender) LIKE lower(?)) THEN ? WHEN (lower(customers.gender) LIKE lower(?)) THEN ? ELSE ? END AS category, count(loan_applications.id) AS sales_count, coalesce(sum(loan_applications.loan_amount), ?) AS total_sales 
FROM loan_applications JOIN customers ON customers.id = loan_applications.customer_id GROUP BY CASE WHEN ((? - CAST(STRFTIME('%Y', str_to_date(customers.dob, ?)) AS INTEGER)) - CASE WHEN (CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) < ? OR CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) = ? AND CAST(STRFTIME('%d', str_to_date(customers.dob, ?)) AS INTEGER) <= ?) THEN ? ELSE ? END < ?) THEN ? WHEN (lower(customers.gender) LIKE lower(?)) THEN ? WHEN (lower(customers.gender) LIKE lower(?)) THEN ? ELSE ? END]
[parameters: (2025, '%Y-%m-%d', '%Y-%m-%d', 8, '%Y-%m-%d', 8, '%Y-%m-%d', 14, 1, 0, 35, 'Youth', 'male', 'Male', 'female', 'Female', 'Other', 0, 2025, '%Y-%m-%d', '%Y-%m-%d', 8, '%Y-%m-%d', 8, '%Y-%m-%d', 14, 1, 0, 35, 'Youth', 'male', 'Male', 'female', 'Female', 'Other')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-14 17:45:41,802 - ERROR - Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such function: str_to_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8437, in dashboard_gender_data
    results = query.group_by(category).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such function: str_to_date
[SQL: SELECT CASE WHEN ((? - CAST(STRFTIME('%Y', str_to_date(customers.dob, ?)) AS INTEGER)) - CASE WHEN (CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) < ? OR CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) = ? AND CAST(STRFTIME('%d', str_to_date(customers.dob, ?)) AS INTEGER) <= ?) THEN ? ELSE ? END < ?) THEN ? WHEN (lower(customers.gender) LIKE lower(?)) THEN ? WHEN (lower(customers.gender) LIKE lower(?)) THEN ? ELSE ? END AS category, count(loan_applications.id) AS sales_count, coalesce(sum(loan_applications.loan_amount), ?) AS total_sales 
FROM loan_applications JOIN customers ON customers.id = loan_applications.customer_id GROUP BY CASE WHEN ((? - CAST(STRFTIME('%Y', str_to_date(customers.dob, ?)) AS INTEGER)) - CASE WHEN (CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) < ? OR CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) = ? AND CAST(STRFTIME('%d', str_to_date(customers.dob, ?)) AS INTEGER) <= ?) THEN ? ELSE ? END < ?) THEN ? WHEN (lower(customers.gender) LIKE lower(?)) THEN ? WHEN (lower(customers.gender) LIKE lower(?)) THEN ? ELSE ? END]
[parameters: (2025, '%Y-%m-%d', '%Y-%m-%d', 8, '%Y-%m-%d', 8, '%Y-%m-%d', 14, 1, 0, 35, 'Youth', 'male', 'Male', 'female', 'Female', 'Other', 0, 2025, '%Y-%m-%d', '%Y-%m-%d', 8, '%Y-%m-%d', 8, '%Y-%m-%d', 14, 1, 0, 35, 'Youth', 'male', 'Male', 'female', 'Female', 'Other')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-14 17:45:41,885 - INFO - 127.0.0.1 - - [14/Aug/2025 17:45:41] "[35m[1mGET /dashboard-gender-data HTTP/1.1[0m" 500 -
[2025-08-14 17:57:09,456] INFO in app: ==================================================
[2025-08-14 17:57:09,468] INFO in app: Application logging initialized successfully
[2025-08-14 17:57:09,472] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 17:57:09,476] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 17:57:09,485] INFO in app: System encoding: utf-8
[2025-08-14 17:57:09,487] INFO in app: ==================================================
2025-08-14 17:57:09,855 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-14 17:57:09,857 - INFO - Added job "snapshot_par" to job store "default"
2025-08-14 17:57:09,857 - INFO - Scheduler started
2025-08-14 17:57:09,892 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-14 17:57:09,892 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-14 17:57:09,903 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-14 17:57:09,903 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-14 17:57:15,790] ERROR in app: Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8409, in dashboard_gender_data
    ).else_(literal(0)))
      ^^^^^
AttributeError: 'tuple' object has no attribute 'else_'
2025-08-14 17:57:15,790 - ERROR - Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8409, in dashboard_gender_data
    ).else_(literal(0)))
      ^^^^^
AttributeError: 'tuple' object has no attribute 'else_'
2025-08-14 17:57:15,804 - INFO - 127.0.0.1 - - [14/Aug/2025 17:57:15] "[35m[1mGET /dashboard-gender-data HTTP/1.1[0m" 500 -
2025-08-14 17:57:15,872 - INFO - 127.0.0.1 - - [14/Aug/2025 17:57:15] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-14 17:59:58,037] INFO in app: ==================================================
[2025-08-14 17:59:58,046] INFO in app: Application logging initialized successfully
[2025-08-14 17:59:58,049] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 17:59:58,051] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 17:59:58,057] INFO in app: System encoding: utf-8
[2025-08-14 17:59:58,060] INFO in app: ==================================================
2025-08-14 17:59:58,367 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-14 17:59:58,369 - INFO - Added job "snapshot_par" to job store "default"
2025-08-14 17:59:58,369 - INFO - Scheduler started
2025-08-14 17:59:58,401 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-14 17:59:58,402 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-14 17:59:58,411 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-14 17:59:58,411 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-14 18:00:42,484] INFO in app: ==================================================
[2025-08-14 18:00:42,493] INFO in app: Application logging initialized successfully
[2025-08-14 18:00:42,496] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 18:00:42,501] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 18:00:42,503] INFO in app: System encoding: utf-8
[2025-08-14 18:00:42,508] INFO in app: ==================================================
2025-08-14 18:00:42,805 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-14 18:00:42,807 - INFO - Added job "snapshot_par" to job store "default"
2025-08-14 18:00:42,807 - INFO - Scheduler started
2025-08-14 18:00:42,841 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-14 18:00:42,841 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-14 18:00:42,857 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-14 18:00:42,857 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-14 18:00:54,080] ERROR in app: Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8405, in dashboard_gender_data
    birthday_passed = case(
        [
    ...<6 lines>...
        else_=literal(0)
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\_elements_constructors.py", line 853, in case
    return Case(*whens, value=value, else_=else_)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 3339, in __init__
    new_whens: Iterable[Any] = coercions._expression_collection_was_a_list(
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        "whens", "case", whens
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 151, in _expression_collection_was_a_list
    raise exc.ArgumentError(
    ...<4 lines>...
    )
sqlalchemy.exc.ArgumentError: The "whens" argument to case(), when referring to a sequence of items, is now passed as a series of positional elements, rather than as a list. 
2025-08-14 18:00:54,080 - ERROR - Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8405, in dashboard_gender_data
    birthday_passed = case(
        [
    ...<6 lines>...
        else_=literal(0)
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\_elements_constructors.py", line 853, in case
    return Case(*whens, value=value, else_=else_)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 3339, in __init__
    new_whens: Iterable[Any] = coercions._expression_collection_was_a_list(
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        "whens", "case", whens
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 151, in _expression_collection_was_a_list
    raise exc.ArgumentError(
    ...<4 lines>...
    )
sqlalchemy.exc.ArgumentError: The "whens" argument to case(), when referring to a sequence of items, is now passed as a series of positional elements, rather than as a list. 
2025-08-14 18:00:54,116 - INFO - 127.0.0.1 - - [14/Aug/2025 18:00:54] "[35m[1mGET /dashboard-gender-data HTTP/1.1[0m" 500 -
2025-08-14 18:00:54,196 - INFO - 127.0.0.1 - - [14/Aug/2025 18:00:54] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-14 18:08:37,494] INFO in app: ==================================================
[2025-08-14 18:08:37,501] INFO in app: Application logging initialized successfully
[2025-08-14 18:08:37,505] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 18:08:37,507] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 18:08:37,509] INFO in app: System encoding: utf-8
[2025-08-14 18:08:37,516] INFO in app: ==================================================
2025-08-14 18:08:37,825 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-14 18:08:37,827 - INFO - Added job "snapshot_par" to job store "default"
2025-08-14 18:08:37,827 - INFO - Scheduler started
2025-08-14 18:08:37,861 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-14 18:08:37,861 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-14 18:08:37,874 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-14 18:08:37,874 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-14 18:08:45,772] ERROR in app: Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8405, in dashboard_gender_data
    birthday_passed = case(
        [
    ...<6 lines>...
        else_=literal(0)
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\_elements_constructors.py", line 853, in case
    return Case(*whens, value=value, else_=else_)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 3339, in __init__
    new_whens: Iterable[Any] = coercions._expression_collection_was_a_list(
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        "whens", "case", whens
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 151, in _expression_collection_was_a_list
    raise exc.ArgumentError(
    ...<4 lines>...
    )
sqlalchemy.exc.ArgumentError: The "whens" argument to case(), when referring to a sequence of items, is now passed as a series of positional elements, rather than as a list. 
2025-08-14 18:08:45,772 - ERROR - Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8405, in dashboard_gender_data
    birthday_passed = case(
        [
    ...<6 lines>...
        else_=literal(0)
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\_elements_constructors.py", line 853, in case
    return Case(*whens, value=value, else_=else_)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 3339, in __init__
    new_whens: Iterable[Any] = coercions._expression_collection_was_a_list(
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        "whens", "case", whens
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 151, in _expression_collection_was_a_list
    raise exc.ArgumentError(
    ...<4 lines>...
    )
sqlalchemy.exc.ArgumentError: The "whens" argument to case(), when referring to a sequence of items, is now passed as a series of positional elements, rather than as a list. 
2025-08-14 18:08:45,808 - INFO - 127.0.0.1 - - [14/Aug/2025 18:08:45] "[35m[1mGET /dashboard-gender-data HTTP/1.1[0m" 500 -
2025-08-14 18:08:45,907 - INFO - 127.0.0.1 - - [14/Aug/2025 18:08:45] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-14 18:08:52,035] ERROR in app: Exception on /sales-by-gender [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8382, in gender_dashboard
    return render_template("sales_by_gender.html", active_tab='gender')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\sales_by_gender.html", line 42, in template
    <p class="card-text display-5">{{ total_sales_count|number_format }}</p>
    ^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'number_format'.
2025-08-14 18:08:52,035 - ERROR - Exception on /sales-by-gender [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8382, in gender_dashboard
    return render_template("sales_by_gender.html", active_tab='gender')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\sales_by_gender.html", line 42, in template
    <p class="card-text display-5">{{ total_sales_count|number_format }}</p>
    ^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'number_format'.
2025-08-14 18:08:52,103 - INFO - 127.0.0.1 - - [14/Aug/2025 18:08:52] "[35m[1mGET /sales-by-gender?start_date=2025-07-01&end_date=2025-08-14&metric=total_sales HTTP/1.1[0m" 500 -
2025-08-14 18:08:52,158 - INFO - 127.0.0.1 - - [14/Aug/2025 18:08:52] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-14 18:08:59,541 - INFO - 127.0.0.1 - - [14/Aug/2025 18:08:59] "GET / HTTP/1.1" 200 -
2025-08-14 18:09:02,223 - INFO - 127.0.0.1 - - [14/Aug/2025 18:09:02] "GET / HTTP/1.1" 200 -
2025-08-14 18:09:02,939 - INFO - 127.0.0.1 - - [14/Aug/2025 18:09:02] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-14 18:09:04,677 - INFO - 127.0.0.1 - - [14/Aug/2025 18:09:04] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-14 18:09:04,730 - INFO - 127.0.0.1 - - [14/Aug/2025 18:09:04] "GET /notifications/sales-summary HTTP/1.1" 200 -
[2025-08-14 18:09:06,077] ERROR in app: Exception on /sales-by-gender [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8382, in gender_dashboard
    return render_template("sales_by_gender.html", active_tab='gender')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\sales_by_gender.html", line 42, in template
    <p class="card-text display-5">{{ total_sales_count|number_format }}</p>
    ^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'number_format'.
2025-08-14 18:09:06,077 - ERROR - Exception on /sales-by-gender [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8382, in gender_dashboard
    return render_template("sales_by_gender.html", active_tab='gender')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\sales_by_gender.html", line 42, in template
    <p class="card-text display-5">{{ total_sales_count|number_format }}</p>
    ^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'number_format'.
2025-08-14 18:09:06,098 - INFO - 127.0.0.1 - - [14/Aug/2025 18:09:06] "[35m[1mGET /sales-by-gender HTTP/1.1[0m" 500 -
[2025-08-14 18:12:05,375] INFO in app: ==================================================
[2025-08-14 18:12:05,382] INFO in app: Application logging initialized successfully
[2025-08-14 18:12:05,386] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 18:12:05,390] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 18:12:05,395] INFO in app: System encoding: utf-8
[2025-08-14 18:12:05,398] INFO in app: ==================================================
2025-08-14 18:12:05,714 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-14 18:12:05,715 - INFO - Added job "snapshot_par" to job store "default"
2025-08-14 18:12:05,715 - INFO - Scheduler started
2025-08-14 18:12:05,747 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-14 18:12:05,748 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-14 18:12:05,756 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-14 18:12:05,756 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-14 18:13:29,085] INFO in app: ==================================================
[2025-08-14 18:13:29,102] INFO in app: Application logging initialized successfully
[2025-08-14 18:13:29,112] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 18:13:29,115] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 18:13:29,117] INFO in app: System encoding: utf-8
[2025-08-14 18:13:29,133] INFO in app: ==================================================
2025-08-14 18:13:29,680 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-14 18:13:29,682 - INFO - Added job "snapshot_par" to job store "default"
2025-08-14 18:13:29,682 - INFO - Scheduler started
2025-08-14 18:13:29,735 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-14 18:13:29,735 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-14 18:13:29,746 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-14 18:13:29,746 - INFO - [33mPress CTRL+C to quit[0m
2025-08-14 18:13:34,964 - INFO - 127.0.0.1 - - [14/Aug/2025 18:13:34] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-14 18:13:36,298 - INFO - 127.0.0.1 - - [14/Aug/2025 18:13:36] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-14 18:13:36,676 - INFO - 127.0.0.1 - - [14/Aug/2025 18:13:36] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-14 18:13:37,373 - INFO - 127.0.0.1 - - [14/Aug/2025 18:13:37] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-14 18:13:38,741 - INFO - 127.0.0.1 - - [14/Aug/2025 18:13:38] "GET /sales-by-gender HTTP/1.1" 200 -
2025-08-14 18:14:01,317 - INFO - 127.0.0.1 - - [14/Aug/2025 18:14:01] "GET /sales-by-gender?start_date=2024-08-01&end_date=2025-08-31 HTTP/1.1" 200 -
2025-08-14 18:16:04,410 - INFO - 127.0.0.1 - - [14/Aug/2025 18:16:04] "GET / HTTP/1.1" 200 -
2025-08-14 18:16:09,385 - INFO - 127.0.0.1 - - [14/Aug/2025 18:16:09] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-14 18:16:09,418 - INFO - 127.0.0.1 - - [14/Aug/2025 18:16:09] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-14 18:16:11,738 - INFO - 127.0.0.1 - - [14/Aug/2025 18:16:11] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-14 18:16:13,239 - INFO - 127.0.0.1 - - [14/Aug/2025 18:16:13] "GET /dashboard/analytics HTTP/1.1" 200 -
2025-08-14 18:16:13,502 - INFO - 127.0.0.1 - - [14/Aug/2025 18:16:13] "GET /api/loans-by-region HTTP/1.1" 200 -
2025-08-14 18:16:13,820 - INFO - 127.0.0.1 - - [14/Aug/2025 18:16:13] "GET /api/loans-by-district HTTP/1.1" 200 -
2025-08-14 18:16:13,842 - INFO - 127.0.0.1 - - [14/Aug/2025 18:16:13] "GET /api/average-ticket-size HTTP/1.1" 200 -
2025-08-14 18:16:19,379 - INFO - 127.0.0.1 - - [14/Aug/2025 18:16:19] "GET /sales-by-gender HTTP/1.1" 200 -
[2025-08-14 18:23:51,997] INFO in app: ==================================================
[2025-08-14 18:23:52,002] INFO in app: Application logging initialized successfully
[2025-08-14 18:23:52,004] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 18:23:52,006] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 18:23:52,010] INFO in app: System encoding: utf-8
[2025-08-14 18:23:52,012] INFO in app: ==================================================
2025-08-14 18:23:52,264 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-14 18:23:52,265 - INFO - Added job "snapshot_par" to job store "default"
2025-08-14 18:23:52,265 - INFO - Scheduler started
2025-08-14 18:23:52,296 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-14 18:23:52,296 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-14 18:23:52,304 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-14 18:23:52,305 - INFO - [33mPress CTRL+C to quit[0m
2025-08-14 18:24:04,561 - INFO - 127.0.0.1 - - [14/Aug/2025 18:24:04] "GET /sales-by-gender HTTP/1.1" 200 -
2025-08-14 18:24:05,078 - INFO - 127.0.0.1 - - [14/Aug/2025 18:24:05] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-14 18:24:08,145 - INFO - 127.0.0.1 - - [14/Aug/2025 18:24:08] "GET /dashboard/analytics HTTP/1.1" 200 -
2025-08-14 18:24:08,432 - INFO - 127.0.0.1 - - [14/Aug/2025 18:24:08] "GET /api/loans-by-region HTTP/1.1" 200 -
2025-08-14 18:24:08,559 - INFO - 127.0.0.1 - - [14/Aug/2025 18:24:08] "GET /api/loans-by-district HTTP/1.1" 200 -
2025-08-14 18:24:08,565 - INFO - 127.0.0.1 - - [14/Aug/2025 18:24:08] "GET /api/average-ticket-size HTTP/1.1" 200 -
2025-08-14 18:24:11,187 - INFO - 127.0.0.1 - - [14/Aug/2025 18:24:11] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-14 18:24:12,725 - INFO - 127.0.0.1 - - [14/Aug/2025 18:24:12] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-14 18:24:12,762 - INFO - 127.0.0.1 - - [14/Aug/2025 18:24:12] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-14 18:24:14,265 - INFO - 127.0.0.1 - - [14/Aug/2025 18:24:14] "GET /dashboard/analytics HTTP/1.1" 200 -
2025-08-14 18:24:14,551 - INFO - 127.0.0.1 - - [14/Aug/2025 18:24:14] "GET /api/loans-by-region HTTP/1.1" 200 -
2025-08-14 18:24:14,631 - INFO - 127.0.0.1 - - [14/Aug/2025 18:24:14] "GET /api/average-ticket-size HTTP/1.1" 200 -
2025-08-14 18:24:14,632 - INFO - 127.0.0.1 - - [14/Aug/2025 18:24:14] "GET /api/loans-by-district HTTP/1.1" 200 -
2025-08-14 18:24:15,503 - INFO - 127.0.0.1 - - [14/Aug/2025 18:24:15] "GET /sales-by-gender HTTP/1.1" 200 -
2025-08-14 18:24:31,700 - INFO - 127.0.0.1 - - [14/Aug/2025 18:24:31] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-14 18:24:31,759 - INFO - 127.0.0.1 - - [14/Aug/2025 18:24:31] "GET /notifications/sales-summary HTTP/1.1" 200 -
[2025-08-14 18:42:59,783] INFO in app: ==================================================
[2025-08-14 18:42:59,790] INFO in app: Application logging initialized successfully
[2025-08-14 18:42:59,793] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 18:42:59,795] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 18:42:59,797] INFO in app: System encoding: utf-8
[2025-08-14 18:42:59,799] INFO in app: ==================================================
2025-08-14 18:43:00,064 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-14 18:43:00,066 - INFO - Added job "snapshot_par" to job store "default"
2025-08-14 18:43:00,066 - INFO - Scheduler started
2025-08-14 18:43:00,097 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-14 18:43:00,098 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-14 18:43:00,110 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-14 18:43:00,110 - INFO - [33mPress CTRL+C to quit[0m
2025-08-14 18:43:13,730 - INFO - 127.0.0.1 - - [14/Aug/2025 18:43:13] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-14 18:43:14,239 - INFO - 127.0.0.1 - - [14/Aug/2025 18:43:14] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-14 18:43:15,027 - INFO - 127.0.0.1 - - [14/Aug/2025 18:43:15] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-15 11:31:46,204] INFO in app: ==================================================
[2025-08-15 11:31:46,312] INFO in app: Application logging initialized successfully
[2025-08-15 11:31:46,314] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-15 11:31:46,316] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-15 11:31:46,317] INFO in app: System encoding: utf-8
[2025-08-15 11:31:46,322] INFO in app: ==================================================
2025-08-15 11:31:46,842 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-15 11:31:46,847 - INFO - Added job "snapshot_par" to job store "default"
2025-08-15 11:31:46,847 - INFO - Scheduler started
2025-08-15 11:31:46,914 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-15 11:31:46,915 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-15 11:31:46,964 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-15 11:31:46,964 - INFO - [33mPress CTRL+C to quit[0m
2025-08-15 11:39:18,068 - INFO - 127.0.0.1 - - [15/Aug/2025 11:39:18] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-15 11:39:22,022 - INFO - 127.0.0.1 - - [15/Aug/2025 11:39:22] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-15 11:39:24,482 - INFO - 127.0.0.1 - - [15/Aug/2025 11:39:24] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-15 11:39:24,767 - INFO - 127.0.0.1 - - [15/Aug/2025 11:39:24] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-15 11:39:27,334 - INFO - 127.0.0.1 - - [15/Aug/2025 11:39:27] "GET /dashboard/analytics HTTP/1.1" 200 -
2025-08-15 11:39:29,054 - INFO - 127.0.0.1 - - [15/Aug/2025 11:39:29] "GET /sales-by-gender HTTP/1.1" 200 -
[2025-08-15 17:07:15,910] INFO in app: ==================================================
[2025-08-15 17:07:15,995] INFO in app: Application logging initialized successfully
[2025-08-15 17:07:15,996] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-15 17:07:15,998] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-15 17:07:16,000] INFO in app: System encoding: utf-8
[2025-08-15 17:07:16,002] INFO in app: ==================================================
2025-08-15 17:07:16,371 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-15 17:07:16,378 - INFO - Added job "snapshot_par" to job store "default"
2025-08-15 17:07:16,379 - INFO - Scheduler started
2025-08-15 17:07:17,153 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-15 17:07:17,153 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-15 17:07:17,184 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-15 17:07:17,184 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-15 21:46:23,961] INFO in app: ==================================================
[2025-08-15 21:46:24,031] INFO in app: Application logging initialized successfully
[2025-08-15 21:46:24,033] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-15 21:46:24,035] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-15 21:46:24,038] INFO in app: System encoding: utf-8
[2025-08-15 21:46:24,040] INFO in app: ==================================================
2025-08-15 21:46:24,403 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-15 21:46:24,405 - INFO - Added job "snapshot_par" to job store "default"
2025-08-15 21:46:24,405 - INFO - Scheduler started
2025-08-15 21:46:25,188 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-15 21:46:25,189 - INFO - Added job "send_sales_notification_email" to job store "default"
[2025-08-16 05:31:14,525] INFO in app: ==================================================
[2025-08-16 05:31:14,621] INFO in app: Application logging initialized successfully
[2025-08-16 05:31:14,623] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 05:31:14,625] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 05:31:14,642] INFO in app: System encoding: utf-8
[2025-08-16 05:31:14,647] INFO in app: ==================================================
2025-08-16 05:31:15,069 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 05:31:15,079 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 05:31:15,079 - INFO - Scheduler started
2025-08-16 05:31:16,014 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 05:31:16,015 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 05:31:16,075 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-16 05:31:16,075 - INFO - [33mPress CTRL+C to quit[0m
2025-08-16 05:34:59,886 - INFO - 127.0.0.1 - - [16/Aug/2025 05:34:59] "GET /sales-by-gender HTTP/1.1" 200 -
2025-08-16 05:35:00,985 - INFO - 127.0.0.1 - - [16/Aug/2025 05:35:00] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 05:35:03,818 - INFO - 127.0.0.1 - - [16/Aug/2025 05:35:03] "GET /sales-by-gender HTTP/1.1" 200 -
2025-08-16 05:35:04,604 - INFO - 127.0.0.1 - - [16/Aug/2025 05:35:04] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 05:35:07,826 - INFO - 127.0.0.1 - - [16/Aug/2025 05:35:07] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 05:35:07,992 - INFO - 127.0.0.1 - - [16/Aug/2025 05:35:07] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 05:36:19,710 - INFO - 127.0.0.1 - - [16/Aug/2025 05:36:19] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-16 05:36:43,201 - INFO - 127.0.0.1 - - [16/Aug/2025 05:36:43] "GET /dashboard/analytics HTTP/1.1" 200 -
2025-08-16 05:36:43,729 - INFO - 127.0.0.1 - - [16/Aug/2025 05:36:43] "GET /api/loans-by-region HTTP/1.1" 200 -
2025-08-16 05:36:44,040 - INFO - 127.0.0.1 - - [16/Aug/2025 05:36:44] "GET /api/loans-by-district HTTP/1.1" 200 -
2025-08-16 05:36:44,043 - INFO - 127.0.0.1 - - [16/Aug/2025 05:36:44] "GET /api/average-ticket-size HTTP/1.1" 200 -
2025-08-16 05:36:50,885 - INFO - 127.0.0.1 - - [16/Aug/2025 05:36:50] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 05:36:51,098 - INFO - 127.0.0.1 - - [16/Aug/2025 05:36:51] "GET /notifications/sales-summary HTTP/1.1" 200 -
[2025-08-16 05:46:08,594] INFO in app: ==================================================
[2025-08-16 05:46:08,664] INFO in app: Application logging initialized successfully
[2025-08-16 05:46:08,666] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 05:46:08,667] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 05:46:08,669] INFO in app: System encoding: utf-8
[2025-08-16 05:46:08,673] INFO in app: ==================================================
2025-08-16 05:46:09,022 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 05:46:09,024 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 05:46:09,024 - INFO - Scheduler started
2025-08-16 05:46:09,668 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 05:46:09,668 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 05:46:09,694 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-16 05:46:09,695 - INFO - [33mPress CTRL+C to quit[0m
2025-08-16 05:46:19,744 - INFO - 127.0.0.1 - - [16/Aug/2025 05:46:19] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 05:46:20,025 - INFO - 127.0.0.1 - - [16/Aug/2025 05:46:20] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 05:46:20,388 - INFO - 127.0.0.1 - - [16/Aug/2025 05:46:20] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 05:46:31,979 - INFO - 127.0.0.1 - - [16/Aug/2025 05:46:31] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-16 05:46:39,579 - INFO - 127.0.0.1 - - [16/Aug/2025 05:46:39] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-16 05:46:40,247 - INFO - 127.0.0.1 - - [16/Aug/2025 05:46:40] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 05:46:48,117 - INFO - 127.0.0.1 - - [16/Aug/2025 05:46:48] "GET /dashboard/analytics HTTP/1.1" 200 -
2025-08-16 05:46:48,366 - INFO - 127.0.0.1 - - [16/Aug/2025 05:46:48] "GET /api/loans-by-region HTTP/1.1" 200 -
2025-08-16 05:46:48,372 - INFO - 127.0.0.1 - - [16/Aug/2025 05:46:48] "GET /api/loans-by-district HTTP/1.1" 200 -
2025-08-16 05:46:48,521 - INFO - 127.0.0.1 - - [16/Aug/2025 05:46:48] "GET /api/average-ticket-size HTTP/1.1" 200 -
2025-08-16 05:46:51,048 - INFO - 127.0.0.1 - - [16/Aug/2025 05:46:51] "GET /sales-by-gender HTTP/1.1" 200 -
2025-08-16 05:46:55,684 - INFO - 127.0.0.1 - - [16/Aug/2025 05:46:55] "GET /dashboard/analytics HTTP/1.1" 200 -
2025-08-16 05:46:56,006 - INFO - 127.0.0.1 - - [16/Aug/2025 05:46:56] "GET /api/loans-by-region HTTP/1.1" 200 -
2025-08-16 05:46:56,010 - INFO - 127.0.0.1 - - [16/Aug/2025 05:46:56] "GET /api/loans-by-district HTTP/1.1" 200 -
2025-08-16 05:46:56,047 - INFO - 127.0.0.1 - - [16/Aug/2025 05:46:56] "GET /api/average-ticket-size HTTP/1.1" 200 -
2025-08-16 05:47:00,598 - INFO - 127.0.0.1 - - [16/Aug/2025 05:47:00] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 05:47:00,899 - INFO - 127.0.0.1 - - [16/Aug/2025 05:47:00] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 05:49:42,861 - INFO - 127.0.0.1 - - [16/Aug/2025 05:49:42] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-16 05:49:50,294 - INFO - 127.0.0.1 - - [16/Aug/2025 05:49:50] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 05:49:50,348 - INFO - 127.0.0.1 - - [16/Aug/2025 05:49:50] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 05:50:29,626 - INFO - 127.0.0.1 - - [16/Aug/2025 05:50:29] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-16 05:50:34,796 - INFO - 127.0.0.1 - - [16/Aug/2025 05:50:34] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 05:50:34,854 - INFO - 127.0.0.1 - - [16/Aug/2025 05:50:34] "GET /notifications/sales-summary HTTP/1.1" 200 -
[2025-08-16 07:38:01,058] INFO in app: ==================================================
[2025-08-16 07:38:01,067] INFO in app: Application logging initialized successfully
[2025-08-16 07:38:01,074] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 07:38:01,082] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 07:38:01,085] INFO in app: System encoding: utf-8
[2025-08-16 07:38:01,087] INFO in app: ==================================================
2025-08-16 07:38:01,440 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 07:38:01,441 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 07:38:01,442 - INFO - Scheduler started
2025-08-16 07:38:02,371 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 07:38:02,372 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 07:38:02,383 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-16 07:38:02,383 - INFO - [33mPress CTRL+C to quit[0m
2025-08-16 07:38:06,091 - INFO - 127.0.0.1 - - [16/Aug/2025 07:38:06] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 07:38:07,651 - INFO - 127.0.0.1 - - [16/Aug/2025 07:38:07] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 07:38:08,197 - INFO - 127.0.0.1 - - [16/Aug/2025 07:38:08] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 07:38:16,325 - INFO - 127.0.0.1 - - [16/Aug/2025 07:38:16] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-16 07:38:19,341 - INFO - 127.0.0.1 - - [16/Aug/2025 07:38:19] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-16 07:38:22,629 - INFO - 127.0.0.1 - - [16/Aug/2025 07:38:22] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 07:38:27,230 - INFO - 127.0.0.1 - - [16/Aug/2025 07:38:27] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 07:38:27,428 - INFO - 127.0.0.1 - - [16/Aug/2025 07:38:27] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 07:38:40,261 - INFO - 127.0.0.1 - - [16/Aug/2025 07:38:40] "GET /sales-by-gender HTTP/1.1" 200 -
2025-08-16 07:38:42,000 - INFO - 127.0.0.1 - - [16/Aug/2025 07:38:42] "GET /dashboard/analytics HTTP/1.1" 200 -
2025-08-16 07:38:42,296 - INFO - 127.0.0.1 - - [16/Aug/2025 07:38:42] "GET /api/loans-by-region HTTP/1.1" 200 -
2025-08-16 07:38:42,402 - INFO - 127.0.0.1 - - [16/Aug/2025 07:38:42] "GET /api/loans-by-district HTTP/1.1" 200 -
2025-08-16 07:38:42,406 - INFO - 127.0.0.1 - - [16/Aug/2025 07:38:42] "GET /api/average-ticket-size HTTP/1.1" 200 -
2025-08-16 07:38:44,178 - INFO - 127.0.0.1 - - [16/Aug/2025 07:38:44] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-16 07:38:46,337 - INFO - 127.0.0.1 - - [16/Aug/2025 07:38:46] "GET /sales-by-gender HTTP/1.1" 200 -
2025-08-16 07:38:50,277 - INFO - 127.0.0.1 - - [16/Aug/2025 07:38:50] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 07:38:50,563 - INFO - 127.0.0.1 - - [16/Aug/2025 07:38:50] "GET /notifications/sales-summary HTTP/1.1" 200 -
[2025-08-16 07:42:24,688] INFO in app: ==================================================
[2025-08-16 07:42:24,697] INFO in app: Application logging initialized successfully
[2025-08-16 07:42:24,707] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 07:42:24,711] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 07:42:24,715] INFO in app: System encoding: utf-8
[2025-08-16 07:42:24,717] INFO in app: ==================================================
2025-08-16 07:42:25,277 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 07:42:25,279 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 07:42:25,279 - INFO - Scheduler started
2025-08-16 07:42:26,187 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 07:42:26,187 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 07:42:26,198 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-16 07:42:26,199 - INFO - [33mPress CTRL+C to quit[0m
2025-08-16 07:42:30,336 - INFO - 127.0.0.1 - - [16/Aug/2025 07:42:30] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 07:42:30,963 - INFO - 127.0.0.1 - - [16/Aug/2025 07:42:30] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 07:42:32,758 - INFO - 127.0.0.1 - - [16/Aug/2025 07:42:32] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 07:42:46,785 - INFO - 127.0.0.1 - - [16/Aug/2025 07:42:46] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-16 07:42:53,235 - INFO - 127.0.0.1 - - [16/Aug/2025 07:42:53] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 07:42:53,299 - INFO - 127.0.0.1 - - [16/Aug/2025 07:42:53] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 07:43:42,844 - INFO - 127.0.0.1 - - [16/Aug/2025 07:43:42] "GET /dashboard/team-leader HTTP/1.1" 200 -
[2025-08-16 07:51:44,788] INFO in app: ==================================================
[2025-08-16 07:51:44,797] INFO in app: Application logging initialized successfully
[2025-08-16 07:51:44,801] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 07:51:44,803] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 07:51:44,806] INFO in app: System encoding: utf-8
[2025-08-16 07:51:44,812] INFO in app: ==================================================
2025-08-16 07:51:45,142 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 07:51:45,143 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 07:51:45,143 - INFO - Scheduler started
2025-08-16 07:51:46,221 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 07:51:46,222 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 07:51:46,235 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-16 07:51:46,235 - INFO - [33mPress CTRL+C to quit[0m
2025-08-16 07:51:48,319 - INFO - 127.0.0.1 - - [16/Aug/2025 07:51:48] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-16 07:51:49,423 - INFO - 127.0.0.1 - - [16/Aug/2025 07:51:49] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 07:52:01,752 - INFO - 127.0.0.1 - - [16/Aug/2025 07:52:01] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 07:52:01,899 - INFO - 127.0.0.1 - - [16/Aug/2025 07:52:01] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 07:52:36,352 - INFO - 127.0.0.1 - - [16/Aug/2025 07:52:36] "GET /dashboard/sales?start_date=2023-01-16&end_date=2025-08-16 HTTP/1.1" 200 -
2025-08-16 07:52:36,432 - INFO - 127.0.0.1 - - [16/Aug/2025 07:52:36] "GET /notifications/sales-summary HTTP/1.1" 200 -
[2025-08-16 07:54:20,858] INFO in app: ==================================================
[2025-08-16 07:54:20,865] INFO in app: Application logging initialized successfully
[2025-08-16 07:54:20,866] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 07:54:20,867] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 07:54:20,868] INFO in app: System encoding: utf-8
[2025-08-16 07:54:20,871] INFO in app: ==================================================
2025-08-16 07:54:21,181 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 07:54:21,182 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 07:54:21,183 - INFO - Scheduler started
2025-08-16 07:54:21,819 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 07:54:21,820 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 08:01:49,263 - INFO - 127.0.0.1 - - [16/Aug/2025 08:01:49] "GET /loans HTTP/1.1" 200 -
2025-08-16 08:01:52,104 - INFO - 127.0.0.1 - - [16/Aug/2025 08:01:52] "GET /loanbook HTTP/1.1" 200 -
2025-08-16 08:02:00,125 - INFO - 127.0.0.1 - - [16/Aug/2025 08:02:00] "GET /customer/202507000001/account HTTP/1.1" 200 -
2025-08-16 08:02:01,555 - INFO - 127.0.0.1 - - [16/Aug/2025 08:02:01] "GET /customer/202507000001/account?section=additional HTTP/1.1" 200 -
[2025-08-16 08:02:44,431] INFO in app: Generating repayment schedule for loan 103000019 with disbursement_date=None
2025-08-16 08:02:44,431 - INFO - Generating repayment schedule for loan 103000019 with disbursement_date=None
[2025-08-16 08:02:44,451] INFO in app: First due date: 2025-09-25
2025-08-16 08:02:44,451 - INFO - First due date: 2025-09-25
[2025-08-16 08:02:44,466] INFO in app: Instalment 1: Due 2025-09-25, Principal 746565.36, Interest 81165.00, Fees 5000.00
2025-08-16 08:02:44,466 - INFO - Instalment 1: Due 2025-09-25, Principal 746565.36, Interest 81165.00, Fees 5000.00
[2025-08-16 08:02:44,470] INFO in app: Instalment 2: Due 2025-10-25, Principal 772695.15, Interest 55035.21, Fees 5000.00
2025-08-16 08:02:44,470 - INFO - Instalment 2: Due 2025-10-25, Principal 772695.15, Interest 55035.21, Fees 5000.00
[2025-08-16 08:02:44,473] INFO in app: Instalment 3: Due 2025-11-25, Principal 799739.49, Interest 27990.87, Fees 5000.00
2025-08-16 08:02:44,473 - INFO - Instalment 3: Due 2025-11-25, Principal 799739.49, Interest 27990.87, Fees 5000.00
2025-08-16 08:02:44,510 - INFO - 127.0.0.1 - - [16/Aug/2025 08:02:44] "[32mPOST /apply_additional/1 HTTP/1.1[0m" 302 -
2025-08-16 08:02:44,759 - INFO - 127.0.0.1 - - [16/Aug/2025 08:02:44] "GET /customer/202507000001/account?section=statement HTTP/1.1" 200 -
2025-08-16 08:02:47,257 - INFO - 127.0.0.1 - - [16/Aug/2025 08:02:47] "GET /loans HTTP/1.1" 200 -
2025-08-16 08:02:51,136 - INFO - 127.0.0.1 - - [16/Aug/2025 08:02:51] "[32mPOST /process_loan/19/approve HTTP/1.1[0m" 302 -
2025-08-16 08:02:51,419 - INFO - 127.0.0.1 - - [16/Aug/2025 08:02:51] "GET /loans HTTP/1.1" 200 -
2025-08-16 08:03:01,354 - INFO - 127.0.0.1 - - [16/Aug/2025 08:03:01] "GET /admin/dashboard HTTP/1.1" 200 -
2025-08-16 08:03:04,429 - INFO - 127.0.0.1 - - [16/Aug/2025 08:03:04] "GET /admin/dashboard?section=sales_report HTTP/1.1" 200 -
[2025-08-16 08:03:09,944] INFO in app: Sending email to: alfred@kwachafinancialservices.com, sales@yourcompany.mw
2025-08-16 08:03:09,944 - INFO - Sending email to: alfred@kwachafinancialservices.com, sales@yourcompany.mw
[2025-08-16 08:03:09,949] ERROR in app: Sales data error: module 'time' has no attribute 'min'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 8608, in get_sales_data
    today_sales = get_today_sales(today, filters)
  File "C:\Users\pc\loan-app\app.py", line 8659, in get_today_sales
    start, end = _day_bounds(today)
                 ~~~~~~~~~~~^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8596, in _day_bounds
    start = datetime.combine(d, time.min)
                                ^^^^^^^^
AttributeError: module 'time' has no attribute 'min'
2025-08-16 08:03:09,949 - ERROR - Sales data error: module 'time' has no attribute 'min'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 8608, in get_sales_data
    today_sales = get_today_sales(today, filters)
  File "C:\Users\pc\loan-app\app.py", line 8659, in get_today_sales
    start, end = _day_bounds(today)
                 ~~~~~~~~~~~^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8596, in _day_bounds
    start = datetime.combine(d, time.min)
                                ^^^^^^^^
AttributeError: module 'time' has no attribute 'min'
[2025-08-16 08:03:16,680] INFO in app: HTML email sent to ['alfred@kwachafinancialservices.com', 'sales@yourcompany.mw']
2025-08-16 08:03:16,680 - INFO - HTML email sent to ['alfred@kwachafinancialservices.com', 'sales@yourcompany.mw']
2025-08-16 08:03:16,687 - INFO - 127.0.0.1 - - [16/Aug/2025 08:03:16] "[32mPOST /admin/dashboard?section=sales_report HTTP/1.1[0m" 302 -
2025-08-16 08:03:16,743 - INFO - 127.0.0.1 - - [16/Aug/2025 08:03:16] "GET /admin/dashboard?section=sales_report HTTP/1.1" 200 -
[2025-08-16 08:10:48,525] INFO in app: ==================================================
[2025-08-16 08:10:48,534] INFO in app: Application logging initialized successfully
[2025-08-16 08:10:48,542] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:10:48,545] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:10:48,549] INFO in app: System encoding: utf-8
[2025-08-16 08:10:48,551] INFO in app: ==================================================
2025-08-16 08:10:48,898 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 08:10:48,900 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 08:10:48,900 - INFO - Scheduler started
2025-08-16 08:10:49,943 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 08:10:49,944 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 08:10:49,952 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-16 08:10:49,952 - INFO - [33mPress CTRL+C to quit[0m
2025-08-16 08:10:56,695 - INFO - 127.0.0.1 - - [16/Aug/2025 08:10:56] "GET /admin/dashboard?section=sales_report HTTP/1.1" 200 -
2025-08-16 08:10:58,117 - INFO - 127.0.0.1 - - [16/Aug/2025 08:10:58] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 08:10:59,176 - INFO - 127.0.0.1 - - [16/Aug/2025 08:10:59] "GET / HTTP/1.1" 200 -
2025-08-16 08:11:02,299 - INFO - 127.0.0.1 - - [16/Aug/2025 08:11:02] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 08:11:02,484 - INFO - 127.0.0.1 - - [16/Aug/2025 08:11:02] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 08:11:28,004 - INFO - 127.0.0.1 - - [16/Aug/2025 08:11:28] "GET /dashboard/team-leader HTTP/1.1" 200 -
[2025-08-16 08:14:41,727] INFO in app: ==================================================
[2025-08-16 08:14:41,734] INFO in app: Application logging initialized successfully
[2025-08-16 08:14:41,743] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:14:41,750] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:14:41,753] INFO in app: System encoding: utf-8
[2025-08-16 08:14:41,763] INFO in app: ==================================================
2025-08-16 08:14:42,118 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 08:14:42,120 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 08:14:42,120 - INFO - Scheduler started
2025-08-16 08:14:42,817 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 08:14:42,818 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 08:14:42,826 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-16 08:14:42,826 - INFO - [33mPress CTRL+C to quit[0m
2025-08-16 08:14:48,263 - INFO - 127.0.0.1 - - [16/Aug/2025 08:14:48] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-16 08:14:49,252 - INFO - 127.0.0.1 - - [16/Aug/2025 08:14:49] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 08:14:51,489 - INFO - 127.0.0.1 - - [16/Aug/2025 08:14:51] "GET /dashboard/sales HTTP/1.1" 200 -
[2025-08-16 08:14:51,694] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8216, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time.min)
                                                         ^^^^^^^^
AttributeError: module 'time' has no attribute 'min'
2025-08-16 08:14:51,694 - ERROR - Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8216, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time.min)
                                                         ^^^^^^^^
AttributeError: module 'time' has no attribute 'min'
2025-08-16 08:14:51,866 - INFO - 127.0.0.1 - - [16/Aug/2025 08:14:51] "[35m[1mGET /notifications/sales-summary HTTP/1.1[0m" 500 -
2025-08-16 08:14:53,658 - INFO - 127.0.0.1 - - [16/Aug/2025 08:14:53] "GET /dashboard/sales HTTP/1.1" 200 -
[2025-08-16 08:14:54,722] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8216, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time.min)
                                                         ^^^^^^^^
AttributeError: module 'time' has no attribute 'min'
2025-08-16 08:14:54,722 - ERROR - Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8216, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time.min)
                                                         ^^^^^^^^
AttributeError: module 'time' has no attribute 'min'
2025-08-16 08:14:54,806 - INFO - 127.0.0.1 - - [16/Aug/2025 08:14:54] "[35m[1mGET /notifications/sales-summary HTTP/1.1[0m" 500 -
2025-08-16 08:14:55,159 - INFO - 127.0.0.1 - - [16/Aug/2025 08:14:55] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 08:15:06,171 - INFO - 127.0.0.1 - - [16/Aug/2025 08:15:06] "GET /dashboard/sales HTTP/1.1" 200 -
[2025-08-16 08:15:06,863] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8216, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time.min)
                                                         ^^^^^^^^
AttributeError: module 'time' has no attribute 'min'
2025-08-16 08:15:06,863 - ERROR - Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8216, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time.min)
                                                         ^^^^^^^^
AttributeError: module 'time' has no attribute 'min'
2025-08-16 08:15:06,946 - INFO - 127.0.0.1 - - [16/Aug/2025 08:15:06] "[35m[1mGET /notifications/sales-summary HTTP/1.1[0m" 500 -
2025-08-16 08:15:07,457 - INFO - 127.0.0.1 - - [16/Aug/2025 08:15:07] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 08:15:08,825 - INFO - 127.0.0.1 - - [16/Aug/2025 08:15:08] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-16 08:15:10,309 - INFO - 127.0.0.1 - - [16/Aug/2025 08:15:10] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-16 08:15:11,146 - INFO - 127.0.0.1 - - [16/Aug/2025 08:15:11] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-16 08:17:33,511] INFO in app: ==================================================
[2025-08-16 08:17:33,523] INFO in app: Application logging initialized successfully
[2025-08-16 08:17:33,526] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:17:33,529] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:17:33,534] INFO in app: System encoding: utf-8
[2025-08-16 08:17:33,536] INFO in app: ==================================================
2025-08-16 08:17:33,897 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 08:17:33,901 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 08:17:33,901 - INFO - Scheduler started
2025-08-16 08:17:34,772 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 08:17:34,773 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 08:17:34,783 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-16 08:17:34,783 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-16 08:18:39,239] INFO in app: ==================================================
[2025-08-16 08:18:39,248] INFO in app: Application logging initialized successfully
[2025-08-16 08:18:39,258] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:18:39,261] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:18:39,263] INFO in app: System encoding: utf-8
[2025-08-16 08:18:39,266] INFO in app: ==================================================
2025-08-16 08:18:39,755 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 08:18:39,756 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 08:18:39,756 - INFO - Scheduler started
2025-08-16 08:18:40,745 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 08:18:40,745 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 08:18:40,756 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-16 08:18:40,756 - INFO - [33mPress CTRL+C to quit[0m
2025-08-16 08:18:43,383 - INFO - 127.0.0.1 - - [16/Aug/2025 08:18:43] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-16 08:18:44,429 - INFO - 127.0.0.1 - - [16/Aug/2025 08:18:44] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 08:18:46,380 - INFO - 127.0.0.1 - - [16/Aug/2025 08:18:46] "GET /dashboard/sales HTTP/1.1" 200 -
[2025-08-16 08:18:46,604] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8218, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time.min)  # 00:00:00
                                                         ^^^^^^^^
AttributeError: module 'time' has no attribute 'min'
2025-08-16 08:18:46,604 - ERROR - Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8218, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time.min)  # 00:00:00
                                                         ^^^^^^^^
AttributeError: module 'time' has no attribute 'min'
2025-08-16 08:18:46,638 - INFO - 127.0.0.1 - - [16/Aug/2025 08:18:46] "[35m[1mGET /notifications/sales-summary HTTP/1.1[0m" 500 -
2025-08-16 08:18:49,119 - INFO - 127.0.0.1 - - [16/Aug/2025 08:18:49] "GET /dashboard/sales HTTP/1.1" 200 -
[2025-08-16 08:18:49,507] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8218, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time.min)  # 00:00:00
                                                         ^^^^^^^^
AttributeError: module 'time' has no attribute 'min'
2025-08-16 08:18:49,507 - ERROR - Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8218, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time.min)  # 00:00:00
                                                         ^^^^^^^^
AttributeError: module 'time' has no attribute 'min'
2025-08-16 08:18:49,531 - INFO - 127.0.0.1 - - [16/Aug/2025 08:18:49] "[35m[1mGET /notifications/sales-summary HTTP/1.1[0m" 500 -
2025-08-16 08:18:49,822 - INFO - 127.0.0.1 - - [16/Aug/2025 08:18:49] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 08:19:03,376 - INFO - 127.0.0.1 - - [16/Aug/2025 08:19:03] "GET /dashboard/sales?start_date=2025-08-01&end_date=2025-08-16 HTTP/1.1" 200 -
[2025-08-16 08:19:03,461] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8218, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time.min)  # 00:00:00
                                                         ^^^^^^^^
AttributeError: module 'time' has no attribute 'min'
2025-08-16 08:19:03,461 - ERROR - Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8218, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time.min)  # 00:00:00
                                                         ^^^^^^^^
AttributeError: module 'time' has no attribute 'min'
2025-08-16 08:19:03,491 - INFO - 127.0.0.1 - - [16/Aug/2025 08:19:03] "[35m[1mGET /notifications/sales-summary HTTP/1.1[0m" 500 -
2025-08-16 08:19:14,837 - INFO - 127.0.0.1 - - [16/Aug/2025 08:19:14] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-16 08:19:24,015 - INFO - 127.0.0.1 - - [16/Aug/2025 08:19:24] "GET /dashboard/team-leader?start_date=2025-08-01&end_date=2025-08-16 HTTP/1.1" 200 -
[2025-08-16 08:22:34,839] INFO in app: ==================================================
[2025-08-16 08:22:34,849] INFO in app: Application logging initialized successfully
[2025-08-16 08:22:34,863] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:22:34,866] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:22:34,868] INFO in app: System encoding: utf-8
[2025-08-16 08:22:34,871] INFO in app: ==================================================
2025-08-16 08:22:35,324 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 08:22:35,327 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 08:22:35,327 - INFO - Scheduler started
2025-08-16 08:22:36,613 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 08:22:36,613 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 08:22:36,626 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-16 08:22:36,626 - INFO - [33mPress CTRL+C to quit[0m
2025-08-16 08:22:38,998 - INFO - 127.0.0.1 - - [16/Aug/2025 08:22:38] "GET /dashboard/team-leader?start_date=2025-08-01&end_date=2025-08-16 HTTP/1.1" 200 -
2025-08-16 08:22:42,406 - INFO - 127.0.0.1 - - [16/Aug/2025 08:22:42] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 08:22:45,188 - INFO - 127.0.0.1 - - [16/Aug/2025 08:22:45] "GET /dashboard/sales HTTP/1.1" 200 -
[2025-08-16 08:22:45,427] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8218, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time(0, 0, 0))  # midnight
                                                         ~~~~^^^^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-16 08:22:45,427 - ERROR - Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8218, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time(0, 0, 0))  # midnight
                                                         ~~~~^^^^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-16 08:22:45,456 - INFO - 127.0.0.1 - - [16/Aug/2025 08:22:45] "[35m[1mGET /notifications/sales-summary HTTP/1.1[0m" 500 -
2025-08-16 08:22:47,542 - INFO - 127.0.0.1 - - [16/Aug/2025 08:22:47] "GET /dashboard/sales HTTP/1.1" 200 -
[2025-08-16 08:22:47,811] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8218, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time(0, 0, 0))  # midnight
                                                         ~~~~^^^^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-16 08:22:47,811 - ERROR - Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8218, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time(0, 0, 0))  # midnight
                                                         ~~~~^^^^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-16 08:22:47,847 - INFO - 127.0.0.1 - - [16/Aug/2025 08:22:47] "[35m[1mGET /notifications/sales-summary HTTP/1.1[0m" 500 -
2025-08-16 08:22:48,612 - INFO - 127.0.0.1 - - [16/Aug/2025 08:22:48] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 08:22:56,771 - INFO - 127.0.0.1 - - [16/Aug/2025 08:22:56] "GET /dashboard/sales?start_date=2025-08-01&end_date=2025-08-16 HTTP/1.1" 200 -
[2025-08-16 08:22:56,819] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8218, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time(0, 0, 0))  # midnight
                                                         ~~~~^^^^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-16 08:22:56,819 - ERROR - Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8218, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time(0, 0, 0))  # midnight
                                                         ~~~~^^^^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-16 08:22:56,851 - INFO - 127.0.0.1 - - [16/Aug/2025 08:22:56] "[35m[1mGET /notifications/sales-summary HTTP/1.1[0m" 500 -
[2025-08-16 08:24:15,645] INFO in app: ==================================================
[2025-08-16 08:24:15,659] INFO in app: Application logging initialized successfully
[2025-08-16 08:24:15,667] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:24:15,671] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:24:15,674] INFO in app: System encoding: utf-8
[2025-08-16 08:24:15,676] INFO in app: ==================================================
2025-08-16 08:24:16,044 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 08:24:16,046 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 08:24:16,046 - INFO - Scheduler started
2025-08-16 08:24:17,195 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 08:24:17,195 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 08:24:17,217 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-16 08:24:17,217 - INFO - [33mPress CTRL+C to quit[0m
2025-08-16 08:24:20,960 - INFO - 127.0.0.1 - - [16/Aug/2025 08:24:20] "GET /dashboard/sales?start_date=2025-08-01&end_date=2025-08-16 HTTP/1.1" 200 -
[2025-08-16 08:24:21,419] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8219, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time(0, 0, 0))  # midnight
                                                         ~~~~^^^^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-16 08:24:21,419 - ERROR - Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8219, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time(0, 0, 0))  # midnight
                                                         ~~~~^^^^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-16 08:24:21,444 - INFO - 127.0.0.1 - - [16/Aug/2025 08:24:21] "[35m[1mGET /notifications/sales-summary HTTP/1.1[0m" 500 -
2025-08-16 08:24:22,241 - INFO - 127.0.0.1 - - [16/Aug/2025 08:24:22] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-16 08:25:29,066] INFO in app: ==================================================
[2025-08-16 08:25:29,088] INFO in app: Application logging initialized successfully
[2025-08-16 08:25:29,099] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:25:29,113] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:25:29,115] INFO in app: System encoding: utf-8
[2025-08-16 08:25:29,117] INFO in app: ==================================================
2025-08-16 08:25:29,700 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 08:25:29,702 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 08:25:29,702 - INFO - Scheduler started
2025-08-16 08:25:31,156 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 08:25:31,156 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 08:25:31,179 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-16 08:25:31,179 - INFO - [33mPress CTRL+C to quit[0m
2025-08-16 08:25:33,419 - INFO - 127.0.0.1 - - [16/Aug/2025 08:25:33] "GET /dashboard/sales?start_date=2025-08-01&end_date=2025-08-16 HTTP/1.1" 200 -
[2025-08-16 08:25:33,805] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8218, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time(0, 0, 0))  # midnight
                                                         ~~~~^^^^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-16 08:25:33,805 - ERROR - Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8218, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time(0, 0, 0))  # midnight
                                                         ~~~~^^^^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-16 08:25:33,841 - INFO - 127.0.0.1 - - [16/Aug/2025 08:25:33] "[35m[1mGET /notifications/sales-summary HTTP/1.1[0m" 500 -
2025-08-16 08:25:34,566 - INFO - 127.0.0.1 - - [16/Aug/2025 08:25:34] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-16 08:26:24,873] INFO in app: ==================================================
[2025-08-16 08:26:24,880] INFO in app: Application logging initialized successfully
[2025-08-16 08:26:24,888] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:26:24,895] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:26:24,899] INFO in app: System encoding: utf-8
[2025-08-16 08:26:24,901] INFO in app: ==================================================
2025-08-16 08:26:25,299 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 08:26:25,301 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 08:26:25,301 - INFO - Scheduler started
2025-08-16 08:26:26,152 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 08:26:26,152 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 08:26:26,167 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-16 08:26:26,167 - INFO - [33mPress CTRL+C to quit[0m
2025-08-16 08:26:29,914 - INFO - 127.0.0.1 - - [16/Aug/2025 08:26:29] "GET /dashboard/sales?start_date=2025-08-01&end_date=2025-08-16 HTTP/1.1" 200 -
2025-08-16 08:26:30,312 - INFO - 127.0.0.1 - - [16/Aug/2025 08:26:30] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 08:26:31,004 - INFO - 127.0.0.1 - - [16/Aug/2025 08:26:31] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 08:26:39,817 - INFO - 127.0.0.1 - - [16/Aug/2025 08:26:39] "GET /dashboard/sales?start_date=2025-08-01&end_date=2025-08-16 HTTP/1.1" 200 -
2025-08-16 08:26:39,909 - INFO - 127.0.0.1 - - [16/Aug/2025 08:26:39] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 08:26:48,163 - INFO - 127.0.0.1 - - [16/Aug/2025 08:26:48] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-16 08:26:56,617 - INFO - 127.0.0.1 - - [16/Aug/2025 08:26:56] "GET /dashboard/team-leader?start_date=2025-08-01&end_date=2025-08-01 HTTP/1.1" 200 -
2025-08-16 08:27:03,065 - INFO - 127.0.0.1 - - [16/Aug/2025 08:27:03] "GET /dashboard/team-leader?start_date=2025-08-01&end_date=2025-08-16 HTTP/1.1" 200 -
[2025-08-16 08:38:14,820] INFO in app: ==================================================
[2025-08-16 08:38:14,832] INFO in app: Application logging initialized successfully
[2025-08-16 08:38:14,840] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:38:14,847] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:38:14,850] INFO in app: System encoding: utf-8
[2025-08-16 08:38:14,853] INFO in app: ==================================================
2025-08-16 08:38:15,234 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 08:38:15,235 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 08:38:15,236 - INFO - Scheduler started
2025-08-16 08:38:16,015 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 08:38:16,015 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 08:38:16,031 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-16 08:38:16,031 - INFO - [33mPress CTRL+C to quit[0m
2025-08-16 08:38:19,396 - INFO - 127.0.0.1 - - [16/Aug/2025 08:38:19] "GET /dashboard/team-leader?start_date=2025-08-01&end_date=2025-08-16 HTTP/1.1" 200 -
2025-08-16 08:38:20,255 - INFO - 127.0.0.1 - - [16/Aug/2025 08:38:20] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 08:38:24,763 - INFO - 127.0.0.1 - - [16/Aug/2025 08:38:24] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 08:38:25,009 - INFO - 127.0.0.1 - - [16/Aug/2025 08:38:25] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 08:38:28,781 - INFO - 127.0.0.1 - - [16/Aug/2025 08:38:28] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 08:38:29,232 - INFO - 127.0.0.1 - - [16/Aug/2025 08:38:29] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 08:38:29,563 - INFO - 127.0.0.1 - - [16/Aug/2025 08:38:29] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-16 08:40:58,259] INFO in app: ==================================================
[2025-08-16 08:40:58,266] INFO in app: Application logging initialized successfully
[2025-08-16 08:40:58,271] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:40:58,280] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:40:58,282] INFO in app: System encoding: utf-8
[2025-08-16 08:40:58,284] INFO in app: ==================================================
2025-08-16 08:40:58,616 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 08:40:58,619 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 08:40:58,620 - INFO - Scheduler started
2025-08-16 08:40:59,265 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 08:40:59,265 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 08:40:59,280 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-16 08:40:59,280 - INFO - [33mPress CTRL+C to quit[0m
2025-08-16 08:41:05,392 - INFO - 127.0.0.1 - - [16/Aug/2025 08:41:05] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 08:41:06,176 - INFO - 127.0.0.1 - - [16/Aug/2025 08:41:06] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 08:41:06,934 - INFO - 127.0.0.1 - - [16/Aug/2025 08:41:06] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 08:41:21,585 - INFO - 127.0.0.1 - - [16/Aug/2025 08:41:21] "GET /dashboard/sales?start_date=2025-08-01&end_date=2025-08-16 HTTP/1.1" 200 -
2025-08-16 08:41:21,667 - INFO - 127.0.0.1 - - [16/Aug/2025 08:41:21] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 08:41:28,200 - INFO - 127.0.0.1 - - [16/Aug/2025 08:41:28] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-16 08:41:35,808 - INFO - 127.0.0.1 - - [16/Aug/2025 08:41:35] "GET /dashboard/team-leader?start_date=2025-08-01&end_date=2025-08-16 HTTP/1.1" 200 -
[2025-08-16 08:44:08,266] INFO in app: ==================================================
[2025-08-16 08:44:08,283] INFO in app: Application logging initialized successfully
[2025-08-16 08:44:08,286] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:44:08,288] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:44:08,292] INFO in app: System encoding: utf-8
[2025-08-16 08:44:08,302] INFO in app: ==================================================
2025-08-16 08:44:08,646 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 08:44:08,649 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 08:44:08,649 - INFO - Scheduler started
2025-08-16 08:44:10,030 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 08:44:10,030 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 08:44:10,049 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-16 08:44:10,049 - INFO - [33mPress CTRL+C to quit[0m
2025-08-16 08:44:12,908 - INFO - 127.0.0.1 - - [16/Aug/2025 08:44:12] "GET /dashboard/team-leader?start_date=2025-08-01&end_date=2025-08-16 HTTP/1.1" 200 -
2025-08-16 08:44:13,772 - INFO - 127.0.0.1 - - [16/Aug/2025 08:44:13] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 08:44:17,424 - INFO - 127.0.0.1 - - [16/Aug/2025 08:44:17] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 08:44:17,642 - INFO - 127.0.0.1 - - [16/Aug/2025 08:44:17] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 08:44:21,640 - INFO - 127.0.0.1 - - [16/Aug/2025 08:44:21] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 08:44:22,081 - INFO - 127.0.0.1 - - [16/Aug/2025 08:44:22] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 08:44:22,364 - INFO - 127.0.0.1 - - [16/Aug/2025 08:44:22] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-16 08:46:55,589] INFO in app: ==================================================
[2025-08-16 08:46:55,597] INFO in app: Application logging initialized successfully
[2025-08-16 08:46:55,601] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:46:55,605] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:46:55,609] INFO in app: System encoding: utf-8
[2025-08-16 08:46:55,614] INFO in app: ==================================================
2025-08-16 08:46:56,147 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 08:46:56,150 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 08:46:56,150 - INFO - Scheduler started
2025-08-16 08:46:57,489 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 08:46:57,489 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 08:46:57,499 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-16 08:46:57,499 - INFO - [33mPress CTRL+C to quit[0m
2025-08-16 08:47:00,609 - INFO - 127.0.0.1 - - [16/Aug/2025 08:47:00] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 08:47:00,963 - INFO - 127.0.0.1 - - [16/Aug/2025 08:47:00] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 08:47:01,280 - INFO - 127.0.0.1 - - [16/Aug/2025 08:47:01] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 08:47:21,358 - INFO - 127.0.0.1 - - [16/Aug/2025 08:47:21] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-16 08:47:25,469 - INFO - 127.0.0.1 - - [16/Aug/2025 08:47:25] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-16 08:47:26,565 - INFO - 127.0.0.1 - - [16/Aug/2025 08:47:26] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 08:47:32,820 - INFO - 127.0.0.1 - - [16/Aug/2025 08:47:32] "GET /dashboard/team-leader?start_date=2025-08-01&end_date=2025-08-16 HTTP/1.1" 200 -
[2025-08-16 08:55:50,618] INFO in app: ==================================================
[2025-08-16 08:55:50,626] INFO in app: Application logging initialized successfully
[2025-08-16 08:55:50,633] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:55:50,636] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:55:50,639] INFO in app: System encoding: utf-8
[2025-08-16 08:55:50,642] INFO in app: ==================================================
2025-08-16 08:55:51,004 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 08:55:51,007 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 08:55:51,007 - INFO - Scheduler started
2025-08-16 08:55:51,733 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 08:55:51,733 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 08:55:51,743 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-16 08:55:51,743 - INFO - [33mPress CTRL+C to quit[0m
2025-08-16 08:56:01,251 - INFO - 127.0.0.1 - - [16/Aug/2025 08:56:01] "GET /dashboard/team-leader?start_date=2025-08-01&end_date=2025-08-16 HTTP/1.1" 200 -
2025-08-16 08:56:01,975 - INFO - 127.0.0.1 - - [16/Aug/2025 08:56:01] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 08:56:04,291 - INFO - 127.0.0.1 - - [16/Aug/2025 08:56:04] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 08:56:04,348 - INFO - 127.0.0.1 - - [16/Aug/2025 08:56:04] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 08:56:15,304 - INFO - 127.0.0.1 - - [16/Aug/2025 08:56:15] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 08:56:15,610 - INFO - 127.0.0.1 - - [16/Aug/2025 08:56:15] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 08:56:16,701 - INFO - 127.0.0.1 - - [16/Aug/2025 08:56:16] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 08:58:19,446 - INFO - 127.0.0.1 - - [16/Aug/2025 08:58:19] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 08:58:19,850 - INFO - 127.0.0.1 - - [16/Aug/2025 08:58:19] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 08:58:20,529 - INFO - 127.0.0.1 - - [16/Aug/2025 08:58:20] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 08:58:24,029 - INFO - 127.0.0.1 - - [16/Aug/2025 08:58:24] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 08:58:24,063 - INFO - 127.0.0.1 - - [16/Aug/2025 08:58:24] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 08:58:35,482 - INFO - 127.0.0.1 - - [16/Aug/2025 08:58:35] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-16 08:58:50,076 - INFO - 127.0.0.1 - - [16/Aug/2025 08:58:50] "GET /register HTTP/1.1" 200 -
[2025-08-16 09:01:23,478] ERROR in app: Error saving document: type object 'datetime.time' has no attribute 'time'
2025-08-16 09:01:23,478 - ERROR - Error saving document: type object 'datetime.time' has no attribute 'time'
[2025-08-16 09:01:23,485] ERROR in app: Error saving document: type object 'datetime.time' has no attribute 'time'
2025-08-16 09:01:23,485 - ERROR - Error saving document: type object 'datetime.time' has no attribute 'time'
[2025-08-16 09:01:23,492] ERROR in app: Error saving document: type object 'datetime.time' has no attribute 'time'
2025-08-16 09:01:23,492 - ERROR - Error saving document: type object 'datetime.time' has no attribute 'time'
[2025-08-16 09:01:23,497] ERROR in app: Error saving document: type object 'datetime.time' has no attribute 'time'
2025-08-16 09:01:23,497 - ERROR - Error saving document: type object 'datetime.time' has no attribute 'time'
[2025-08-16 09:01:23,510] ERROR in app: Error saving document: type object 'datetime.time' has no attribute 'time'
2025-08-16 09:01:23,510 - ERROR - Error saving document: type object 'datetime.time' has no attribute 'time'
[2025-08-16 09:01:23,518] ERROR in app: Error saving document: type object 'datetime.time' has no attribute 'time'
2025-08-16 09:01:23,518 - ERROR - Error saving document: type object 'datetime.time' has no attribute 'time'
2025-08-16 09:01:23,537 - INFO - 127.0.0.1 - - [16/Aug/2025 09:01:23] "[32mPOST /register HTTP/1.1[0m" 302 -
2025-08-16 09:01:23,556 - INFO - 127.0.0.1 - - [16/Aug/2025 09:01:23] "GET /register HTTP/1.1" 200 -
2025-08-16 09:02:17,922 - INFO - 127.0.0.1 - - [16/Aug/2025 09:02:17] "GET /loanbook HTTP/1.1" 200 -
2025-08-16 09:02:20,511 - INFO - 127.0.0.1 - - [16/Aug/2025 09:02:20] "GET /customer/202507000001/account HTTP/1.1" 200 -
2025-08-16 09:02:22,594 - INFO - 127.0.0.1 - - [16/Aug/2025 09:02:22] "GET /customer/202507000001/account?section=additional HTTP/1.1" 200 -
[2025-08-16 09:03:03,702] INFO in app: Generating repayment schedule for loan 136000020 with disbursement_date=None
2025-08-16 09:03:03,702 - INFO - Generating repayment schedule for loan 136000020 with disbursement_date=None
[2025-08-16 09:03:03,721] INFO in app: First due date: 2025-09-25
2025-08-16 09:03:03,721 - INFO - First due date: 2025-09-25
[2025-08-16 09:03:03,724] INFO in app: Instalment 1: Due 2025-09-25, Principal 28775.45, Interest 70507.50, Fees 16800.00
2025-08-16 09:03:03,724 - INFO - Instalment 1: Due 2025-09-25, Principal 28775.45, Interest 70507.50, Fees 16800.00
[2025-08-16 09:03:03,728] INFO in app: Instalment 2: Due 2025-10-25, Principal 29782.59, Interest 69500.36, Fees 16800.00
2025-08-16 09:03:03,728 - INFO - Instalment 2: Due 2025-10-25, Principal 29782.59, Interest 69500.36, Fees 16800.00
[2025-08-16 09:03:03,741] INFO in app: Instalment 3: Due 2025-11-25, Principal 30824.98, Interest 68457.97, Fees 16800.00
2025-08-16 09:03:03,741 - INFO - Instalment 3: Due 2025-11-25, Principal 30824.98, Interest 68457.97, Fees 16800.00
[2025-08-16 09:03:03,745] INFO in app: Instalment 4: Due 2025-12-25, Principal 31903.85, Interest 67379.09, Fees 16800.00
2025-08-16 09:03:03,745 - INFO - Instalment 4: Due 2025-12-25, Principal 31903.85, Interest 67379.09, Fees 16800.00
[2025-08-16 09:03:03,756] INFO in app: Instalment 5: Due 2026-01-25, Principal 33020.49, Interest 66262.46, Fees 16800.00
2025-08-16 09:03:03,756 - INFO - Instalment 5: Due 2026-01-25, Principal 33020.49, Interest 66262.46, Fees 16800.00
[2025-08-16 09:03:03,760] INFO in app: Instalment 6: Due 2026-02-25, Principal 34176.20, Interest 65106.74, Fees 16800.00
2025-08-16 09:03:03,760 - INFO - Instalment 6: Due 2026-02-25, Principal 34176.20, Interest 65106.74, Fees 16800.00
[2025-08-16 09:03:03,769] INFO in app: Instalment 7: Due 2026-03-25, Principal 35372.37, Interest 63910.58, Fees 16800.00
2025-08-16 09:03:03,769 - INFO - Instalment 7: Due 2026-03-25, Principal 35372.37, Interest 63910.58, Fees 16800.00
[2025-08-16 09:03:03,783] INFO in app: Instalment 8: Due 2026-04-25, Principal 36610.40, Interest 62672.54, Fees 16800.00
2025-08-16 09:03:03,783 - INFO - Instalment 8: Due 2026-04-25, Principal 36610.40, Interest 62672.54, Fees 16800.00
[2025-08-16 09:03:03,787] INFO in app: Instalment 9: Due 2026-05-25, Principal 37891.77, Interest 61391.18, Fees 16800.00
2025-08-16 09:03:03,787 - INFO - Instalment 9: Due 2026-05-25, Principal 37891.77, Interest 61391.18, Fees 16800.00
[2025-08-16 09:03:03,791] INFO in app: Instalment 10: Due 2026-06-25, Principal 39217.98, Interest 60064.97, Fees 16800.00
2025-08-16 09:03:03,791 - INFO - Instalment 10: Due 2026-06-25, Principal 39217.98, Interest 60064.97, Fees 16800.00
[2025-08-16 09:03:03,796] INFO in app: Instalment 11: Due 2026-07-25, Principal 40590.61, Interest 58692.34, Fees 16800.00
2025-08-16 09:03:03,796 - INFO - Instalment 11: Due 2026-07-25, Principal 40590.61, Interest 58692.34, Fees 16800.00
[2025-08-16 09:03:03,800] INFO in app: Instalment 12: Due 2026-08-25, Principal 42011.28, Interest 57271.67, Fees 16800.00
2025-08-16 09:03:03,800 - INFO - Instalment 12: Due 2026-08-25, Principal 42011.28, Interest 57271.67, Fees 16800.00
[2025-08-16 09:03:03,806] INFO in app: Instalment 13: Due 2026-09-25, Principal 43481.67, Interest 55801.27, Fees 16800.00
2025-08-16 09:03:03,806 - INFO - Instalment 13: Due 2026-09-25, Principal 43481.67, Interest 55801.27, Fees 16800.00
[2025-08-16 09:03:03,809] INFO in app: Instalment 14: Due 2026-10-25, Principal 45003.53, Interest 54279.41, Fees 16800.00
2025-08-16 09:03:03,809 - INFO - Instalment 14: Due 2026-10-25, Principal 45003.53, Interest 54279.41, Fees 16800.00
[2025-08-16 09:03:03,812] INFO in app: Instalment 15: Due 2026-11-25, Principal 46578.66, Interest 52704.29, Fees 16800.00
2025-08-16 09:03:03,812 - INFO - Instalment 15: Due 2026-11-25, Principal 46578.66, Interest 52704.29, Fees 16800.00
[2025-08-16 09:03:03,818] INFO in app: Instalment 16: Due 2026-12-25, Principal 48208.91, Interest 51074.04, Fees 16800.00
2025-08-16 09:03:03,818 - INFO - Instalment 16: Due 2026-12-25, Principal 48208.91, Interest 51074.04, Fees 16800.00
[2025-08-16 09:03:03,822] INFO in app: Instalment 17: Due 2027-01-25, Principal 49896.22, Interest 49386.72, Fees 16800.00
2025-08-16 09:03:03,822 - INFO - Instalment 17: Due 2027-01-25, Principal 49896.22, Interest 49386.72, Fees 16800.00
[2025-08-16 09:03:03,827] INFO in app: Instalment 18: Due 2027-02-25, Principal 51642.59, Interest 47640.36, Fees 16800.00
2025-08-16 09:03:03,827 - INFO - Instalment 18: Due 2027-02-25, Principal 51642.59, Interest 47640.36, Fees 16800.00
[2025-08-16 09:03:03,832] INFO in app: Instalment 19: Due 2027-03-25, Principal 53450.08, Interest 45832.87, Fees 16800.00
2025-08-16 09:03:03,832 - INFO - Instalment 19: Due 2027-03-25, Principal 53450.08, Interest 45832.87, Fees 16800.00
[2025-08-16 09:03:03,839] INFO in app: Instalment 20: Due 2027-04-25, Principal 55320.83, Interest 43962.11, Fees 16800.00
2025-08-16 09:03:03,839 - INFO - Instalment 20: Due 2027-04-25, Principal 55320.83, Interest 43962.11, Fees 16800.00
[2025-08-16 09:03:03,845] INFO in app: Instalment 21: Due 2027-05-25, Principal 57257.06, Interest 42025.88, Fees 16800.00
2025-08-16 09:03:03,845 - INFO - Instalment 21: Due 2027-05-25, Principal 57257.06, Interest 42025.88, Fees 16800.00
[2025-08-16 09:03:03,848] INFO in app: Instalment 22: Due 2027-06-25, Principal 59261.06, Interest 40021.89, Fees 16800.00
2025-08-16 09:03:03,848 - INFO - Instalment 22: Due 2027-06-25, Principal 59261.06, Interest 40021.89, Fees 16800.00
[2025-08-16 09:03:03,851] INFO in app: Instalment 23: Due 2027-07-25, Principal 61335.20, Interest 37947.75, Fees 16800.00
2025-08-16 09:03:03,851 - INFO - Instalment 23: Due 2027-07-25, Principal 61335.20, Interest 37947.75, Fees 16800.00
[2025-08-16 09:03:03,857] INFO in app: Instalment 24: Due 2027-08-25, Principal 63481.93, Interest 35801.02, Fees 16800.00
2025-08-16 09:03:03,857 - INFO - Instalment 24: Due 2027-08-25, Principal 63481.93, Interest 35801.02, Fees 16800.00
[2025-08-16 09:03:03,865] INFO in app: Instalment 25: Due 2027-09-25, Principal 65703.80, Interest 33579.15, Fees 16800.00
2025-08-16 09:03:03,865 - INFO - Instalment 25: Due 2027-09-25, Principal 65703.80, Interest 33579.15, Fees 16800.00
[2025-08-16 09:03:03,867] INFO in app: Instalment 26: Due 2027-10-25, Principal 68003.43, Interest 31279.52, Fees 16800.00
2025-08-16 09:03:03,867 - INFO - Instalment 26: Due 2027-10-25, Principal 68003.43, Interest 31279.52, Fees 16800.00
[2025-08-16 09:03:03,870] INFO in app: Instalment 27: Due 2027-11-25, Principal 70383.55, Interest 28899.40, Fees 16800.00
2025-08-16 09:03:03,870 - INFO - Instalment 27: Due 2027-11-25, Principal 70383.55, Interest 28899.40, Fees 16800.00
[2025-08-16 09:03:03,873] INFO in app: Instalment 28: Due 2027-12-25, Principal 72846.97, Interest 26435.97, Fees 16800.00
2025-08-16 09:03:03,873 - INFO - Instalment 28: Due 2027-12-25, Principal 72846.97, Interest 26435.97, Fees 16800.00
[2025-08-16 09:03:03,884] INFO in app: Instalment 29: Due 2028-01-25, Principal 75396.62, Interest 23886.33, Fees 16800.00
2025-08-16 09:03:03,884 - INFO - Instalment 29: Due 2028-01-25, Principal 75396.62, Interest 23886.33, Fees 16800.00
[2025-08-16 09:03:03,889] INFO in app: Instalment 30: Due 2028-02-25, Principal 78035.50, Interest 21247.45, Fees 16800.00
2025-08-16 09:03:03,889 - INFO - Instalment 30: Due 2028-02-25, Principal 78035.50, Interest 21247.45, Fees 16800.00
[2025-08-16 09:03:03,893] INFO in app: Instalment 31: Due 2028-03-25, Principal 80766.74, Interest 18516.20, Fees 16800.00
2025-08-16 09:03:03,893 - INFO - Instalment 31: Due 2028-03-25, Principal 80766.74, Interest 18516.20, Fees 16800.00
[2025-08-16 09:03:03,900] INFO in app: Instalment 32: Due 2028-04-25, Principal 83593.58, Interest 15689.37, Fees 16800.00
2025-08-16 09:03:03,900 - INFO - Instalment 32: Due 2028-04-25, Principal 83593.58, Interest 15689.37, Fees 16800.00
[2025-08-16 09:03:03,905] INFO in app: Instalment 33: Due 2028-05-25, Principal 86519.35, Interest 12763.59, Fees 16800.00
2025-08-16 09:03:03,905 - INFO - Instalment 33: Due 2028-05-25, Principal 86519.35, Interest 12763.59, Fees 16800.00
[2025-08-16 09:03:03,913] INFO in app: Instalment 34: Due 2028-06-25, Principal 89547.53, Interest 9735.42, Fees 16800.00
2025-08-16 09:03:03,913 - INFO - Instalment 34: Due 2028-06-25, Principal 89547.53, Interest 9735.42, Fees 16800.00
[2025-08-16 09:03:03,917] INFO in app: Instalment 35: Due 2028-07-25, Principal 92681.69, Interest 6601.25, Fees 16800.00
2025-08-16 09:03:03,917 - INFO - Instalment 35: Due 2028-07-25, Principal 92681.69, Interest 6601.25, Fees 16800.00
[2025-08-16 09:03:03,922] INFO in app: Instalment 36: Due 2028-08-25, Principal 95925.53, Interest 3357.42, Fees 16800.00
2025-08-16 09:03:03,922 - INFO - Instalment 36: Due 2028-08-25, Principal 95925.53, Interest 3357.42, Fees 16800.00
2025-08-16 09:03:03,991 - INFO - 127.0.0.1 - - [16/Aug/2025 09:03:03] "[32mPOST /apply_additional/1 HTTP/1.1[0m" 302 -
2025-08-16 09:03:04,051 - INFO - 127.0.0.1 - - [16/Aug/2025 09:03:04] "GET /customer/202507000001/account?section=statement HTTP/1.1" 200 -
2025-08-16 09:03:06,313 - INFO - 127.0.0.1 - - [16/Aug/2025 09:03:06] "GET /loans HTTP/1.1" 200 -
2025-08-16 09:03:10,493 - INFO - 127.0.0.1 - - [16/Aug/2025 09:03:10] "[32mPOST /process_loan/20/approve HTTP/1.1[0m" 302 -
2025-08-16 09:03:10,887 - INFO - 127.0.0.1 - - [16/Aug/2025 09:03:10] "GET /loans HTTP/1.1" 200 -
[2025-08-16 09:03:13,119] INFO in app: [DISBURSEMENT] Loan #112000001 | Top-up of: None | Cash to Client: 1000000.0
2025-08-16 09:03:13,119 - INFO - [DISBURSEMENT] Loan #112000001 | Top-up of: None | Cash to Client: 1000000.0
[2025-08-16 09:03:13,134] INFO in app: [DISBURSEMENT] Loan #136000002 | Top-up of: None | Cash to Client: 1500000.0
2025-08-16 09:03:13,134 - INFO - [DISBURSEMENT] Loan #136000002 | Top-up of: None | Cash to Client: 1500000.0
[2025-08-16 09:03:13,139] INFO in app: [DISBURSEMENT] Loan #124000003 | Top-up of: None | Cash to Client: 1200000.0
2025-08-16 09:03:13,139 - INFO - [DISBURSEMENT] Loan #124000003 | Top-up of: None | Cash to Client: 1200000.0
[2025-08-16 09:03:13,147] INFO in app: [DISBURSEMENT] Loan #118000004 | Top-up of: 1 | Cash to Client: 738713.64
2025-08-16 09:03:13,147 - INFO - [DISBURSEMENT] Loan #118000004 | Top-up of: 1 | Cash to Client: 738713.64
[2025-08-16 09:03:13,267] INFO in app: [DISBURSEMENT] Loan #136000005 | Top-up of: 4 | Cash to Client: 1276296.29
2025-08-16 09:03:13,267 - INFO - [DISBURSEMENT] Loan #136000005 | Top-up of: 4 | Cash to Client: 1276296.29
[2025-08-16 09:03:13,379] INFO in app: [DISBURSEMENT] Loan #136000006 | Top-up of: 2 | Cash to Client: 777034.17
2025-08-16 09:03:13,379 - INFO - [DISBURSEMENT] Loan #136000006 | Top-up of: 2 | Cash to Client: 777034.17
[2025-08-16 09:03:13,402] INFO in app: [DISBURSEMENT] Loan #124000007 | Top-up of: 6 | Cash to Client: 3557378.79
2025-08-16 09:03:13,402 - INFO - [DISBURSEMENT] Loan #124000007 | Top-up of: 6 | Cash to Client: 3557378.79
[2025-08-16 09:03:13,405] INFO in app: [DISBURSEMENT] Loan #124000008 | Top-up of: 3 | Cash to Client: 2360732.08
2025-08-16 09:03:13,405 - INFO - [DISBURSEMENT] Loan #124000008 | Top-up of: 3 | Cash to Client: 2360732.08
[2025-08-16 09:03:13,433] INFO in app: [DISBURSEMENT] Loan #103000009 | Top-up of: None | Cash to Client: 1200000.0
2025-08-16 09:03:13,433 - INFO - [DISBURSEMENT] Loan #103000009 | Top-up of: None | Cash to Client: 1200000.0
[2025-08-16 09:03:13,436] INFO in app: [DISBURSEMENT] Loan #124000012 | Top-up of: 7 | Cash to Client: 4090282.96
2025-08-16 09:03:13,436 - INFO - [DISBURSEMENT] Loan #124000012 | Top-up of: 7 | Cash to Client: 4090282.96
[2025-08-16 09:03:13,446] INFO in app: [DISBURSEMENT] Loan #103000019 | Top-up of: None | Cash to Client: 2000000.0
2025-08-16 09:03:13,446 - INFO - [DISBURSEMENT] Loan #103000019 | Top-up of: None | Cash to Client: 2000000.0
[2025-08-16 09:03:13,448] INFO in app: [DISBURSEMENT] Loan #136000020 | Top-up of: None | Cash to Client: 1500000.0
2025-08-16 09:03:13,448 - INFO - [DISBURSEMENT] Loan #136000020 | Top-up of: None | Cash to Client: 1500000.0
2025-08-16 09:03:13,492 - INFO - 127.0.0.1 - - [16/Aug/2025 09:03:13] "GET /disbursements HTTP/1.1" 200 -
[2025-08-16 09:03:25,028] ERROR in app: [DISBURSE] Error for loan 112000001: 'LoanApplication' object has no attribute 'repayment_schedule'
2025-08-16 09:03:25,028 - ERROR - [DISBURSE] Error for loan 112000001: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:25,037] ERROR in app: [DISBURSE] Error for loan 136000002: 'LoanApplication' object has no attribute 'repayment_schedule'
2025-08-16 09:03:25,037 - ERROR - [DISBURSE] Error for loan 136000002: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:25,051] ERROR in app: [DISBURSE] Error for loan 124000003: 'LoanApplication' object has no attribute 'repayment_schedule'
2025-08-16 09:03:25,051 - ERROR - [DISBURSE] Error for loan 124000003: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:25,061] ERROR in app: [DISBURSE] Error for loan 118000004: 'LoanApplication' object has no attribute 'repayment_schedule'
2025-08-16 09:03:25,061 - ERROR - [DISBURSE] Error for loan 118000004: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:25,078] ERROR in app: [DISBURSE] Error for loan 136000005: 'LoanApplication' object has no attribute 'repayment_schedule'
2025-08-16 09:03:25,078 - ERROR - [DISBURSE] Error for loan 136000005: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:25,099] ERROR in app: [DISBURSE] Error for loan 136000006: 'LoanApplication' object has no attribute 'repayment_schedule'
2025-08-16 09:03:25,099 - ERROR - [DISBURSE] Error for loan 136000006: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:25,111] ERROR in app: [DISBURSE] Error for loan 124000007: 'LoanApplication' object has no attribute 'repayment_schedule'
2025-08-16 09:03:25,111 - ERROR - [DISBURSE] Error for loan 124000007: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:25,120] ERROR in app: [DISBURSE] Error for loan 124000008: 'LoanApplication' object has no attribute 'repayment_schedule'
2025-08-16 09:03:25,120 - ERROR - [DISBURSE] Error for loan 124000008: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:25,139] ERROR in app: [DISBURSE] Error for loan 103000009: 'LoanApplication' object has no attribute 'repayment_schedule'
2025-08-16 09:03:25,139 - ERROR - [DISBURSE] Error for loan 103000009: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:25,155] ERROR in app: [DISBURSE] Error for loan 124000012: 'LoanApplication' object has no attribute 'repayment_schedule'
2025-08-16 09:03:25,155 - ERROR - [DISBURSE] Error for loan 124000012: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:25,161] ERROR in app: [DISBURSE] Error for loan 103000019: 'LoanApplication' object has no attribute 'repayment_schedule'
2025-08-16 09:03:25,161 - ERROR - [DISBURSE] Error for loan 103000019: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:25,166] ERROR in app: [DISBURSE] Error for loan 136000020: 'LoanApplication' object has no attribute 'repayment_schedule'
2025-08-16 09:03:25,166 - ERROR - [DISBURSE] Error for loan 136000020: 'LoanApplication' object has no attribute 'repayment_schedule'
2025-08-16 09:03:27,335 - INFO - 127.0.0.1 - - [16/Aug/2025 09:03:27] "[32mPOST /disbursements HTTP/1.1[0m" 302 -
[2025-08-16 09:03:27,348] INFO in app: [DISBURSEMENT] Loan #112000001 | Top-up of: None | Cash to Client: 1000000.0
2025-08-16 09:03:27,348 - INFO - [DISBURSEMENT] Loan #112000001 | Top-up of: None | Cash to Client: 1000000.0
[2025-08-16 09:03:27,353] INFO in app: [DISBURSEMENT] Loan #136000002 | Top-up of: None | Cash to Client: 1500000.0
2025-08-16 09:03:27,353 - INFO - [DISBURSEMENT] Loan #136000002 | Top-up of: None | Cash to Client: 1500000.0
[2025-08-16 09:03:27,360] INFO in app: [DISBURSEMENT] Loan #124000003 | Top-up of: None | Cash to Client: 1200000.0
2025-08-16 09:03:27,360 - INFO - [DISBURSEMENT] Loan #124000003 | Top-up of: None | Cash to Client: 1200000.0
[2025-08-16 09:03:27,367] INFO in app: [DISBURSEMENT] Loan #118000004 | Top-up of: 1 | Cash to Client: 738713.64
2025-08-16 09:03:27,367 - INFO - [DISBURSEMENT] Loan #118000004 | Top-up of: 1 | Cash to Client: 738713.64
[2025-08-16 09:03:27,373] INFO in app: [DISBURSEMENT] Loan #136000005 | Top-up of: 4 | Cash to Client: 1276296.29
2025-08-16 09:03:27,373 - INFO - [DISBURSEMENT] Loan #136000005 | Top-up of: 4 | Cash to Client: 1276296.29
[2025-08-16 09:03:27,382] INFO in app: [DISBURSEMENT] Loan #136000006 | Top-up of: 2 | Cash to Client: 777034.17
2025-08-16 09:03:27,382 - INFO - [DISBURSEMENT] Loan #136000006 | Top-up of: 2 | Cash to Client: 777034.17
[2025-08-16 09:03:27,384] INFO in app: [DISBURSEMENT] Loan #124000007 | Top-up of: 6 | Cash to Client: 3557378.79
2025-08-16 09:03:27,384 - INFO - [DISBURSEMENT] Loan #124000007 | Top-up of: 6 | Cash to Client: 3557378.79
[2025-08-16 09:03:27,388] INFO in app: [DISBURSEMENT] Loan #124000008 | Top-up of: 3 | Cash to Client: 2360732.08
2025-08-16 09:03:27,388 - INFO - [DISBURSEMENT] Loan #124000008 | Top-up of: 3 | Cash to Client: 2360732.08
[2025-08-16 09:03:27,391] INFO in app: [DISBURSEMENT] Loan #103000009 | Top-up of: None | Cash to Client: 1200000.0
2025-08-16 09:03:27,391 - INFO - [DISBURSEMENT] Loan #103000009 | Top-up of: None | Cash to Client: 1200000.0
[2025-08-16 09:03:27,406] INFO in app: [DISBURSEMENT] Loan #124000012 | Top-up of: 7 | Cash to Client: 4090282.96
2025-08-16 09:03:27,406 - INFO - [DISBURSEMENT] Loan #124000012 | Top-up of: 7 | Cash to Client: 4090282.96
[2025-08-16 09:03:27,411] INFO in app: [DISBURSEMENT] Loan #103000019 | Top-up of: None | Cash to Client: 2000000.0
2025-08-16 09:03:27,411 - INFO - [DISBURSEMENT] Loan #103000019 | Top-up of: None | Cash to Client: 2000000.0
[2025-08-16 09:03:27,416] INFO in app: [DISBURSEMENT] Loan #136000020 | Top-up of: None | Cash to Client: 1500000.0
2025-08-16 09:03:27,416 - INFO - [DISBURSEMENT] Loan #136000020 | Top-up of: None | Cash to Client: 1500000.0
2025-08-16 09:03:27,430 - INFO - 127.0.0.1 - - [16/Aug/2025 09:03:27] "GET /disbursements HTTP/1.1" 200 -
2025-08-16 09:03:27,901 - INFO - 127.0.0.1 - - [16/Aug/2025 09:03:27] "GET /loanbook HTTP/1.1" 200 -
2025-08-16 09:03:38,524 - INFO - 127.0.0.1 - - [16/Aug/2025 09:03:38] "GET / HTTP/1.1" 200 -
2025-08-16 09:03:42,388 - INFO - 127.0.0.1 - - [16/Aug/2025 09:03:42] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 09:03:42,679 - INFO - 127.0.0.1 - - [16/Aug/2025 09:03:42] "GET /notifications/sales-summary HTTP/1.1" 200 -
[2025-08-16 09:08:54,078] INFO in app: ==================================================
[2025-08-16 09:08:54,087] INFO in app: Application logging initialized successfully
[2025-08-16 09:08:54,095] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 09:08:54,117] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 09:08:54,119] INFO in app: System encoding: utf-8
[2025-08-16 09:08:54,121] INFO in app: ==================================================
2025-08-16 09:08:54,609 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 09:08:54,612 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 09:08:54,613 - INFO - Scheduler started
2025-08-16 09:08:55,471 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 09:08:55,471 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 09:08:55,481 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-16 09:08:55,481 - INFO - [33mPress CTRL+C to quit[0m
2025-08-16 09:08:59,929 - INFO - 127.0.0.1 - - [16/Aug/2025 09:08:59] "GET /dashboard/sales HTTP/1.1" 200 -
[2025-08-16 09:09:00,419] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8253, in sales_summary_notification
    func.coalesce(func.sum(func.case([(LoanApplication.created_at >= datetime.combine(today, datetime.min.time()),
                           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                                       LoanApplication.loan_amount)], else_=0)), 0).label("todays_sales")
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\functions.py", line 977, in __call__
    return Function(
        self.__names[-1], packagenames=tuple(self.__names[0:-1]), *c, **o
    )
TypeError: Function.__init__() got an unexpected keyword argument 'else_'
2025-08-16 09:09:00,419 - ERROR - Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8253, in sales_summary_notification
    func.coalesce(func.sum(func.case([(LoanApplication.created_at >= datetime.combine(today, datetime.min.time()),
                           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                                       LoanApplication.loan_amount)], else_=0)), 0).label("todays_sales")
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\functions.py", line 977, in __call__
    return Function(
        self.__names[-1], packagenames=tuple(self.__names[0:-1]), *c, **o
    )
TypeError: Function.__init__() got an unexpected keyword argument 'else_'
2025-08-16 09:09:00,474 - INFO - 127.0.0.1 - - [16/Aug/2025 09:09:00] "[35m[1mGET /notifications/sales-summary HTTP/1.1[0m" 500 -
2025-08-16 09:09:01,161 - INFO - 127.0.0.1 - - [16/Aug/2025 09:09:01] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 09:09:08,192 - INFO - 127.0.0.1 - - [16/Aug/2025 09:09:08] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-16 09:09:13,048 - INFO - 127.0.0.1 - - [16/Aug/2025 09:09:13] "GET /dashboard/sales HTTP/1.1" 200 -
[2025-08-16 09:09:13,103] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8253, in sales_summary_notification
    func.coalesce(func.sum(func.case([(LoanApplication.created_at >= datetime.combine(today, datetime.min.time()),
                           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                                       LoanApplication.loan_amount)], else_=0)), 0).label("todays_sales")
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\functions.py", line 977, in __call__
    return Function(
        self.__names[-1], packagenames=tuple(self.__names[0:-1]), *c, **o
    )
TypeError: Function.__init__() got an unexpected keyword argument 'else_'
2025-08-16 09:09:13,103 - ERROR - Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8253, in sales_summary_notification
    func.coalesce(func.sum(func.case([(LoanApplication.created_at >= datetime.combine(today, datetime.min.time()),
                           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                                       LoanApplication.loan_amount)], else_=0)), 0).label("todays_sales")
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\functions.py", line 977, in __call__
    return Function(
        self.__names[-1], packagenames=tuple(self.__names[0:-1]), *c, **o
    )
TypeError: Function.__init__() got an unexpected keyword argument 'else_'
2025-08-16 09:09:13,140 - INFO - 127.0.0.1 - - [16/Aug/2025 09:09:13] "[35m[1mGET /notifications/sales-summary HTTP/1.1[0m" 500 -
[2025-08-16 09:15:54,465] INFO in app: ==================================================
[2025-08-16 09:15:54,475] INFO in app: Application logging initialized successfully
[2025-08-16 09:15:54,478] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 09:15:54,482] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 09:15:54,487] INFO in app: System encoding: utf-8
[2025-08-16 09:15:54,492] INFO in app: ==================================================
2025-08-16 09:15:54,850 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 09:15:54,852 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 09:15:54,852 - INFO - Scheduler started
2025-08-16 09:15:55,608 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 09:15:55,608 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 09:15:55,620 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-16 09:15:55,620 - INFO - [33mPress CTRL+C to quit[0m
2025-08-16 09:15:59,710 - INFO - 127.0.0.1 - - [16/Aug/2025 09:15:59] "GET /dashboard/sales HTTP/1.1" 200 -
[2025-08-16 09:16:00,158] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8257, in sales_summary_notification
    case(
    ~~~~^
        [
        ^
    ...<6 lines>...
        else_=0
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\_elements_constructors.py", line 853, in case
    return Case(*whens, value=value, else_=else_)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 3339, in __init__
    new_whens: Iterable[Any] = coercions._expression_collection_was_a_list(
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        "whens", "case", whens
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 151, in _expression_collection_was_a_list
    raise exc.ArgumentError(
    ...<4 lines>...
    )
sqlalchemy.exc.ArgumentError: The "whens" argument to case(), when referring to a sequence of items, is now passed as a series of positional elements, rather than as a list. 
2025-08-16 09:16:00,158 - ERROR - Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8257, in sales_summary_notification
    case(
    ~~~~^
        [
        ^
    ...<6 lines>...
        else_=0
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\_elements_constructors.py", line 853, in case
    return Case(*whens, value=value, else_=else_)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 3339, in __init__
    new_whens: Iterable[Any] = coercions._expression_collection_was_a_list(
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        "whens", "case", whens
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 151, in _expression_collection_was_a_list
    raise exc.ArgumentError(
    ...<4 lines>...
    )
sqlalchemy.exc.ArgumentError: The "whens" argument to case(), when referring to a sequence of items, is now passed as a series of positional elements, rather than as a list. 
2025-08-16 09:16:00,273 - INFO - 127.0.0.1 - - [16/Aug/2025 09:16:00] "[35m[1mGET /notifications/sales-summary HTTP/1.1[0m" 500 -
2025-08-16 09:16:00,809 - INFO - 127.0.0.1 - - [16/Aug/2025 09:16:00] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-16 09:18:35,740] INFO in app: ==================================================
[2025-08-16 09:18:35,748] INFO in app: Application logging initialized successfully
[2025-08-16 09:18:35,753] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 09:18:35,756] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 09:18:35,764] INFO in app: System encoding: utf-8
[2025-08-16 09:18:35,766] INFO in app: ==================================================
2025-08-16 09:18:36,204 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 09:18:36,207 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 09:18:36,207 - INFO - Scheduler started
2025-08-16 09:18:37,350 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 09:18:37,350 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 09:18:37,369 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-16 09:18:37,369 - INFO - [33mPress CTRL+C to quit[0m
2025-08-16 09:18:40,799 - INFO - 127.0.0.1 - - [16/Aug/2025 09:18:40] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 09:18:41,379 - INFO - 127.0.0.1 - - [16/Aug/2025 09:18:41] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 09:18:43,102 - INFO - 127.0.0.1 - - [16/Aug/2025 09:18:43] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-16 09:18:48,312 - INFO - 127.0.0.1 - - [16/Aug/2025 09:18:48] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-16 09:19:03,949 - INFO - 127.0.0.1 - - [16/Aug/2025 09:19:03] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-16 09:19:04,006 - INFO - 127.0.0.1 - - [16/Aug/2025 09:19:04] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-16 09:24:52,802 - INFO - 127.0.0.1 - - [16/Aug/2025 09:24:52] "GET /admin/dashboard HTTP/1.1" 200 -
2025-08-16 09:24:55,160 - INFO - 127.0.0.1 - - [16/Aug/2025 09:24:55] "GET /admin/reports HTTP/1.1" 200 -
2025-08-16 09:24:57,272 - INFO - 127.0.0.1 - - [16/Aug/2025 09:24:57] "GET /admin/dashboard?section=sales_report HTTP/1.1" 200 -
[2025-08-16 09:25:01,080] INFO in app: Sending email to: alfred@kwachafinancialservices.com, sales@yourcompany.mw
2025-08-16 09:25:01,080 - INFO - Sending email to: alfred@kwachafinancialservices.com, sales@yourcompany.mw
[2025-08-16 09:25:07,040] INFO in app: HTML email sent to ['alfred@kwachafinancialservices.com', 'sales@yourcompany.mw']
2025-08-16 09:25:07,040 - INFO - HTML email sent to ['alfred@kwachafinancialservices.com', 'sales@yourcompany.mw']
2025-08-16 09:25:07,056 - INFO - 127.0.0.1 - - [16/Aug/2025 09:25:07] "[32mPOST /admin/dashboard?section=sales_report HTTP/1.1[0m" 302 -
2025-08-16 09:25:07,103 - INFO - 127.0.0.1 - - [16/Aug/2025 09:25:07] "GET /admin/dashboard?section=sales_report HTTP/1.1" 200 -
[2025-08-16 16:10:27,782] INFO in app: ==================================================
[2025-08-16 16:10:27,853] INFO in app: Application logging initialized successfully
[2025-08-16 16:10:27,854] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 16:10:27,856] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 16:10:27,858] INFO in app: System encoding: utf-8
[2025-08-16 16:10:27,860] INFO in app: ==================================================
2025-08-16 16:10:28,233 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-16 16:10:28,235 - INFO - Added job "snapshot_par" to job store "default"
2025-08-16 16:10:28,235 - INFO - Scheduler started
2025-08-16 16:10:28,937 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-16 16:10:28,937 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-16 16:10:28,964 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-16 16:10:28,965 - INFO - [33mPress CTRL+C to quit[0m
2025-08-16 16:25:16,682 - INFO - 127.0.0.1 - - [16/Aug/2025 16:25:16] "GET /admin/dashboard?section=sales_report HTTP/1.1" 200 -
2025-08-16 16:25:17,738 - INFO - 127.0.0.1 - - [16/Aug/2025 16:25:17] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-17 08:56:26,838] INFO in app: ==================================================
[2025-08-17 08:56:26,957] INFO in app: Application logging initialized successfully
[2025-08-17 08:56:26,964] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 08:56:26,970] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 08:56:26,985] INFO in app: System encoding: utf-8
[2025-08-17 08:56:26,989] INFO in app: ==================================================
2025-08-17 08:56:27,427 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-17 08:56:27,430 - INFO - Added job "snapshot_par" to job store "default"
2025-08-17 08:56:27,430 - INFO - Scheduler started
2025-08-17 08:56:28,291 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-17 08:56:28,291 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-17 08:56:28,320 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-17 08:56:28,320 - INFO - [33mPress CTRL+C to quit[0m
2025-08-17 09:01:54,046 - INFO - 127.0.0.1 - - [17/Aug/2025 09:01:54] "GET /admin/dashboard?section=sales_report HTTP/1.1" 200 -
2025-08-17 09:01:55,794 - INFO - 127.0.0.1 - - [17/Aug/2025 09:01:55] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-08-17 09:01:55,911 - INFO - 127.0.0.1 - - [17/Aug/2025 09:01:55] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-17 09:02:04,259 - INFO - 127.0.0.1 - - [17/Aug/2025 09:02:04] "GET / HTTP/1.1" 200 -
2025-08-17 09:02:10,745 - INFO - 127.0.0.1 - - [17/Aug/2025 09:02:10] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-17 09:02:10,786 - INFO - 127.0.0.1 - - [17/Aug/2025 09:02:10] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-17 09:02:12,553 - INFO - 127.0.0.1 - - [17/Aug/2025 09:02:12] "GET /agents/team/add HTTP/1.1" 200 -
2025-08-17 09:03:10,312 - INFO - 127.0.0.1 - - [17/Aug/2025 09:03:10] "[32mPOST /agents/team/add HTTP/1.1[0m" 302 -
2025-08-17 09:03:10,361 - INFO - 127.0.0.1 - - [17/Aug/2025 09:03:10] "GET /agents HTTP/1.1" 200 -
[2025-08-17 09:25:16,430] INFO in app: ==================================================
[2025-08-17 09:25:16,440] INFO in app: Application logging initialized successfully
[2025-08-17 09:25:16,444] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 09:25:16,453] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 09:25:16,459] INFO in app: System encoding: utf-8
[2025-08-17 09:25:16,463] INFO in app: ==================================================
2025-08-17 09:25:16,886 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-17 09:25:16,888 - INFO - Added job "snapshot_par" to job store "default"
2025-08-17 09:25:16,888 - INFO - Scheduler started
2025-08-17 09:25:17,652 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-17 09:25:17,653 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-17 09:25:17,661 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-17 09:25:17,661 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-17 15:09:32,299] INFO in app: ==================================================
[2025-08-17 15:09:32,390] INFO in app: Application logging initialized successfully
[2025-08-17 15:09:32,392] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 15:09:32,393] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 15:09:32,395] INFO in app: System encoding: utf-8
[2025-08-17 15:09:32,399] INFO in app: ==================================================
2025-08-17 15:09:32,917 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-17 15:09:32,930 - INFO - Added job "snapshot_par" to job store "default"
2025-08-17 15:09:32,930 - INFO - Scheduler started
2025-08-17 15:09:34,025 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-17 15:09:34,026 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-17 15:09:34,064 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-17 15:09:34,065 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-17 15:48:11,780] INFO in app: ==================================================
[2025-08-17 15:48:11,791] INFO in app: Application logging initialized successfully
[2025-08-17 15:48:11,793] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 15:48:11,797] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 15:48:11,804] INFO in app: System encoding: utf-8
[2025-08-17 15:48:11,807] INFO in app: ==================================================
2025-08-17 15:48:12,222 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-17 15:48:12,224 - INFO - Added job "snapshot_par" to job store "default"
2025-08-17 15:48:12,224 - INFO - Scheduler started
2025-08-17 15:48:13,424 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-17 15:48:13,425 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-17 15:48:13,456 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-17 15:48:13,456 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-17 15:55:32,669] INFO in app: ==================================================
[2025-08-17 15:55:32,675] INFO in app: Application logging initialized successfully
[2025-08-17 15:55:32,678] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 15:55:32,679] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 15:55:32,685] INFO in app: System encoding: utf-8
[2025-08-17 15:55:32,687] INFO in app: ==================================================
2025-08-17 15:55:32,974 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-17 15:55:32,976 - INFO - Added job "snapshot_par" to job store "default"
2025-08-17 15:55:32,976 - INFO - Scheduler started
2025-08-17 15:55:33,834 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-17 15:55:33,835 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-17 15:55:33,845 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-17 15:55:33,845 - INFO - [33mPress CTRL+C to quit[0m
2025-08-17 15:56:50,830 - INFO - 127.0.0.1 - - [17/Aug/2025 15:56:50] "GET /agents HTTP/1.1" 200 -
2025-08-17 15:56:51,670 - INFO - 127.0.0.1 - - [17/Aug/2025 15:56:51] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-17 15:56:56,892 - INFO - 127.0.0.1 - - [17/Aug/2025 15:56:56] "GET /loans HTTP/1.1" 200 -
2025-08-17 15:57:06,327 - INFO - 127.0.0.1 - - [17/Aug/2025 15:57:06] "GET /loans/19/edit HTTP/1.1" 200 -
2025-08-17 15:57:31,315 - INFO - 127.0.0.1 - - [17/Aug/2025 15:57:31] "[32mPOST /loans/19/edit HTTP/1.1[0m" 302 -
2025-08-17 15:57:31,649 - INFO - 127.0.0.1 - - [17/Aug/2025 15:57:31] "GET /loans/19/edit HTTP/1.1" 200 -
[2025-08-17 15:58:05,623] INFO in app: ==================================================
[2025-08-17 15:58:05,632] INFO in app: Application logging initialized successfully
[2025-08-17 15:58:05,634] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 15:58:05,636] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 15:58:05,640] INFO in app: System encoding: utf-8
[2025-08-17 15:58:05,644] INFO in app: ==================================================
2025-08-17 15:58:05,921 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-17 15:58:05,923 - INFO - Added job "snapshot_par" to job store "default"
2025-08-17 15:58:05,923 - INFO - Scheduler started
2025-08-17 15:58:06,657 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-17 15:58:06,657 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-17 15:58:06,670 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-17 15:58:06,670 - INFO - [33mPress CTRL+C to quit[0m
2025-08-17 15:58:08,066 - INFO - 127.0.0.1 - - [17/Aug/2025 15:58:08] "GET /loans/19/edit HTTP/1.1" 200 -
2025-08-17 15:58:08,894 - INFO - 127.0.0.1 - - [17/Aug/2025 15:58:08] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-17 15:58:29,020 - INFO - 127.0.0.1 - - [17/Aug/2025 15:58:29] "[32mPOST /loans/19/edit HTTP/1.1[0m" 302 -
2025-08-17 15:58:29,350 - INFO - 127.0.0.1 - - [17/Aug/2025 15:58:29] "GET /loans/19/edit HTTP/1.1" 200 -
[2025-08-17 16:55:17,798] INFO in app: ==================================================
[2025-08-17 16:55:17,808] INFO in app: Application logging initialized successfully
[2025-08-17 16:55:17,819] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 16:55:17,823] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 16:55:17,827] INFO in app: System encoding: utf-8
[2025-08-17 16:55:17,853] INFO in app: ==================================================
2025-08-17 16:55:18,284 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-17 16:55:18,285 - INFO - Added job "snapshot_par" to job store "default"
2025-08-17 16:55:18,285 - INFO - Scheduler started
2025-08-17 16:55:19,407 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-17 16:55:19,408 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-17 16:55:19,418 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-17 16:55:19,418 - INFO - [33mPress CTRL+C to quit[0m
2025-08-17 16:56:02,937 - INFO - 127.0.0.1 - - [17/Aug/2025 16:56:02] "GET /loans/19/edit HTTP/1.1" 200 -
2025-08-17 16:56:03,989 - INFO - 127.0.0.1 - - [17/Aug/2025 16:56:03] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-17 16:56:15,113 - INFO - 127.0.0.1 - - [17/Aug/2025 16:56:15] "[32mPOST /loans/19/edit HTTP/1.1[0m" 302 -
2025-08-17 16:56:15,437 - INFO - 127.0.0.1 - - [17/Aug/2025 16:56:15] "GET /loans/19/edit HTTP/1.1" 200 -
2025-08-17 17:00:00,011 - INFO - Running job "send_sales_notification_email (trigger: cron[hour='17', minute='0'], next run at: 2025-08-17 17:00:00 CAT)" (scheduled at 2025-08-17 17:00:00+02:00)
2025-08-17 17:00:00,072 - ERROR - Job "send_sales_notification_email (trigger: cron[hour='17', minute='0'], next run at: 2025-08-18 17:00:00 CAT)" raised an exception
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\apscheduler\executors\base.py", line 131, in run_job
    retval = job.func(*job.args, **job.kwargs)
  File "C:\Users\pc\loan-app\app.py", line 9607, in send_sales_notification_email
    db.session.rollback()
    ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 1794, in rollback
    return self._proxied.rollback()
           ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 197, in _proxied
    return self.registry()
           ~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 634, in __call__
    key = self.scopefunc()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_sqlalchemy\session.py", line 111, in _app_ctx_id
    return id(app_ctx._get_current_object())  # type: ignore[attr-defined]
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
[2025-08-17 17:05:18,284] INFO in app: ==================================================
[2025-08-17 17:05:18,293] INFO in app: Application logging initialized successfully
[2025-08-17 17:05:18,296] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 17:05:18,299] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 17:05:18,305] INFO in app: System encoding: utf-8
[2025-08-17 17:05:18,310] INFO in app: ==================================================
2025-08-17 17:05:18,695 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-17 17:05:18,696 - INFO - Added job "snapshot_par" to job store "default"
2025-08-17 17:05:18,697 - INFO - Scheduler started
2025-08-17 17:05:19,839 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-17 17:05:19,841 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-17 17:05:19,850 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-17 17:05:19,850 - INFO - [33mPress CTRL+C to quit[0m
2025-08-17 17:05:27,880 - INFO - 127.0.0.1 - - [17/Aug/2025 17:05:27] "GET /loans/19/edit HTTP/1.1" 200 -
2025-08-17 17:05:29,362 - INFO - 127.0.0.1 - - [17/Aug/2025 17:05:29] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-17 17:05:36,266 - INFO - 127.0.0.1 - - [17/Aug/2025 17:05:36] "[32mPOST /loans/19/edit HTTP/1.1[0m" 302 -
2025-08-17 17:05:36,567 - INFO - 127.0.0.1 - - [17/Aug/2025 17:05:36] "GET /loans/19/edit HTTP/1.1" 200 -
[2025-08-17 17:09:16,761] INFO in app: ==================================================
[2025-08-17 17:09:16,770] INFO in app: Application logging initialized successfully
[2025-08-17 17:09:16,774] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 17:09:16,781] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 17:09:16,785] INFO in app: System encoding: utf-8
[2025-08-17 17:09:16,786] INFO in app: ==================================================
2025-08-17 17:09:17,419 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-17 17:09:17,421 - INFO - Added job "snapshot_par" to job store "default"
2025-08-17 17:09:17,421 - INFO - Scheduler started
2025-08-17 17:09:18,540 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-17 17:09:18,541 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-17 17:09:18,554 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-17 17:09:18,554 - INFO - [33mPress CTRL+C to quit[0m
2025-08-17 17:09:20,723 - INFO - 127.0.0.1 - - [17/Aug/2025 17:09:20] "GET /loans/19/edit HTTP/1.1" 200 -
2025-08-17 17:09:21,391 - INFO - 127.0.0.1 - - [17/Aug/2025 17:09:21] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-17 17:09:30,153] INFO in app: Generating repayment schedule for loan 103000019 with disbursement_date=None
2025-08-17 17:09:30,153 - INFO - Generating repayment schedule for loan 103000019 with disbursement_date=None
[2025-08-17 17:09:30,167] INFO in app: First due date: 2025-09-25
2025-08-17 17:09:30,167 - INFO - First due date: 2025-09-25
[2025-08-17 17:09:30,169] INFO in app: Instalment 1: Due 2025-09-25, Principal 373765.58, Interest 40635.00, Fees 2500.00
2025-08-17 17:09:30,169 - INFO - Instalment 1: Due 2025-09-25, Principal 373765.58, Interest 40635.00, Fees 2500.00
[2025-08-17 17:09:30,171] INFO in app: Instalment 2: Due 2025-10-25, Principal 386847.38, Interest 27553.20, Fees 2500.00
2025-08-17 17:09:30,171 - INFO - Instalment 2: Due 2025-10-25, Principal 386847.38, Interest 27553.20, Fees 2500.00
[2025-08-17 17:09:30,180] INFO in app: Instalment 3: Due 2025-11-25, Principal 400387.04, Interest 14013.54, Fees 2500.00
2025-08-17 17:09:30,180 - INFO - Instalment 3: Due 2025-11-25, Principal 400387.04, Interest 14013.54, Fees 2500.00
2025-08-17 17:09:30,199 - INFO - 127.0.0.1 - - [17/Aug/2025 17:09:30] "[32mPOST /loans/19/edit HTTP/1.1[0m" 302 -
2025-08-17 17:09:30,725 - INFO - 127.0.0.1 - - [17/Aug/2025 17:09:30] "GET /loans HTTP/1.1" 200 -
2025-08-17 17:09:57,145 - INFO - 127.0.0.1 - - [17/Aug/2025 17:09:57] "GET /loans/20/edit HTTP/1.1" 200 -
[2025-08-17 17:10:06,898] INFO in app: Generating repayment schedule for loan 136000020 with disbursement_date=None
2025-08-17 17:10:06,898 - INFO - Generating repayment schedule for loan 136000020 with disbursement_date=None
[2025-08-17 17:10:06,904] INFO in app: First due date: 2025-09-25
2025-08-17 17:10:06,904 - INFO - First due date: 2025-09-25
[2025-08-17 17:10:06,906] INFO in app: Instalment 1: Due 2025-09-25, Principal 19197.91, Interest 47040.00, Fees 11200.00
2025-08-17 17:10:06,906 - INFO - Instalment 1: Due 2025-09-25, Principal 19197.91, Interest 47040.00, Fees 11200.00
[2025-08-17 17:10:06,911] INFO in app: Instalment 2: Due 2025-10-25, Principal 19869.84, Interest 46368.07, Fees 11200.00
2025-08-17 17:10:06,911 - INFO - Instalment 2: Due 2025-10-25, Principal 19869.84, Interest 46368.07, Fees 11200.00
[2025-08-17 17:10:06,924] INFO in app: Instalment 3: Due 2025-11-25, Principal 20565.29, Interest 45672.63, Fees 11200.00
2025-08-17 17:10:06,924 - INFO - Instalment 3: Due 2025-11-25, Principal 20565.29, Interest 45672.63, Fees 11200.00
[2025-08-17 17:10:06,934] INFO in app: Instalment 4: Due 2025-12-25, Principal 21285.07, Interest 44952.84, Fees 11200.00
2025-08-17 17:10:06,934 - INFO - Instalment 4: Due 2025-12-25, Principal 21285.07, Interest 44952.84, Fees 11200.00
[2025-08-17 17:10:06,937] INFO in app: Instalment 5: Due 2026-01-25, Principal 22030.05, Interest 44207.87, Fees 11200.00
2025-08-17 17:10:06,937 - INFO - Instalment 5: Due 2026-01-25, Principal 22030.05, Interest 44207.87, Fees 11200.00
[2025-08-17 17:10:06,939] INFO in app: Instalment 6: Due 2026-02-25, Principal 22801.10, Interest 43436.81, Fees 11200.00
2025-08-17 17:10:06,939 - INFO - Instalment 6: Due 2026-02-25, Principal 22801.10, Interest 43436.81, Fees 11200.00
[2025-08-17 17:10:06,940] INFO in app: Instalment 7: Due 2026-03-25, Principal 23599.14, Interest 42638.78, Fees 11200.00
2025-08-17 17:10:06,940 - INFO - Instalment 7: Due 2026-03-25, Principal 23599.14, Interest 42638.78, Fees 11200.00
[2025-08-17 17:10:06,951] INFO in app: Instalment 8: Due 2026-04-25, Principal 24425.11, Interest 41812.81, Fees 11200.00
2025-08-17 17:10:06,951 - INFO - Instalment 8: Due 2026-04-25, Principal 24425.11, Interest 41812.81, Fees 11200.00
[2025-08-17 17:10:06,954] INFO in app: Instalment 9: Due 2026-05-25, Principal 25279.99, Interest 40957.93, Fees 11200.00
2025-08-17 17:10:06,954 - INFO - Instalment 9: Due 2026-05-25, Principal 25279.99, Interest 40957.93, Fees 11200.00
[2025-08-17 17:10:06,955] INFO in app: Instalment 10: Due 2026-06-25, Principal 26164.79, Interest 40073.13, Fees 11200.00
2025-08-17 17:10:06,955 - INFO - Instalment 10: Due 2026-06-25, Principal 26164.79, Interest 40073.13, Fees 11200.00
[2025-08-17 17:10:06,957] INFO in app: Instalment 11: Due 2026-07-25, Principal 27080.55, Interest 39157.36, Fees 11200.00
2025-08-17 17:10:06,957 - INFO - Instalment 11: Due 2026-07-25, Principal 27080.55, Interest 39157.36, Fees 11200.00
[2025-08-17 17:10:06,966] INFO in app: Instalment 12: Due 2026-08-25, Principal 28028.37, Interest 38209.54, Fees 11200.00
2025-08-17 17:10:06,966 - INFO - Instalment 12: Due 2026-08-25, Principal 28028.37, Interest 38209.54, Fees 11200.00
[2025-08-17 17:10:06,969] INFO in app: Instalment 13: Due 2026-09-25, Principal 29009.37, Interest 37228.55, Fees 11200.00
2025-08-17 17:10:06,969 - INFO - Instalment 13: Due 2026-09-25, Principal 29009.37, Interest 37228.55, Fees 11200.00
[2025-08-17 17:10:06,971] INFO in app: Instalment 14: Due 2026-10-25, Principal 30024.70, Interest 36213.22, Fees 11200.00
2025-08-17 17:10:06,971 - INFO - Instalment 14: Due 2026-10-25, Principal 30024.70, Interest 36213.22, Fees 11200.00
[2025-08-17 17:10:06,973] INFO in app: Instalment 15: Due 2026-11-25, Principal 31075.56, Interest 35162.36, Fees 11200.00
2025-08-17 17:10:06,973 - INFO - Instalment 15: Due 2026-11-25, Principal 31075.56, Interest 35162.36, Fees 11200.00
[2025-08-17 17:10:06,978] INFO in app: Instalment 16: Due 2026-12-25, Principal 32163.20, Interest 34074.71, Fees 11200.00
2025-08-17 17:10:06,978 - INFO - Instalment 16: Due 2026-12-25, Principal 32163.20, Interest 34074.71, Fees 11200.00
[2025-08-17 17:10:06,985] INFO in app: Instalment 17: Due 2027-01-25, Principal 33288.92, Interest 32949.00, Fees 11200.00
2025-08-17 17:10:06,985 - INFO - Instalment 17: Due 2027-01-25, Principal 33288.92, Interest 32949.00, Fees 11200.00
[2025-08-17 17:10:06,987] INFO in app: Instalment 18: Due 2027-02-25, Principal 34454.03, Interest 31783.89, Fees 11200.00
2025-08-17 17:10:06,987 - INFO - Instalment 18: Due 2027-02-25, Principal 34454.03, Interest 31783.89, Fees 11200.00
[2025-08-17 17:10:06,989] INFO in app: Instalment 19: Due 2027-03-25, Principal 35659.92, Interest 30578.00, Fees 11200.00
2025-08-17 17:10:06,989 - INFO - Instalment 19: Due 2027-03-25, Principal 35659.92, Interest 30578.00, Fees 11200.00
[2025-08-17 17:10:06,991] INFO in app: Instalment 20: Due 2027-04-25, Principal 36908.02, Interest 29329.90, Fees 11200.00
2025-08-17 17:10:06,991 - INFO - Instalment 20: Due 2027-04-25, Principal 36908.02, Interest 29329.90, Fees 11200.00
[2025-08-17 17:10:07,000] INFO in app: Instalment 21: Due 2027-05-25, Principal 38199.80, Interest 28038.12, Fees 11200.00
2025-08-17 17:10:07,000 - INFO - Instalment 21: Due 2027-05-25, Principal 38199.80, Interest 28038.12, Fees 11200.00
[2025-08-17 17:10:07,003] INFO in app: Instalment 22: Due 2027-06-25, Principal 39536.79, Interest 26701.12, Fees 11200.00
2025-08-17 17:10:07,003 - INFO - Instalment 22: Due 2027-06-25, Principal 39536.79, Interest 26701.12, Fees 11200.00
[2025-08-17 17:10:07,004] INFO in app: Instalment 23: Due 2027-07-25, Principal 40920.58, Interest 25317.34, Fees 11200.00
2025-08-17 17:10:07,004 - INFO - Instalment 23: Due 2027-07-25, Principal 40920.58, Interest 25317.34, Fees 11200.00
[2025-08-17 17:10:07,007] INFO in app: Instalment 24: Due 2027-08-25, Principal 42352.80, Interest 23885.12, Fees 11200.00
2025-08-17 17:10:07,007 - INFO - Instalment 24: Due 2027-08-25, Principal 42352.80, Interest 23885.12, Fees 11200.00
[2025-08-17 17:10:07,008] INFO in app: Instalment 25: Due 2027-09-25, Principal 43835.15, Interest 22402.77, Fees 11200.00
2025-08-17 17:10:07,008 - INFO - Instalment 25: Due 2027-09-25, Principal 43835.15, Interest 22402.77, Fees 11200.00
[2025-08-17 17:10:07,017] INFO in app: Instalment 26: Due 2027-10-25, Principal 45369.38, Interest 20868.54, Fees 11200.00
2025-08-17 17:10:07,017 - INFO - Instalment 26: Due 2027-10-25, Principal 45369.38, Interest 20868.54, Fees 11200.00
[2025-08-17 17:10:07,019] INFO in app: Instalment 27: Due 2027-11-25, Principal 46957.30, Interest 19280.61, Fees 11200.00
2025-08-17 17:10:07,019 - INFO - Instalment 27: Due 2027-11-25, Principal 46957.30, Interest 19280.61, Fees 11200.00
[2025-08-17 17:10:07,021] INFO in app: Instalment 28: Due 2027-12-25, Principal 48600.81, Interest 17637.10, Fees 11200.00
2025-08-17 17:10:07,021 - INFO - Instalment 28: Due 2027-12-25, Principal 48600.81, Interest 17637.10, Fees 11200.00
[2025-08-17 17:10:07,023] INFO in app: Instalment 29: Due 2028-01-25, Principal 50301.84, Interest 15936.08, Fees 11200.00
2025-08-17 17:10:07,023 - INFO - Instalment 29: Due 2028-01-25, Principal 50301.84, Interest 15936.08, Fees 11200.00
[2025-08-17 17:10:07,025] INFO in app: Instalment 30: Due 2028-02-25, Principal 52062.40, Interest 14175.51, Fees 11200.00
2025-08-17 17:10:07,025 - INFO - Instalment 30: Due 2028-02-25, Principal 52062.40, Interest 14175.51, Fees 11200.00
[2025-08-17 17:10:07,035] INFO in app: Instalment 31: Due 2028-03-25, Principal 53884.59, Interest 12353.33, Fees 11200.00
2025-08-17 17:10:07,035 - INFO - Instalment 31: Due 2028-03-25, Principal 53884.59, Interest 12353.33, Fees 11200.00
[2025-08-17 17:10:07,037] INFO in app: Instalment 32: Due 2028-04-25, Principal 55770.55, Interest 10467.37, Fees 11200.00
2025-08-17 17:10:07,037 - INFO - Instalment 32: Due 2028-04-25, Principal 55770.55, Interest 10467.37, Fees 11200.00
[2025-08-17 17:10:07,039] INFO in app: Instalment 33: Due 2028-05-25, Principal 57722.52, Interest 8515.40, Fees 11200.00
2025-08-17 17:10:07,039 - INFO - Instalment 33: Due 2028-05-25, Principal 57722.52, Interest 8515.40, Fees 11200.00
[2025-08-17 17:10:07,040] INFO in app: Instalment 34: Due 2028-06-25, Principal 59742.81, Interest 6495.11, Fees 11200.00
2025-08-17 17:10:07,040 - INFO - Instalment 34: Due 2028-06-25, Principal 59742.81, Interest 6495.11, Fees 11200.00
[2025-08-17 17:10:07,049] INFO in app: Instalment 35: Due 2028-07-25, Principal 61833.80, Interest 4404.11, Fees 11200.00
2025-08-17 17:10:07,049 - INFO - Instalment 35: Due 2028-07-25, Principal 61833.80, Interest 4404.11, Fees 11200.00
[2025-08-17 17:10:07,051] INFO in app: Instalment 36: Due 2028-08-25, Principal 63997.95, Interest 2239.96, Fees 11200.00
2025-08-17 17:10:07,051 - INFO - Instalment 36: Due 2028-08-25, Principal 63997.95, Interest 2239.96, Fees 11200.00
2025-08-17 17:10:07,063 - INFO - 127.0.0.1 - - [17/Aug/2025 17:10:07] "[32mPOST /loans/20/edit HTTP/1.1[0m" 302 -
2025-08-17 17:10:07,355 - INFO - 127.0.0.1 - - [17/Aug/2025 17:10:07] "GET /loans HTTP/1.1" 200 -
2025-08-17 17:10:15,988 - INFO - 127.0.0.1 - - [17/Aug/2025 17:10:15] "GET /loanbook HTTP/1.1" 200 -
2025-08-17 17:10:32,577 - INFO - 127.0.0.1 - - [17/Aug/2025 17:10:32] "GET /income_report HTTP/1.1" 200 -
2025-08-17 17:10:42,440 - INFO - 127.0.0.1 - - [17/Aug/2025 17:10:42] "GET /loanbook HTTP/1.1" 200 -
2025-08-17 17:11:10,982 - INFO - 127.0.0.1 - - [17/Aug/2025 17:11:10] "GET /loan/136000020/statement HTTP/1.1" 200 -
[2025-08-17 18:40:24,363] INFO in app: ==================================================
[2025-08-17 18:40:24,372] INFO in app: Application logging initialized successfully
[2025-08-17 18:40:24,374] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 18:40:24,376] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 18:40:24,379] INFO in app: System encoding: utf-8
[2025-08-17 18:40:24,382] INFO in app: ==================================================
2025-08-17 18:40:24,900 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-17 18:40:24,902 - INFO - Added job "snapshot_par" to job store "default"
2025-08-17 18:40:24,902 - INFO - Scheduler started
2025-08-17 18:40:25,780 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-17 18:40:25,780 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-17 18:40:25,790 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-17 18:40:25,790 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-17 19:03:33,488] INFO in app: ==================================================
[2025-08-17 19:03:33,494] INFO in app: Application logging initialized successfully
[2025-08-17 19:03:33,499] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 19:03:33,500] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 19:03:33,504] INFO in app: System encoding: utf-8
[2025-08-17 19:03:33,506] INFO in app: ==================================================
2025-08-17 19:03:33,898 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-17 19:03:33,900 - INFO - Added job "snapshot_par" to job store "default"
2025-08-17 19:03:33,900 - INFO - Scheduler started
2025-08-17 19:03:34,718 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-17 19:03:34,719 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-17 19:03:34,728 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-17 19:03:34,728 - INFO - [33mPress CTRL+C to quit[0m
2025-08-17 19:03:46,554 - INFO - 127.0.0.1 - - [17/Aug/2025 19:03:46] "GET /loans HTTP/1.1" 200 -
2025-08-17 19:03:54,672 - INFO - 127.0.0.1 - - [17/Aug/2025 19:03:54] "GET /loans HTTP/1.1" 200 -
2025-08-17 19:03:56,220 - INFO - 127.0.0.1 - - [17/Aug/2025 19:03:56] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-17 19:25:25,273] INFO in app: ==================================================
[2025-08-17 19:25:25,279] INFO in app: Application logging initialized successfully
[2025-08-17 19:25:25,281] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 19:25:25,288] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 19:25:25,295] INFO in app: System encoding: utf-8
[2025-08-17 19:25:25,298] INFO in app: ==================================================
2025-08-17 19:25:25,610 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-17 19:25:25,611 - INFO - Added job "snapshot_par" to job store "default"
2025-08-17 19:25:25,611 - INFO - Scheduler started
2025-08-17 19:25:26,892 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-17 19:25:26,893 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-17 19:25:26,952 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-17 19:25:26,953 - INFO - [33mPress CTRL+C to quit[0m
2025-08-17 19:25:32,137 - INFO - 127.0.0.1 - - [17/Aug/2025 19:25:32] "GET /loans HTTP/1.1" 200 -
2025-08-17 19:25:32,926 - INFO - 127.0.0.1 - - [17/Aug/2025 19:25:32] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-17 19:25:34,257 - INFO - 127.0.0.1 - - [17/Aug/2025 19:25:34] "GET /loanbook HTTP/1.1" 200 -
2025-08-17 19:25:35,684 - INFO - 127.0.0.1 - - [17/Aug/2025 19:25:35] "GET /loan/112000001/statement HTTP/1.1" 200 -
2025-08-17 19:25:47,921 - INFO - 127.0.0.1 - - [17/Aug/2025 19:25:47] "GET /loans/1/edit HTTP/1.1" 200 -
[2025-08-17 19:26:24,611] INFO in app: ==================================================
[2025-08-17 19:26:24,628] INFO in app: Application logging initialized successfully
[2025-08-17 19:26:24,635] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 19:26:24,637] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 19:26:24,640] INFO in app: System encoding: utf-8
[2025-08-17 19:26:24,642] INFO in app: ==================================================
2025-08-17 19:26:25,039 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-17 19:26:25,041 - INFO - Added job "snapshot_par" to job store "default"
2025-08-17 19:26:25,041 - INFO - Scheduler started
2025-08-17 19:26:25,819 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-17 19:26:25,820 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-17 19:26:25,827 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-17 19:26:25,827 - INFO - [33mPress CTRL+C to quit[0m
2025-08-17 19:26:27,303 - INFO - 127.0.0.1 - - [17/Aug/2025 19:26:27] "GET /loan/112000001/statement HTTP/1.1" 200 -
2025-08-17 19:26:27,875 - INFO - 127.0.0.1 - - [17/Aug/2025 19:26:27] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-17 20:27:34,028] INFO in app: ==================================================
[2025-08-17 20:27:34,036] INFO in app: Application logging initialized successfully
[2025-08-17 20:27:34,039] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 20:27:34,041] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 20:27:34,044] INFO in app: System encoding: utf-8
[2025-08-17 20:27:34,049] INFO in app: ==================================================
2025-08-17 20:27:34,358 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-17 20:27:34,360 - INFO - Added job "snapshot_par" to job store "default"
2025-08-17 20:27:34,360 - INFO - Scheduler started
2025-08-17 20:27:35,208 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-17 20:27:35,208 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-17 20:27:35,215 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-17 20:27:35,215 - INFO - [33mPress CTRL+C to quit[0m
2025-08-17 20:27:42,375 - INFO - 127.0.0.1 - - [17/Aug/2025 20:27:42] "GET /loan/112000001/statement HTTP/1.1" 200 -
2025-08-17 20:27:44,106 - INFO - 127.0.0.1 - - [17/Aug/2025 20:27:44] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-17 20:27:46,646 - INFO - 127.0.0.1 - - [17/Aug/2025 20:27:46] "GET /loanbook HTTP/1.1" 200 -
[2025-08-17 20:28:07,714] ERROR in app: Exception on /reports [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5721, in generate_report
    "CRB Fee": loan.crb_fee,
               ^^^^^^^^^^^^
AttributeError: 'LoanApplication' object has no attribute 'crb_fee'. Did you mean: 'crb_fees'?
2025-08-17 20:28:07,714 - ERROR - Exception on /reports [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5721, in generate_report
    "CRB Fee": loan.crb_fee,
               ^^^^^^^^^^^^
AttributeError: 'LoanApplication' object has no attribute 'crb_fee'. Did you mean: 'crb_fees'?
2025-08-17 20:28:07,780 - INFO - 127.0.0.1 - - [17/Aug/2025 20:28:07] "[35m[1mGET /reports?start_date=2025-08-01&end_date=2025-08-17&status= HTTP/1.1[0m" 500 -
[2025-08-17 20:30:48,503] INFO in app: ==================================================
[2025-08-17 20:30:48,510] INFO in app: Application logging initialized successfully
[2025-08-17 20:30:48,515] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 20:30:48,517] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 20:30:48,521] INFO in app: System encoding: utf-8
[2025-08-17 20:30:48,523] INFO in app: ==================================================
2025-08-17 20:30:48,815 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-17 20:30:48,817 - INFO - Added job "snapshot_par" to job store "default"
2025-08-17 20:30:48,817 - INFO - Scheduler started
2025-08-17 20:30:49,646 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-17 20:30:49,646 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-17 20:30:49,654 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-17 20:30:49,654 - INFO - [33mPress CTRL+C to quit[0m
2025-08-17 20:30:54,831 - INFO - 127.0.0.1 - - [17/Aug/2025 20:30:54] "GET /loanbook HTTP/1.1" 200 -
2025-08-17 20:30:55,657 - INFO - 127.0.0.1 - - [17/Aug/2025 20:30:55] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-17 20:31:06,069] ERROR in app: Exception on /reports [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5736, in generate_report
    with pd.ExcelWriter(output, engine="xlsxwriter") as writer:
         ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\pandas\io\excel\_xlsxwriter.py", line 197, in __init__
    from xlsxwriter import Workbook
ModuleNotFoundError: No module named 'xlsxwriter'
2025-08-17 20:31:06,069 - ERROR - Exception on /reports [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5736, in generate_report
    with pd.ExcelWriter(output, engine="xlsxwriter") as writer:
         ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\pandas\io\excel\_xlsxwriter.py", line 197, in __init__
    from xlsxwriter import Workbook
ModuleNotFoundError: No module named 'xlsxwriter'
2025-08-17 20:31:06,123 - INFO - 127.0.0.1 - - [17/Aug/2025 20:31:06] "[35m[1mGET /reports?start_date=2025-08-01&end_date=2025-08-17&status= HTTP/1.1[0m" 500 -
[2025-08-17 20:32:28,480] INFO in app: ==================================================
[2025-08-17 20:32:28,488] INFO in app: Application logging initialized successfully
[2025-08-17 20:32:28,493] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 20:32:28,495] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 20:32:28,500] INFO in app: System encoding: utf-8
[2025-08-17 20:32:28,502] INFO in app: ==================================================
2025-08-17 20:32:28,806 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-17 20:32:28,808 - INFO - Added job "snapshot_par" to job store "default"
2025-08-17 20:32:28,808 - INFO - Scheduler started
2025-08-17 20:32:29,414 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-17 20:32:29,415 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-17 20:32:29,422 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-17 20:32:29,422 - INFO - [33mPress CTRL+C to quit[0m
2025-08-17 20:32:37,455 - INFO - 127.0.0.1 - - [17/Aug/2025 20:32:37] "GET /reports?start_date=2025-08-01&end_date=2025-08-17&status= HTTP/1.1" 200 -
2025-08-17 20:33:29,757 - INFO - 127.0.0.1 - - [17/Aug/2025 20:33:29] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-17 20:33:39,075 - INFO - 127.0.0.1 - - [17/Aug/2025 20:33:39] "GET /reports?start_date=2025-07-01&end_date=2025-08-17&status= HTTP/1.1" 200 -
[2025-08-17 20:37:24,975] INFO in app: ==================================================
[2025-08-17 20:37:24,983] INFO in app: Application logging initialized successfully
[2025-08-17 20:37:24,985] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 20:37:24,987] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 20:37:24,990] INFO in app: System encoding: utf-8
[2025-08-17 20:37:24,997] INFO in app: ==================================================
2025-08-17 20:37:25,314 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-17 20:37:25,316 - INFO - Added job "snapshot_par" to job store "default"
2025-08-17 20:37:25,316 - INFO - Scheduler started
2025-08-17 20:37:25,941 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-17 20:37:25,942 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-17 20:37:25,956 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-17 20:37:25,956 - INFO - [33mPress CTRL+C to quit[0m
2025-08-17 20:38:02,227 - INFO - 127.0.0.1 - - [17/Aug/2025 20:38:02] "GET /loanbook HTTP/1.1" 200 -
2025-08-17 20:38:05,454 - INFO - 127.0.0.1 - - [17/Aug/2025 20:38:05] "GET /loan/112000001/statement HTTP/1.1" 200 -
2025-08-17 20:38:16,251 - INFO - 127.0.0.1 - - [17/Aug/2025 20:38:16] "GET /loanbook HTTP/1.1" 200 -
2025-08-17 20:38:17,966 - INFO - 127.0.0.1 - - [17/Aug/2025 20:38:17] "GET /customer/202507000001/account HTTP/1.1" 200 -
2025-08-17 20:38:19,631 - INFO - 127.0.0.1 - - [17/Aug/2025 20:38:19] "GET /customer/202507000001/account?section=additional HTTP/1.1" 200 -
[2025-08-17 20:38:56,821] INFO in app: Generating repayment schedule for loan 103000021 with disbursement_date=None
2025-08-17 20:38:56,821 - INFO - Generating repayment schedule for loan 103000021 with disbursement_date=None
[2025-08-17 20:38:56,849] INFO in app: First due date: 2025-09-25
2025-08-17 20:38:56,849 - INFO - First due date: 2025-09-25
[2025-08-17 20:38:56,854] INFO in app: Instalment 1: Due 2025-09-25, Principal 373765.58, Interest 40635.00, Fees 2500.00
2025-08-17 20:38:56,854 - INFO - Instalment 1: Due 2025-09-25, Principal 373765.58, Interest 40635.00, Fees 2500.00
[2025-08-17 20:38:56,860] INFO in app: Instalment 2: Due 2025-10-25, Principal 386847.38, Interest 27553.20, Fees 2500.00
2025-08-17 20:38:56,860 - INFO - Instalment 2: Due 2025-10-25, Principal 386847.38, Interest 27553.20, Fees 2500.00
[2025-08-17 20:38:56,875] INFO in app: Instalment 3: Due 2025-11-25, Principal 400387.04, Interest 14013.54, Fees 2500.00
2025-08-17 20:38:56,875 - INFO - Instalment 3: Due 2025-11-25, Principal 400387.04, Interest 14013.54, Fees 2500.00
2025-08-17 20:38:56,912 - INFO - 127.0.0.1 - - [17/Aug/2025 20:38:56] "[32mPOST /apply_additional/1 HTTP/1.1[0m" 302 -
2025-08-17 20:38:57,079 - INFO - 127.0.0.1 - - [17/Aug/2025 20:38:57] "GET /customer/202507000001/account?section=statement HTTP/1.1" 200 -
2025-08-17 20:39:00,077 - INFO - 127.0.0.1 - - [17/Aug/2025 20:39:00] "GET /customer/202507000001/account?section=additional HTTP/1.1" 200 -
[2025-08-17 20:39:42,595] INFO in app: Generating repayment schedule for loan 103000022 with disbursement_date=None
2025-08-17 20:39:42,595 - INFO - Generating repayment schedule for loan 103000022 with disbursement_date=None
[2025-08-17 20:39:42,613] INFO in app: First due date: 2025-09-25
2025-08-17 20:39:42,613 - INFO - First due date: 2025-09-25
[2025-08-17 20:39:42,627] INFO in app: Instalment 1: Due 2025-09-25, Principal 746565.36, Interest 81165.00, Fees 5000.00
2025-08-17 20:39:42,627 - INFO - Instalment 1: Due 2025-09-25, Principal 746565.36, Interest 81165.00, Fees 5000.00
[2025-08-17 20:39:42,632] INFO in app: Instalment 2: Due 2025-10-25, Principal 772695.15, Interest 55035.21, Fees 5000.00
2025-08-17 20:39:42,632 - INFO - Instalment 2: Due 2025-10-25, Principal 772695.15, Interest 55035.21, Fees 5000.00
[2025-08-17 20:39:42,645] INFO in app: Instalment 3: Due 2025-11-25, Principal 799739.49, Interest 27990.87, Fees 5000.00
2025-08-17 20:39:42,645 - INFO - Instalment 3: Due 2025-11-25, Principal 799739.49, Interest 27990.87, Fees 5000.00
2025-08-17 20:39:42,661 - INFO - 127.0.0.1 - - [17/Aug/2025 20:39:42] "[32mPOST /apply_additional/1 HTTP/1.1[0m" 302 -
2025-08-17 20:39:42,714 - INFO - 127.0.0.1 - - [17/Aug/2025 20:39:42] "GET /customer/202507000001/account?section=statement HTTP/1.1" 200 -
2025-08-17 20:39:44,532 - INFO - 127.0.0.1 - - [17/Aug/2025 20:39:44] "GET /loans HTTP/1.1" 200 -
2025-08-17 20:39:48,788 - INFO - 127.0.0.1 - - [17/Aug/2025 20:39:48] "[32mPOST /process_loan/21/approve HTTP/1.1[0m" 302 -
2025-08-17 20:39:49,185 - INFO - 127.0.0.1 - - [17/Aug/2025 20:39:49] "GET /loans HTTP/1.1" 200 -
2025-08-17 20:39:54,592 - INFO - 127.0.0.1 - - [17/Aug/2025 20:39:54] "[32mPOST /process_loan/22/approve HTTP/1.1[0m" 302 -
2025-08-17 20:39:54,998 - INFO - 127.0.0.1 - - [17/Aug/2025 20:39:54] "GET /loans HTTP/1.1" 200 -
2025-08-17 20:40:03,420 - INFO - 127.0.0.1 - - [17/Aug/2025 20:40:03] "GET /loanbook HTTP/1.1" 200 -
2025-08-17 20:40:20,508 - INFO - 127.0.0.1 - - [17/Aug/2025 20:40:20] "GET /customer/202507000001/account HTTP/1.1" 200 -
2025-08-17 20:40:22,612 - INFO - 127.0.0.1 - - [17/Aug/2025 20:40:22] "GET /customer/202507000001/account?section=topup HTTP/1.1" 200 -
[2025-08-17 20:41:01,814] INFO in app: [TOPUP] Submit route hit for loan 1
2025-08-17 20:41:01,814 - INFO - [TOPUP] Submit route hit for loan 1
2025-08-17 20:41:01,890 - INFO - 127.0.0.1 - - [17/Aug/2025 20:41:01] "[32mPOST /topup/1 HTTP/1.1[0m" 302 -
2025-08-17 20:41:02,194 - INFO - 127.0.0.1 - - [17/Aug/2025 20:41:02] "GET /customer/202507000001/account?section=topup HTTP/1.1" 200 -
[2025-08-17 20:41:49,276] INFO in app: [TOPUP] Submit route hit for loan 15
2025-08-17 20:41:49,276 - INFO - [TOPUP] Submit route hit for loan 15
[2025-08-17 20:41:49,458] INFO in app: Generating repayment schedule for loan 103000023 with disbursement_date=None
2025-08-17 20:41:49,458 - INFO - Generating repayment schedule for loan 103000023 with disbursement_date=None
[2025-08-17 20:41:49,477] INFO in app: First due date: 2025-09-25
2025-08-17 20:41:49,477 - INFO - First due date: 2025-09-25
[2025-08-17 20:41:49,481] INFO in app: Instalment 1: Due 2025-09-25, Principal 373765.58, Interest 40635.00, Fees 2500.00
2025-08-17 20:41:49,481 - INFO - Instalment 1: Due 2025-09-25, Principal 373765.58, Interest 40635.00, Fees 2500.00
[2025-08-17 20:41:49,484] INFO in app: Instalment 2: Due 2025-10-25, Principal 386847.38, Interest 27553.20, Fees 2500.00
2025-08-17 20:41:49,484 - INFO - Instalment 2: Due 2025-10-25, Principal 386847.38, Interest 27553.20, Fees 2500.00
[2025-08-17 20:41:49,487] INFO in app: Instalment 3: Due 2025-11-25, Principal 400387.04, Interest 14013.54, Fees 2500.00
2025-08-17 20:41:49,487 - INFO - Instalment 3: Due 2025-11-25, Principal 400387.04, Interest 14013.54, Fees 2500.00
[2025-08-17 20:41:49,497] INFO in app: [124000015] Top-up payment → principal: 0.0, top-up interest: 0.0
2025-08-17 20:41:49,497 - INFO - [124000015] Top-up payment → principal: 0.0, top-up interest: 0.0
[2025-08-17 20:41:49,529] INFO in app: [124000015] Loan closed after top-up payment.
2025-08-17 20:41:49,529 - INFO - [124000015] Loan closed after top-up payment.
2025-08-17 20:41:49,583 - INFO - 127.0.0.1 - - [17/Aug/2025 20:41:49] "[32mPOST /topup/15 HTTP/1.1[0m" 302 -
2025-08-17 20:41:49,633 - INFO - 127.0.0.1 - - [17/Aug/2025 20:41:49] "GET /customer/202507000001/account?section=statement HTTP/1.1" 200 -
2025-08-17 20:41:53,933 - INFO - 127.0.0.1 - - [17/Aug/2025 20:41:53] "GET /loans HTTP/1.1" 200 -
2025-08-17 20:41:58,253 - INFO - 127.0.0.1 - - [17/Aug/2025 20:41:58] "[32mPOST /process_loan/23/approve HTTP/1.1[0m" 302 -
2025-08-17 20:41:58,912 - INFO - 127.0.0.1 - - [17/Aug/2025 20:41:58] "GET /loans HTTP/1.1" 200 -
2025-08-17 20:42:03,226 - INFO - 127.0.0.1 - - [17/Aug/2025 20:42:03] "GET /loanbook HTTP/1.1" 200 -
[2025-08-18 05:22:35,032] INFO in app: ==================================================
[2025-08-18 05:22:35,181] INFO in app: Application logging initialized successfully
[2025-08-18 05:22:35,184] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-18 05:22:35,187] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-18 05:22:35,190] INFO in app: System encoding: utf-8
[2025-08-18 05:22:35,202] INFO in app: ==================================================
2025-08-18 05:22:35,920 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-18 05:22:35,959 - INFO - Added job "snapshot_par" to job store "default"
2025-08-18 05:22:35,959 - INFO - Scheduler started
2025-08-18 05:22:37,487 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-18 05:22:37,488 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-18 05:22:37,561 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-18 05:22:37,561 - INFO - [33mPress CTRL+C to quit[0m
2025-08-18 05:22:45,306 - INFO - 127.0.0.1 - - [18/Aug/2025 05:22:45] "GET /loanbook HTTP/1.1" 200 -
2025-08-18 05:22:46,621 - INFO - 127.0.0.1 - - [18/Aug/2025 05:22:46] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-18 05:24:06,686 - INFO - 127.0.0.1 - - [18/Aug/2025 05:24:06] "GET /loan/103000023/statement HTTP/1.1" 200 -
2025-08-18 05:24:54,375 - INFO - 127.0.0.1 - - [18/Aug/2025 05:24:54] "GET /loan/103000022/statement HTTP/1.1" 200 -
2025-08-18 05:27:19,642 - INFO - 127.0.0.1 - - [18/Aug/2025 05:27:19] "GET /admin/dashboard HTTP/1.1" 200 -
2025-08-18 05:27:21,678 - INFO - 127.0.0.1 - - [18/Aug/2025 05:27:21] "GET /admin/batch_import_loans HTTP/1.1" 200 -
[2025-08-18 05:27:38,329] INFO in app: CSV headers: ['loan_number', 'created_at', ' loan_amount ', 'term_months', 'interest_rate', 'application_status', 'loan_state', 'performance_status', 'client_name', 'national_id', 'phone_number', 'email', 'business_name', 'business_sector', 'business_address']
2025-08-18 05:27:38,329 - INFO - CSV headers: ['loan_number', 'created_at', ' loan_amount ', 'term_months', 'interest_rate', 'application_status', 'loan_state', 'performance_status', 'client_name', 'national_id', 'phone_number', 'email', 'business_name', 'business_sector', 'business_address']
2025-08-18 05:27:38,457 - INFO - 127.0.0.1 - - [18/Aug/2025 05:27:38] "[32mPOST /admin/batch_import_loans HTTP/1.1[0m" 302 -
2025-08-18 05:27:38,621 - INFO - 127.0.0.1 - - [18/Aug/2025 05:27:38] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-08-18 05:27:46,750 - INFO - 127.0.0.1 - - [18/Aug/2025 05:27:46] "GET /loanbook HTTP/1.1" 200 -
[2025-08-19 14:26:57,878] INFO in app: ==================================================
[2025-08-19 14:26:57,975] INFO in app: Application logging initialized successfully
[2025-08-19 14:26:57,976] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 14:26:57,978] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 14:26:57,982] INFO in app: System encoding: utf-8
[2025-08-19 14:26:57,989] INFO in app: ==================================================
2025-08-19 14:26:58,473 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-19 14:26:58,485 - INFO - Added job "snapshot_par" to job store "default"
2025-08-19 14:26:58,486 - INFO - Scheduler started
2025-08-19 14:26:59,457 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-19 14:26:59,458 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-19 14:26:59,516 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-19 14:26:59,517 - INFO - [33mPress CTRL+C to quit[0m
2025-08-19 14:31:34,063 - INFO - 127.0.0.1 - - [19/Aug/2025 14:31:34] "GET /loanbook HTTP/1.1" 200 -
2025-08-19 14:31:36,960 - INFO - 127.0.0.1 - - [19/Aug/2025 14:31:36] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-19 14:31:50,445 - INFO - 127.0.0.1 - - [19/Aug/2025 14:31:50] "GET / HTTP/1.1" 200 -
2025-08-19 14:31:54,840 - INFO - 127.0.0.1 - - [19/Aug/2025 14:31:54] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-19 14:31:55,083 - INFO - 127.0.0.1 - - [19/Aug/2025 14:31:55] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-19 14:31:58,263 - INFO - 127.0.0.1 - - [19/Aug/2025 14:31:58] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-19 14:31:59,020 - INFO - 127.0.0.1 - - [19/Aug/2025 14:31:59] "GET /dashboard/analytics HTTP/1.1" 200 -
2025-08-19 14:31:59,519 - INFO - 127.0.0.1 - - [19/Aug/2025 14:31:59] "GET /api/loans-by-region HTTP/1.1" 200 -
2025-08-19 14:31:59,850 - INFO - 127.0.0.1 - - [19/Aug/2025 14:31:59] "GET /api/loans-by-district HTTP/1.1" 200 -
2025-08-19 14:31:59,892 - INFO - 127.0.0.1 - - [19/Aug/2025 14:31:59] "GET /sales-by-gender HTTP/1.1" 200 -
2025-08-19 14:32:00,104 - INFO - 127.0.0.1 - - [19/Aug/2025 14:32:00] "GET /api/average-ticket-size HTTP/1.1" 200 -
2025-08-19 14:32:01,537 - INFO - 127.0.0.1 - - [19/Aug/2025 14:32:01] "GET /dashboard/analytics HTTP/1.1" 200 -
2025-08-19 14:32:01,631 - INFO - 127.0.0.1 - - [19/Aug/2025 14:32:01] "GET /api/loans-by-region HTTP/1.1" 200 -
2025-08-19 14:32:01,816 - INFO - 127.0.0.1 - - [19/Aug/2025 14:32:01] "GET /api/loans-by-district HTTP/1.1" 200 -
2025-08-19 14:32:01,897 - INFO - 127.0.0.1 - - [19/Aug/2025 14:32:01] "GET /api/average-ticket-size HTTP/1.1" 200 -
2025-08-19 14:32:04,268 - INFO - 127.0.0.1 - - [19/Aug/2025 14:32:04] "GET /sales-by-gender HTTP/1.1" 200 -
[2025-08-19 15:06:05,048] INFO in app: ==================================================
[2025-08-19 15:06:05,058] INFO in app: Application logging initialized successfully
[2025-08-19 15:06:05,060] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 15:06:05,062] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 15:06:05,064] INFO in app: System encoding: utf-8
[2025-08-19 15:06:05,066] INFO in app: ==================================================
2025-08-19 15:06:05,363 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-19 15:06:05,365 - INFO - Added job "snapshot_par" to job store "default"
2025-08-19 15:06:05,365 - INFO - Scheduler started
2025-08-19 15:06:05,983 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-19 15:06:05,983 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-19 15:06:05,992 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-19 15:06:05,992 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-19 15:06:26,600] INFO in app: ==================================================
[2025-08-19 15:06:26,608] INFO in app: Application logging initialized successfully
[2025-08-19 15:06:26,610] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 15:06:26,617] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 15:06:26,620] INFO in app: System encoding: utf-8
[2025-08-19 15:06:26,621] INFO in app: ==================================================
2025-08-19 15:06:26,938 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-19 15:06:26,940 - INFO - Added job "snapshot_par" to job store "default"
2025-08-19 15:06:26,940 - INFO - Scheduler started
2025-08-19 15:06:27,556 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-19 15:06:27,556 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-19 15:06:27,566 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-19 15:06:27,566 - INFO - [33mPress CTRL+C to quit[0m
2025-08-19 15:07:51,712 - INFO - 127.0.0.1 - - [19/Aug/2025 15:07:51] "GET /sales-by-gender HTTP/1.1" 200 -
2025-08-19 15:07:53,504 - INFO - 127.0.0.1 - - [19/Aug/2025 15:07:53] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-19 15:07:55,199 - INFO - 127.0.0.1 - - [19/Aug/2025 15:07:55] "GET /dashboard/analytics HTTP/1.1" 200 -
2025-08-19 15:07:55,479 - INFO - 127.0.0.1 - - [19/Aug/2025 15:07:55] "GET /api/loans-by-region HTTP/1.1" 200 -
2025-08-19 15:07:55,570 - INFO - 127.0.0.1 - - [19/Aug/2025 15:07:55] "GET /api/loans-by-district HTTP/1.1" 200 -
2025-08-19 15:07:55,572 - INFO - 127.0.0.1 - - [19/Aug/2025 15:07:55] "GET /api/average-ticket-size HTTP/1.1" 200 -
2025-08-19 15:07:57,393 - INFO - 127.0.0.1 - - [19/Aug/2025 15:07:57] "[32mGET /sales-by-month HTTP/1.1[0m" 302 -
2025-08-19 15:07:57,549 - INFO - 127.0.0.1 - - [19/Aug/2025 15:07:57] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-19 15:07:57,676 - INFO - 127.0.0.1 - - [19/Aug/2025 15:07:57] "GET /notifications/sales-summary HTTP/1.1" 200 -
[2025-08-19 15:11:38,543] INFO in app: ==================================================
[2025-08-19 15:11:38,551] INFO in app: Application logging initialized successfully
[2025-08-19 15:11:38,554] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 15:11:38,560] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 15:11:38,567] INFO in app: System encoding: utf-8
[2025-08-19 15:11:38,569] INFO in app: ==================================================
2025-08-19 15:11:38,916 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-19 15:11:38,918 - INFO - Added job "snapshot_par" to job store "default"
2025-08-19 15:11:38,918 - INFO - Scheduler started
2025-08-19 15:11:40,019 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-19 15:11:40,019 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-19 15:11:40,038 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-19 15:11:40,038 - INFO - [33mPress CTRL+C to quit[0m
2025-08-19 15:11:49,310 - INFO - 127.0.0.1 - - [19/Aug/2025 15:11:49] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-19 15:11:50,531 - INFO - 127.0.0.1 - - [19/Aug/2025 15:11:50] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-19 15:11:52,296 - INFO - 127.0.0.1 - - [19/Aug/2025 15:11:52] "GET /sales-by-month HTTP/1.1" 200 -
2025-08-19 15:11:52,574 - INFO - 127.0.0.1 - - [19/Aug/2025 15:11:52] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-19 15:14:56,888] INFO in app: ==================================================
[2025-08-19 15:14:56,898] INFO in app: Application logging initialized successfully
[2025-08-19 15:14:56,902] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 15:14:56,906] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 15:14:56,913] INFO in app: System encoding: utf-8
[2025-08-19 15:14:56,915] INFO in app: ==================================================
2025-08-19 15:14:57,264 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-19 15:14:57,265 - INFO - Added job "snapshot_par" to job store "default"
2025-08-19 15:14:57,266 - INFO - Scheduler started
2025-08-19 15:14:58,385 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-19 15:14:58,386 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-19 15:14:58,416 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-19 15:14:58,418 - INFO - [33mPress CTRL+C to quit[0m
2025-08-19 15:15:02,708 - INFO - 127.0.0.1 - - [19/Aug/2025 15:15:02] "GET /sales-by-month HTTP/1.1" 200 -
2025-08-19 15:15:05,478 - INFO - 127.0.0.1 - - [19/Aug/2025 15:15:05] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-19 15:15:10,189 - INFO - 127.0.0.1 - - [19/Aug/2025 15:15:10] "GET /sales-by-month?category= HTTP/1.1" 200 -
[2025-08-19 15:20:25,306] INFO in app: ==================================================
[2025-08-19 15:20:25,315] INFO in app: Application logging initialized successfully
[2025-08-19 15:20:25,318] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 15:20:25,320] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 15:20:25,328] INFO in app: System encoding: utf-8
[2025-08-19 15:20:25,332] INFO in app: ==================================================
2025-08-19 15:20:25,662 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-19 15:20:25,664 - INFO - Added job "snapshot_par" to job store "default"
2025-08-19 15:20:25,664 - INFO - Scheduler started
2025-08-19 15:20:26,454 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-19 15:20:26,454 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-19 15:20:26,463 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-19 15:20:26,463 - INFO - [33mPress CTRL+C to quit[0m
2025-08-19 15:20:33,899 - INFO - 127.0.0.1 - - [19/Aug/2025 15:20:33] "GET /sales-by-month?category= HTTP/1.1" 200 -
2025-08-19 15:20:34,868 - INFO - 127.0.0.1 - - [19/Aug/2025 15:20:34] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-19 15:20:42,380 - INFO - 127.0.0.1 - - [19/Aug/2025 15:20:42] "GET /sales-by-month?category= HTTP/1.1" 200 -
2025-08-19 15:24:08,131 - INFO - 127.0.0.1 - - [19/Aug/2025 15:24:08] "GET /sales-by-month?category= HTTP/1.1" 200 -
2025-08-19 15:24:09,244 - INFO - 127.0.0.1 - - [19/Aug/2025 15:24:09] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-19 15:24:11,529 - INFO - 127.0.0.1 - - [19/Aug/2025 15:24:11] "GET /sales-by-month?category= HTTP/1.1" 200 -
[2025-08-19 15:24:26,178] INFO in app: ==================================================
[2025-08-19 15:24:26,190] INFO in app: Application logging initialized successfully
[2025-08-19 15:24:26,192] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 15:24:26,195] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 15:24:26,204] INFO in app: System encoding: utf-8
[2025-08-19 15:24:26,206] INFO in app: ==================================================
2025-08-19 15:24:26,527 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-19 15:24:26,529 - INFO - Added job "snapshot_par" to job store "default"
2025-08-19 15:24:26,529 - INFO - Scheduler started
2025-08-19 15:24:27,577 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-19 15:24:27,578 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-19 15:24:27,593 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-19 15:24:27,593 - INFO - [33mPress CTRL+C to quit[0m
2025-08-19 15:24:36,823 - INFO - 127.0.0.1 - - [19/Aug/2025 15:24:36] "GET /sales-by-month?category= HTTP/1.1" 200 -
2025-08-19 15:24:39,566 - INFO - 127.0.0.1 - - [19/Aug/2025 15:24:39] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-19 15:25:07,805 - INFO - 127.0.0.1 - - [19/Aug/2025 15:25:07] "GET /sales-by-month?category=private_sector HTTP/1.1" 200 -
2025-08-19 15:25:13,727 - INFO - 127.0.0.1 - - [19/Aug/2025 15:25:13] "GET /sales-by-month?category= HTTP/1.1" 200 -
[2025-08-19 15:29:11,775] INFO in app: ==================================================
[2025-08-19 15:29:11,781] INFO in app: Application logging initialized successfully
[2025-08-19 15:29:11,786] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 15:29:11,789] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 15:29:11,793] INFO in app: System encoding: utf-8
[2025-08-19 15:29:11,795] INFO in app: ==================================================
2025-08-19 15:29:12,081 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-19 15:29:12,083 - INFO - Added job "snapshot_par" to job store "default"
2025-08-19 15:29:12,083 - INFO - Scheduler started
2025-08-19 15:29:12,945 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-19 15:29:12,945 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-19 15:29:12,956 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-19 15:29:12,956 - INFO - [33mPress CTRL+C to quit[0m
2025-08-19 15:29:24,682 - INFO - 127.0.0.1 - - [19/Aug/2025 15:29:24] "GET /sales-by-month?category= HTTP/1.1" 200 -
2025-08-19 15:29:25,770 - INFO - 127.0.0.1 - - [19/Aug/2025 15:29:25] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-19 15:29:33,442 - INFO - 127.0.0.1 - - [19/Aug/2025 15:29:33] "[32mGET /sales-by-month/download?category= HTTP/1.1[0m" 302 -
2025-08-19 15:29:33,764 - INFO - 127.0.0.1 - - [19/Aug/2025 15:29:33] "GET /sales-by-month HTTP/1.1" 200 -
[2025-08-19 15:30:42,220] INFO in app: ==================================================
[2025-08-19 15:30:42,229] INFO in app: Application logging initialized successfully
[2025-08-19 15:30:42,246] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 15:30:42,248] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 15:30:42,250] INFO in app: System encoding: utf-8
[2025-08-19 15:30:42,259] INFO in app: ==================================================
2025-08-19 15:30:42,630 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-19 15:30:42,632 - INFO - Added job "snapshot_par" to job store "default"
2025-08-19 15:30:42,632 - INFO - Scheduler started
2025-08-19 15:30:43,348 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-19 15:30:43,348 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-19 15:30:43,361 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-19 15:30:43,361 - INFO - [33mPress CTRL+C to quit[0m
2025-08-19 15:30:50,464 - INFO - 127.0.0.1 - - [19/Aug/2025 15:30:50] "GET /sales-by-month HTTP/1.1" 200 -
2025-08-19 15:30:58,489 - INFO - 127.0.0.1 - - [19/Aug/2025 15:30:58] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-19 15:31:00,630 - INFO - 127.0.0.1 - - [19/Aug/2025 15:31:00] "[32mGET /sales-by-month/download HTTP/1.1[0m" 302 -
2025-08-19 15:31:00,944 - INFO - 127.0.0.1 - - [19/Aug/2025 15:31:00] "GET /sales-by-month HTTP/1.1" 200 -
[2025-08-19 15:40:50,275] INFO in app: ==================================================
[2025-08-19 15:40:50,283] INFO in app: Application logging initialized successfully
[2025-08-19 15:40:50,287] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 15:40:50,289] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 15:40:50,291] INFO in app: System encoding: utf-8
[2025-08-19 15:40:50,296] INFO in app: ==================================================
2025-08-19 15:40:50,584 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-19 15:40:50,585 - INFO - Added job "snapshot_par" to job store "default"
2025-08-19 15:40:50,585 - INFO - Scheduler started
2025-08-19 15:40:51,392 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-19 15:40:51,392 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-19 15:40:51,405 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-19 15:40:51,405 - INFO - [33mPress CTRL+C to quit[0m
2025-08-19 15:40:54,220 - INFO - 127.0.0.1 - - [19/Aug/2025 15:40:54] "GET /sales-by-month HTTP/1.1" 200 -
2025-08-19 15:40:54,921 - INFO - 127.0.0.1 - - [19/Aug/2025 15:40:54] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-19 15:40:57,002 - INFO - 127.0.0.1 - - [19/Aug/2025 15:40:57] "GET /sales-by-month/download HTTP/1.1" 200 -
[2025-08-19 15:55:06,348] INFO in app: ==================================================
[2025-08-19 15:55:06,355] INFO in app: Application logging initialized successfully
[2025-08-19 15:55:06,358] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 15:55:06,362] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 15:55:06,367] INFO in app: System encoding: utf-8
[2025-08-19 15:55:06,370] INFO in app: ==================================================
2025-08-19 15:55:06,670 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-19 15:55:06,672 - INFO - Added job "snapshot_par" to job store "default"
2025-08-19 15:55:06,672 - INFO - Scheduler started
2025-08-19 15:55:07,288 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-19 15:55:07,289 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-19 15:55:07,352 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-19 15:55:07,352 - INFO - [33mPress CTRL+C to quit[0m
2025-08-19 15:55:12,535 - INFO - 127.0.0.1 - - [19/Aug/2025 15:55:12] "GET / HTTP/1.1" 200 -
2025-08-19 15:55:13,975 - INFO - 127.0.0.1 - - [19/Aug/2025 15:55:13] "GET / HTTP/1.1" 200 -
2025-08-19 15:55:15,490 - INFO - 127.0.0.1 - - [19/Aug/2025 15:55:15] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-19 15:55:18,191] ERROR in app: Exception on /dashboard/sales [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8304, in sales_dashboard
    return render_template(
        "dashboard/sales_dashboard.html",
    ...<5 lines>...
        notif=notif
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 177, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 159, in block 'content'
    <td>{{ totals_row.month }}</td>
    ^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'totals_row' is undefined
2025-08-19 15:55:18,191 - ERROR - Exception on /dashboard/sales [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8304, in sales_dashboard
    return render_template(
        "dashboard/sales_dashboard.html",
    ...<5 lines>...
        notif=notif
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 177, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 159, in block 'content'
    <td>{{ totals_row.month }}</td>
    ^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'totals_row' is undefined
2025-08-19 15:55:18,224 - INFO - 127.0.0.1 - - [19/Aug/2025 15:55:18] "[35m[1mGET /dashboard/sales HTTP/1.1[0m" 500 -
[2025-08-19 16:00:20,584] INFO in app: ==================================================
[2025-08-19 16:00:20,592] INFO in app: Application logging initialized successfully
[2025-08-19 16:00:20,594] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 16:00:20,596] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 16:00:20,599] INFO in app: System encoding: utf-8
[2025-08-19 16:00:20,607] INFO in app: ==================================================
2025-08-19 16:00:20,928 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-19 16:00:20,930 - INFO - Added job "snapshot_par" to job store "default"
2025-08-19 16:00:20,930 - INFO - Scheduler started
2025-08-19 16:00:21,999 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-19 16:00:22,000 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-19 16:00:22,020 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-19 16:00:22,021 - INFO - [33mPress CTRL+C to quit[0m
2025-08-19 16:00:27,485 - INFO - 127.0.0.1 - - [19/Aug/2025 16:00:27] "GET / HTTP/1.1" 200 -
2025-08-19 16:00:29,293 - INFO - 127.0.0.1 - - [19/Aug/2025 16:00:29] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-19 16:00:29,993] ERROR in app: Exception on /dashboard/sales [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8304, in sales_dashboard
    return render_template(
        "dashboard/sales_dashboard.html",
    ...<5 lines>...
        notif=notif
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 177, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 159, in block 'content'
    <td>{{ totals_row.month }}</td>
    ^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'totals_row' is undefined
2025-08-19 16:00:29,993 - ERROR - Exception on /dashboard/sales [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8304, in sales_dashboard
    return render_template(
        "dashboard/sales_dashboard.html",
    ...<5 lines>...
        notif=notif
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 177, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 159, in block 'content'
    <td>{{ totals_row.month }}</td>
    ^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'totals_row' is undefined
2025-08-19 16:00:30,022 - INFO - 127.0.0.1 - - [19/Aug/2025 16:00:30] "[35m[1mGET /dashboard/sales HTTP/1.1[0m" 500 -
[2025-08-19 16:01:52,902] INFO in app: ==================================================
[2025-08-19 16:01:52,912] INFO in app: Application logging initialized successfully
[2025-08-19 16:01:52,913] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 16:01:52,915] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 16:01:52,918] INFO in app: System encoding: utf-8
[2025-08-19 16:01:52,921] INFO in app: ==================================================
2025-08-19 16:01:53,205 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-19 16:01:53,208 - INFO - Added job "snapshot_par" to job store "default"
2025-08-19 16:01:53,208 - INFO - Scheduler started
2025-08-19 16:01:53,834 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-19 16:01:53,834 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-19 16:01:53,919 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-19 16:01:53,921 - INFO - [33mPress CTRL+C to quit[0m
[2025-08-19 16:01:59,422] ERROR in app: Exception on /dashboard/sales [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8304, in sales_dashboard
    return render_template(
        "dashboard/sales_dashboard.html",
    ...<5 lines>...
        notif=notif
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 177, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 159, in block 'content'
    <td>{{ totals_row.month }}</td>
    ^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'totals_row' is undefined
2025-08-19 16:01:59,422 - ERROR - Exception on /dashboard/sales [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8304, in sales_dashboard
    return render_template(
        "dashboard/sales_dashboard.html",
    ...<5 lines>...
        notif=notif
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 177, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 159, in block 'content'
    <td>{{ totals_row.month }}</td>
    ^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'totals_row' is undefined
2025-08-19 16:01:59,450 - INFO - 127.0.0.1 - - [19/Aug/2025 16:01:59] "[35m[1mGET /dashboard/sales HTTP/1.1[0m" 500 -
2025-08-19 16:01:59,496 - INFO - 127.0.0.1 - - [19/Aug/2025 16:01:59] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-19 16:02:03,506] ERROR in app: Exception on /dashboard/sales [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8304, in sales_dashboard
    return render_template(
        "dashboard/sales_dashboard.html",
    ...<5 lines>...
        notif=notif
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 177, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 159, in block 'content'
    <td>{{ totals_row.month }}</td>
    ^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'totals_row' is undefined
2025-08-19 16:02:03,506 - ERROR - Exception on /dashboard/sales [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8304, in sales_dashboard
    return render_template(
        "dashboard/sales_dashboard.html",
    ...<5 lines>...
        notif=notif
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 177, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 159, in block 'content'
    <td>{{ totals_row.month }}</td>
    ^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'totals_row' is undefined
2025-08-19 16:02:03,529 - INFO - 127.0.0.1 - - [19/Aug/2025 16:02:03] "[35m[1mGET /dashboard/sales HTTP/1.1[0m" 500 -
[2025-08-19 16:02:59,314] INFO in app: ==================================================
[2025-08-19 16:02:59,322] INFO in app: Application logging initialized successfully
[2025-08-19 16:02:59,324] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 16:02:59,326] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 16:02:59,329] INFO in app: System encoding: utf-8
[2025-08-19 16:02:59,337] INFO in app: ==================================================
2025-08-19 16:02:59,625 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-19 16:02:59,627 - INFO - Added job "snapshot_par" to job store "default"
2025-08-19 16:02:59,627 - INFO - Scheduler started
2025-08-19 16:03:00,221 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-19 16:03:00,221 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-19 16:03:00,232 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-19 16:03:00,232 - INFO - [33mPress CTRL+C to quit[0m
2025-08-19 16:03:07,338 - INFO - 127.0.0.1 - - [19/Aug/2025 16:03:07] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-19 16:03:08,075 - INFO - 127.0.0.1 - - [19/Aug/2025 16:03:08] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-19 16:03:08,873 - INFO - 127.0.0.1 - - [19/Aug/2025 16:03:08] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-19 16:03:10,235 - INFO - 127.0.0.1 - - [19/Aug/2025 16:03:10] "[32mGET /sales-by-month HTTP/1.1[0m" 302 -
2025-08-19 16:03:10,280 - INFO - 127.0.0.1 - - [19/Aug/2025 16:03:10] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-19 16:03:10,372 - INFO - 127.0.0.1 - - [19/Aug/2025 16:03:10] "GET /notifications/sales-summary HTTP/1.1" 200 -
[2025-08-19 16:07:55,377] INFO in app: ==================================================
[2025-08-19 16:07:55,386] INFO in app: Application logging initialized successfully
[2025-08-19 16:07:55,388] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 16:07:55,390] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 16:07:55,392] INFO in app: System encoding: utf-8
[2025-08-19 16:07:55,394] INFO in app: ==================================================
2025-08-19 16:07:55,706 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-19 16:07:55,707 - INFO - Added job "snapshot_par" to job store "default"
2025-08-19 16:07:55,707 - INFO - Scheduler started
2025-08-19 16:07:56,345 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-19 16:07:56,345 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-19 16:07:56,355 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-19 16:07:56,355 - INFO - [33mPress CTRL+C to quit[0m
2025-08-19 16:08:00,376 - INFO - 127.0.0.1 - - [19/Aug/2025 16:08:00] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-19 16:08:03,872 - INFO - 127.0.0.1 - - [19/Aug/2025 16:08:03] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-19 16:08:05,312 - INFO - 127.0.0.1 - - [19/Aug/2025 16:08:05] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-19 16:08:07,132 - INFO - 127.0.0.1 - - [19/Aug/2025 16:08:07] "GET /sales-by-month HTTP/1.1" 200 -
2025-08-19 16:08:11,483 - INFO - 127.0.0.1 - - [19/Aug/2025 16:08:11] "GET /sales-by-month/download/2025-08 HTTP/1.1" 200 -
[2025-08-19 16:12:46,538] INFO in app: ==================================================
[2025-08-19 16:12:46,545] INFO in app: Application logging initialized successfully
[2025-08-19 16:12:46,548] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 16:12:46,556] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 16:12:46,564] INFO in app: System encoding: utf-8
[2025-08-19 16:12:46,571] INFO in app: ==================================================
2025-08-19 16:12:46,943 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-19 16:12:46,944 - INFO - Added job "snapshot_par" to job store "default"
2025-08-19 16:12:46,944 - INFO - Scheduler started
2025-08-19 16:12:47,612 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-19 16:12:47,612 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-19 16:12:47,622 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-19 16:12:47,622 - INFO - [33mPress CTRL+C to quit[0m
2025-08-19 16:13:01,184 - INFO - 127.0.0.1 - - [19/Aug/2025 16:13:01] "GET /sales-by-month HTTP/1.1" 200 -
2025-08-19 16:13:03,108 - INFO - 127.0.0.1 - - [19/Aug/2025 16:13:03] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-19 16:13:05,739 - INFO - 127.0.0.1 - - [19/Aug/2025 16:13:05] "GET / HTTP/1.1" 200 -
2025-08-19 16:13:09,821 - INFO - 127.0.0.1 - - [19/Aug/2025 16:13:09] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-19 16:13:10,093 - INFO - 127.0.0.1 - - [19/Aug/2025 16:13:10] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-19 16:13:11,585 - INFO - 127.0.0.1 - - [19/Aug/2025 16:13:11] "GET /sales-by-month HTTP/1.1" 200 -
[2025-08-19 16:21:11,958] INFO in app: ==================================================
[2025-08-19 16:21:11,965] INFO in app: Application logging initialized successfully
[2025-08-19 16:21:11,969] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 16:21:11,971] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 16:21:11,973] INFO in app: System encoding: utf-8
[2025-08-19 16:21:11,974] INFO in app: ==================================================
2025-08-19 16:21:12,481 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-19 16:21:12,483 - INFO - Added job "snapshot_par" to job store "default"
2025-08-19 16:21:12,483 - INFO - Scheduler started
2025-08-19 16:21:13,197 - INFO - Added job "auto_post_payments" to job store "default"
2025-08-19 16:21:13,197 - INFO - Added job "send_sales_notification_email" to job store "default"
2025-08-19 16:21:13,206 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-08-19 16:21:13,206 - INFO - [33mPress CTRL+C to quit[0m
2025-08-19 16:21:19,440 - INFO - 127.0.0.1 - - [19/Aug/2025 16:21:19] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-19 16:21:20,055 - INFO - 127.0.0.1 - - [19/Aug/2025 16:21:20] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-19 16:21:21,651 - INFO - 127.0.0.1 - - [19/Aug/2025 16:21:21] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-19 16:21:24,144 - INFO - 127.0.0.1 - - [19/Aug/2025 16:21:24] "GET /sales-by-month HTTP/1.1" 200 -
2025-08-19 16:21:29,815 - INFO - 127.0.0.1 - - [19/Aug/2025 16:21:29] "GET /sales-by-gender HTTP/1.1" 200 -
2025-08-19 16:21:31,021 - INFO - 127.0.0.1 - - [19/Aug/2025 16:21:31] "GET /dashboard/analytics HTTP/1.1" 200 -
2025-08-19 16:21:31,342 - INFO - 127.0.0.1 - - [19/Aug/2025 16:21:31] "GET /api/loans-by-region HTTP/1.1" 200 -
2025-08-19 16:21:31,398 - INFO - 127.0.0.1 - - [19/Aug/2025 16:21:31] "GET /api/loans-by-district HTTP/1.1" 200 -
2025-08-19 16:21:31,401 - INFO - 127.0.0.1 - - [19/Aug/2025 16:21:31] "GET /api/average-ticket-size HTTP/1.1" 200 -
2025-08-19 16:21:32,794 - INFO - 127.0.0.1 - - [19/Aug/2025 16:21:32] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-19 16:21:33,728 - INFO - 127.0.0.1 - - [19/Aug/2025 16:21:33] "GET /dashboard/sales HTTP/1.1" 200 -
2025-08-19 16:21:33,792 - INFO - 127.0.0.1 - - [19/Aug/2025 16:21:33] "GET /notifications/sales-summary HTTP/1.1" 200 -
2025-08-19 17:00:00,016 - INFO - Running job "send_sales_notification_email (trigger: cron[hour='17', minute='0'], next run at: 2025-08-19 17:00:00 CAT)" (scheduled at 2025-08-19 17:00:00+02:00)
2025-08-19 17:00:00,083 - ERROR - Job "send_sales_notification_email (trigger: cron[hour='17', minute='0'], next run at: 2025-08-20 17:00:00 CAT)" raised an exception
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\apscheduler\executors\base.py", line 131, in run_job
    retval = job.func(*job.args, **job.kwargs)
  File "C:\Users\pc\loan-app\app.py", line 9857, in send_sales_notification_email
    db.session.rollback()
    ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 1794, in rollback
    return self._proxied.rollback()
           ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 197, in _proxied
    return self.registry()
           ~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 634, in __call__
    key = self.scopefunc()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_sqlalchemy\session.py", line 111, in _app_ctx_id
    return id(app_ctx._get_current_object())  # type: ignore[attr-defined]
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
2025-08-19 17:03:58,746 - INFO - 127.0.0.1 - - [19/Aug/2025 17:03:58] "GET /sales-by-gender HTTP/1.1" 200 -
2025-08-19 17:04:02,123 - INFO - 127.0.0.1 - - [19/Aug/2025 17:04:02] "GET /dashboard/analytics HTTP/1.1" 200 -
2025-08-19 17:04:02,444 - INFO - 127.0.0.1 - - [19/Aug/2025 17:04:02] "GET /api/loans-by-region HTTP/1.1" 200 -
2025-08-19 17:04:02,541 - INFO - 127.0.0.1 - - [19/Aug/2025 17:04:02] "GET /api/loans-by-district HTTP/1.1" 200 -
2025-08-19 17:04:02,543 - INFO - 127.0.0.1 - - [19/Aug/2025 17:04:02] "GET /api/average-ticket-size HTTP/1.1" 200 -
2025-08-19 17:04:05,041 - INFO - 127.0.0.1 - - [19/Aug/2025 17:04:05] "GET /sales-by-month HTTP/1.1" 200 -
2025-08-19 17:04:07,273 - INFO - 127.0.0.1 - - [19/Aug/2025 17:04:07] "GET /sales-by-gender HTTP/1.1" 200 -
2025-08-19 17:04:08,897 - INFO - 127.0.0.1 - - [19/Aug/2025 17:04:08] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-19 17:04:15,798 - INFO - 127.0.0.1 - - [19/Aug/2025 17:04:15] "GET /dashboard/analytics HTTP/1.1" 200 -
2025-08-19 17:04:16,103 - INFO - 127.0.0.1 - - [19/Aug/2025 17:04:16] "GET /api/loans-by-region HTTP/1.1" 200 -
2025-08-19 17:04:16,175 - INFO - 127.0.0.1 - - [19/Aug/2025 17:04:16] "GET /api/loans-by-district HTTP/1.1" 200 -
2025-08-19 17:04:16,180 - INFO - 127.0.0.1 - - [19/Aug/2025 17:04:16] "GET /api/average-ticket-size HTTP/1.1" 200 -
2025-08-19 17:04:17,780 - INFO - 127.0.0.1 - - [19/Aug/2025 17:04:17] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-19 17:04:19,234 - INFO - 127.0.0.1 - - [19/Aug/2025 17:04:19] "GET /sales-by-month HTTP/1.1" 200 -
2025-08-19 17:04:21,633 - INFO - 127.0.0.1 - - [19/Aug/2025 17:04:21] "GET /sales-by-gender HTTP/1.1" 200 -
2025-08-19 17:04:40,702 - INFO - 127.0.0.1 - - [19/Aug/2025 17:04:40] "GET /dashboard/team-leader HTTP/1.1" 200 -
2025-08-19 17:04:43,651 - INFO - 127.0.0.1 - - [19/Aug/2025 17:04:43] "GET /sales-by-month HTTP/1.1" 200 -
2025-08-19 17:11:45,857 - INFO - 127.0.0.1 - - [19/Aug/2025 17:11:45] "GET /sales-by-month HTTP/1.1" 200 -
2025-08-19 17:11:58,166 - INFO - 127.0.0.1 - - [19/Aug/2025 17:11:58] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-08-19 17:12:19,104] INFO in app: ==================================================
[2025-08-19 17:12:19,111] INFO in app: Application logging initialized successfully
[2025-08-19 17:12:19,113] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 17:12:19,116] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 17:12:19,118] INFO in app: System encoding: utf-8
[2025-08-19 17:12:19,124] INFO in app: ==================================================
2025-08-19 17:12:19,406 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-08-19 17:12:19,408 - INFO - Added job "snapshot_par" to job store "default"
2025-08-19 17:12:19,408 - INFO - Scheduler started
