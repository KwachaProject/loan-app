[2025-06-23 03:35:26,623] INFO in app: ==================================================
[2025-06-23 03:35:26,710] INFO in app: Application logging initialized successfully
[2025-06-23 03:35:26,712] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-23 03:35:26,714] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-23 03:35:26,721] INFO in app: System encoding: utf-8
[2025-06-23 03:35:26,723] INFO in app: ==================================================
2025-06-23 03:35:26,948 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-23 03:35:26,948 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-23 03:35:28,277] INFO in app: Found 6 loans for customer 202506000002
2025-06-23 03:35:28,277 - INFO - Found 6 loans for customer 202506000002
[2025-06-23 03:35:28,279] INFO in app: Customer ID: 2
2025-06-23 03:35:28,279 - INFO - Customer ID: 2
[2025-06-23 03:35:28,280] INFO in app: Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 03:35:28,280 - INFO - Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 03:35:28,365 - INFO - 127.0.0.1 - - [23/Jun/2025 03:35:28] "GET /customer/202506000002/account?section=settlement HTTP/1.1" 200 -
2025-06-23 03:35:28,566 - INFO - 127.0.0.1 - - [23/Jun/2025 03:35:28] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-06-23 03:36:24,531] ERROR in app: Exception on /settle_loan/7 [POST]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 465, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 4249, in settle_loan
    loan.settlement_reason    = reason
    ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 537, in __set__
    self.impl.set(
    ~~~~~~~~~~~~~^
        instance_state(instance), instance_dict(instance), value, None
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1277, in set
    value = self.fire_replace_event(
        state, dict_, value, old, initiator
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1292, in fire_replace_event
    value = fn(
        state, value, previous, initiator or self._replace_token
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 2579, in wrap
    return fn(target, *arg)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\util.py", line 307, in set_
    return validator(state.obj(), key, value)
  File "C:\Users\pc\loan-app\app.py", line 615, in validate_reason
    if value.lower() not in allowed_reasons:
       ^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'lower'
2025-06-23 03:36:24,531 - ERROR - Exception on /settle_loan/7 [POST]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 465, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 4249, in settle_loan
    loan.settlement_reason    = reason
    ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 537, in __set__
    self.impl.set(
    ~~~~~~~~~~~~~^
        instance_state(instance), instance_dict(instance), value, None
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1277, in set
    value = self.fire_replace_event(
        state, dict_, value, old, initiator
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1292, in fire_replace_event
    value = fn(
        state, value, previous, initiator or self._replace_token
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 2579, in wrap
    return fn(target, *arg)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\util.py", line 307, in set_
    return validator(state.obj(), key, value)
  File "C:\Users\pc\loan-app\app.py", line 615, in validate_reason
    if value.lower() not in allowed_reasons:
       ^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'lower'
2025-06-23 03:36:24,591 - INFO - 127.0.0.1 - - [23/Jun/2025 03:36:24] "[35m[1mPOST /settle_loan/7 HTTP/1.1[0m" 500 -
[2025-06-23 04:05:11,614] INFO in app: ==================================================
[2025-06-23 04:05:11,621] INFO in app: Application logging initialized successfully
[2025-06-23 04:05:11,623] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-23 04:05:11,624] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-23 04:05:11,626] INFO in app: System encoding: utf-8
[2025-06-23 04:05:11,633] INFO in app: ==================================================
2025-06-23 04:05:11,825 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-23 04:05:11,826 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-23 04:05:29,652] ERROR in app: Exception on /settle_loan/7 [POST]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 465, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 4249, in settle_loan
    loan.settlement_reason    = reason
    ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 537, in __set__
    self.impl.set(
    ~~~~~~~~~~~~~^
        instance_state(instance), instance_dict(instance), value, None
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1277, in set
    value = self.fire_replace_event(
        state, dict_, value, old, initiator
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1292, in fire_replace_event
    value = fn(
        state, value, previous, initiator or self._replace_token
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 2579, in wrap
    return fn(target, *arg)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\util.py", line 307, in set_
    return validator(state.obj(), key, value)
  File "C:\Users\pc\loan-app\app.py", line 615, in validate_reason
    if value.lower() not in allowed_reasons:
       ^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'lower'
2025-06-23 04:05:29,652 - ERROR - Exception on /settle_loan/7 [POST]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 465, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 4249, in settle_loan
    loan.settlement_reason    = reason
    ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 537, in __set__
    self.impl.set(
    ~~~~~~~~~~~~~^
        instance_state(instance), instance_dict(instance), value, None
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1277, in set
    value = self.fire_replace_event(
        state, dict_, value, old, initiator
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1292, in fire_replace_event
    value = fn(
        state, value, previous, initiator or self._replace_token
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 2579, in wrap
    return fn(target, *arg)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\util.py", line 307, in set_
    return validator(state.obj(), key, value)
  File "C:\Users\pc\loan-app\app.py", line 615, in validate_reason
    if value.lower() not in allowed_reasons:
       ^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'lower'
2025-06-23 04:05:29,693 - INFO - 127.0.0.1 - - [23/Jun/2025 04:05:29] "[35m[1mPOST /settle_loan/7 HTTP/1.1[0m" 500 -
2025-06-23 04:05:29,766 - INFO - 127.0.0.1 - - [23/Jun/2025 04:05:29] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-23 04:05:39,408 - INFO - 127.0.0.1 - - [23/Jun/2025 04:05:39] "GET /loanbook HTTP/1.1" 200 -
2025-06-23 04:05:53,511 - INFO - 127.0.0.1 - - [23/Jun/2025 04:05:53] "[32mGET /loan/136000008/statement HTTP/1.1[0m" 302 -
2025-06-23 04:05:53,761 - INFO - 127.0.0.1 - - [23/Jun/2025 04:05:53] "GET /loanbook HTTP/1.1" 200 -
[2025-06-23 04:06:22,804] INFO in app: ==================================================
[2025-06-23 04:06:22,810] INFO in app: Application logging initialized successfully
[2025-06-23 04:06:22,812] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-23 04:06:22,814] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-23 04:06:22,816] INFO in app: System encoding: utf-8
[2025-06-23 04:06:22,818] INFO in app: ==================================================
2025-06-23 04:06:23,007 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-23 04:06:23,007 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-23 04:10:15,308] INFO in app: ==================================================
[2025-06-23 04:10:15,314] INFO in app: Application logging initialized successfully
[2025-06-23 04:10:15,316] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-23 04:10:15,317] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-23 04:10:15,321] INFO in app: System encoding: utf-8
[2025-06-23 04:10:15,323] INFO in app: ==================================================
2025-06-23 04:10:15,522 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-23 04:10:15,522 - INFO - [33mPress CTRL+C to quit[0m
2025-06-23 04:10:33,719 - INFO - 127.0.0.1 - - [23/Jun/2025 04:10:33] "GET /loanbook HTTP/1.1" 200 -
2025-06-23 04:10:44,538 - INFO - 127.0.0.1 - - [23/Jun/2025 04:10:44] "[32mGET /loan/136000008/statement HTTP/1.1[0m" 302 -
2025-06-23 04:10:44,559 - INFO - 127.0.0.1 - - [23/Jun/2025 04:10:44] "GET /loanbook HTTP/1.1" 200 -
2025-06-23 04:10:48,518 - INFO - 127.0.0.1 - - [23/Jun/2025 04:10:48] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-06-23 04:12:48,400] INFO in app: ==================================================
[2025-06-23 04:12:48,406] INFO in app: Application logging initialized successfully
[2025-06-23 04:12:48,409] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-23 04:12:48,411] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-23 04:12:48,413] INFO in app: System encoding: utf-8
[2025-06-23 04:12:48,415] INFO in app: ==================================================
2025-06-23 04:12:48,589 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-23 04:12:48,589 - INFO - [33mPress CTRL+C to quit[0m
2025-06-23 04:12:53,132 - INFO - 127.0.0.1 - - [23/Jun/2025 04:12:53] "GET /loanbook HTTP/1.1" 200 -
2025-06-23 04:12:54,995 - INFO - 127.0.0.1 - - [23/Jun/2025 04:12:54] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-23 04:12:59,984 - INFO - 127.0.0.1 - - [23/Jun/2025 04:12:59] "GET /loan/136000008/statement HTTP/1.1" 200 -
2025-06-23 04:15:00,540 - INFO - 127.0.0.1 - - [23/Jun/2025 04:15:00] "GET /loanbook HTTP/1.1" 200 -
[2025-06-23 04:15:29,147] INFO in app: Found 6 loans for customer 202506000002
2025-06-23 04:15:29,147 - INFO - Found 6 loans for customer 202506000002
[2025-06-23 04:15:29,150] INFO in app: Customer ID: 2
2025-06-23 04:15:29,150 - INFO - Customer ID: 2
[2025-06-23 04:15:29,158] INFO in app: Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 04:15:29,158 - INFO - Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 04:15:29,218 - INFO - 127.0.0.1 - - [23/Jun/2025 04:15:29] "GET /customer/202506000002/account HTTP/1.1" 200 -
[2025-06-23 04:15:34,190] INFO in app: Found 6 loans for customer 202506000002
2025-06-23 04:15:34,190 - INFO - Found 6 loans for customer 202506000002
[2025-06-23 04:15:34,192] INFO in app: Customer ID: 2
2025-06-23 04:15:34,192 - INFO - Customer ID: 2
[2025-06-23 04:15:34,207] INFO in app: Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 04:15:34,207 - INFO - Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 04:15:34,230 - INFO - 127.0.0.1 - - [23/Jun/2025 04:15:34] "GET /customer/202506000002/account?section=settlement HTTP/1.1" 200 -
2025-06-23 04:15:45,343 - INFO - 127.0.0.1 - - [23/Jun/2025 04:15:45] "[32mPOST /settle_loan/4 HTTP/1.1[0m" 302 -
[2025-06-23 04:15:45,656] INFO in app: Found 6 loans for customer 202506000002
2025-06-23 04:15:45,656 - INFO - Found 6 loans for customer 202506000002
[2025-06-23 04:15:45,661] INFO in app: Customer ID: 2
2025-06-23 04:15:45,661 - INFO - Customer ID: 2
[2025-06-23 04:15:45,668] INFO in app: Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 04:15:45,668 - INFO - Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 04:15:45,692 - INFO - 127.0.0.1 - - [23/Jun/2025 04:15:45] "GET /customer/202506000002/account?section=settlement HTTP/1.1" 200 -
[2025-06-23 04:16:19,095] ERROR in app: Settlement error for loan 4: 'NoneType' object has no attribute 'lower'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 4259, in settle_loan
    loan.settlement_reason = reason  # Now guaranteed non-None for required types
    ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 537, in __set__
    self.impl.set(
    ~~~~~~~~~~~~~^
        instance_state(instance), instance_dict(instance), value, None
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1277, in set
    value = self.fire_replace_event(
        state, dict_, value, old, initiator
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1292, in fire_replace_event
    value = fn(
        state, value, previous, initiator or self._replace_token
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 2579, in wrap
    return fn(target, *arg)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\util.py", line 307, in set_
    return validator(state.obj(), key, value)
  File "C:\Users\pc\loan-app\app.py", line 615, in validate_reason
    if value.lower() not in allowed_reasons:
       ^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'lower'
2025-06-23 04:16:19,095 - ERROR - Settlement error for loan 4: 'NoneType' object has no attribute 'lower'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 4259, in settle_loan
    loan.settlement_reason = reason  # Now guaranteed non-None for required types
    ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 537, in __set__
    self.impl.set(
    ~~~~~~~~~~~~~^
        instance_state(instance), instance_dict(instance), value, None
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1277, in set
    value = self.fire_replace_event(
        state, dict_, value, old, initiator
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1292, in fire_replace_event
    value = fn(
        state, value, previous, initiator or self._replace_token
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 2579, in wrap
    return fn(target, *arg)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\util.py", line 307, in set_
    return validator(state.obj(), key, value)
  File "C:\Users\pc\loan-app\app.py", line 615, in validate_reason
    if value.lower() not in allowed_reasons:
       ^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'lower'
2025-06-23 04:16:19,118 - INFO - 127.0.0.1 - - [23/Jun/2025 04:16:19] "[32mPOST /settle_loan/4 HTTP/1.1[0m" 302 -
[2025-06-23 04:16:19,127] INFO in app: Found 6 loans for customer 202506000002
2025-06-23 04:16:19,127 - INFO - Found 6 loans for customer 202506000002
[2025-06-23 04:16:19,130] INFO in app: Customer ID: 2
2025-06-23 04:16:19,130 - INFO - Customer ID: 2
[2025-06-23 04:16:19,132] INFO in app: Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 04:16:19,132 - INFO - Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 04:16:19,159 - INFO - 127.0.0.1 - - [23/Jun/2025 04:16:19] "GET /customer/202506000002/account?section=settlement HTTP/1.1" 200 -
2025-06-23 04:16:52,253 - INFO - 127.0.0.1 - - [23/Jun/2025 04:16:52] "[32mPOST /settle_loan/4 HTTP/1.1[0m" 302 -
[2025-06-23 04:16:52,563] INFO in app: Found 6 loans for customer 202506000002
2025-06-23 04:16:52,563 - INFO - Found 6 loans for customer 202506000002
[2025-06-23 04:16:52,567] INFO in app: Customer ID: 2
2025-06-23 04:16:52,567 - INFO - Customer ID: 2
[2025-06-23 04:16:52,572] INFO in app: Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 04:16:52,572 - INFO - Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 04:16:52,598 - INFO - 127.0.0.1 - - [23/Jun/2025 04:16:52] "GET /customer/202506000002/account?section=settlement HTTP/1.1" 200 -
[2025-06-23 04:38:03,088] INFO in app: ==================================================
[2025-06-23 04:38:03,095] INFO in app: Application logging initialized successfully
[2025-06-23 04:38:03,097] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-23 04:38:03,100] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-23 04:38:03,102] INFO in app: System encoding: utf-8
[2025-06-23 04:38:03,105] INFO in app: ==================================================
2025-06-23 04:38:03,283 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-23 04:38:03,284 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-23 04:38:08,730] INFO in app: Found 6 loans for customer 202506000002
2025-06-23 04:38:08,730 - INFO - Found 6 loans for customer 202506000002
[2025-06-23 04:38:08,733] INFO in app: Customer ID: 2
2025-06-23 04:38:08,733 - INFO - Customer ID: 2
[2025-06-23 04:38:08,734] INFO in app: Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 04:38:08,734 - INFO - Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 04:38:08,815 - INFO - 127.0.0.1 - - [23/Jun/2025 04:38:08] "GET /customer/202506000002/account?section=settlement HTTP/1.1" 200 -
2025-06-23 04:38:09,893 - INFO - 127.0.0.1 - - [23/Jun/2025 04:38:09] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-23 04:38:11,282 - INFO - 127.0.0.1 - - [23/Jun/2025 04:38:11] "GET /loanbook HTTP/1.1" 200 -
2025-06-23 04:38:16,950 - INFO - 127.0.0.1 - - [23/Jun/2025 04:38:16] "GET /loan/136000008/statement HTTP/1.1" 200 -
2025-06-23 04:38:50,992 - INFO - 127.0.0.1 - - [23/Jun/2025 04:38:50] "GET /loanbook HTTP/1.1" 200 -
2025-06-23 04:38:52,712 - INFO - 127.0.0.1 - - [23/Jun/2025 04:38:52] "GET /loan/103000002/statement HTTP/1.1" 200 -
2025-06-23 04:39:09,033 - INFO - 127.0.0.1 - - [23/Jun/2025 04:39:09] "GET /loanbook HTTP/1.1" 200 -
2025-06-23 04:39:14,130 - INFO - 127.0.0.1 - - [23/Jun/2025 04:39:14] "GET /loan/136000008/statement HTTP/1.1" 200 -
2025-06-23 04:39:18,739 - INFO - 127.0.0.1 - - [23/Jun/2025 04:39:18] "GET /loanbook HTTP/1.1" 200 -
2025-06-23 04:39:20,893 - INFO - 127.0.0.1 - - [23/Jun/2025 04:39:20] "GET /loan/112000005/statement HTTP/1.1" 200 -
2025-06-23 04:41:40,448 - INFO - 127.0.0.1 - - [23/Jun/2025 04:41:40] "GET /admin/dashboard HTTP/1.1" 200 -
2025-06-23 04:41:41,964 - INFO - 127.0.0.1 - - [23/Jun/2025 04:41:41] "GET /admin/dashboard?section=cutoff_dates HTTP/1.1" 200 -
2025-06-23 04:42:10,358 - INFO - 127.0.0.1 - - [23/Jun/2025 04:42:10] "[32mPOST /admin/update_cutoff HTTP/1.1[0m" 302 -
2025-06-23 04:42:10,372 - INFO - 127.0.0.1 - - [23/Jun/2025 04:42:10] "GET /admin/dashboard?section=cutoff_dates HTTP/1.1" 200 -
2025-06-23 04:42:24,445 - INFO - 127.0.0.1 - - [23/Jun/2025 04:42:24] "GET /loans HTTP/1.1" 200 -
2025-06-23 04:42:26,546 - INFO - 127.0.0.1 - - [23/Jun/2025 04:42:26] "GET /loanbook HTTP/1.1" 200 -
[2025-06-23 04:42:29,802] INFO in app: Found 6 loans for customer 202506000002
2025-06-23 04:42:29,802 - INFO - Found 6 loans for customer 202506000002
[2025-06-23 04:42:29,805] INFO in app: Customer ID: 2
2025-06-23 04:42:29,805 - INFO - Customer ID: 2
[2025-06-23 04:42:29,810] INFO in app: Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 04:42:29,810 - INFO - Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 04:42:29,843 - INFO - 127.0.0.1 - - [23/Jun/2025 04:42:29] "GET /customer/202506000002/account HTTP/1.1" 200 -
[2025-06-23 04:42:31,480] INFO in app: Found 6 loans for customer 202506000002
2025-06-23 04:42:31,480 - INFO - Found 6 loans for customer 202506000002
[2025-06-23 04:42:31,483] INFO in app: Customer ID: 2
2025-06-23 04:42:31,483 - INFO - Customer ID: 2
[2025-06-23 04:42:31,489] INFO in app: Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 04:42:31,489 - INFO - Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 04:42:31,516 - INFO - 127.0.0.1 - - [23/Jun/2025 04:42:31] "GET /customer/202506000002/account?section=additional HTTP/1.1" 200 -
2025-06-23 04:43:00,001 - INFO - 127.0.0.1 - - [23/Jun/2025 04:43:00] "[32mPOST /apply_additional/3 HTTP/1.1[0m" 302 -
[2025-06-23 04:43:00,275] INFO in app: Found 6 loans for customer 202506000002
2025-06-23 04:43:00,275 - INFO - Found 6 loans for customer 202506000002
[2025-06-23 04:43:00,282] INFO in app: Customer ID: 2
2025-06-23 04:43:00,282 - INFO - Customer ID: 2
[2025-06-23 04:43:00,288] INFO in app: Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 04:43:00,288 - INFO - Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 04:43:00,335 - INFO - 127.0.0.1 - - [23/Jun/2025 04:43:00] "GET /customer/202506000002/account?section=additional HTTP/1.1" 200 -
[2025-06-23 11:27:29,238] INFO in app: ==================================================
[2025-06-23 11:27:29,324] INFO in app: Application logging initialized successfully
[2025-06-23 11:27:29,326] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-23 11:27:29,329] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-23 11:27:29,331] INFO in app: System encoding: utf-8
[2025-06-23 11:27:29,333] INFO in app: ==================================================
2025-06-23 11:27:29,703 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-23 11:27:29,703 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-23 11:27:56,479] INFO in app: Found 6 loans for customer 202506000002
2025-06-23 11:27:56,479 - INFO - Found 6 loans for customer 202506000002
[2025-06-23 11:27:56,482] INFO in app: Customer ID: 2
2025-06-23 11:27:56,482 - INFO - Customer ID: 2
[2025-06-23 11:27:56,483] INFO in app: Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 11:27:56,483 - INFO - Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 11:27:56,658 - INFO - 127.0.0.1 - - [23/Jun/2025 11:27:56] "GET /customer/202506000002/account?section=additional HTTP/1.1" 200 -
2025-06-23 11:27:57,894 - INFO - 127.0.0.1 - - [23/Jun/2025 11:27:57] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-23 11:28:32,588 - INFO - 127.0.0.1 - - [23/Jun/2025 11:28:32] "[32mPOST /apply_additional/3 HTTP/1.1[0m" 302 -
[2025-06-23 11:28:32,859] INFO in app: Found 6 loans for customer 202506000002
2025-06-23 11:28:32,859 - INFO - Found 6 loans for customer 202506000002
[2025-06-23 11:28:32,864] INFO in app: Customer ID: 2
2025-06-23 11:28:32,864 - INFO - Customer ID: 2
[2025-06-23 11:28:32,867] INFO in app: Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 11:28:32,867 - INFO - Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 11:28:32,915 - INFO - 127.0.0.1 - - [23/Jun/2025 11:28:32] "GET /customer/202506000002/account?section=additional HTTP/1.1" 200 -
[2025-06-23 11:38:00,675] INFO in app: ==================================================
[2025-06-23 11:38:00,681] INFO in app: Application logging initialized successfully
[2025-06-23 11:38:00,685] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-23 11:38:00,688] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-23 11:38:00,690] INFO in app: System encoding: utf-8
[2025-06-23 11:38:00,693] INFO in app: ==================================================
[2025-06-23 11:38:15,690] INFO in app: ==================================================
[2025-06-23 11:38:15,698] INFO in app: Application logging initialized successfully
[2025-06-23 11:38:15,701] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-23 11:38:15,703] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-23 11:38:15,707] INFO in app: System encoding: utf-8
[2025-06-23 11:38:15,713] INFO in app: ==================================================
[2025-06-23 11:38:21,108] INFO in app: ==================================================
[2025-06-23 11:38:21,116] INFO in app: Application logging initialized successfully
[2025-06-23 11:38:21,119] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-23 11:38:21,121] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-23 11:38:21,130] INFO in app: System encoding: utf-8
[2025-06-23 11:38:21,133] INFO in app: ==================================================
2025-06-23 11:38:21,331 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-23 11:38:21,331 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-23 11:40:56,334] INFO in app: ==================================================
[2025-06-23 11:40:56,341] INFO in app: Application logging initialized successfully
[2025-06-23 11:40:56,343] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-23 11:40:56,346] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-23 11:40:56,349] INFO in app: System encoding: utf-8
[2025-06-23 11:40:56,352] INFO in app: ==================================================
2025-06-23 11:40:56,551 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-23 11:40:56,551 - INFO - [33mPress CTRL+C to quit[0m
2025-06-23 11:40:56,862 - INFO - 127.0.0.1 - - [23/Jun/2025 11:40:56] "GET /admin/dashboard?section=cutoff_dates HTTP/1.1" 200 -
2025-06-23 11:40:57,029 - INFO - 127.0.0.1 - - [23/Jun/2025 11:40:57] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-23 11:41:02,390 - INFO - 127.0.0.1 - - [23/Jun/2025 11:41:02] "GET /loanbook HTTP/1.1" 200 -
[2025-06-23 11:41:03,616] INFO in app: Found 6 loans for customer 202506000002
2025-06-23 11:41:03,616 - INFO - Found 6 loans for customer 202506000002
[2025-06-23 11:41:03,622] INFO in app: Customer ID: 2
2025-06-23 11:41:03,622 - INFO - Customer ID: 2
[2025-06-23 11:41:03,625] INFO in app: Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 11:41:03,625 - INFO - Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 11:41:03,696 - INFO - 127.0.0.1 - - [23/Jun/2025 11:41:03] "GET /customer/202506000002/account HTTP/1.1" 200 -
[2025-06-23 11:41:05,369] INFO in app: Found 6 loans for customer 202506000002
2025-06-23 11:41:05,369 - INFO - Found 6 loans for customer 202506000002
[2025-06-23 11:41:05,375] INFO in app: Customer ID: 2
2025-06-23 11:41:05,375 - INFO - Customer ID: 2
[2025-06-23 11:41:05,378] INFO in app: Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 11:41:05,378 - INFO - Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client')]
2025-06-23 11:41:05,412 - INFO - 127.0.0.1 - - [23/Jun/2025 11:41:05] "GET /customer/202506000002/account?section=additional HTTP/1.1" 200 -
2025-06-23 11:41:27,886 - INFO - 127.0.0.1 - - [23/Jun/2025 11:41:27] "[32mPOST /apply_additional/3 HTTP/1.1[0m" 302 -
[2025-06-23 11:41:28,127] INFO in app: Found 7 loans for customer 202506000002
2025-06-23 11:41:28,127 - INFO - Found 7 loans for customer 202506000002
[2025-06-23 11:41:28,130] INFO in app: Customer ID: 2
2025-06-23 11:41:28,130 - INFO - Customer ID: 2
[2025-06-23 11:41:28,133] INFO in app: Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client'), ('103000010', 'active')]
2025-06-23 11:41:28,133 - INFO - Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client'), ('103000010', 'active')]
2025-06-23 11:41:28,175 - INFO - 127.0.0.1 - - [23/Jun/2025 11:41:28] "GET /customer/202506000002/account?section=statement HTTP/1.1" 200 -
2025-06-23 11:41:31,379 - INFO - 127.0.0.1 - - [23/Jun/2025 11:41:31] "GET /loans HTTP/1.1" 200 -
2025-06-23 11:41:36,793 - INFO - 127.0.0.1 - - [23/Jun/2025 11:41:36] "[32mPOST /process_loan/10/approve HTTP/1.1[0m" 302 -
2025-06-23 11:41:36,827 - INFO - 127.0.0.1 - - [23/Jun/2025 11:41:36] "GET /loans HTTP/1.1" 200 -
[2025-06-23 11:41:42,019] INFO in app: [DISBURSEMENT] Loan #103000010 | Top-up of: None | Cash to Client: 1000000.0
2025-06-23 11:41:42,019 - INFO - [DISBURSEMENT] Loan #103000010 | Top-up of: None | Cash to Client: 1000000.0
2025-06-23 11:41:42,069 - INFO - 127.0.0.1 - - [23/Jun/2025 11:41:42] "GET /disbursements HTTP/1.1" 200 -
2025-06-23 11:41:45,419 - INFO - 127.0.0.1 - - [23/Jun/2025 11:41:45] "GET /payments HTTP/1.1" 200 -
2025-06-23 11:41:46,676 - INFO - 127.0.0.1 - - [23/Jun/2025 11:41:46] "GET /loanbook HTTP/1.1" 200 -
2025-06-23 11:41:59,798 - INFO - 127.0.0.1 - - [23/Jun/2025 11:41:59] "GET /loan/103000010/statement HTTP/1.1" 200 -
2025-06-23 11:42:39,456 - INFO - 127.0.0.1 - - [23/Jun/2025 11:42:39] "GET /payments HTTP/1.1" 200 -
2025-06-23 11:42:42,425 - INFO - 127.0.0.1 - - [23/Jun/2025 11:42:42] "GET /api/verify_loan/103000010 HTTP/1.1" 200 -
2025-06-23 11:42:56,386 - INFO - 127.0.0.1 - - [23/Jun/2025 11:42:56] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-23 11:42:56,682 - INFO - 127.0.0.1 - - [23/Jun/2025 11:42:56] "GET /payments HTTP/1.1" 200 -
2025-06-23 11:42:59,694 - INFO - 127.0.0.1 - - [23/Jun/2025 11:42:59] "GET /loanbook HTTP/1.1" 200 -
2025-06-23 11:43:16,259 - INFO - 127.0.0.1 - - [23/Jun/2025 11:43:16] "GET /loan/103000010/statement HTTP/1.1" 200 -
[2025-06-23 13:37:48,764] INFO in app: ==================================================
[2025-06-23 13:37:48,770] INFO in app: Application logging initialized successfully
[2025-06-23 13:37:48,773] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-23 13:37:48,775] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-23 13:37:48,777] INFO in app: System encoding: utf-8
[2025-06-23 13:37:48,780] INFO in app: ==================================================
2025-06-23 13:37:48,955 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-23 13:37:48,955 - INFO - [33mPress CTRL+C to quit[0m
2025-06-23 13:37:50,550 - INFO - 127.0.0.1 - - [23/Jun/2025 13:37:50] "GET /payments HTTP/1.1" 200 -
2025-06-23 13:37:54,497 - INFO - 127.0.0.1 - - [23/Jun/2025 13:37:54] "GET /api/verify_loan/103000010 HTTP/1.1" 200 -
2025-06-23 13:38:10,410 - INFO - 127.0.0.1 - - [23/Jun/2025 13:38:10] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-23 13:38:10,693 - INFO - 127.0.0.1 - - [23/Jun/2025 13:38:10] "GET /payments HTTP/1.1" 200 -
2025-06-23 13:38:13,453 - INFO - 127.0.0.1 - - [23/Jun/2025 13:38:13] "GET /loanbook HTTP/1.1" 200 -
2025-06-23 13:38:16,882 - INFO - 127.0.0.1 - - [23/Jun/2025 13:38:16] "GET /loan/103000010/statement HTTP/1.1" 200 -
[2025-06-23 16:35:19,954] INFO in app: ==================================================
[2025-06-23 16:35:19,960] INFO in app: Application logging initialized successfully
[2025-06-23 16:35:19,962] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-23 16:35:19,964] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-23 16:35:19,967] INFO in app: System encoding: utf-8
[2025-06-23 16:35:19,969] INFO in app: ==================================================
2025-06-23 16:35:20,156 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-23 16:35:20,156 - INFO - [33mPress CTRL+C to quit[0m
2025-06-23 16:35:25,026 - INFO - 127.0.0.1 - - [23/Jun/2025 16:35:25] "GET /loan/103000010/statement HTTP/1.1" 200 -
2025-06-23 16:35:36,330 - INFO - 127.0.0.1 - - [23/Jun/2025 16:35:36] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-23 16:35:38,099 - INFO - 127.0.0.1 - - [23/Jun/2025 16:35:38] "GET /loanbook HTTP/1.1" 200 -
2025-06-23 16:35:47,401 - INFO - 127.0.0.1 - - [23/Jun/2025 16:35:47] "GET /loan/136000008/statement HTTP/1.1" 200 -
2025-06-23 16:35:55,621 - INFO - 127.0.0.1 - - [23/Jun/2025 16:35:55] "GET /payments HTTP/1.1" 200 -
2025-06-23 16:36:09,401 - INFO - 127.0.0.1 - - [23/Jun/2025 16:36:09] "GET /api/verify_loan/136000008 HTTP/1.1" 200 -
[2025-06-23 16:36:23,566] ERROR in app: Payment error: property 'arrears_amount' of 'RepaymentSchedule' object has no setter
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3554, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1139, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 996, in allocate_payment
    s.arrears_amount = (
    ^^^^^^^^^^^^^^^^
AttributeError: property 'arrears_amount' of 'RepaymentSchedule' object has no setter
2025-06-23 16:36:23,566 - ERROR - Payment error: property 'arrears_amount' of 'RepaymentSchedule' object has no setter
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3554, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1139, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 996, in allocate_payment
    s.arrears_amount = (
    ^^^^^^^^^^^^^^^^
AttributeError: property 'arrears_amount' of 'RepaymentSchedule' object has no setter
2025-06-23 16:36:23,699 - INFO - 127.0.0.1 - - [23/Jun/2025 16:36:23] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-23 16:36:23,705 - INFO - 127.0.0.1 - - [23/Jun/2025 16:36:23] "GET /payments HTTP/1.1" 200 -
[2025-06-23 16:42:55,963] INFO in app: ==================================================
[2025-06-23 16:42:55,969] INFO in app: Application logging initialized successfully
[2025-06-23 16:42:55,971] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-23 16:42:55,973] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-23 16:42:55,976] INFO in app: System encoding: utf-8
[2025-06-23 16:42:55,981] INFO in app: ==================================================
[2025-06-23 16:43:06,552] INFO in app: ==================================================
[2025-06-23 16:43:06,558] INFO in app: Application logging initialized successfully
[2025-06-23 16:43:06,561] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-23 16:43:06,562] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-23 16:43:06,564] INFO in app: System encoding: utf-8
[2025-06-23 16:43:06,568] INFO in app: ==================================================
[2025-06-23 16:43:12,706] INFO in app: ==================================================
[2025-06-23 16:43:12,712] INFO in app: Application logging initialized successfully
[2025-06-23 16:43:12,714] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-23 16:43:12,716] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-23 16:43:12,718] INFO in app: System encoding: utf-8
[2025-06-23 16:43:12,722] INFO in app: ==================================================
[2025-06-23 16:43:16,853] INFO in app: ==================================================
[2025-06-23 16:43:16,858] INFO in app: Application logging initialized successfully
[2025-06-23 16:43:16,860] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-23 16:43:16,862] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-23 16:43:16,864] INFO in app: System encoding: utf-8
[2025-06-23 16:43:16,876] INFO in app: ==================================================
2025-06-23 16:43:17,126 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-23 16:43:17,126 - INFO - [33mPress CTRL+C to quit[0m
2025-06-23 16:43:37,868 - INFO - 127.0.0.1 - - [23/Jun/2025 16:43:37] "GET /loanbook HTTP/1.1" 200 -
2025-06-23 16:43:46,742 - INFO - 127.0.0.1 - - [23/Jun/2025 16:43:46] "GET /loan/136000008/statement HTTP/1.1" 200 -
2025-06-23 16:43:54,828 - INFO - 127.0.0.1 - - [23/Jun/2025 16:43:54] "GET /payments HTTP/1.1" 200 -
2025-06-23 16:43:57,670 - INFO - 127.0.0.1 - - [23/Jun/2025 16:43:57] "GET /api/verify_loan/136000008 HTTP/1.1" 200 -
2025-06-23 16:44:07,820 - INFO - 127.0.0.1 - - [23/Jun/2025 16:44:07] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-23 16:44:07,830 - INFO - 127.0.0.1 - - [23/Jun/2025 16:44:07] "GET /payments HTTP/1.1" 200 -
2025-06-23 16:44:12,602 - INFO - 127.0.0.1 - - [23/Jun/2025 16:44:12] "GET /loanbook HTTP/1.1" 200 -
2025-06-23 16:44:18,002 - INFO - 127.0.0.1 - - [23/Jun/2025 16:44:18] "GET /payments HTTP/1.1" 200 -
2025-06-23 16:44:21,055 - INFO - 127.0.0.1 - - [23/Jun/2025 16:44:21] "GET /api/verify_loan/136000008 HTTP/1.1" 200 -
2025-06-23 16:44:33,562 - INFO - 127.0.0.1 - - [23/Jun/2025 16:44:33] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-23 16:44:33,871 - INFO - 127.0.0.1 - - [23/Jun/2025 16:44:33] "GET /payments HTTP/1.1" 200 -
2025-06-23 16:44:37,432 - INFO - 127.0.0.1 - - [23/Jun/2025 16:44:37] "[33mGET /api/verify_loan/201,102.01 HTTP/1.1[0m" 404 -
2025-06-23 16:44:42,368 - INFO - 127.0.0.1 - - [23/Jun/2025 16:44:42] "GET /loanbook HTTP/1.1" 200 -
2025-06-23 16:44:45,774 - INFO - 127.0.0.1 - - [23/Jun/2025 16:44:45] "GET /loan/136000008/statement HTTP/1.1" 200 -
2025-06-23 16:45:03,204 - INFO - 127.0.0.1 - - [23/Jun/2025 16:45:03] "GET /loanbook HTTP/1.1" 200 -
2025-06-23 16:45:07,049 - INFO - 127.0.0.1 - - [23/Jun/2025 16:45:07] "GET /loan/136000008/statement HTTP/1.1" 200 -
2025-06-23 16:45:08,734 - INFO - 127.0.0.1 - - [23/Jun/2025 16:45:08] "GET /payments HTTP/1.1" 200 -
2025-06-23 16:45:11,886 - INFO - 127.0.0.1 - - [23/Jun/2025 16:45:11] "GET /api/verify_loan/136000008 HTTP/1.1" 200 -
2025-06-23 16:45:21,753 - INFO - 127.0.0.1 - - [23/Jun/2025 16:45:21] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-23 16:45:21,759 - INFO - 127.0.0.1 - - [23/Jun/2025 16:45:21] "GET /payments HTTP/1.1" 200 -
2025-06-23 16:45:23,549 - INFO - 127.0.0.1 - - [23/Jun/2025 16:45:23] "GET /loanbook HTTP/1.1" 200 -
2025-06-23 16:45:27,707 - INFO - 127.0.0.1 - - [23/Jun/2025 16:45:27] "GET /loan/136000008/statement HTTP/1.1" 200 -
[2025-06-23 17:56:16,235] INFO in app: ==================================================
[2025-06-23 17:56:16,244] INFO in app: Application logging initialized successfully
[2025-06-23 17:56:16,247] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-23 17:56:16,254] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-23 17:56:16,262] INFO in app: System encoding: utf-8
[2025-06-23 17:56:16,264] INFO in app: ==================================================
2025-06-23 17:56:16,536 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-23 17:56:16,536 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-23 17:56:41,786] INFO in app: ==================================================
[2025-06-23 17:56:41,855] INFO in app: Application logging initialized successfully
[2025-06-23 17:56:41,858] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-23 17:56:41,860] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-23 17:56:41,861] INFO in app: System encoding: utf-8
[2025-06-23 17:56:41,862] INFO in app: ==================================================
[2025-06-23 18:03:38,664] INFO in app: ==================================================
[2025-06-23 18:03:38,672] INFO in app: Application logging initialized successfully
[2025-06-23 18:03:38,673] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-23 18:03:38,674] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-23 18:03:38,676] INFO in app: System encoding: utf-8
[2025-06-23 18:03:38,677] INFO in app: ==================================================
[2025-06-23 18:05:33,532] INFO in app: ==================================================
[2025-06-23 18:05:33,538] INFO in app: Application logging initialized successfully
[2025-06-23 18:05:33,540] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-23 18:05:33,541] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-23 18:05:33,542] INFO in app: System encoding: utf-8
[2025-06-23 18:05:33,546] INFO in app: ==================================================
[2025-06-23 18:37:31,817] INFO in app: ==================================================
[2025-06-23 18:37:31,835] INFO in app: Application logging initialized successfully
[2025-06-23 18:37:31,838] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-23 18:37:31,840] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-23 18:37:31,848] INFO in app: System encoding: utf-8
[2025-06-23 18:37:31,852] INFO in app: ==================================================
[2025-06-24 01:19:15,459] INFO in app: ==================================================
[2025-06-24 01:19:15,535] INFO in app: Application logging initialized successfully
[2025-06-24 01:19:15,536] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 01:19:15,538] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 01:19:15,540] INFO in app: System encoding: utf-8
[2025-06-24 01:19:15,543] INFO in app: ==================================================
[2025-06-24 01:19:23,545] INFO in app: ==================================================
[2025-06-24 01:19:23,551] INFO in app: Application logging initialized successfully
[2025-06-24 01:19:23,553] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 01:19:23,555] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 01:19:23,557] INFO in app: System encoding: utf-8
[2025-06-24 01:19:23,561] INFO in app: ==================================================
[2025-06-24 01:19:40,132] INFO in app: ==================================================
[2025-06-24 01:19:40,137] INFO in app: Application logging initialized successfully
[2025-06-24 01:19:40,140] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 01:19:40,141] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 01:19:40,144] INFO in app: System encoding: utf-8
[2025-06-24 01:19:40,149] INFO in app: ==================================================
[2025-06-24 01:19:45,378] INFO in app: ==================================================
[2025-06-24 01:19:45,386] INFO in app: Application logging initialized successfully
[2025-06-24 01:19:45,388] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 01:19:45,390] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 01:19:45,392] INFO in app: System encoding: utf-8
[2025-06-24 01:19:45,409] INFO in app: ==================================================
2025-06-24 01:19:45,751 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 01:19:45,751 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-24 01:19:53,519] INFO in app: ==================================================
[2025-06-24 01:19:53,527] INFO in app: Application logging initialized successfully
[2025-06-24 01:19:53,529] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 01:19:53,531] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 01:19:53,533] INFO in app: System encoding: utf-8
[2025-06-24 01:19:53,537] INFO in app: ==================================================
[2025-06-24 01:26:53,564] INFO in app: ==================================================
[2025-06-24 01:26:53,571] INFO in app: Application logging initialized successfully
[2025-06-24 01:26:53,572] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 01:26:53,574] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 01:26:53,576] INFO in app: System encoding: utf-8
[2025-06-24 01:26:53,579] INFO in app: ==================================================
[2025-06-24 01:26:58,263] INFO in app: ==================================================
[2025-06-24 01:26:58,269] INFO in app: Application logging initialized successfully
[2025-06-24 01:26:58,271] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 01:26:58,273] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 01:26:58,275] INFO in app: System encoding: utf-8
[2025-06-24 01:26:58,277] INFO in app: ==================================================
2025-06-24 01:26:58,450 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 01:26:58,450 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-24 01:59:21,836] INFO in app: ==================================================
[2025-06-24 01:59:21,843] INFO in app: Application logging initialized successfully
[2025-06-24 01:59:21,845] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 01:59:21,847] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 01:59:21,849] INFO in app: System encoding: utf-8
[2025-06-24 01:59:21,851] INFO in app: ==================================================
[2025-06-24 02:00:58,639] INFO in app: ==================================================
[2025-06-24 02:00:58,646] INFO in app: Application logging initialized successfully
[2025-06-24 02:00:58,648] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 02:00:58,650] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 02:00:58,651] INFO in app: System encoding: utf-8
[2025-06-24 02:00:58,653] INFO in app: ==================================================
[2025-06-24 02:20:22,305] INFO in app: ==================================================
[2025-06-24 02:20:22,311] INFO in app: Application logging initialized successfully
[2025-06-24 02:20:22,314] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 02:20:22,316] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 02:20:22,318] INFO in app: System encoding: utf-8
[2025-06-24 02:20:22,320] INFO in app: ==================================================
[2025-06-24 02:20:29,053] INFO in app: ==================================================
[2025-06-24 02:20:29,058] INFO in app: Application logging initialized successfully
[2025-06-24 02:20:29,061] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 02:20:29,062] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 02:20:29,065] INFO in app: System encoding: utf-8
[2025-06-24 02:20:29,067] INFO in app: ==================================================
[2025-06-24 02:20:33,290] INFO in app: ==================================================
[2025-06-24 02:20:33,295] INFO in app: Application logging initialized successfully
[2025-06-24 02:20:33,298] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 02:20:33,300] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 02:20:33,302] INFO in app: System encoding: utf-8
[2025-06-24 02:20:33,304] INFO in app: ==================================================
2025-06-24 02:20:33,478 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 02:20:33,478 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-24 02:25:33,765] INFO in app: ==================================================
[2025-06-24 02:25:33,829] INFO in app: Application logging initialized successfully
[2025-06-24 02:25:33,832] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 02:25:33,835] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 02:25:33,838] INFO in app: System encoding: utf-8
[2025-06-24 02:25:33,840] INFO in app: ==================================================
2025-06-24 02:29:01,473 - INFO - 127.0.0.1 - - [24/Jun/2025 02:29:01] "GET /loan/136000008/statement HTTP/1.1" 200 -
2025-06-24 02:29:04,760 - INFO - 127.0.0.1 - - [24/Jun/2025 02:29:04] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 02:45:55,830 - INFO - 127.0.0.1 - - [24/Jun/2025 02:45:55] "GET /payments HTTP/1.1" 200 -
2025-06-24 02:45:59,486 - INFO - 127.0.0.1 - - [24/Jun/2025 02:45:59] "GET /api/verify_loan/136000008 HTTP/1.1" 200 -
2025-06-24 02:46:09,891 - INFO - 127.0.0.1 - - [24/Jun/2025 02:46:09] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 02:46:10,156 - INFO - 127.0.0.1 - - [24/Jun/2025 02:46:10] "GET /payments HTTP/1.1" 200 -
2025-06-24 02:46:12,215 - INFO - 127.0.0.1 - - [24/Jun/2025 02:46:12] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 02:46:17,115 - INFO - 127.0.0.1 - - [24/Jun/2025 02:46:17] "GET /loan/136000008/statement HTTP/1.1" 200 -
2025-06-24 02:47:11,522 - INFO - 127.0.0.1 - - [24/Jun/2025 02:47:11] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 02:47:13,833 - INFO - 127.0.0.1 - - [24/Jun/2025 02:47:13] "GET /loan/103000006/statement HTTP/1.1" 200 -
2025-06-24 02:47:16,597 - INFO - 127.0.0.1 - - [24/Jun/2025 02:47:16] "GET /loanbook HTTP/1.1" 200 -
[2025-06-24 02:47:18,579] INFO in app: Found 7 loans for customer 202506000002
2025-06-24 02:47:18,579 - INFO - Found 7 loans for customer 202506000002
[2025-06-24 02:47:18,582] INFO in app: Customer ID: 2
2025-06-24 02:47:18,582 - INFO - Customer ID: 2
[2025-06-24 02:47:18,584] INFO in app: Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client'), ('103000010', 'active')]
2025-06-24 02:47:18,584 - INFO - Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client'), ('103000010', 'active')]
2025-06-24 02:47:18,631 - INFO - 127.0.0.1 - - [24/Jun/2025 02:47:18] "GET /customer/202506000002/account HTTP/1.1" 200 -
[2025-06-24 02:47:19,762] INFO in app: Found 7 loans for customer 202506000002
2025-06-24 02:47:19,762 - INFO - Found 7 loans for customer 202506000002
[2025-06-24 02:47:19,764] INFO in app: Customer ID: 2
2025-06-24 02:47:19,764 - INFO - Customer ID: 2
[2025-06-24 02:47:19,769] INFO in app: Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client'), ('103000010', 'active')]
2025-06-24 02:47:19,769 - INFO - Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client'), ('103000010', 'active')]
2025-06-24 02:47:19,792 - INFO - 127.0.0.1 - - [24/Jun/2025 02:47:19] "GET /customer/202506000002/account?section=additional HTTP/1.1" 200 -
2025-06-24 02:47:42,420 - INFO - 127.0.0.1 - - [24/Jun/2025 02:47:42] "[32mPOST /apply_additional/3 HTTP/1.1[0m" 302 -
[2025-06-24 02:47:42,671] INFO in app: Found 8 loans for customer 202506000002
2025-06-24 02:47:42,671 - INFO - Found 8 loans for customer 202506000002
[2025-06-24 02:47:42,676] INFO in app: Customer ID: 2
2025-06-24 02:47:42,676 - INFO - Customer ID: 2
[2025-06-24 02:47:42,681] INFO in app: Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client'), ('103000010', 'active'), ('136000011', 'active')]
2025-06-24 02:47:42,681 - INFO - Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client'), ('103000010', 'active'), ('136000011', 'active')]
2025-06-24 02:47:42,708 - INFO - 127.0.0.1 - - [24/Jun/2025 02:47:42] "GET /customer/202506000002/account?section=statement HTTP/1.1" 200 -
2025-06-24 02:47:50,069 - INFO - 127.0.0.1 - - [24/Jun/2025 02:47:50] "GET /loan/136000011/statement HTTP/1.1" 200 -
2025-06-24 02:47:59,523 - INFO - 127.0.0.1 - - [24/Jun/2025 02:47:59] "GET /payments HTTP/1.1" 200 -
2025-06-24 02:48:06,142 - INFO - 127.0.0.1 - - [24/Jun/2025 02:48:06] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
2025-06-24 02:48:06,262 - INFO - 127.0.0.1 - - [24/Jun/2025 02:48:06] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 02:48:10,020 - INFO - 127.0.0.1 - - [24/Jun/2025 02:48:10] "GET /loan/136000011/statement HTTP/1.1" 200 -
2025-06-24 02:48:19,167 - INFO - 127.0.0.1 - - [24/Jun/2025 02:48:19] "GET /payments HTTP/1.1" 200 -
2025-06-24 02:48:21,852 - INFO - 127.0.0.1 - - [24/Jun/2025 02:48:21] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
2025-06-24 02:48:32,306 - INFO - 127.0.0.1 - - [24/Jun/2025 02:48:32] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 02:48:32,619 - INFO - 127.0.0.1 - - [24/Jun/2025 02:48:32] "GET /payments HTTP/1.1" 200 -
2025-06-24 02:48:34,426 - INFO - 127.0.0.1 - - [24/Jun/2025 02:48:34] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 02:48:37,752 - INFO - 127.0.0.1 - - [24/Jun/2025 02:48:37] "GET /loan/136000011/statement HTTP/1.1" 200 -
[2025-06-24 03:28:36,875] INFO in app: ==================================================
[2025-06-24 03:28:36,883] INFO in app: Application logging initialized successfully
[2025-06-24 03:28:36,885] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 03:28:36,887] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 03:28:36,889] INFO in app: System encoding: utf-8
[2025-06-24 03:28:36,893] INFO in app: ==================================================
2025-06-24 03:28:37,098 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 03:28:37,099 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 03:28:43,566 - INFO - 127.0.0.1 - - [24/Jun/2025 03:28:43] "GET /loan/136000011/statement HTTP/1.1" 200 -
2025-06-24 03:28:45,262 - INFO - 127.0.0.1 - - [24/Jun/2025 03:28:45] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 03:28:57,766 - INFO - 127.0.0.1 - - [24/Jun/2025 03:28:57] "GET /payments HTTP/1.1" 200 -
2025-06-24 03:29:01,422 - INFO - 127.0.0.1 - - [24/Jun/2025 03:29:01] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
[2025-06-24 03:29:13,478] ERROR in app: Payment error: Session is already flushing
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3565, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1150, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1022, in allocate_payment
    session.flush()
    ~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4347, in flush
    raise sa_exc.InvalidRequestError("Session is already flushing")
sqlalchemy.exc.InvalidRequestError: Session is already flushing
2025-06-24 03:29:13,478 - ERROR - Payment error: Session is already flushing
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3565, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1150, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1022, in allocate_payment
    session.flush()
    ~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4347, in flush
    raise sa_exc.InvalidRequestError("Session is already flushing")
sqlalchemy.exc.InvalidRequestError: Session is already flushing
2025-06-24 03:29:13,606 - INFO - 127.0.0.1 - - [24/Jun/2025 03:29:13] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 03:29:13,613 - INFO - 127.0.0.1 - - [24/Jun/2025 03:29:13] "GET /payments HTTP/1.1" 200 -
2025-06-24 03:30:30,692 - INFO - 127.0.0.1 - - [24/Jun/2025 03:30:30] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 03:30:37,067 - INFO - 127.0.0.1 - - [24/Jun/2025 03:30:37] "GET /loan/136000011/statement HTTP/1.1" 200 -
2025-06-24 03:30:42,141 - INFO - 127.0.0.1 - - [24/Jun/2025 03:30:42] "GET /payments HTTP/1.1" 200 -
2025-06-24 03:30:44,743 - INFO - 127.0.0.1 - - [24/Jun/2025 03:30:44] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
[2025-06-24 03:30:56,668] ERROR in app: Payment error: Session is already flushing
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3565, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1150, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1022, in allocate_payment
    session.flush()
    ~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4347, in flush
    raise sa_exc.InvalidRequestError("Session is already flushing")
sqlalchemy.exc.InvalidRequestError: Session is already flushing
2025-06-24 03:30:56,668 - ERROR - Payment error: Session is already flushing
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3565, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1150, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1022, in allocate_payment
    session.flush()
    ~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4347, in flush
    raise sa_exc.InvalidRequestError("Session is already flushing")
sqlalchemy.exc.InvalidRequestError: Session is already flushing
2025-06-24 03:30:56,697 - INFO - 127.0.0.1 - - [24/Jun/2025 03:30:56] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 03:30:56,981 - INFO - 127.0.0.1 - - [24/Jun/2025 03:30:56] "GET /payments HTTP/1.1" 200 -
2025-06-24 03:31:00,455 - INFO - 127.0.0.1 - - [24/Jun/2025 03:31:00] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 03:31:02,702 - INFO - 127.0.0.1 - - [24/Jun/2025 03:31:02] "GET /loan/103000006/statement HTTP/1.1" 200 -
2025-06-24 03:31:13,017 - INFO - 127.0.0.1 - - [24/Jun/2025 03:31:13] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 03:31:17,448 - INFO - 127.0.0.1 - - [24/Jun/2025 03:31:17] "GET /payments HTTP/1.1" 200 -
2025-06-24 03:31:22,315 - INFO - 127.0.0.1 - - [24/Jun/2025 03:31:22] "GET /api/verify_loan/103000006 HTTP/1.1" 200 -
[2025-06-24 03:31:39,224] ERROR in app: Payment error: Session is already flushing
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3565, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1150, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1022, in allocate_payment
    session.flush()
    ~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4347, in flush
    raise sa_exc.InvalidRequestError("Session is already flushing")
sqlalchemy.exc.InvalidRequestError: Session is already flushing
2025-06-24 03:31:39,224 - ERROR - Payment error: Session is already flushing
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3565, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1150, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1022, in allocate_payment
    session.flush()
    ~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4347, in flush
    raise sa_exc.InvalidRequestError("Session is already flushing")
sqlalchemy.exc.InvalidRequestError: Session is already flushing
2025-06-24 03:31:39,266 - INFO - 127.0.0.1 - - [24/Jun/2025 03:31:39] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 03:31:39,530 - INFO - 127.0.0.1 - - [24/Jun/2025 03:31:39] "GET /payments HTTP/1.1" 200 -
[2025-06-24 03:34:23,695] INFO in app: ==================================================
[2025-06-24 03:34:23,702] INFO in app: Application logging initialized successfully
[2025-06-24 03:34:23,705] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 03:34:23,707] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 03:34:23,709] INFO in app: System encoding: utf-8
[2025-06-24 03:34:23,711] INFO in app: ==================================================
2025-06-24 03:34:23,958 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 03:34:23,958 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 03:34:29,979 - INFO - 127.0.0.1 - - [24/Jun/2025 03:34:29] "GET /payments HTTP/1.1" 200 -
2025-06-24 03:34:30,736 - INFO - 127.0.0.1 - - [24/Jun/2025 03:34:30] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 03:34:34,183 - INFO - 127.0.0.1 - - [24/Jun/2025 03:34:34] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 03:34:45,374 - INFO - 127.0.0.1 - - [24/Jun/2025 03:34:45] "GET /loan/103000006/statement HTTP/1.1" 200 -
[2025-06-24 03:34:50,175] INFO in app: [DISBURSEMENT] Loan #103000010 | Top-up of: None | Cash to Client: 1000000.0
2025-06-24 03:34:50,175 - INFO - [DISBURSEMENT] Loan #103000010 | Top-up of: None | Cash to Client: 1000000.0
2025-06-24 03:34:50,193 - INFO - 127.0.0.1 - - [24/Jun/2025 03:34:50] "GET /disbursements HTTP/1.1" 200 -
2025-06-24 03:34:50,751 - INFO - 127.0.0.1 - - [24/Jun/2025 03:34:50] "GET /payments HTTP/1.1" 200 -
2025-06-24 03:34:54,001 - INFO - 127.0.0.1 - - [24/Jun/2025 03:34:54] "GET /api/verify_loan/103000006 HTTP/1.1" 200 -
2025-06-24 03:35:03,853 - INFO - 127.0.0.1 - - [24/Jun/2025 03:35:03] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 03:35:04,171 - INFO - 127.0.0.1 - - [24/Jun/2025 03:35:04] "GET /payments HTTP/1.1" 200 -
2025-06-24 03:35:07,782 - INFO - 127.0.0.1 - - [24/Jun/2025 03:35:07] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 03:35:11,257 - INFO - 127.0.0.1 - - [24/Jun/2025 03:35:11] "GET /loan/103000006/statement HTTP/1.1" 200 -
[2025-06-24 07:24:17,292] INFO in app: ==================================================
[2025-06-24 07:24:17,419] INFO in app: Application logging initialized successfully
[2025-06-24 07:24:17,449] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 07:24:17,450] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 07:24:17,452] INFO in app: System encoding: utf-8
[2025-06-24 07:24:17,465] INFO in app: ==================================================
2025-06-24 07:24:18,256 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 07:24:18,256 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 07:26:09,271 - INFO - 127.0.0.1 - - [24/Jun/2025 07:26:09] "GET /loan/103000006/statement HTTP/1.1" 200 -
2025-06-24 07:26:10,832 - INFO - 127.0.0.1 - - [24/Jun/2025 07:26:10] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 07:26:27,678 - INFO - 127.0.0.1 - - [24/Jun/2025 07:26:27] "GET /payments HTTP/1.1" 200 -
2025-06-24 07:26:32,428 - INFO - 127.0.0.1 - - [24/Jun/2025 07:26:32] "GET /api/verify_loan/103000006 HTTP/1.1" 200 -
2025-06-24 07:26:45,218 - INFO - 127.0.0.1 - - [24/Jun/2025 07:26:45] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 07:26:45,229 - INFO - 127.0.0.1 - - [24/Jun/2025 07:26:45] "GET /payments HTTP/1.1" 200 -
2025-06-24 07:26:48,214 - INFO - 127.0.0.1 - - [24/Jun/2025 07:26:48] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 07:26:51,831 - INFO - 127.0.0.1 - - [24/Jun/2025 07:26:51] "GET /loan/103000006/statement HTTP/1.1" 200 -
[2025-06-24 07:36:42,672] INFO in app: ==================================================
[2025-06-24 07:36:42,680] INFO in app: Application logging initialized successfully
[2025-06-24 07:36:42,683] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 07:36:42,685] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 07:36:42,689] INFO in app: System encoding: utf-8
[2025-06-24 07:36:42,691] INFO in app: ==================================================
[2025-06-24 07:36:55,919] INFO in app: ==================================================
[2025-06-24 07:36:55,925] INFO in app: Application logging initialized successfully
[2025-06-24 07:36:55,927] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 07:36:55,929] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 07:36:55,932] INFO in app: System encoding: utf-8
[2025-06-24 07:36:55,937] INFO in app: ==================================================
[2025-06-24 07:37:12,359] INFO in app: ==================================================
[2025-06-24 07:37:12,364] INFO in app: Application logging initialized successfully
[2025-06-24 07:37:12,366] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 07:37:12,368] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 07:37:12,370] INFO in app: System encoding: utf-8
[2025-06-24 07:37:12,372] INFO in app: ==================================================
[2025-06-24 07:38:05,597] INFO in app: ==================================================
[2025-06-24 07:38:05,603] INFO in app: Application logging initialized successfully
[2025-06-24 07:38:05,605] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 07:38:05,607] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 07:38:05,610] INFO in app: System encoding: utf-8
[2025-06-24 07:38:05,611] INFO in app: ==================================================
2025-06-24 07:38:05,789 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 07:38:05,789 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 07:38:14,193 - INFO - 127.0.0.1 - - [24/Jun/2025 07:38:14] "GET /loan/103000006/statement HTTP/1.1" 200 -
2025-06-24 07:38:23,861 - INFO - 127.0.0.1 - - [24/Jun/2025 07:38:23] "GET /payments HTTP/1.1" 200 -
2025-06-24 07:38:23,939 - INFO - 127.0.0.1 - - [24/Jun/2025 07:38:23] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 07:38:27,410 - INFO - 127.0.0.1 - - [24/Jun/2025 07:38:27] "GET /api/verify_loan/103000006 HTTP/1.1" 200 -
[2025-06-24 07:38:39,350] INFO in app: 🔥 after_insert listener triggered for Payment ID 23
2025-06-24 07:38:39,350 - INFO - 🔥 after_insert listener triggered for Payment ID 23
[2025-06-24 07:38:39,361] ERROR in app: Payment error: 'RepaymentSchedule' object has no attribute 'fees_due'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3539, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1126, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 964, in allocate_payment
    fee_due = schedule.fees_due()
              ^^^^^^^^^^^^^^^^^
AttributeError: 'RepaymentSchedule' object has no attribute 'fees_due'
2025-06-24 07:38:39,361 - ERROR - Payment error: 'RepaymentSchedule' object has no attribute 'fees_due'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3539, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1126, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 964, in allocate_payment
    fee_due = schedule.fees_due()
              ^^^^^^^^^^^^^^^^^
AttributeError: 'RepaymentSchedule' object has no attribute 'fees_due'
2025-06-24 07:38:39,498 - INFO - 127.0.0.1 - - [24/Jun/2025 07:38:39] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 07:38:39,673 - INFO - 127.0.0.1 - - [24/Jun/2025 07:38:39] "GET /payments HTTP/1.1" 200 -
[2025-06-24 07:40:40,795] INFO in app: ==================================================
[2025-06-24 07:40:40,801] INFO in app: Application logging initialized successfully
[2025-06-24 07:40:40,803] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 07:40:40,806] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 07:40:40,808] INFO in app: System encoding: utf-8
[2025-06-24 07:40:40,813] INFO in app: ==================================================
2025-06-24 07:40:40,983 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 07:40:40,983 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 07:40:47,902 - INFO - 127.0.0.1 - - [24/Jun/2025 07:40:47] "GET /payments HTTP/1.1" 200 -
2025-06-24 07:40:54,946 - INFO - 127.0.0.1 - - [24/Jun/2025 07:40:54] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 07:40:58,279 - INFO - 127.0.0.1 - - [24/Jun/2025 07:40:58] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 07:41:03,175 - INFO - 127.0.0.1 - - [24/Jun/2025 07:41:03] "GET /loan/103000006/statement HTTP/1.1" 200 -
2025-06-24 07:41:09,811 - INFO - 127.0.0.1 - - [24/Jun/2025 07:41:09] "GET /payments HTTP/1.1" 200 -
2025-06-24 07:41:12,825 - INFO - 127.0.0.1 - - [24/Jun/2025 07:41:12] "GET /api/verify_loan/103000006 HTTP/1.1" 200 -
[2025-06-24 07:41:22,630] INFO in app: 🔥 after_insert listener triggered for Payment ID 23
2025-06-24 07:41:22,630 - INFO - 🔥 after_insert listener triggered for Payment ID 23
[2025-06-24 07:41:22,660] ERROR in app: Payment error: 'RepaymentSchedule' object has no attribute 'fees_due'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3539, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1126, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 964, in allocate_payment
    fee_due = schedule.fees_due()
              ^^^^^^^^^^^^^^^^^
AttributeError: 'RepaymentSchedule' object has no attribute 'fees_due'
2025-06-24 07:41:22,660 - ERROR - Payment error: 'RepaymentSchedule' object has no attribute 'fees_due'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3539, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1126, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 964, in allocate_payment
    fee_due = schedule.fees_due()
              ^^^^^^^^^^^^^^^^^
AttributeError: 'RepaymentSchedule' object has no attribute 'fees_due'
2025-06-24 07:41:22,717 - INFO - 127.0.0.1 - - [24/Jun/2025 07:41:22] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 07:41:22,940 - INFO - 127.0.0.1 - - [24/Jun/2025 07:41:22] "GET /payments HTTP/1.1" 200 -
[2025-06-24 07:41:39,519] INFO in app: ==================================================
[2025-06-24 07:41:39,526] INFO in app: Application logging initialized successfully
[2025-06-24 07:41:39,528] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 07:41:39,529] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 07:41:39,531] INFO in app: System encoding: utf-8
[2025-06-24 07:41:39,533] INFO in app: ==================================================
2025-06-24 07:41:39,704 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 07:41:39,704 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-24 07:42:16,969] INFO in app: ==================================================
[2025-06-24 07:42:16,975] INFO in app: Application logging initialized successfully
[2025-06-24 07:42:16,978] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 07:42:16,980] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 07:42:16,982] INFO in app: System encoding: utf-8
[2025-06-24 07:42:16,985] INFO in app: ==================================================
2025-06-24 07:42:17,150 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 07:42:17,151 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 07:42:20,017 - INFO - 127.0.0.1 - - [24/Jun/2025 07:42:20] "GET /payments HTTP/1.1" 200 -
2025-06-24 07:42:30,878 - INFO - 127.0.0.1 - - [24/Jun/2025 07:42:30] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 07:42:38,204 - INFO - 127.0.0.1 - - [24/Jun/2025 07:42:38] "GET /api/verify_loan/103000006 HTTP/1.1" 200 -
[2025-06-24 07:42:49,825] INFO in app: 🔥 after_insert listener triggered for Payment ID 23
2025-06-24 07:42:49,825 - INFO - 🔥 after_insert listener triggered for Payment ID 23
[2025-06-24 07:42:49,835] ERROR in app: Payment error: 'float' object is not callable
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3550, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1137, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 964, in allocate_payment
    fee_due = schedule.fees_due()
TypeError: 'float' object is not callable
2025-06-24 07:42:49,835 - ERROR - Payment error: 'float' object is not callable
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3550, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1137, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 964, in allocate_payment
    fee_due = schedule.fees_due()
TypeError: 'float' object is not callable
2025-06-24 07:42:49,861 - INFO - 127.0.0.1 - - [24/Jun/2025 07:42:49] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 07:42:49,871 - INFO - 127.0.0.1 - - [24/Jun/2025 07:42:49] "GET /payments HTTP/1.1" 200 -
[2025-06-24 07:44:57,516] INFO in app: ==================================================
[2025-06-24 07:44:57,523] INFO in app: Application logging initialized successfully
[2025-06-24 07:44:57,525] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 07:44:57,527] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 07:44:57,529] INFO in app: System encoding: utf-8
[2025-06-24 07:44:57,531] INFO in app: ==================================================
2025-06-24 07:44:57,706 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 07:44:57,706 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-24 07:45:07,966] INFO in app: ==================================================
[2025-06-24 07:45:07,973] INFO in app: Application logging initialized successfully
[2025-06-24 07:45:07,975] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 07:45:07,977] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 07:45:07,979] INFO in app: System encoding: utf-8
[2025-06-24 07:45:07,982] INFO in app: ==================================================
2025-06-24 07:45:08,153 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 07:45:08,153 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 07:45:21,005 - INFO - 127.0.0.1 - - [24/Jun/2025 07:45:21] "GET /payments HTTP/1.1" 200 -
[2025-06-24 07:45:24,476] INFO in app: 🔥 after_insert listener triggered for Payment ID 23
2025-06-24 07:45:24,476 - INFO - 🔥 after_insert listener triggered for Payment ID 23
[2025-06-24 07:45:24,489] ERROR in app: Payment error: 'LoanApplication' object has no attribute 'recalculate_balances'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3550, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1137, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 989, in allocate_payment
    self.recalculate_balances()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'LoanApplication' object has no attribute 'recalculate_balances'. Did you mean: 'recalculate_balance'?
2025-06-24 07:45:24,489 - ERROR - Payment error: 'LoanApplication' object has no attribute 'recalculate_balances'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3550, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1137, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 989, in allocate_payment
    self.recalculate_balances()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'LoanApplication' object has no attribute 'recalculate_balances'. Did you mean: 'recalculate_balance'?
2025-06-24 07:45:24,530 - INFO - 127.0.0.1 - - [24/Jun/2025 07:45:24] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 07:45:24,538 - INFO - 127.0.0.1 - - [24/Jun/2025 07:45:24] "GET /payments HTTP/1.1" 200 -
[2025-06-24 07:49:12,777] INFO in app: ==================================================
[2025-06-24 07:49:12,784] INFO in app: Application logging initialized successfully
[2025-06-24 07:49:12,786] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 07:49:12,788] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 07:49:12,790] INFO in app: System encoding: utf-8
[2025-06-24 07:49:12,792] INFO in app: ==================================================
2025-06-24 07:49:13,003 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 07:49:13,003 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-24 07:50:33,736] INFO in app: ==================================================
[2025-06-24 07:50:33,742] INFO in app: Application logging initialized successfully
[2025-06-24 07:50:33,745] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 07:50:33,748] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 07:50:33,753] INFO in app: System encoding: utf-8
[2025-06-24 07:50:33,756] INFO in app: ==================================================
2025-06-24 07:50:33,954 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 07:50:33,954 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 07:50:39,225 - INFO - 127.0.0.1 - - [24/Jun/2025 07:50:39] "GET /payments HTTP/1.1" 200 -
[2025-06-24 07:50:53,894] INFO in app: 🔥 after_insert listener triggered for Payment ID 23
2025-06-24 07:50:53,894 - INFO - 🔥 after_insert listener triggered for Payment ID 23
[2025-06-24 07:50:53,909] ERROR in app: Payment error: 'LoanApplication' object has no attribute 'recalculate_balances'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3550, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1137, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 989, in allocate_payment
    self.recalculate_balances()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'LoanApplication' object has no attribute 'recalculate_balances'. Did you mean: 'recalculate_balance'?
2025-06-24 07:50:53,909 - ERROR - Payment error: 'LoanApplication' object has no attribute 'recalculate_balances'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3550, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1137, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 989, in allocate_payment
    self.recalculate_balances()
    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'LoanApplication' object has no attribute 'recalculate_balances'. Did you mean: 'recalculate_balance'?
2025-06-24 07:50:53,945 - INFO - 127.0.0.1 - - [24/Jun/2025 07:50:53] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 07:50:53,955 - INFO - 127.0.0.1 - - [24/Jun/2025 07:50:53] "GET /payments HTTP/1.1" 200 -
2025-06-24 07:50:59,577 - INFO - 127.0.0.1 - - [24/Jun/2025 07:50:59] "GET /payments HTTP/1.1" 200 -
2025-06-24 07:51:18,831 - INFO - 127.0.0.1 - - [24/Jun/2025 07:51:18] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-06-24 07:51:43,688] INFO in app: ==================================================
[2025-06-24 07:51:43,693] INFO in app: Application logging initialized successfully
[2025-06-24 07:51:43,695] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 07:51:43,698] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 07:51:43,700] INFO in app: System encoding: utf-8
[2025-06-24 07:51:43,704] INFO in app: ==================================================
2025-06-24 07:51:43,872 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 07:51:43,872 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 07:51:53,101 - INFO - 127.0.0.1 - - [24/Jun/2025 07:51:53] "GET /payments HTTP/1.1" 200 -
2025-06-24 07:52:08,802 - INFO - 127.0.0.1 - - [24/Jun/2025 07:52:08] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 07:52:24,204 - INFO - 127.0.0.1 - - [24/Jun/2025 07:52:24] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 07:52:34,877 - INFO - 127.0.0.1 - - [24/Jun/2025 07:52:34] "GET /loan/103000006/statement HTTP/1.1" 200 -
2025-06-24 07:52:46,322 - INFO - 127.0.0.1 - - [24/Jun/2025 07:52:46] "GET /payments HTTP/1.1" 200 -
2025-06-24 07:52:49,873 - INFO - 127.0.0.1 - - [24/Jun/2025 07:52:49] "GET /api/verify_loan/103000006 HTTP/1.1" 200 -
[2025-06-24 07:53:01,205] INFO in app: 🔥 after_insert listener triggered for Payment ID 23
2025-06-24 07:53:01,205 - INFO - 🔥 after_insert listener triggered for Payment ID 23
[2025-06-24 07:53:01,222] ERROR in app: Payment error: 'LoanApplication' object has no attribute 'record_loan_credit'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3550, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1137, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 993, in allocate_payment
    self.record_loan_credit(payment, remaining)
    ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'LoanApplication' object has no attribute 'record_loan_credit'
2025-06-24 07:53:01,222 - ERROR - Payment error: 'LoanApplication' object has no attribute 'record_loan_credit'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3550, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1137, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 993, in allocate_payment
    self.record_loan_credit(payment, remaining)
    ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'LoanApplication' object has no attribute 'record_loan_credit'
2025-06-24 07:53:01,263 - INFO - 127.0.0.1 - - [24/Jun/2025 07:53:01] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 07:53:01,522 - INFO - 127.0.0.1 - - [24/Jun/2025 07:53:01] "GET /payments HTTP/1.1" 200 -
[2025-06-24 08:03:43,173] INFO in app: ==================================================
[2025-06-24 08:03:43,180] INFO in app: Application logging initialized successfully
[2025-06-24 08:03:43,183] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 08:03:43,186] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 08:03:43,189] INFO in app: System encoding: utf-8
[2025-06-24 08:03:43,194] INFO in app: ==================================================
2025-06-24 08:03:43,403 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 08:03:43,403 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-24 08:17:25,353] INFO in app: ==================================================
[2025-06-24 08:17:25,358] INFO in app: Application logging initialized successfully
[2025-06-24 08:17:25,362] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 08:17:25,364] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 08:17:25,367] INFO in app: System encoding: utf-8
[2025-06-24 08:17:25,370] INFO in app: ==================================================
2025-06-24 08:17:25,550 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 08:17:25,550 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 08:17:30,153 - INFO - 127.0.0.1 - - [24/Jun/2025 08:17:30] "GET /payments HTTP/1.1" 200 -
2025-06-24 08:17:35,769 - INFO - 127.0.0.1 - - [24/Jun/2025 08:17:35] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 08:17:35,819 - INFO - 127.0.0.1 - - [24/Jun/2025 08:17:35] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 08:17:38,067 - INFO - 127.0.0.1 - - [24/Jun/2025 08:17:38] "GET /loan/103000006/statement HTTP/1.1" 200 -
2025-06-24 08:17:43,434 - INFO - 127.0.0.1 - - [24/Jun/2025 08:17:43] "GET /payments HTTP/1.1" 200 -
2025-06-24 08:17:44,957 - INFO - 127.0.0.1 - - [24/Jun/2025 08:17:44] "GET /payments HTTP/1.1" 200 -
2025-06-24 08:17:48,628 - INFO - 127.0.0.1 - - [24/Jun/2025 08:17:48] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 08:17:50,528 - INFO - 127.0.0.1 - - [24/Jun/2025 08:17:50] "GET /api/verify_loan/103000006 HTTP/1.1" 200 -
[2025-06-24 08:17:59,857] INFO in app: 🔥 after_insert listener triggered for Payment ID 23
2025-06-24 08:17:59,857 - INFO - 🔥 after_insert listener triggered for Payment ID 23
[2025-06-24 08:17:59,873] ERROR in app: Payment error: 'LoanApplication' object has no attribute 'expected_payment_due'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3570, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1157, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 996, in allocate_payment
    elif payment.amount < self.expected_payment_due():
                          ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'LoanApplication' object has no attribute 'expected_payment_due'
2025-06-24 08:17:59,873 - ERROR - Payment error: 'LoanApplication' object has no attribute 'expected_payment_due'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3570, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1157, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 996, in allocate_payment
    elif payment.amount < self.expected_payment_due():
                          ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'LoanApplication' object has no attribute 'expected_payment_due'
2025-06-24 08:17:59,905 - INFO - 127.0.0.1 - - [24/Jun/2025 08:17:59] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 08:17:59,912 - INFO - 127.0.0.1 - - [24/Jun/2025 08:17:59] "GET /payments HTTP/1.1" 200 -
[2025-06-24 08:25:53,874] INFO in app: ==================================================
[2025-06-24 08:25:53,881] INFO in app: Application logging initialized successfully
[2025-06-24 08:25:53,885] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 08:25:53,898] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 08:25:53,900] INFO in app: System encoding: utf-8
[2025-06-24 08:25:53,903] INFO in app: ==================================================
2025-06-24 08:25:54,128 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 08:25:54,128 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 08:31:05,714 - INFO - 127.0.0.1 - - [24/Jun/2025 08:31:05] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 08:31:08,055 - INFO - 127.0.0.1 - - [24/Jun/2025 08:31:08] "GET /loan/103000006/statement HTTP/1.1" 200 -
2025-06-24 08:31:14,717 - INFO - 127.0.0.1 - - [24/Jun/2025 08:31:14] "GET /payments HTTP/1.1" 200 -
2025-06-24 08:31:15,785 - INFO - 127.0.0.1 - - [24/Jun/2025 08:31:15] "GET /payments HTTP/1.1" 200 -
2025-06-24 08:31:30,297 - INFO - 127.0.0.1 - - [24/Jun/2025 08:31:30] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 08:32:08,126 - INFO - 127.0.0.1 - - [24/Jun/2025 08:32:08] "GET /api/verify_loan/103000006 HTTP/1.1" 200 -
[2025-06-24 08:32:17,536] INFO in app: 🔥 after_insert listener triggered for Payment ID 23
2025-06-24 08:32:17,536 - INFO - 🔥 after_insert listener triggered for Payment ID 23
[2025-06-24 08:32:17,552] ERROR in app: Payment error: 'LoanApplication' object has no attribute 'record_arrears'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3584, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1171, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 997, in allocate_payment
    self.record_arrears(payment)
    ^^^^^^^^^^^^^^^^^^^
AttributeError: 'LoanApplication' object has no attribute 'record_arrears'
2025-06-24 08:32:17,552 - ERROR - Payment error: 'LoanApplication' object has no attribute 'record_arrears'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3584, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1171, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 997, in allocate_payment
    self.record_arrears(payment)
    ^^^^^^^^^^^^^^^^^^^
AttributeError: 'LoanApplication' object has no attribute 'record_arrears'
2025-06-24 08:32:17,581 - INFO - 127.0.0.1 - - [24/Jun/2025 08:32:17] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 08:32:17,587 - INFO - 127.0.0.1 - - [24/Jun/2025 08:32:17] "GET /payments HTTP/1.1" 200 -
[2025-06-24 08:46:53,980] INFO in app: ==================================================
[2025-06-24 08:46:53,987] INFO in app: Application logging initialized successfully
[2025-06-24 08:46:53,989] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 08:46:53,991] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 08:46:53,992] INFO in app: System encoding: utf-8
[2025-06-24 08:46:53,994] INFO in app: ==================================================
2025-06-24 08:46:54,176 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 08:46:54,176 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 08:47:12,556 - INFO - 127.0.0.1 - - [24/Jun/2025 08:47:12] "GET /payments HTTP/1.1" 200 -
2025-06-24 08:47:14,467 - INFO - 127.0.0.1 - - [24/Jun/2025 08:47:14] "GET /payments HTTP/1.1" 200 -
2025-06-24 08:47:16,455 - INFO - 127.0.0.1 - - [24/Jun/2025 08:47:16] "GET /payments HTTP/1.1" 200 -
2025-06-24 08:47:32,590 - INFO - 127.0.0.1 - - [24/Jun/2025 08:47:32] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 08:47:39,342 - INFO - 127.0.0.1 - - [24/Jun/2025 08:47:39] "GET /payments HTTP/1.1" 200 -
2025-06-24 08:48:37,442 - INFO - 127.0.0.1 - - [24/Jun/2025 08:48:37] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 08:49:33,190 - INFO - 127.0.0.1 - - [24/Jun/2025 08:49:33] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 08:49:34,767 - INFO - 127.0.0.1 - - [24/Jun/2025 08:49:34] "GET /loan/103000006/statement HTTP/1.1" 200 -
2025-06-24 08:49:39,686 - INFO - 127.0.0.1 - - [24/Jun/2025 08:49:39] "GET /payments HTTP/1.1" 200 -
2025-06-24 08:49:43,149 - INFO - 127.0.0.1 - - [24/Jun/2025 08:49:43] "GET /api/verify_loan/103000006 HTTP/1.1" 200 -
[2025-06-24 08:49:52,385] INFO in app: 🔥 after_insert listener triggered for Payment ID 23
2025-06-24 08:49:52,385 - INFO - 🔥 after_insert listener triggered for Payment ID 23
[2025-06-24 08:49:52,407] ERROR in app: Payment error: 'LoanApplication' object has no attribute 'record_arrears'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3584, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1171, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 997, in allocate_payment
    self.record_arrears(payment)
    ^^^^^^^^^^^^^^^^^^^
AttributeError: 'LoanApplication' object has no attribute 'record_arrears'
2025-06-24 08:49:52,407 - ERROR - Payment error: 'LoanApplication' object has no attribute 'record_arrears'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3584, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1171, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 997, in allocate_payment
    self.record_arrears(payment)
    ^^^^^^^^^^^^^^^^^^^
AttributeError: 'LoanApplication' object has no attribute 'record_arrears'
2025-06-24 08:49:52,434 - INFO - 127.0.0.1 - - [24/Jun/2025 08:49:52] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 08:49:52,758 - INFO - 127.0.0.1 - - [24/Jun/2025 08:49:52] "GET /payments HTTP/1.1" 200 -
[2025-06-24 08:50:09,718] INFO in app: ==================================================
[2025-06-24 08:50:09,723] INFO in app: Application logging initialized successfully
[2025-06-24 08:50:09,726] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 08:50:09,728] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 08:50:09,730] INFO in app: System encoding: utf-8
[2025-06-24 08:50:09,735] INFO in app: ==================================================
2025-06-24 08:50:09,911 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 08:50:09,911 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 08:50:12,958 - INFO - 127.0.0.1 - - [24/Jun/2025 08:50:12] "GET /payments HTTP/1.1" 200 -
2025-06-24 08:50:14,736 - INFO - 127.0.0.1 - - [24/Jun/2025 08:50:14] "GET /payments HTTP/1.1" 200 -
2025-06-24 08:50:30,291 - INFO - 127.0.0.1 - - [24/Jun/2025 08:50:30] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 08:51:09,126 - INFO - 127.0.0.1 - - [24/Jun/2025 08:51:09] "GET /api/verify_loan/103000006 HTTP/1.1" 200 -
[2025-06-24 08:51:18,609] INFO in app: 🔥 after_insert listener triggered for Payment ID 23
2025-06-24 08:51:18,609 - INFO - 🔥 after_insert listener triggered for Payment ID 23
[2025-06-24 08:51:18,635] ERROR in app: Payment error: 'LoanApplication' object has no attribute 'repaymentschedules'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3604, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1191, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 997, in allocate_payment
    self.record_arrears(payment)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1042, in record_arrears
    due_schedules = [s for s in self.repaymentschedules if s.status != 'paid']
                                ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'LoanApplication' object has no attribute 'repaymentschedules'. Did you mean: 'repayment_schedules'?
2025-06-24 08:51:18,635 - ERROR - Payment error: 'LoanApplication' object has no attribute 'repaymentschedules'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3604, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 101, in save_obj
    _finalize_insert_update_commands(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<16 lines>...
        ),
        ^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1564, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
    ~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 893, in wrap
    fn(*arg, **kw)
    ~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1191, in allocate_payment_listener
    loan.allocate_payment(target)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 997, in allocate_payment
    self.record_arrears(payment)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1042, in record_arrears
    due_schedules = [s for s in self.repaymentschedules if s.status != 'paid']
                                ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'LoanApplication' object has no attribute 'repaymentschedules'. Did you mean: 'repayment_schedules'?
2025-06-24 08:51:18,672 - INFO - 127.0.0.1 - - [24/Jun/2025 08:51:18] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 08:51:18,931 - INFO - 127.0.0.1 - - [24/Jun/2025 08:51:18] "GET /payments HTTP/1.1" 200 -
[2025-06-24 08:56:38,092] INFO in app: ==================================================
[2025-06-24 08:56:38,100] INFO in app: Application logging initialized successfully
[2025-06-24 08:56:38,103] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 08:56:38,105] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 08:56:38,108] INFO in app: System encoding: utf-8
[2025-06-24 08:56:38,113] INFO in app: ==================================================
2025-06-24 08:56:38,332 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 08:56:38,333 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 08:56:43,340 - INFO - 127.0.0.1 - - [24/Jun/2025 08:56:43] "GET /payments HTTP/1.1" 200 -
2025-06-24 08:56:45,308 - INFO - 127.0.0.1 - - [24/Jun/2025 08:56:45] "GET /payments HTTP/1.1" 200 -
2025-06-24 08:56:48,253 - INFO - 127.0.0.1 - - [24/Jun/2025 08:56:48] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 08:56:48,982 - INFO - 127.0.0.1 - - [24/Jun/2025 08:56:48] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 08:56:50,558 - INFO - 127.0.0.1 - - [24/Jun/2025 08:56:50] "GET /loan/103000006/statement HTTP/1.1" 200 -
2025-06-24 08:56:58,001 - INFO - 127.0.0.1 - - [24/Jun/2025 08:56:58] "GET /payments HTTP/1.1" 200 -
2025-06-24 08:57:00,736 - INFO - 127.0.0.1 - - [24/Jun/2025 08:57:00] "GET /api/verify_loan/103000006 HTTP/1.1" 200 -
[2025-06-24 08:57:09,958] INFO in app: 🔥 after_insert listener triggered for Payment ID 23
2025-06-24 08:57:09,958 - INFO - 🔥 after_insert listener triggered for Payment ID 23
[2025-06-24 08:57:09,972] INFO in app: [103000006] Arrears recorded on schedule 49: 296900.58
2025-06-24 08:57:09,972 - INFO - [103000006] Arrears recorded on schedule 49: 296900.58
[2025-06-24 08:57:09,978] INFO in app: [6] Payment 120000.0 allocated. Remaining: 0.0
2025-06-24 08:57:09,978 - INFO - [6] Payment 120000.0 allocated. Remaining: 0.0
2025-06-24 08:57:09,987 - INFO - 127.0.0.1 - - [24/Jun/2025 08:57:09] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 08:57:10,269 - INFO - 127.0.0.1 - - [24/Jun/2025 08:57:10] "GET /payments HTTP/1.1" 200 -
2025-06-24 08:57:13,644 - INFO - 127.0.0.1 - - [24/Jun/2025 08:57:13] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 08:57:15,898 - INFO - 127.0.0.1 - - [24/Jun/2025 08:57:15] "GET /loan/103000006/statement HTTP/1.1" 200 -
2025-06-24 08:57:43,589 - INFO - 127.0.0.1 - - [24/Jun/2025 08:57:43] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 08:57:52,027 - INFO - 127.0.0.1 - - [24/Jun/2025 08:57:52] "GET /loan/136000011/statement HTTP/1.1" 200 -
2025-06-24 08:58:00,478 - INFO - 127.0.0.1 - - [24/Jun/2025 08:58:00] "GET /payments HTTP/1.1" 200 -
2025-06-24 08:58:03,250 - INFO - 127.0.0.1 - - [24/Jun/2025 08:58:03] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
[2025-06-24 08:58:16,687] INFO in app: 🔥 after_insert listener triggered for Payment ID 24
2025-06-24 08:58:16,687 - INFO - 🔥 after_insert listener triggered for Payment ID 24
[2025-06-24 08:58:16,700] INFO in app: [11] Payment 220000.0 allocated. Remaining: 0.0
2025-06-24 08:58:16,700 - INFO - [11] Payment 220000.0 allocated. Remaining: 0.0
2025-06-24 08:58:16,710 - INFO - 127.0.0.1 - - [24/Jun/2025 08:58:16] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 08:58:16,717 - INFO - 127.0.0.1 - - [24/Jun/2025 08:58:16] "GET /payments HTTP/1.1" 200 -
2025-06-24 08:58:20,224 - INFO - 127.0.0.1 - - [24/Jun/2025 08:58:20] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 08:58:24,154 - INFO - 127.0.0.1 - - [24/Jun/2025 08:58:24] "GET /loan/136000011/statement HTTP/1.1" 200 -
[2025-06-24 09:02:01,043] INFO in app: ==================================================
[2025-06-24 09:02:01,049] INFO in app: Application logging initialized successfully
[2025-06-24 09:02:01,051] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 09:02:01,053] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 09:02:01,055] INFO in app: System encoding: utf-8
[2025-06-24 09:02:01,057] INFO in app: ==================================================
2025-06-24 09:02:01,238 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 09:02:01,238 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-24 09:06:55,453] INFO in app: ==================================================
[2025-06-24 09:06:55,532] INFO in app: Application logging initialized successfully
[2025-06-24 09:06:55,533] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 09:06:55,535] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 09:06:55,536] INFO in app: System encoding: utf-8
[2025-06-24 09:06:55,537] INFO in app: ==================================================
[2025-06-24 09:08:09,263] INFO in app: ==================================================
[2025-06-24 09:08:09,268] INFO in app: Application logging initialized successfully
[2025-06-24 09:08:09,272] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 09:08:09,273] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 09:08:09,275] INFO in app: System encoding: utf-8
[2025-06-24 09:08:09,277] INFO in app: ==================================================
2025-06-24 09:08:09,463 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 09:08:09,464 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 09:08:22,055 - INFO - 127.0.0.1 - - [24/Jun/2025 09:08:22] "GET /loan/136000011/statement HTTP/1.1" 200 -
2025-06-24 09:08:26,053 - INFO - 127.0.0.1 - - [24/Jun/2025 09:08:26] "GET /payments HTTP/1.1" 200 -
2025-06-24 09:08:26,123 - INFO - 127.0.0.1 - - [24/Jun/2025 09:08:26] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 09:08:29,122 - INFO - 127.0.0.1 - - [24/Jun/2025 09:08:29] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
[2025-06-24 09:08:45,089] INFO in app: 🔥 after_insert listener triggered for Payment ID 25
2025-06-24 09:08:45,089 - INFO - 🔥 after_insert listener triggered for Payment ID 25
[2025-06-24 09:08:45,102] INFO in app: [136000011] Arrears recorded on schedule 197: 201102.01
2025-06-24 09:08:45,102 - INFO - [136000011] Arrears recorded on schedule 197: 201102.01
[2025-06-24 09:08:45,106] INFO in app: [11] Payment 201102.01 allocated. Remaining: 0.0
2025-06-24 09:08:45,106 - INFO - [11] Payment 201102.01 allocated. Remaining: 0.0
2025-06-24 09:08:45,120 - INFO - 127.0.0.1 - - [24/Jun/2025 09:08:45] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 09:08:45,405 - INFO - 127.0.0.1 - - [24/Jun/2025 09:08:45] "GET /payments HTTP/1.1" 200 -
2025-06-24 09:08:50,334 - INFO - 127.0.0.1 - - [24/Jun/2025 09:08:50] "GET /loanbook HTTP/1.1" 200 -
[2025-06-24 09:08:57,969] INFO in app: Found 1 loans for customer 202506000003
2025-06-24 09:08:57,969 - INFO - Found 1 loans for customer 202506000003
[2025-06-24 09:08:57,975] INFO in app: Customer ID: 3
2025-06-24 09:08:57,975 - INFO - Customer ID: 3
[2025-06-24 09:08:57,978] INFO in app: Found Loans: [('136000008', 'active')]
2025-06-24 09:08:57,978 - INFO - Found Loans: [('136000008', 'active')]
2025-06-24 09:08:58,025 - INFO - 127.0.0.1 - - [24/Jun/2025 09:08:58] "GET /customer/202506000003/account HTTP/1.1" 200 -
2025-06-24 09:09:00,797 - INFO - 127.0.0.1 - - [24/Jun/2025 09:09:00] "GET /loan/136000008/statement HTTP/1.1" 200 -
2025-06-24 09:09:19,597 - INFO - 127.0.0.1 - - [24/Jun/2025 09:09:19] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 09:09:24,870 - INFO - 127.0.0.1 - - [24/Jun/2025 09:09:24] "GET /loan/136000011/statement HTTP/1.1" 200 -
2025-06-24 09:09:31,059 - INFO - 127.0.0.1 - - [24/Jun/2025 09:09:31] "GET /loanbook HTTP/1.1" 200 -
[2025-06-24 09:09:39,016] INFO in app: Found 1 loans for customer 202506000003
2025-06-24 09:09:39,016 - INFO - Found 1 loans for customer 202506000003
[2025-06-24 09:09:39,019] INFO in app: Customer ID: 3
2025-06-24 09:09:39,019 - INFO - Customer ID: 3
[2025-06-24 09:09:39,022] INFO in app: Found Loans: [('136000008', 'active')]
2025-06-24 09:09:39,022 - INFO - Found Loans: [('136000008', 'active')]
2025-06-24 09:09:39,034 - INFO - 127.0.0.1 - - [24/Jun/2025 09:09:39] "GET /customer/202506000003/account HTTP/1.1" 200 -
2025-06-24 09:09:40,834 - INFO - 127.0.0.1 - - [24/Jun/2025 09:09:40] "GET /loan/136000008/statement HTTP/1.1" 200 -
2025-06-24 09:09:54,486 - INFO - 127.0.0.1 - - [24/Jun/2025 09:09:54] "GET /payments HTTP/1.1" 200 -
2025-06-24 09:09:57,377 - INFO - 127.0.0.1 - - [24/Jun/2025 09:09:57] "[33mGET /api/verify_loan/201,102.01 HTTP/1.1[0m" 404 -
2025-06-24 09:10:07,762 - INFO - 127.0.0.1 - - [24/Jun/2025 09:10:07] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
2025-06-24 09:10:08,089 - INFO - 127.0.0.1 - - [24/Jun/2025 09:10:08] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
[2025-06-24 09:10:21,639] INFO in app: 🔥 after_insert listener triggered for Payment ID 26
2025-06-24 09:10:21,639 - INFO - 🔥 after_insert listener triggered for Payment ID 26
[2025-06-24 09:10:21,657] INFO in app: [136000011] Arrears recorded on schedule 197: 201102.01
2025-06-24 09:10:21,657 - INFO - [136000011] Arrears recorded on schedule 197: 201102.01
[2025-06-24 09:10:21,663] INFO in app: [11] Payment 201102.01 allocated. Remaining: 0.0
2025-06-24 09:10:21,663 - INFO - [11] Payment 201102.01 allocated. Remaining: 0.0
2025-06-24 09:10:21,671 - INFO - 127.0.0.1 - - [24/Jun/2025 09:10:21] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 09:10:21,955 - INFO - 127.0.0.1 - - [24/Jun/2025 09:10:21] "GET /payments HTTP/1.1" 200 -
2025-06-24 09:10:24,637 - INFO - 127.0.0.1 - - [24/Jun/2025 09:10:24] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 09:10:27,705 - INFO - 127.0.0.1 - - [24/Jun/2025 09:10:27] "GET /loan/136000011/statement HTTP/1.1" 200 -
2025-06-24 10:40:18,180 - INFO - 127.0.0.1 - - [24/Jun/2025 10:40:18] "GET /payments HTTP/1.1" 200 -
2025-06-24 10:40:41,052 - INFO - 127.0.0.1 - - [24/Jun/2025 10:40:41] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
[2025-06-24 10:40:56,749] INFO in app: 🔥 after_insert listener triggered for Payment ID 27
2025-06-24 10:40:56,749 - INFO - 🔥 after_insert listener triggered for Payment ID 27
[2025-06-24 10:40:56,770] INFO in app: [136000011] Arrears recorded on schedule 197: 111102.01
2025-06-24 10:40:56,770 - INFO - [136000011] Arrears recorded on schedule 197: 111102.01
[2025-06-24 10:40:56,777] INFO in app: [11] Payment 291102.01 allocated. Remaining: 0.0
2025-06-24 10:40:56,777 - INFO - [11] Payment 291102.01 allocated. Remaining: 0.0
2025-06-24 10:40:56,787 - INFO - 127.0.0.1 - - [24/Jun/2025 10:40:56] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 10:40:57,045 - INFO - 127.0.0.1 - - [24/Jun/2025 10:40:57] "GET /payments HTTP/1.1" 200 -
2025-06-24 10:40:59,642 - INFO - 127.0.0.1 - - [24/Jun/2025 10:40:59] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 10:41:03,493 - INFO - 127.0.0.1 - - [24/Jun/2025 10:41:03] "GET /loan/136000011/statement HTTP/1.1" 200 -
[2025-06-24 12:35:29,923] INFO in app: ==================================================
[2025-06-24 12:35:30,001] INFO in app: Application logging initialized successfully
[2025-06-24 12:35:30,003] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 12:35:30,004] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 12:35:30,006] INFO in app: System encoding: utf-8
[2025-06-24 12:35:30,009] INFO in app: ==================================================
2025-06-24 12:35:30,276 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 12:35:30,276 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 13:08:51,026 - INFO - 127.0.0.1 - - [24/Jun/2025 13:08:51] "GET /loan/136000011/statement HTTP/1.1" 200 -
2025-06-24 13:08:51,759 - INFO - 127.0.0.1 - - [24/Jun/2025 13:08:51] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 13:08:56,434 - INFO - 127.0.0.1 - - [24/Jun/2025 13:08:56] "GET /payments HTTP/1.1" 200 -
2025-06-24 13:08:59,189 - INFO - 127.0.0.1 - - [24/Jun/2025 13:08:59] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
[2025-06-24 13:09:10,005] INFO in app: 🔥 after_insert listener triggered for Payment ID 28
2025-06-24 13:09:10,005 - INFO - 🔥 after_insert listener triggered for Payment ID 28
[2025-06-24 13:09:10,016] INFO in app: [136000011] Arrears recorded on schedule 197: 201102.01
2025-06-24 13:09:10,016 - INFO - [136000011] Arrears recorded on schedule 197: 201102.01
[2025-06-24 13:09:10,018] INFO in app: [136000011] Payment 201102.01 allocated. Remaining: 0.0
2025-06-24 13:09:10,018 - INFO - [136000011] Payment 201102.01 allocated. Remaining: 0.0
2025-06-24 13:09:10,027 - INFO - 127.0.0.1 - - [24/Jun/2025 13:09:10] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 13:09:10,036 - INFO - 127.0.0.1 - - [24/Jun/2025 13:09:10] "GET /payments HTTP/1.1" 200 -
2025-06-24 13:09:12,153 - INFO - 127.0.0.1 - - [24/Jun/2025 13:09:12] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 13:09:16,017 - INFO - 127.0.0.1 - - [24/Jun/2025 13:09:16] "GET /loan/136000011/statement HTTP/1.1" 200 -
[2025-06-24 13:38:47,573] INFO in app: ==================================================
[2025-06-24 13:38:47,579] INFO in app: Application logging initialized successfully
[2025-06-24 13:38:47,582] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 13:38:47,584] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 13:38:47,586] INFO in app: System encoding: utf-8
[2025-06-24 13:38:47,588] INFO in app: ==================================================
2025-06-24 13:38:47,783 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 13:38:47,783 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 13:38:55,360 - INFO - 127.0.0.1 - - [24/Jun/2025 13:38:55] "GET /loan/136000011/statement HTTP/1.1" 200 -
2025-06-24 13:38:56,577 - INFO - 127.0.0.1 - - [24/Jun/2025 13:38:56] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 13:49:17,172 - INFO - 127.0.0.1 - - [24/Jun/2025 13:49:17] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 13:49:18,817 - INFO - 127.0.0.1 - - [24/Jun/2025 13:49:18] "GET /payments HTTP/1.1" 200 -
2025-06-24 13:49:21,839 - INFO - 127.0.0.1 - - [24/Jun/2025 13:49:21] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
[2025-06-24 13:49:31,728] INFO in app: 🔥 after_insert listener triggered for Payment ID 29
2025-06-24 13:49:31,728 - INFO - 🔥 after_insert listener triggered for Payment ID 29
[2025-06-24 13:49:31,740] INFO in app: [136000011] Schedule 196 → Paid: fees=29120.0, interest=90880.0, principal=0.0
2025-06-24 13:49:31,740 - INFO - [136000011] Schedule 196 → Paid: fees=29120.0, interest=90880.0, principal=0.0
[2025-06-24 13:49:31,749] INFO in app: [136000011] Arrears recorded on schedule 196: 81102.01
2025-06-24 13:49:31,749 - INFO - [136000011] Arrears recorded on schedule 196: 81102.01
[2025-06-24 13:49:31,752] INFO in app: [136000011] Payment 120000.0 allocated. Remaining: 0.0
2025-06-24 13:49:31,752 - INFO - [136000011] Payment 120000.0 allocated. Remaining: 0.0
2025-06-24 13:49:31,760 - INFO - 127.0.0.1 - - [24/Jun/2025 13:49:31] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 13:49:31,769 - INFO - 127.0.0.1 - - [24/Jun/2025 13:49:31] "GET /payments HTTP/1.1" 200 -
2025-06-24 13:49:34,085 - INFO - 127.0.0.1 - - [24/Jun/2025 13:49:34] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 13:49:38,157 - INFO - 127.0.0.1 - - [24/Jun/2025 13:49:38] "GET /loan/136000011/statement HTTP/1.1" 200 -
2025-06-24 14:25:23,008 - INFO - 127.0.0.1 - - [24/Jun/2025 14:25:23] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 14:25:24,912 - INFO - 127.0.0.1 - - [24/Jun/2025 14:25:24] "GET /payments HTTP/1.1" 200 -
2025-06-24 14:25:27,662 - INFO - 127.0.0.1 - - [24/Jun/2025 14:25:27] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
[2025-06-24 14:25:36,320] INFO in app: 🔥 after_insert listener triggered for Payment ID 30
2025-06-24 14:25:36,320 - INFO - 🔥 after_insert listener triggered for Payment ID 30
[2025-06-24 14:25:36,330] INFO in app: [136000011] Schedule 196 → Paid: fees=29120.0, interest=122136.0, principal=49846.01
2025-06-24 14:25:36,330 - INFO - [136000011] Schedule 196 → Paid: fees=29120.0, interest=122136.0, principal=49846.01
[2025-06-24 14:25:36,333] INFO in app: [136000011] Schedule 197 → Paid: fees=7.275957614183426e-12, interest=0.0, principal=0.0
2025-06-24 14:25:36,333 - INFO - [136000011] Schedule 197 → Paid: fees=7.275957614183426e-12, interest=0.0, principal=0.0
[2025-06-24 14:25:36,347] INFO in app: [136000011] Arrears recorded on schedule 197: 201102.01
2025-06-24 14:25:36,347 - INFO - [136000011] Arrears recorded on schedule 197: 201102.01
[2025-06-24 14:25:36,349] INFO in app: [136000011] Payment 201102.01 allocated. Remaining: 0.0
2025-06-24 14:25:36,349 - INFO - [136000011] Payment 201102.01 allocated. Remaining: 0.0
2025-06-24 14:25:36,358 - INFO - 127.0.0.1 - - [24/Jun/2025 14:25:36] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 14:25:36,637 - INFO - 127.0.0.1 - - [24/Jun/2025 14:25:36] "GET /payments HTTP/1.1" 200 -
2025-06-24 14:25:45,473 - INFO - 127.0.0.1 - - [24/Jun/2025 14:25:45] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
2025-06-24 14:25:45,739 - INFO - 127.0.0.1 - - [24/Jun/2025 14:25:45] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
[2025-06-24 14:25:58,550] INFO in app: 🔥 after_insert listener triggered for Payment ID 31
2025-06-24 14:25:58,550 - INFO - 🔥 after_insert listener triggered for Payment ID 31
[2025-06-24 14:25:58,560] INFO in app: [136000011] Schedule 196 → Paid: fees=29120.0, interest=122136.0, principal=49846.01
2025-06-24 14:25:58,560 - INFO - [136000011] Schedule 196 → Paid: fees=29120.0, interest=122136.0, principal=49846.01
[2025-06-24 14:25:58,565] INFO in app: [136000011] Schedule 197 → Paid: fees=29120.0, interest=69777.98999999999, principal=0.0
2025-06-24 14:25:58,565 - INFO - [136000011] Schedule 197 → Paid: fees=29120.0, interest=69777.98999999999, principal=0.0
[2025-06-24 14:25:58,580] INFO in app: [136000011] Arrears recorded on schedule 197: 102204.02
2025-06-24 14:25:58,580 - INFO - [136000011] Arrears recorded on schedule 197: 102204.02
[2025-06-24 14:25:58,584] INFO in app: [136000011] Payment 300000.0 allocated. Remaining: 0.0
2025-06-24 14:25:58,584 - INFO - [136000011] Payment 300000.0 allocated. Remaining: 0.0
2025-06-24 14:25:58,595 - INFO - 127.0.0.1 - - [24/Jun/2025 14:25:58] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 14:25:58,863 - INFO - 127.0.0.1 - - [24/Jun/2025 14:25:58] "GET /payments HTTP/1.1" 200 -
2025-06-24 14:26:00,681 - INFO - 127.0.0.1 - - [24/Jun/2025 14:26:00] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 14:26:03,846 - INFO - 127.0.0.1 - - [24/Jun/2025 14:26:03] "GET /loan/136000011/statement HTTP/1.1" 200 -
[2025-06-24 16:30:45,407] INFO in app: ==================================================
[2025-06-24 16:30:45,474] INFO in app: Application logging initialized successfully
[2025-06-24 16:30:45,475] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 16:30:45,477] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 16:30:45,478] INFO in app: System encoding: utf-8
[2025-06-24 16:30:45,480] INFO in app: ==================================================
2025-06-24 16:30:45,718 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 16:30:45,718 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 16:30:55,625 - INFO - 127.0.0.1 - - [24/Jun/2025 16:30:55] "GET /loan/136000011/statement HTTP/1.1" 200 -
2025-06-24 16:30:56,309 - INFO - 127.0.0.1 - - [24/Jun/2025 16:30:56] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 16:31:58,158 - INFO - 127.0.0.1 - - [24/Jun/2025 16:31:58] "GET /payments HTTP/1.1" 200 -
2025-06-24 16:32:01,135 - INFO - 127.0.0.1 - - [24/Jun/2025 16:32:01] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
2025-06-24 16:32:15,398 - INFO - 127.0.0.1 - - [24/Jun/2025 16:32:15] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 16:32:15,718 - INFO - 127.0.0.1 - - [24/Jun/2025 16:32:15] "GET /payments HTTP/1.1" 200 -
2025-06-24 16:32:19,112 - INFO - 127.0.0.1 - - [24/Jun/2025 16:32:19] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
2025-06-24 16:32:31,736 - INFO - 127.0.0.1 - - [24/Jun/2025 16:32:31] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 16:32:32,058 - INFO - 127.0.0.1 - - [24/Jun/2025 16:32:32] "GET /payments HTTP/1.1" 200 -
2025-06-24 16:32:34,719 - INFO - 127.0.0.1 - - [24/Jun/2025 16:32:34] "[33mGET /api/verify_loan/224000001 HTTP/1.1[0m" 404 -
2025-06-24 16:32:34,974 - INFO - 127.0.0.1 - - [24/Jun/2025 16:32:34] "[33mGET /api/verify_loan/224000001 HTTP/1.1[0m" 404 -
2025-06-24 16:32:37,998 - INFO - 127.0.0.1 - - [24/Jun/2025 16:32:37] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
2025-06-24 16:32:51,809 - INFO - 127.0.0.1 - - [24/Jun/2025 16:32:51] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 16:32:51,821 - INFO - 127.0.0.1 - - [24/Jun/2025 16:32:51] "GET /payments HTTP/1.1" 200 -
2025-06-24 16:32:54,349 - INFO - 127.0.0.1 - - [24/Jun/2025 16:32:54] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 16:32:56,973 - INFO - 127.0.0.1 - - [24/Jun/2025 16:32:56] "GET /loan/136000011/statement HTTP/1.1" 200 -
[2025-06-24 17:35:02,792] INFO in app: ==================================================
[2025-06-24 17:35:02,798] INFO in app: Application logging initialized successfully
[2025-06-24 17:35:02,800] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 17:35:02,802] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 17:35:02,805] INFO in app: System encoding: utf-8
[2025-06-24 17:35:02,809] INFO in app: ==================================================
2025-06-24 17:35:02,996 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 17:35:02,996 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 17:35:14,198 - INFO - 127.0.0.1 - - [24/Jun/2025 17:35:14] "GET /payments HTTP/1.1" 200 -
2025-06-24 17:35:16,932 - INFO - 127.0.0.1 - - [24/Jun/2025 17:35:16] "GET /payments HTTP/1.1" 200 -
2025-06-24 17:35:20,359 - INFO - 127.0.0.1 - - [24/Jun/2025 17:35:20] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
[2025-06-24 17:35:29,141] INFO in app: [136000011] Schedule 196 → Paid: fees=29120.0, interest=90880.0, principal=0.0
2025-06-24 17:35:29,141 - INFO - [136000011] Schedule 196 → Paid: fees=29120.0, interest=90880.0, principal=0.0
[2025-06-24 17:35:29,164] INFO in app: [136000011] Arrears recorded on schedule 196: 81102.01
2025-06-24 17:35:29,164 - INFO - [136000011] Arrears recorded on schedule 196: 81102.01
[2025-06-24 17:35:29,168] INFO in app: [136000011] Payment 120000.0 allocated. Remaining: 0.0
2025-06-24 17:35:29,168 - INFO - [136000011] Payment 120000.0 allocated. Remaining: 0.0
2025-06-24 17:35:29,177 - INFO - 127.0.0.1 - - [24/Jun/2025 17:35:29] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 17:35:29,444 - INFO - 127.0.0.1 - - [24/Jun/2025 17:35:29] "GET /payments HTTP/1.1" 200 -
2025-06-24 17:35:33,290 - INFO - 127.0.0.1 - - [24/Jun/2025 17:35:33] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
[2025-06-24 17:35:45,428] INFO in app: [136000011] Schedule 196 → Paid: fees=29120.0, interest=122136.0, principal=49846.01
2025-06-24 17:35:45,428 - INFO - [136000011] Schedule 196 → Paid: fees=29120.0, interest=122136.0, principal=49846.01
[2025-06-24 17:35:45,435] INFO in app: [136000011] Schedule 197 → Paid: fees=29120.0, interest=90880.0, principal=0.0
2025-06-24 17:35:45,435 - INFO - [136000011] Schedule 197 → Paid: fees=29120.0, interest=90880.0, principal=0.0
[2025-06-24 17:35:45,453] INFO in app: [136000011] Arrears recorded on schedule 197: 81102.01
2025-06-24 17:35:45,453 - INFO - [136000011] Arrears recorded on schedule 197: 81102.01
[2025-06-24 17:35:45,455] INFO in app: [136000011] Payment 201102.01 allocated. Remaining: 0.0
2025-06-24 17:35:45,455 - INFO - [136000011] Payment 201102.01 allocated. Remaining: 0.0
2025-06-24 17:35:45,466 - INFO - 127.0.0.1 - - [24/Jun/2025 17:35:45] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 17:35:45,742 - INFO - 127.0.0.1 - - [24/Jun/2025 17:35:45] "GET /payments HTTP/1.1" 200 -
2025-06-24 17:35:49,909 - INFO - 127.0.0.1 - - [24/Jun/2025 17:35:49] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
[2025-06-24 17:35:56,453] INFO in app: [136000011] Schedule 197 → Paid: fees=29120.0, interest=120391.39, principal=51590.62
2025-06-24 17:35:56,453 - INFO - [136000011] Schedule 197 → Paid: fees=29120.0, interest=120391.39, principal=51590.62
[2025-06-24 17:35:56,465] INFO in app: [136000011] Schedule 198 → Paid: fees=29120.0, interest=118585.72, principal=53396.3
2025-06-24 17:35:56,465 - INFO - [136000011] Schedule 198 → Paid: fees=29120.0, interest=118585.72, principal=53396.3
[2025-06-24 17:35:56,469] INFO in app: [136000011] Schedule 199 → Paid: fees=17795.969999999987, interest=0.0, principal=0.0
2025-06-24 17:35:56,469 - INFO - [136000011] Schedule 199 → Paid: fees=17795.969999999987, interest=0.0, principal=0.0
[2025-06-24 17:35:56,491] INFO in app: [136000011] Arrears recorded on schedule 199: 183306.04
2025-06-24 17:35:56,491 - INFO - [136000011] Arrears recorded on schedule 199: 183306.04
[2025-06-24 17:35:56,493] INFO in app: [136000011] Payment 300000.0 allocated. Remaining: 0.0
2025-06-24 17:35:56,493 - INFO - [136000011] Payment 300000.0 allocated. Remaining: 0.0
2025-06-24 17:35:56,501 - INFO - 127.0.0.1 - - [24/Jun/2025 17:35:56] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 17:35:56,765 - INFO - 127.0.0.1 - - [24/Jun/2025 17:35:56] "GET /payments HTTP/1.1" 200 -
2025-06-24 17:36:10,550 - INFO - 127.0.0.1 - - [24/Jun/2025 17:36:10] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 17:38:00,623 - INFO - 127.0.0.1 - - [24/Jun/2025 17:38:00] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 17:38:03,433 - INFO - 127.0.0.1 - - [24/Jun/2025 17:38:03] "GET /loan/136000011/statement HTTP/1.1" 200 -
[2025-06-24 18:22:45,180] INFO in app: ==================================================
[2025-06-24 18:22:45,187] INFO in app: Application logging initialized successfully
[2025-06-24 18:22:45,190] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 18:22:45,192] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 18:22:45,194] INFO in app: System encoding: utf-8
[2025-06-24 18:22:45,198] INFO in app: ==================================================
[2025-06-24 18:22:45,320] INFO in app: ==================================================
[2025-06-24 18:22:45,320] INFO in app: ==================================================
2025-06-24 18:22:45,320 - INFO - ==================================================
[2025-06-24 18:22:45,325] INFO in app: Application logging initialized successfully
[2025-06-24 18:22:45,325] INFO in app: Application logging initialized successfully
2025-06-24 18:22:45,325 - INFO - Application logging initialized successfully
[2025-06-24 18:22:45,330] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 18:22:45,330] INFO in app: Log directory: C:\Users\pc\loan-app\logs
2025-06-24 18:22:45,330 - INFO - Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 18:22:45,334] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 18:22:45,334] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
2025-06-24 18:22:45,334 - INFO - Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 18:22:45,338] INFO in app: System encoding: utf-8
[2025-06-24 18:22:45,338] INFO in app: System encoding: utf-8
2025-06-24 18:22:45,338 - INFO - System encoding: utf-8
[2025-06-24 18:22:45,346] INFO in app: ==================================================
[2025-06-24 18:22:45,346] INFO in app: ==================================================
2025-06-24 18:22:45,346 - INFO - ==================================================
[2025-06-24 18:24:28,224] INFO in app: ==================================================
[2025-06-24 18:24:28,230] INFO in app: Application logging initialized successfully
[2025-06-24 18:24:28,232] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 18:24:28,234] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 18:24:28,235] INFO in app: System encoding: utf-8
[2025-06-24 18:24:28,238] INFO in app: ==================================================
2025-06-24 18:24:28,428 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 18:24:28,428 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 18:24:34,266 - INFO - 127.0.0.1 - - [24/Jun/2025 18:24:34] "GET /loan/136000011/statement HTTP/1.1" 200 -
2025-06-24 18:24:37,442 - INFO - 127.0.0.1 - - [24/Jun/2025 18:24:37] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 18:24:51,306 - INFO - 127.0.0.1 - - [24/Jun/2025 18:24:51] "GET /payments HTTP/1.1" 200 -
2025-06-24 18:24:53,771 - INFO - 127.0.0.1 - - [24/Jun/2025 18:24:53] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
[2025-06-24 18:25:02,725] ERROR in app: Payment error: 'schedule_id' is an invalid keyword argument for PaymentAllocation
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3582, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1300, in process
    self._allocate_to_schedules()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1333, in _allocate_to_schedules
    self.allocations.append(PaymentAllocation(
                            ~~~~~~~~~~~~~~~~~^
        payment_id=self.payment.id,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        fees=alloc_fees
        ^^^^^^^^^^^^^^^
    ))
    ^
  File "<string>", line 4, in __init__
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state.py", line 571, in _initialize_instance
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state.py", line 569, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\decl_base.py", line 2175, in _declarative_constructor
    raise TypeError(
        "%r is an invalid keyword argument for %s" % (k, cls_.__name__)
    )
TypeError: 'schedule_id' is an invalid keyword argument for PaymentAllocation
2025-06-24 18:25:02,725 - ERROR - Payment error: 'schedule_id' is an invalid keyword argument for PaymentAllocation
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3582, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1300, in process
    self._allocate_to_schedules()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1333, in _allocate_to_schedules
    self.allocations.append(PaymentAllocation(
                            ~~~~~~~~~~~~~~~~~^
        payment_id=self.payment.id,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        fees=alloc_fees
        ^^^^^^^^^^^^^^^
    ))
    ^
  File "<string>", line 4, in __init__
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state.py", line 571, in _initialize_instance
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state.py", line 569, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\decl_base.py", line 2175, in _declarative_constructor
    raise TypeError(
        "%r is an invalid keyword argument for %s" % (k, cls_.__name__)
    )
TypeError: 'schedule_id' is an invalid keyword argument for PaymentAllocation
2025-06-24 18:25:02,791 - INFO - 127.0.0.1 - - [24/Jun/2025 18:25:02] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 18:25:02,799 - INFO - 127.0.0.1 - - [24/Jun/2025 18:25:02] "GET /payments HTTP/1.1" 200 -
[2025-06-24 18:29:54,456] INFO in app: ==================================================
[2025-06-24 18:29:54,463] INFO in app: Application logging initialized successfully
[2025-06-24 18:29:54,465] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 18:29:54,467] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 18:29:54,469] INFO in app: System encoding: utf-8
[2025-06-24 18:29:54,472] INFO in app: ==================================================
[2025-06-24 18:30:03,892] INFO in app: ==================================================
[2025-06-24 18:30:03,898] INFO in app: Application logging initialized successfully
[2025-06-24 18:30:03,899] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 18:30:03,901] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 18:30:03,903] INFO in app: System encoding: utf-8
[2025-06-24 18:30:03,908] INFO in app: ==================================================
[2025-06-24 18:33:49,768] INFO in app: ==================================================
[2025-06-24 18:33:49,774] INFO in app: Application logging initialized successfully
[2025-06-24 18:33:49,776] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 18:33:49,779] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 18:33:49,783] INFO in app: System encoding: utf-8
[2025-06-24 18:33:49,785] INFO in app: ==================================================
[2025-06-24 18:35:49,971] INFO in app: ==================================================
[2025-06-24 18:35:49,977] INFO in app: Application logging initialized successfully
[2025-06-24 18:35:49,979] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 18:35:49,981] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 18:35:49,983] INFO in app: System encoding: utf-8
[2025-06-24 18:35:49,985] INFO in app: ==================================================
[2025-06-24 18:39:14,586] INFO in app: ==================================================
[2025-06-24 18:39:14,592] INFO in app: Application logging initialized successfully
[2025-06-24 18:39:14,594] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 18:39:14,596] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 18:39:14,598] INFO in app: System encoding: utf-8
[2025-06-24 18:39:14,600] INFO in app: ==================================================
[2025-06-24 18:39:20,245] INFO in app: ==================================================
[2025-06-24 18:39:20,250] INFO in app: Application logging initialized successfully
[2025-06-24 18:39:20,254] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 18:39:20,256] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 18:39:20,258] INFO in app: System encoding: utf-8
[2025-06-24 18:39:20,261] INFO in app: ==================================================
2025-06-24 18:39:20,433 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 18:39:20,433 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 18:39:27,561 - INFO - 127.0.0.1 - - [24/Jun/2025 18:39:27] "GET /payments HTTP/1.1" 200 -
2025-06-24 18:39:30,379 - INFO - 127.0.0.1 - - [24/Jun/2025 18:39:30] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 18:39:30,561 - INFO - 127.0.0.1 - - [24/Jun/2025 18:39:30] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 18:39:40,068 - INFO - 127.0.0.1 - - [24/Jun/2025 18:39:40] "GET /loan/136000011/statement HTTP/1.1" 200 -
2025-06-24 18:39:45,679 - INFO - 127.0.0.1 - - [24/Jun/2025 18:39:45] "GET /payments HTTP/1.1" 200 -
2025-06-24 18:39:48,317 - INFO - 127.0.0.1 - - [24/Jun/2025 18:39:48] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
[2025-06-24 18:39:57,835] INFO in app: [136000011] Arrears recorded on schedule 199: 63306.04
2025-06-24 18:39:57,835 - INFO - [136000011] Arrears recorded on schedule 199: 63306.04
2025-06-24 18:39:57,864 - INFO - 127.0.0.1 - - [24/Jun/2025 18:39:57] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 18:39:58,170 - INFO - 127.0.0.1 - - [24/Jun/2025 18:39:58] "GET /payments HTTP/1.1" 200 -
2025-06-24 18:40:02,892 - INFO - 127.0.0.1 - - [24/Jun/2025 18:40:02] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 18:40:05,629 - INFO - 127.0.0.1 - - [24/Jun/2025 18:40:05] "GET /loan/136000011/statement HTTP/1.1" 200 -
2025-06-24 18:40:52,998 - INFO - 127.0.0.1 - - [24/Jun/2025 18:40:52] "GET /payments HTTP/1.1" 200 -
2025-06-24 18:40:56,530 - INFO - 127.0.0.1 - - [24/Jun/2025 18:40:56] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
[2025-06-24 18:41:09,888] INFO in app: [136000011] Arrears recorded on schedule 200: 63306.05
2025-06-24 18:41:09,888 - INFO - [136000011] Arrears recorded on schedule 200: 63306.05
[2025-06-24 18:41:09,920] ERROR in app: Payment error: (sqlite3.IntegrityError) UNIQUE constraint failed: payment_allocations.payment_id
[SQL: INSERT INTO payment_allocations (payment_id, principal, interest, settlement_interest, fees, created_at, schedule_id) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id]
[parameters: (39, 0.0, 108675.96000000002, 0.0, 29120.0, '2025-06-24 16:41:09.914817', 200)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2115, in _exec_insertmany_context
    dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~^
        cursor,
        ^^^^^^^
    ...<2 lines>...
        context,
        ^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.IntegrityError: UNIQUE constraint failed: payment_allocations.payment_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3587, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1143, in _emit_insert_statements
    result = connection.execute(
        statement, multiparams, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1841, in _execute_context
    return self._exec_insertmany_context(dialect, context)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2123, in _exec_insertmany_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e,
        ^^
    ...<4 lines>...
        is_sub_exec=True,
        ^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2115, in _exec_insertmany_context
    dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~^
        cursor,
        ^^^^^^^
    ...<2 lines>...
        context,
        ^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: payment_allocations.payment_id
[SQL: INSERT INTO payment_allocations (payment_id, principal, interest, settlement_interest, fees, created_at, schedule_id) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id]
[parameters: (39, 0.0, 108675.96000000002, 0.0, 29120.0, '2025-06-24 16:41:09.914817', 200)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-06-24 18:41:09,920 - ERROR - Payment error: (sqlite3.IntegrityError) UNIQUE constraint failed: payment_allocations.payment_id
[SQL: INSERT INTO payment_allocations (payment_id, principal, interest, settlement_interest, fees, created_at, schedule_id) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id]
[parameters: (39, 0.0, 108675.96000000002, 0.0, 29120.0, '2025-06-24 16:41:09.914817', 200)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2115, in _exec_insertmany_context
    dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~^
        cursor,
        ^^^^^^^
    ...<2 lines>...
        context,
        ^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.IntegrityError: UNIQUE constraint failed: payment_allocations.payment_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3587, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1143, in _emit_insert_statements
    result = connection.execute(
        statement, multiparams, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1841, in _execute_context
    return self._exec_insertmany_context(dialect, context)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2123, in _exec_insertmany_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e,
        ^^
    ...<4 lines>...
        is_sub_exec=True,
        ^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2115, in _exec_insertmany_context
    dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~^
        cursor,
        ^^^^^^^
    ...<2 lines>...
        context,
        ^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: payment_allocations.payment_id
[SQL: INSERT INTO payment_allocations (payment_id, principal, interest, settlement_interest, fees, created_at, schedule_id) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id]
[parameters: (39, 0.0, 108675.96000000002, 0.0, 29120.0, '2025-06-24 16:41:09.914817', 200)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-06-24 18:41:10,051 - INFO - 127.0.0.1 - - [24/Jun/2025 18:41:10] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 18:41:10,277 - INFO - 127.0.0.1 - - [24/Jun/2025 18:41:10] "GET /payments HTTP/1.1" 200 -
2025-06-24 18:41:32,510 - INFO - 127.0.0.1 - - [24/Jun/2025 18:41:32] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
[2025-06-24 18:41:48,835] INFO in app: [136000011] Arrears recorded on schedule 200: 63306.05
2025-06-24 18:41:48,835 - INFO - [136000011] Arrears recorded on schedule 200: 63306.05
[2025-06-24 18:41:48,865] ERROR in app: Payment error: (sqlite3.IntegrityError) UNIQUE constraint failed: payment_allocations.payment_id
[SQL: INSERT INTO payment_allocations (payment_id, principal, interest, settlement_interest, fees, created_at, schedule_id) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id]
[parameters: (39, 0.0, 108675.96000000002, 0.0, 29120.0, '2025-06-24 16:41:48.864371', 200)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2115, in _exec_insertmany_context
    dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~^
        cursor,
        ^^^^^^^
    ...<2 lines>...
        context,
        ^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.IntegrityError: UNIQUE constraint failed: payment_allocations.payment_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3587, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1143, in _emit_insert_statements
    result = connection.execute(
        statement, multiparams, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1841, in _execute_context
    return self._exec_insertmany_context(dialect, context)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2123, in _exec_insertmany_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e,
        ^^
    ...<4 lines>...
        is_sub_exec=True,
        ^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2115, in _exec_insertmany_context
    dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~^
        cursor,
        ^^^^^^^
    ...<2 lines>...
        context,
        ^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: payment_allocations.payment_id
[SQL: INSERT INTO payment_allocations (payment_id, principal, interest, settlement_interest, fees, created_at, schedule_id) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id]
[parameters: (39, 0.0, 108675.96000000002, 0.0, 29120.0, '2025-06-24 16:41:48.864371', 200)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-06-24 18:41:48,865 - ERROR - Payment error: (sqlite3.IntegrityError) UNIQUE constraint failed: payment_allocations.payment_id
[SQL: INSERT INTO payment_allocations (payment_id, principal, interest, settlement_interest, fees, created_at, schedule_id) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id]
[parameters: (39, 0.0, 108675.96000000002, 0.0, 29120.0, '2025-06-24 16:41:48.864371', 200)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2115, in _exec_insertmany_context
    dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~^
        cursor,
        ^^^^^^^
    ...<2 lines>...
        context,
        ^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.IntegrityError: UNIQUE constraint failed: payment_allocations.payment_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3587, in handle_payments
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1143, in _emit_insert_statements
    result = connection.execute(
        statement, multiparams, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1841, in _execute_context
    return self._exec_insertmany_context(dialect, context)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2123, in _exec_insertmany_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e,
        ^^
    ...<4 lines>...
        is_sub_exec=True,
        ^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2115, in _exec_insertmany_context
    dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~^
        cursor,
        ^^^^^^^
    ...<2 lines>...
        context,
        ^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: payment_allocations.payment_id
[SQL: INSERT INTO payment_allocations (payment_id, principal, interest, settlement_interest, fees, created_at, schedule_id) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id]
[parameters: (39, 0.0, 108675.96000000002, 0.0, 29120.0, '2025-06-24 16:41:48.864371', 200)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-06-24 18:41:48,909 - INFO - 127.0.0.1 - - [24/Jun/2025 18:41:48] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 18:41:49,163 - INFO - 127.0.0.1 - - [24/Jun/2025 18:41:49] "GET /payments HTTP/1.1" 200 -
[2025-06-24 18:43:44,072] INFO in app: ==================================================
[2025-06-24 18:43:44,078] INFO in app: Application logging initialized successfully
[2025-06-24 18:43:44,081] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 18:43:44,083] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 18:43:44,085] INFO in app: System encoding: utf-8
[2025-06-24 18:43:44,088] INFO in app: ==================================================
[2025-06-24 18:45:42,337] INFO in app: ==================================================
[2025-06-24 18:45:42,343] INFO in app: Application logging initialized successfully
[2025-06-24 18:45:42,345] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 18:45:42,347] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 18:45:42,349] INFO in app: System encoding: utf-8
[2025-06-24 18:45:42,350] INFO in app: ==================================================
[2025-06-24 18:45:46,627] INFO in app: ==================================================
[2025-06-24 18:45:46,633] INFO in app: Application logging initialized successfully
[2025-06-24 18:45:46,635] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 18:45:46,636] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 18:45:46,638] INFO in app: System encoding: utf-8
[2025-06-24 18:45:46,642] INFO in app: ==================================================
2025-06-24 18:45:46,814 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 18:45:46,814 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 18:45:53,112 - INFO - 127.0.0.1 - - [24/Jun/2025 18:45:53] "GET /payments HTTP/1.1" 200 -
2025-06-24 18:45:55,001 - INFO - 127.0.0.1 - - [24/Jun/2025 18:45:55] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 18:45:57,412 - INFO - 127.0.0.1 - - [24/Jun/2025 18:45:57] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 18:46:01,032 - INFO - 127.0.0.1 - - [24/Jun/2025 18:46:01] "GET /loan/136000011/statement HTTP/1.1" 200 -
2025-06-24 18:46:05,046 - INFO - 127.0.0.1 - - [24/Jun/2025 18:46:05] "GET /payments HTTP/1.1" 200 -
2025-06-24 18:46:07,822 - INFO - 127.0.0.1 - - [24/Jun/2025 18:46:07] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
[2025-06-24 18:46:20,353] INFO in app: [136000011] Arrears recorded on schedule 200: 63306.05
2025-06-24 18:46:20,353 - INFO - [136000011] Arrears recorded on schedule 200: 63306.05
2025-06-24 18:46:20,386 - INFO - 127.0.0.1 - - [24/Jun/2025 18:46:20] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 18:46:20,711 - INFO - 127.0.0.1 - - [24/Jun/2025 18:46:20] "GET /payments HTTP/1.1" 200 -
2025-06-24 18:46:23,135 - INFO - 127.0.0.1 - - [24/Jun/2025 18:46:23] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 18:46:26,406 - INFO - 127.0.0.1 - - [24/Jun/2025 18:46:26] "GET /loan/136000011/statement HTTP/1.1" 200 -
2025-06-24 18:47:05,971 - INFO - 127.0.0.1 - - [24/Jun/2025 18:47:05] "GET /payments HTTP/1.1" 200 -
2025-06-24 18:47:08,974 - INFO - 127.0.0.1 - - [24/Jun/2025 18:47:08] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 18:47:12,174 - INFO - 127.0.0.1 - - [24/Jun/2025 18:47:12] "GET /loan/136000011/statement HTTP/1.1" 200 -
2025-06-24 18:47:17,362 - INFO - 127.0.0.1 - - [24/Jun/2025 18:47:17] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 18:47:18,605 - INFO - 127.0.0.1 - - [24/Jun/2025 18:47:18] "GET /payments HTTP/1.1" 200 -
2025-06-24 18:47:21,818 - INFO - 127.0.0.1 - - [24/Jun/2025 18:47:21] "GET /api/verify_loan/136000011 HTTP/1.1" 200 -
[2025-06-24 18:47:31,264] INFO in app: [136000011] Arrears recorded on schedule 202: 165510.09
2025-06-24 18:47:31,264 - INFO - [136000011] Arrears recorded on schedule 202: 165510.09
2025-06-24 18:47:31,284 - INFO - 127.0.0.1 - - [24/Jun/2025 18:47:31] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 18:47:31,291 - INFO - 127.0.0.1 - - [24/Jun/2025 18:47:31] "GET /payments HTTP/1.1" 200 -
2025-06-24 18:47:32,938 - INFO - 127.0.0.1 - - [24/Jun/2025 18:47:32] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 18:47:35,800 - INFO - 127.0.0.1 - - [24/Jun/2025 18:47:35] "GET /loan/136000011/statement HTTP/1.1" 200 -
2025-06-24 18:50:11,133 - INFO - 127.0.0.1 - - [24/Jun/2025 18:50:11] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 18:50:21,765 - INFO - 127.0.0.1 - - [24/Jun/2025 18:50:21] "GET /loan/103000006/statement HTTP/1.1" 200 -
2025-06-24 18:50:33,288 - INFO - 127.0.0.1 - - [24/Jun/2025 18:50:33] "GET /payments HTTP/1.1" 200 -
2025-06-24 18:50:36,366 - INFO - 127.0.0.1 - - [24/Jun/2025 18:50:36] "GET /api/verify_loan/103000006 HTTP/1.1" 200 -
[2025-06-24 18:50:49,026] INFO in app: [103000006] Arrears recorded on schedule 50: 416900.58
2025-06-24 18:50:49,026 - INFO - [103000006] Arrears recorded on schedule 50: 416900.58
[2025-06-24 18:50:49,045] ERROR in app: Payment error: unsupported operand type(s) for +: 'int' and 'NoneType'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3584, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1304, in process
    self._update_loan_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1367, in _update_loan_status
    if self.loan.total_arrears > 60:
       ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 627, in total_arrears
    return sum(s.arrears_amount for s in self.repayment_schedules)
TypeError: unsupported operand type(s) for +: 'int' and 'NoneType'
2025-06-24 18:50:49,045 - ERROR - Payment error: unsupported operand type(s) for +: 'int' and 'NoneType'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3584, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1304, in process
    self._update_loan_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1367, in _update_loan_status
    if self.loan.total_arrears > 60:
       ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 627, in total_arrears
    return sum(s.arrears_amount for s in self.repayment_schedules)
TypeError: unsupported operand type(s) for +: 'int' and 'NoneType'
2025-06-24 18:50:49,052 - INFO - 127.0.0.1 - - [24/Jun/2025 18:50:49] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 18:50:49,062 - INFO - 127.0.0.1 - - [24/Jun/2025 18:50:49] "GET /payments HTTP/1.1" 200 -
2025-06-24 18:51:04,718 - INFO - 127.0.0.1 - - [24/Jun/2025 18:51:04] "GET /api/verify_loan/103000006 HTTP/1.1" 200 -
[2025-06-24 18:51:18,848] INFO in app: [103000006] Arrears recorded on schedule 50: 416900.58
2025-06-24 18:51:18,848 - INFO - [103000006] Arrears recorded on schedule 50: 416900.58
[2025-06-24 18:51:18,862] ERROR in app: Payment error: unsupported operand type(s) for +: 'int' and 'NoneType'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3584, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1304, in process
    self._update_loan_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1367, in _update_loan_status
    if self.loan.total_arrears > 60:
       ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 627, in total_arrears
    return sum(s.arrears_amount for s in self.repayment_schedules)
TypeError: unsupported operand type(s) for +: 'int' and 'NoneType'
2025-06-24 18:51:18,862 - ERROR - Payment error: unsupported operand type(s) for +: 'int' and 'NoneType'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3584, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1304, in process
    self._update_loan_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1367, in _update_loan_status
    if self.loan.total_arrears > 60:
       ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 627, in total_arrears
    return sum(s.arrears_amount for s in self.repayment_schedules)
TypeError: unsupported operand type(s) for +: 'int' and 'NoneType'
2025-06-24 18:51:18,869 - INFO - 127.0.0.1 - - [24/Jun/2025 18:51:18] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 18:51:18,875 - INFO - 127.0.0.1 - - [24/Jun/2025 18:51:18] "GET /payments HTTP/1.1" 200 -
[2025-06-24 18:58:24,662] INFO in app: ==================================================
[2025-06-24 18:58:24,668] INFO in app: Application logging initialized successfully
[2025-06-24 18:58:24,670] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 18:58:24,672] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 18:58:24,674] INFO in app: System encoding: utf-8
[2025-06-24 18:58:24,676] INFO in app: ==================================================
[2025-06-24 18:58:55,423] INFO in app: ==================================================
[2025-06-24 18:58:55,431] INFO in app: Application logging initialized successfully
[2025-06-24 18:58:55,433] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 18:58:55,434] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 18:58:55,438] INFO in app: System encoding: utf-8
[2025-06-24 18:58:55,441] INFO in app: ==================================================
2025-06-24 18:58:55,612 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 18:58:55,613 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-24 19:00:45,081] INFO in app: ==================================================
[2025-06-24 19:00:45,087] INFO in app: Application logging initialized successfully
[2025-06-24 19:00:45,089] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 19:00:45,091] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 19:00:45,093] INFO in app: System encoding: utf-8
[2025-06-24 19:00:45,096] INFO in app: ==================================================
2025-06-24 19:00:45,266 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 19:00:45,266 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 19:01:03,635 - INFO - 127.0.0.1 - - [24/Jun/2025 19:01:03] "GET /payments HTTP/1.1" 200 -
2025-06-24 19:01:06,457 - INFO - 127.0.0.1 - - [24/Jun/2025 19:01:06] "[32mGET /loanbook HTTP/1.1[0m" 302 -
2025-06-24 19:01:06,474 - INFO - 127.0.0.1 - - [24/Jun/2025 19:01:06] "GET / HTTP/1.1" 200 -
2025-06-24 19:01:06,786 - INFO - 127.0.0.1 - - [24/Jun/2025 19:01:06] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 19:01:14,924 - INFO - 127.0.0.1 - - [24/Jun/2025 19:01:14] "GET /payments HTTP/1.1" 200 -
2025-06-24 19:01:17,015 - INFO - 127.0.0.1 - - [24/Jun/2025 19:01:17] "[32mGET /loanbook HTTP/1.1[0m" 302 -
2025-06-24 19:01:17,031 - INFO - 127.0.0.1 - - [24/Jun/2025 19:01:17] "GET / HTTP/1.1" 200 -
[2025-06-24 19:01:48,102] INFO in app: ==================================================
[2025-06-24 19:01:48,109] INFO in app: Application logging initialized successfully
[2025-06-24 19:01:48,111] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 19:01:48,113] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 19:01:48,116] INFO in app: System encoding: utf-8
[2025-06-24 19:01:48,119] INFO in app: ==================================================
2025-06-24 19:01:48,389 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 19:01:48,389 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 19:01:51,317 - INFO - 127.0.0.1 - - [24/Jun/2025 19:01:51] "GET / HTTP/1.1" 200 -
2025-06-24 19:01:55,881 - INFO - 127.0.0.1 - - [24/Jun/2025 19:01:55] "[32mGET /loanbook HTTP/1.1[0m" 302 -
2025-06-24 19:01:55,890 - INFO - 127.0.0.1 - - [24/Jun/2025 19:01:55] "GET / HTTP/1.1" 200 -
2025-06-24 19:03:28,002 - INFO - 127.0.0.1 - - [24/Jun/2025 19:03:28] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-06-24 19:05:44,310] INFO in app: ==================================================
[2025-06-24 19:05:44,317] INFO in app: Application logging initialized successfully
[2025-06-24 19:05:44,321] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 19:05:44,322] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 19:05:44,324] INFO in app: System encoding: utf-8
[2025-06-24 19:05:44,327] INFO in app: ==================================================
2025-06-24 19:05:44,498 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 19:05:44,498 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 19:05:48,376 - INFO - 127.0.0.1 - - [24/Jun/2025 19:05:48] "GET / HTTP/1.1" 200 -
2025-06-24 19:06:08,448 - INFO - 127.0.0.1 - - [24/Jun/2025 19:06:08] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 19:06:19,770 - INFO - 127.0.0.1 - - [24/Jun/2025 19:06:19] "GET /loan/103000010/statement HTTP/1.1" 200 -
2025-06-24 19:06:32,113 - INFO - 127.0.0.1 - - [24/Jun/2025 19:06:32] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 19:06:43,038 - INFO - 127.0.0.1 - - [24/Jun/2025 19:06:43] "GET /loan/106000007/statement HTTP/1.1" 200 -
2025-06-24 19:06:56,867 - INFO - 127.0.0.1 - - [24/Jun/2025 19:06:56] "GET /payments HTTP/1.1" 200 -
2025-06-24 19:06:57,157 - INFO - 127.0.0.1 - - [24/Jun/2025 19:06:57] "GET /payments HTTP/1.1" 200 -
2025-06-24 19:07:16,873 - INFO - 127.0.0.1 - - [24/Jun/2025 19:07:16] "GET /payments HTTP/1.1" 200 -
2025-06-24 19:08:15,957 - INFO - 127.0.0.1 - - [24/Jun/2025 19:08:15] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 19:08:21,758 - INFO - 127.0.0.1 - - [24/Jun/2025 19:08:21] "GET /api/verify_loan/106000007 HTTP/1.1" 200 -
[2025-06-24 19:08:35,989] INFO in app: [106000007] Arrears recorded on schedule 53: 346530.88
2025-06-24 19:08:35,989 - INFO - [106000007] Arrears recorded on schedule 53: 346530.88
[2025-06-24 19:08:36,008] ERROR in app: Payment error: unsupported operand type(s) for +: 'int' and 'NoneType'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3586, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1306, in process
    self._update_loan_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1369, in _update_loan_status
    if self.loan.total_arrears > 60:
       ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 627, in total_arrears
    return sum(s.arrears_amount for s in self.repayment_schedules)
TypeError: unsupported operand type(s) for +: 'int' and 'NoneType'
2025-06-24 19:08:36,008 - ERROR - Payment error: unsupported operand type(s) for +: 'int' and 'NoneType'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3586, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1306, in process
    self._update_loan_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1369, in _update_loan_status
    if self.loan.total_arrears > 60:
       ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 627, in total_arrears
    return sum(s.arrears_amount for s in self.repayment_schedules)
TypeError: unsupported operand type(s) for +: 'int' and 'NoneType'
2025-06-24 19:08:36,023 - INFO - 127.0.0.1 - - [24/Jun/2025 19:08:36] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 19:08:36,312 - INFO - 127.0.0.1 - - [24/Jun/2025 19:08:36] "GET /payments HTTP/1.1" 200 -
2025-06-24 19:08:49,928 - INFO - 127.0.0.1 - - [24/Jun/2025 19:08:49] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 19:08:53,354 - INFO - 127.0.0.1 - - [24/Jun/2025 19:08:53] "GET /loan/136000011/statement HTTP/1.1" 200 -
2025-06-24 19:08:56,041 - INFO - 127.0.0.1 - - [24/Jun/2025 19:08:56] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 19:08:59,123 - INFO - 127.0.0.1 - - [24/Jun/2025 19:08:59] "GET /loan/136000011/statement HTTP/1.1" 200 -
2025-06-24 19:09:01,416 - INFO - 127.0.0.1 - - [24/Jun/2025 19:09:01] "GET /loanbook HTTP/1.1" 200 -
[2025-06-24 19:09:02,481] INFO in app: Found 8 loans for customer 202506000002
2025-06-24 19:09:02,481 - INFO - Found 8 loans for customer 202506000002
[2025-06-24 19:09:02,487] INFO in app: Customer ID: 2
2025-06-24 19:09:02,487 - INFO - Customer ID: 2
[2025-06-24 19:09:02,489] INFO in app: Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client'), ('103000010', 'active'), ('136000011', 'active')]
2025-06-24 19:09:02,489 - INFO - Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client'), ('103000010', 'active'), ('136000011', 'active')]
2025-06-24 19:09:02,559 - INFO - 127.0.0.1 - - [24/Jun/2025 19:09:02] "GET /customer/202506000002/account HTTP/1.1" 200 -
[2025-06-24 19:09:04,594] INFO in app: Found 8 loans for customer 202506000002
2025-06-24 19:09:04,594 - INFO - Found 8 loans for customer 202506000002
[2025-06-24 19:09:04,599] INFO in app: Customer ID: 2
2025-06-24 19:09:04,599 - INFO - Customer ID: 2
[2025-06-24 19:09:04,607] INFO in app: Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client'), ('103000010', 'active'), ('136000011', 'active')]
2025-06-24 19:09:04,607 - INFO - Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client'), ('103000010', 'active'), ('136000011', 'active')]
2025-06-24 19:09:04,655 - INFO - 127.0.0.1 - - [24/Jun/2025 19:09:04] "GET /customer/202506000002/account?section=additional HTTP/1.1" 200 -
2025-06-24 19:09:24,427 - INFO - 127.0.0.1 - - [24/Jun/2025 19:09:24] "[32mPOST /apply_additional/3 HTTP/1.1[0m" 302 -
[2025-06-24 19:09:24,697] INFO in app: Found 9 loans for customer 202506000002
2025-06-24 19:09:24,697 - INFO - Found 9 loans for customer 202506000002
[2025-06-24 19:09:24,701] INFO in app: Customer ID: 2
2025-06-24 19:09:24,701 - INFO - Customer ID: 2
[2025-06-24 19:09:24,705] INFO in app: Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client'), ('103000010', 'active'), ('136000011', 'active'), ('136000012', 'active')]
2025-06-24 19:09:24,705 - INFO - Found Loans: [('136000003', 'settled_client'), ('103000004', 'active'), ('112000005', 'topped_up'), ('103000006', 'active'), ('106000007', 'active'), ('103000009', 'settled_client'), ('103000010', 'active'), ('136000011', 'active'), ('136000012', 'active')]
2025-06-24 19:09:24,755 - INFO - 127.0.0.1 - - [24/Jun/2025 19:09:24] "GET /customer/202506000002/account?section=statement HTTP/1.1" 200 -
2025-06-24 19:09:27,017 - INFO - 127.0.0.1 - - [24/Jun/2025 19:09:27] "GET /loans HTTP/1.1" 200 -
2025-06-24 19:09:31,802 - INFO - 127.0.0.1 - - [24/Jun/2025 19:09:31] "[32mPOST /process_loan/11/approve HTTP/1.1[0m" 302 -
2025-06-24 19:09:31,847 - INFO - 127.0.0.1 - - [24/Jun/2025 19:09:31] "GET /loans HTTP/1.1" 200 -
2025-06-24 19:09:34,841 - INFO - 127.0.0.1 - - [24/Jun/2025 19:09:34] "[32mPOST /process_loan/12/approve HTTP/1.1[0m" 302 -
2025-06-24 19:09:35,194 - INFO - 127.0.0.1 - - [24/Jun/2025 19:09:35] "GET /loans HTTP/1.1" 200 -
[2025-06-24 19:09:37,568] INFO in app: [DISBURSEMENT] Loan #103000010 | Top-up of: None | Cash to Client: 1000000.0
2025-06-24 19:09:37,568 - INFO - [DISBURSEMENT] Loan #103000010 | Top-up of: None | Cash to Client: 1000000.0
[2025-06-24 19:09:37,571] INFO in app: [DISBURSEMENT] Loan #136000011 | Top-up of: None | Cash to Client: 2600000.0
2025-06-24 19:09:37,571 - INFO - [DISBURSEMENT] Loan #136000011 | Top-up of: None | Cash to Client: 2600000.0
[2025-06-24 19:09:37,574] INFO in app: [DISBURSEMENT] Loan #136000012 | Top-up of: None | Cash to Client: 2600000.0
2025-06-24 19:09:37,574 - INFO - [DISBURSEMENT] Loan #136000012 | Top-up of: None | Cash to Client: 2600000.0
2025-06-24 19:09:37,588 - INFO - 127.0.0.1 - - [24/Jun/2025 19:09:37] "GET /disbursements HTTP/1.1" 200 -
2025-06-24 19:09:41,528 - INFO - 127.0.0.1 - - [24/Jun/2025 19:09:41] "GET /payments HTTP/1.1" 200 -
2025-06-24 19:09:43,302 - INFO - 127.0.0.1 - - [24/Jun/2025 19:09:43] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 19:09:45,208 - INFO - 127.0.0.1 - - [24/Jun/2025 19:09:45] "GET /payments HTTP/1.1" 200 -
2025-06-24 19:09:47,769 - INFO - 127.0.0.1 - - [24/Jun/2025 19:09:47] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 19:09:51,444 - INFO - 127.0.0.1 - - [24/Jun/2025 19:09:51] "GET /loan/136000012/statement HTTP/1.1" 200 -
2025-06-24 19:09:57,025 - INFO - 127.0.0.1 - - [24/Jun/2025 19:09:57] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 19:09:57,744 - INFO - 127.0.0.1 - - [24/Jun/2025 19:09:57] "GET /payments HTTP/1.1" 200 -
2025-06-24 19:10:00,042 - INFO - 127.0.0.1 - - [24/Jun/2025 19:10:00] "GET /api/verify_loan/136000012 HTTP/1.1" 200 -
[2025-06-24 19:10:15,622] INFO in app: [136000012] Arrears recorded on schedule 233: 201102.01
2025-06-24 19:10:15,622 - INFO - [136000012] Arrears recorded on schedule 233: 201102.01
2025-06-24 19:10:15,638 - INFO - 127.0.0.1 - - [24/Jun/2025 19:10:15] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 19:10:15,646 - INFO - 127.0.0.1 - - [24/Jun/2025 19:10:15] "GET /payments HTTP/1.1" 200 -
2025-06-24 19:10:17,214 - INFO - 127.0.0.1 - - [24/Jun/2025 19:10:17] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 19:10:21,212 - INFO - 127.0.0.1 - - [24/Jun/2025 19:10:21] "GET /loan/136000012/statement HTTP/1.1" 200 -
2025-06-24 19:10:57,904 - INFO - 127.0.0.1 - - [24/Jun/2025 19:10:57] "GET /payments HTTP/1.1" 200 -
2025-06-24 19:11:00,797 - INFO - 127.0.0.1 - - [24/Jun/2025 19:11:00] "GET /api/verify_loan/136000012 HTTP/1.1" 200 -
[2025-06-24 19:11:16,588] INFO in app: [136000012] Arrears recorded on schedule 234: 132204.02
2025-06-24 19:11:16,588 - INFO - [136000012] Arrears recorded on schedule 234: 132204.02
2025-06-24 19:11:16,610 - INFO - 127.0.0.1 - - [24/Jun/2025 19:11:16] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 19:11:16,931 - INFO - 127.0.0.1 - - [24/Jun/2025 19:11:16] "GET /payments HTTP/1.1" 200 -
2025-06-24 19:11:18,616 - INFO - 127.0.0.1 - - [24/Jun/2025 19:11:18] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 19:11:21,108 - INFO - 127.0.0.1 - - [24/Jun/2025 19:11:21] "GET /loan/136000012/statement HTTP/1.1" 200 -
2025-06-24 19:12:04,013 - INFO - 127.0.0.1 - - [24/Jun/2025 19:12:04] "GET /payments HTTP/1.1" 200 -
2025-06-24 19:12:07,220 - INFO - 127.0.0.1 - - [24/Jun/2025 19:12:07] "GET /api/verify_loan/136000012 HTTP/1.1" 200 -
[2025-06-24 19:12:15,939] INFO in app: [136000012] Arrears recorded on schedule 234: 112204.02
2025-06-24 19:12:15,939 - INFO - [136000012] Arrears recorded on schedule 234: 112204.02
2025-06-24 19:12:15,964 - INFO - 127.0.0.1 - - [24/Jun/2025 19:12:15] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 19:12:16,285 - INFO - 127.0.0.1 - - [24/Jun/2025 19:12:16] "GET /payments HTTP/1.1" 200 -
2025-06-24 19:12:18,709 - INFO - 127.0.0.1 - - [24/Jun/2025 19:12:18] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 19:12:20,990 - INFO - 127.0.0.1 - - [24/Jun/2025 19:12:20] "GET /loan/136000012/statement HTTP/1.1" 200 -
[2025-06-24 19:49:46,707] INFO in app: ==================================================
[2025-06-24 19:49:46,714] INFO in app: Application logging initialized successfully
[2025-06-24 19:49:46,716] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 19:49:46,718] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 19:49:46,720] INFO in app: System encoding: utf-8
[2025-06-24 19:49:46,723] INFO in app: ==================================================
[2025-06-24 19:49:54,950] INFO in app: ==================================================
[2025-06-24 19:49:54,956] INFO in app: Application logging initialized successfully
[2025-06-24 19:49:54,958] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 19:49:54,960] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 19:49:54,962] INFO in app: System encoding: utf-8
[2025-06-24 19:49:54,965] INFO in app: ==================================================
[2025-06-24 21:03:56,222] INFO in app: ==================================================
[2025-06-24 21:03:56,229] INFO in app: Application logging initialized successfully
[2025-06-24 21:03:56,232] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 21:03:56,234] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 21:03:56,236] INFO in app: System encoding: utf-8
[2025-06-24 21:03:56,239] INFO in app: ==================================================
[2025-06-24 21:05:46,703] INFO in app: ==================================================
[2025-06-24 21:05:46,710] INFO in app: Application logging initialized successfully
[2025-06-24 21:05:46,712] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 21:05:46,715] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 21:05:46,717] INFO in app: System encoding: utf-8
[2025-06-24 21:05:46,723] INFO in app: ==================================================
[2025-06-24 21:06:22,101] INFO in app: ==================================================
[2025-06-24 21:06:22,107] INFO in app: Application logging initialized successfully
[2025-06-24 21:06:22,111] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 21:06:22,113] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 21:06:22,115] INFO in app: System encoding: utf-8
[2025-06-24 21:06:22,119] INFO in app: ==================================================
[2025-06-24 21:06:34,079] INFO in app: ==================================================
[2025-06-24 21:06:34,085] INFO in app: Application logging initialized successfully
[2025-06-24 21:06:34,086] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 21:06:34,091] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 21:06:34,094] INFO in app: System encoding: utf-8
[2025-06-24 21:06:34,097] INFO in app: ==================================================
[2025-06-24 21:06:40,858] INFO in app: ==================================================
[2025-06-24 21:06:40,863] INFO in app: Application logging initialized successfully
[2025-06-24 21:06:40,865] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 21:06:40,867] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 21:06:40,873] INFO in app: System encoding: utf-8
[2025-06-24 21:06:40,877] INFO in app: ==================================================
2025-06-24 21:06:41,067 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 21:06:41,067 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 21:07:09,670 - INFO - 127.0.0.1 - - [24/Jun/2025 21:07:09] "GET /loan/136000012/statement HTTP/1.1" 200 -
2025-06-24 21:07:11,067 - INFO - 127.0.0.1 - - [24/Jun/2025 21:07:11] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 21:07:13,800 - INFO - 127.0.0.1 - - [24/Jun/2025 21:07:13] "GET /loan/136000012/statement HTTP/1.1" 200 -
2025-06-24 21:07:14,730 - INFO - 127.0.0.1 - - [24/Jun/2025 21:07:14] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 21:07:17,287 - INFO - 127.0.0.1 - - [24/Jun/2025 21:07:17] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 21:12:39,204 - INFO - 127.0.0.1 - - [24/Jun/2025 21:12:39] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 21:13:20,990 - INFO - 127.0.0.1 - - [24/Jun/2025 21:13:20] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 21:21:56,046 - INFO - 127.0.0.1 - - [24/Jun/2025 21:21:56] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 21:22:00,486 - INFO - 127.0.0.1 - - [24/Jun/2025 21:22:00] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 21:22:10,489 - INFO - 127.0.0.1 - - [24/Jun/2025 21:22:10] "GET /loan/136000012/statement HTTP/1.1" 200 -
2025-06-24 21:22:24,973 - INFO - 127.0.0.1 - - [24/Jun/2025 21:22:24] "GET /payments HTTP/1.1" 200 -
2025-06-24 21:22:28,167 - INFO - 127.0.0.1 - - [24/Jun/2025 21:22:28] "GET /api/verify_loan/136000012 HTTP/1.1" 200 -
[2025-06-24 21:22:42,562] ERROR in app: Payment error: LoanApplication.record_arrears() missing 1 required positional argument: 'payment'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3667, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1351, in process
    self._handle_credit_or_arrears()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1409, in _handle_credit_or_arrears
    self.loan.record_arrears()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
TypeError: LoanApplication.record_arrears() missing 1 required positional argument: 'payment'
2025-06-24 21:22:42,562 - ERROR - Payment error: LoanApplication.record_arrears() missing 1 required positional argument: 'payment'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3667, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1351, in process
    self._handle_credit_or_arrears()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1409, in _handle_credit_or_arrears
    self.loan.record_arrears()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
TypeError: LoanApplication.record_arrears() missing 1 required positional argument: 'payment'
2025-06-24 21:22:42,570 - INFO - 127.0.0.1 - - [24/Jun/2025 21:22:42] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 21:22:42,576 - INFO - 127.0.0.1 - - [24/Jun/2025 21:22:42] "GET /payments HTTP/1.1" 200 -
[2025-06-24 21:33:52,666] INFO in app: ==================================================
[2025-06-24 21:33:52,680] INFO in app: Application logging initialized successfully
[2025-06-24 21:33:52,684] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-24 21:33:52,689] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-24 21:33:52,696] INFO in app: System encoding: utf-8
[2025-06-24 21:33:52,709] INFO in app: ==================================================
2025-06-24 21:33:53,030 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-24 21:33:53,030 - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 21:34:00,427 - INFO - 127.0.0.1 - - [24/Jun/2025 21:34:00] "GET /payments HTTP/1.1" 200 -
2025-06-24 21:34:06,900 - INFO - 127.0.0.1 - - [24/Jun/2025 21:34:06] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 21:34:10,556 - INFO - 127.0.0.1 - - [24/Jun/2025 21:34:10] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 21:34:19,464 - INFO - 127.0.0.1 - - [24/Jun/2025 21:34:19] "GET /loan/136000012/statement HTTP/1.1" 200 -
2025-06-24 21:34:28,763 - INFO - 127.0.0.1 - - [24/Jun/2025 21:34:28] "GET /payments HTTP/1.1" 200 -
2025-06-24 21:34:32,893 - INFO - 127.0.0.1 - - [24/Jun/2025 21:34:32] "GET /api/verify_loan/136000012 HTTP/1.1" 200 -
2025-06-24 21:34:50,494 - INFO - 127.0.0.1 - - [24/Jun/2025 21:34:50] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-24 21:34:50,742 - INFO - 127.0.0.1 - - [24/Jun/2025 21:34:50] "GET /payments HTTP/1.1" 200 -
2025-06-24 21:34:53,549 - INFO - 127.0.0.1 - - [24/Jun/2025 21:34:53] "GET /loanbook HTTP/1.1" 200 -
2025-06-24 21:34:57,572 - INFO - 127.0.0.1 - - [24/Jun/2025 21:34:57] "GET /loan/136000012/statement HTTP/1.1" 200 -
[2025-06-25 05:55:22,530] INFO in app: ==================================================
[2025-06-25 05:55:22,629] INFO in app: Application logging initialized successfully
[2025-06-25 05:55:22,631] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-25 05:55:22,632] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-25 05:55:22,634] INFO in app: System encoding: utf-8
[2025-06-25 05:55:22,638] INFO in app: ==================================================
2025-06-25 05:55:23,042 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-25 05:55:23,043 - INFO - [33mPress CTRL+C to quit[0m
2025-06-25 06:07:15,389 - INFO - 127.0.0.1 - - [25/Jun/2025 06:07:15] "GET /loan/136000012/statement HTTP/1.1" 200 -
2025-06-25 06:07:19,368 - INFO - 127.0.0.1 - - [25/Jun/2025 06:07:19] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-25 06:07:53,983 - INFO - 127.0.0.1 - - [25/Jun/2025 06:07:53] "GET /payments HTTP/1.1" 200 -
2025-06-25 06:07:58,697 - INFO - 127.0.0.1 - - [25/Jun/2025 06:07:58] "GET /api/verify_loan/136000012 HTTP/1.1" 200 -
2025-06-25 06:08:14,808 - INFO - 127.0.0.1 - - [25/Jun/2025 06:08:14] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-25 06:08:14,819 - INFO - 127.0.0.1 - - [25/Jun/2025 06:08:14] "GET /payments HTTP/1.1" 200 -
2025-06-25 06:08:16,524 - INFO - 127.0.0.1 - - [25/Jun/2025 06:08:16] "GET /loanbook HTTP/1.1" 200 -
2025-06-25 06:08:19,427 - INFO - 127.0.0.1 - - [25/Jun/2025 06:08:19] "GET /loan/136000012/statement HTTP/1.1" 200 -
[2025-06-25 07:22:43,095] INFO in app: ==================================================
[2025-06-25 07:22:43,102] INFO in app: Application logging initialized successfully
[2025-06-25 07:22:43,105] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-25 07:22:43,117] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-25 07:22:43,120] INFO in app: System encoding: utf-8
[2025-06-25 07:22:43,122] INFO in app: ==================================================
[2025-06-25 07:22:56,167] INFO in app: ==================================================
[2025-06-25 07:22:56,176] INFO in app: Application logging initialized successfully
[2025-06-25 07:22:56,178] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-25 07:22:56,180] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-25 07:22:56,182] INFO in app: System encoding: utf-8
[2025-06-25 07:22:56,186] INFO in app: ==================================================
[2025-06-25 07:23:26,056] INFO in app: ==================================================
[2025-06-25 07:23:26,063] INFO in app: Application logging initialized successfully
[2025-06-25 07:23:26,066] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-25 07:23:26,072] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-25 07:23:26,075] INFO in app: System encoding: utf-8
[2025-06-25 07:23:26,077] INFO in app: ==================================================
[2025-06-25 07:30:43,668] INFO in app: ==================================================
[2025-06-25 07:30:43,675] INFO in app: Application logging initialized successfully
[2025-06-25 07:30:43,677] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-25 07:30:43,679] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-25 07:30:43,686] INFO in app: System encoding: utf-8
[2025-06-25 07:30:43,688] INFO in app: ==================================================
[2025-06-25 07:31:04,518] INFO in app: ==================================================
[2025-06-25 07:31:04,524] INFO in app: Application logging initialized successfully
[2025-06-25 07:31:04,526] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-25 07:31:04,529] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-25 07:31:04,531] INFO in app: System encoding: utf-8
[2025-06-25 07:31:04,537] INFO in app: ==================================================
[2025-06-25 07:36:34,037] INFO in app: ==================================================
[2025-06-25 07:36:34,044] INFO in app: Application logging initialized successfully
[2025-06-25 07:36:34,046] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-25 07:36:34,048] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-25 07:36:34,050] INFO in app: System encoding: utf-8
[2025-06-25 07:36:34,057] INFO in app: ==================================================
[2025-06-25 08:43:16,907] INFO in app: ==================================================
[2025-06-25 08:43:16,925] INFO in app: Application logging initialized successfully
[2025-06-25 08:43:16,931] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-25 08:43:16,937] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-25 08:43:16,948] INFO in app: System encoding: utf-8
[2025-06-25 08:43:16,953] INFO in app: ==================================================
[2025-06-25 08:45:35,736] INFO in app: ==================================================
[2025-06-25 08:45:35,746] INFO in app: Application logging initialized successfully
[2025-06-25 08:45:35,749] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-25 08:45:35,753] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-25 08:45:35,756] INFO in app: System encoding: utf-8
[2025-06-25 08:45:35,759] INFO in app: ==================================================
[2025-06-25 08:45:45,469] INFO in app: ==================================================
[2025-06-25 08:45:45,487] INFO in app: Application logging initialized successfully
[2025-06-25 08:45:45,492] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-25 08:45:45,501] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-25 08:45:45,508] INFO in app: System encoding: utf-8
[2025-06-25 08:45:45,512] INFO in app: ==================================================
[2025-06-25 08:46:51,704] INFO in app: ==================================================
[2025-06-25 08:46:51,717] INFO in app: Application logging initialized successfully
[2025-06-25 08:46:51,722] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-25 08:46:51,726] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-25 08:46:51,738] INFO in app: System encoding: utf-8
[2025-06-25 08:46:51,741] INFO in app: ==================================================
[2025-06-25 09:42:20,789] INFO in app: ==================================================
[2025-06-25 09:42:20,795] INFO in app: Application logging initialized successfully
[2025-06-25 09:42:20,797] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-25 09:42:20,799] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-25 09:42:20,801] INFO in app: System encoding: utf-8
[2025-06-25 09:42:20,807] INFO in app: ==================================================
[2025-06-26 04:28:44,425] INFO in app: ==================================================
[2025-06-26 04:28:44,506] INFO in app: Application logging initialized successfully
[2025-06-26 04:28:44,508] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 04:28:44,509] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 04:28:44,511] INFO in app: System encoding: utf-8
[2025-06-26 04:28:44,513] INFO in app: ==================================================
[2025-06-26 12:48:41,440] INFO in app: ==================================================
[2025-06-26 12:48:41,549] INFO in app: Application logging initialized successfully
[2025-06-26 12:48:41,551] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 12:48:41,555] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 12:48:41,559] INFO in app: System encoding: utf-8
[2025-06-26 12:48:41,567] INFO in app: ==================================================
[2025-06-26 12:52:02,864] INFO in app: ==================================================
[2025-06-26 12:52:02,870] INFO in app: Application logging initialized successfully
[2025-06-26 12:52:02,872] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 12:52:02,874] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 12:52:02,876] INFO in app: System encoding: utf-8
[2025-06-26 12:52:02,884] INFO in app: ==================================================
[2025-06-26 12:52:13,337] INFO in app: ==================================================
[2025-06-26 12:52:13,344] INFO in app: Application logging initialized successfully
[2025-06-26 12:52:13,347] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 12:52:13,351] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 12:52:13,354] INFO in app: System encoding: utf-8
[2025-06-26 12:52:13,358] INFO in app: ==================================================
[2025-06-26 12:54:03,125] INFO in app: ==================================================
[2025-06-26 12:54:03,131] INFO in app: Application logging initialized successfully
[2025-06-26 12:54:03,133] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 12:54:03,135] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 12:54:03,139] INFO in app: System encoding: utf-8
[2025-06-26 12:54:03,144] INFO in app: ==================================================
[2025-06-26 12:54:13,013] INFO in app: ==================================================
[2025-06-26 12:54:13,021] INFO in app: Application logging initialized successfully
[2025-06-26 12:54:13,024] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 12:54:13,026] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 12:54:13,028] INFO in app: System encoding: utf-8
[2025-06-26 12:54:13,033] INFO in app: ==================================================
[2025-06-26 12:54:26,590] INFO in app: ==================================================
[2025-06-26 12:54:26,597] INFO in app: Application logging initialized successfully
[2025-06-26 12:54:26,599] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 12:54:26,601] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 12:54:26,603] INFO in app: System encoding: utf-8
[2025-06-26 12:54:26,605] INFO in app: ==================================================
[2025-06-26 12:54:54,715] INFO in app: ==================================================
[2025-06-26 12:54:54,723] INFO in app: Application logging initialized successfully
[2025-06-26 12:54:54,730] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 12:54:54,734] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 12:54:54,740] INFO in app: System encoding: utf-8
[2025-06-26 12:54:54,745] INFO in app: ==================================================
2025-06-26 12:54:54,954 - ERROR - Error: Directory migrations already exists and is not empty
[2025-06-26 12:55:08,784] INFO in app: ==================================================
[2025-06-26 12:55:08,790] INFO in app: Application logging initialized successfully
[2025-06-26 12:55:08,793] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 12:55:08,794] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 12:55:08,796] INFO in app: System encoding: utf-8
[2025-06-26 12:55:08,801] INFO in app: ==================================================
[2025-06-26 12:57:24,543] INFO in app: ==================================================
[2025-06-26 12:57:24,552] INFO in app: Application logging initialized successfully
[2025-06-26 12:57:24,558] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 12:57:24,562] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 12:57:24,564] INFO in app: System encoding: utf-8
[2025-06-26 12:57:24,565] INFO in app: ==================================================
[2025-06-26 12:57:46,468] INFO in app: ==================================================
[2025-06-26 12:57:46,473] INFO in app: Application logging initialized successfully
[2025-06-26 12:57:46,475] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 12:57:46,477] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 12:57:46,483] INFO in app: System encoding: utf-8
[2025-06-26 12:57:46,485] INFO in app: ==================================================
[2025-06-26 12:58:10,386] INFO in app: ==================================================
[2025-06-26 12:58:10,394] INFO in app: Application logging initialized successfully
[2025-06-26 12:58:10,396] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 12:58:10,398] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 12:58:10,400] INFO in app: System encoding: utf-8
[2025-06-26 12:58:10,408] INFO in app: ==================================================
[2025-06-26 12:58:26,343] INFO in app: ==================================================
[2025-06-26 12:58:26,351] INFO in app: Application logging initialized successfully
[2025-06-26 12:58:26,353] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 12:58:26,356] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 12:58:26,360] INFO in app: System encoding: utf-8
[2025-06-26 12:58:26,362] INFO in app: ==================================================
[2025-06-26 12:59:00,612] INFO in app: ==================================================
[2025-06-26 12:59:00,623] INFO in app: Application logging initialized successfully
[2025-06-26 12:59:00,631] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 12:59:00,633] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 12:59:00,636] INFO in app: System encoding: utf-8
[2025-06-26 12:59:00,651] INFO in app: ==================================================
[2025-06-26 12:59:19,674] INFO in app: ==================================================
[2025-06-26 12:59:19,682] INFO in app: Application logging initialized successfully
[2025-06-26 12:59:19,686] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 12:59:19,691] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 12:59:19,693] INFO in app: System encoding: utf-8
[2025-06-26 12:59:19,695] INFO in app: ==================================================
2025-06-26 12:59:19,950 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-26 12:59:19,951 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-26 12:59:42,916] INFO in app: ==================================================
[2025-06-26 12:59:42,921] INFO in app: Application logging initialized successfully
[2025-06-26 12:59:42,926] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 12:59:42,932] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 12:59:42,934] INFO in app: System encoding: utf-8
[2025-06-26 12:59:42,935] INFO in app: ==================================================
[2025-06-26 13:00:52,926] INFO in app: ==================================================
[2025-06-26 13:00:52,931] INFO in app: Application logging initialized successfully
[2025-06-26 13:00:52,933] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 13:00:52,934] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 13:00:52,938] INFO in app: System encoding: utf-8
[2025-06-26 13:00:52,945] INFO in app: ==================================================
[2025-06-26 13:01:00,326] INFO in app: ==================================================
[2025-06-26 13:01:00,333] INFO in app: Application logging initialized successfully
[2025-06-26 13:01:00,336] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 13:01:00,338] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 13:01:00,342] INFO in app: System encoding: utf-8
[2025-06-26 13:01:00,344] INFO in app: ==================================================
2025-06-26 13:01:00,572 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-26 13:01:00,572 - INFO - [33mPress CTRL+C to quit[0m
2025-06-26 13:01:18,101 - INFO - 127.0.0.1 - - [26/Jun/2025 13:01:18] "[32mGET /loan/136000012/statement HTTP/1.1[0m" 302 -
2025-06-26 13:01:18,264 - INFO - 127.0.0.1 - - [26/Jun/2025 13:01:18] "GET /loanbook HTTP/1.1" 200 -
2025-06-26 13:01:32,393 - INFO - 127.0.0.1 - - [26/Jun/2025 13:01:32] "GET /payments HTTP/1.1" 200 -
2025-06-26 13:01:33,514 - INFO - 127.0.0.1 - - [26/Jun/2025 13:01:33] "GET /disbursements HTTP/1.1" 200 -
2025-06-26 13:01:34,432 - INFO - 127.0.0.1 - - [26/Jun/2025 13:01:34] "GET /loans HTTP/1.1" 200 -
2025-06-26 13:01:35,666 - INFO - 127.0.0.1 - - [26/Jun/2025 13:01:35] "GET /customers HTTP/1.1" 200 -
2025-06-26 13:01:36,446 - INFO - 127.0.0.1 - - [26/Jun/2025 13:01:36] "GET /approve_customers HTTP/1.1" 200 -
2025-06-26 13:01:37,441 - INFO - 127.0.0.1 - - [26/Jun/2025 13:01:37] "GET /register HTTP/1.1" 200 -
2025-06-26 13:01:38,236 - INFO - 127.0.0.1 - - [26/Jun/2025 13:01:38] "GET / HTTP/1.1" 200 -
2025-06-26 13:01:39,417 - INFO - 127.0.0.1 - - [26/Jun/2025 13:01:39] "GET /register HTTP/1.1" 200 -
2025-06-26 13:03:05,453 - INFO - 127.0.0.1 - - [26/Jun/2025 13:03:05] "[32mPOST /register HTTP/1.1[0m" 302 -
2025-06-26 13:03:05,464 - INFO - 127.0.0.1 - - [26/Jun/2025 13:03:05] "GET /register HTTP/1.1" 200 -
[2025-06-26 14:22:10,997] INFO in app: ==================================================
[2025-06-26 14:22:11,003] INFO in app: Application logging initialized successfully
[2025-06-26 14:22:11,011] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 14:22:11,016] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 14:22:11,018] INFO in app: System encoding: utf-8
[2025-06-26 14:22:11,020] INFO in app: ==================================================
2025-06-26 14:22:11,251 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-26 14:22:11,251 - INFO - [33mPress CTRL+C to quit[0m
2025-06-26 14:22:20,027 - INFO - 127.0.0.1 - - [26/Jun/2025 14:22:20] "GET /register HTTP/1.1" 200 -
2025-06-26 14:22:22,474 - INFO - 127.0.0.1 - - [26/Jun/2025 14:22:22] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-26 14:24:11,245 - INFO - 127.0.0.1 - - [26/Jun/2025 14:24:11] "[32mPOST /register HTTP/1.1[0m" 302 -
2025-06-26 14:24:11,253 - INFO - 127.0.0.1 - - [26/Jun/2025 14:24:11] "GET /register HTTP/1.1" 200 -
[2025-06-26 14:28:56,286] INFO in app: ==================================================
[2025-06-26 14:28:56,294] INFO in app: Application logging initialized successfully
[2025-06-26 14:28:56,297] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 14:28:56,300] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 14:28:56,308] INFO in app: System encoding: utf-8
[2025-06-26 14:28:56,312] INFO in app: ==================================================
2025-06-26 14:28:56,532 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-26 14:28:56,533 - INFO - [33mPress CTRL+C to quit[0m
2025-06-26 14:29:04,460 - INFO - 127.0.0.1 - - [26/Jun/2025 14:29:04] "GET /register HTTP/1.1" 200 -
2025-06-26 14:29:12,078 - INFO - 127.0.0.1 - - [26/Jun/2025 14:29:12] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-26 14:32:39,588 - INFO - 127.0.0.1 - - [26/Jun/2025 14:32:39] "[32mPOST /register HTTP/1.1[0m" 302 -
2025-06-26 14:32:39,598 - INFO - 127.0.0.1 - - [26/Jun/2025 14:32:39] "GET /register HTTP/1.1" 200 -
[2025-06-26 14:37:18,440] INFO in app: ==================================================
[2025-06-26 14:37:18,469] INFO in app: Application logging initialized successfully
[2025-06-26 14:37:18,498] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 14:37:18,513] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 14:37:18,530] INFO in app: System encoding: utf-8
[2025-06-26 14:37:18,562] INFO in app: ==================================================
2025-06-26 14:37:18,891 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-26 14:37:18,891 - INFO - [33mPress CTRL+C to quit[0m
2025-06-26 14:37:25,356 - INFO - 127.0.0.1 - - [26/Jun/2025 14:37:25] "GET /register HTTP/1.1" 200 -
2025-06-26 14:37:27,110 - INFO - 127.0.0.1 - - [26/Jun/2025 14:37:27] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-26 14:39:14,935 - INFO - 127.0.0.1 - - [26/Jun/2025 14:39:14] "[32mPOST /register HTTP/1.1[0m" 302 -
2025-06-26 14:39:14,951 - INFO - 127.0.0.1 - - [26/Jun/2025 14:39:14] "GET /register HTTP/1.1" 200 -
[2025-06-26 14:47:00,068] INFO in app: ==================================================
[2025-06-26 14:47:00,078] INFO in app: Application logging initialized successfully
[2025-06-26 14:47:00,081] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 14:47:00,084] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 14:47:00,097] INFO in app: System encoding: utf-8
[2025-06-26 14:47:00,099] INFO in app: ==================================================
2025-06-26 14:47:00,328 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-26 14:47:00,328 - INFO - [33mPress CTRL+C to quit[0m
2025-06-26 14:47:45,331 - INFO - 127.0.0.1 - - [26/Jun/2025 14:47:45] "GET /register HTTP/1.1" 200 -
2025-06-26 14:48:01,379 - INFO - 127.0.0.1 - - [26/Jun/2025 14:48:01] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-26 14:49:51,459 - INFO - 127.0.0.1 - - [26/Jun/2025 14:49:51] "[32mPOST /register HTTP/1.1[0m" 302 -
2025-06-26 14:49:51,468 - INFO - 127.0.0.1 - - [26/Jun/2025 14:49:51] "GET /register HTTP/1.1" 200 -
[2025-06-26 14:51:29,323] INFO in app: ==================================================
[2025-06-26 14:51:29,336] INFO in app: Application logging initialized successfully
[2025-06-26 14:51:29,343] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 14:51:29,345] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 14:51:29,352] INFO in app: System encoding: utf-8
[2025-06-26 14:51:29,356] INFO in app: ==================================================
2025-06-26 14:51:29,629 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-26 14:51:29,629 - INFO - [33mPress CTRL+C to quit[0m
2025-06-26 14:51:34,226 - INFO - 127.0.0.1 - - [26/Jun/2025 14:51:34] "GET /register HTTP/1.1" 200 -
2025-06-26 14:51:38,003 - INFO - 127.0.0.1 - - [26/Jun/2025 14:51:38] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-26 14:53:05,327 - INFO - 127.0.0.1 - - [26/Jun/2025 14:53:05] "[32mPOST /register HTTP/1.1[0m" 302 -
2025-06-26 14:53:05,337 - INFO - 127.0.0.1 - - [26/Jun/2025 14:53:05] "GET /register HTTP/1.1" 200 -
[2025-06-26 15:10:55,506] INFO in app: ==================================================
[2025-06-26 15:10:55,514] INFO in app: Application logging initialized successfully
[2025-06-26 15:10:55,516] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 15:10:55,518] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 15:10:55,521] INFO in app: System encoding: utf-8
[2025-06-26 15:10:55,526] INFO in app: ==================================================
2025-06-26 15:10:55,803 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-26 15:10:55,803 - INFO - [33mPress CTRL+C to quit[0m
2025-06-26 15:11:00,439 - INFO - 127.0.0.1 - - [26/Jun/2025 15:11:00] "GET /register HTTP/1.1" 200 -
2025-06-26 15:11:15,014 - INFO - 127.0.0.1 - - [26/Jun/2025 15:11:15] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-26 15:12:58,809 - INFO - 127.0.0.1 - - [26/Jun/2025 15:12:58] "[32mPOST /register HTTP/1.1[0m" 302 -
2025-06-26 15:12:58,820 - INFO - 127.0.0.1 - - [26/Jun/2025 15:12:58] "GET /register HTTP/1.1" 200 -
[2025-06-26 15:17:19,493] INFO in app: ==================================================
[2025-06-26 15:17:19,502] INFO in app: Application logging initialized successfully
[2025-06-26 15:17:19,504] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 15:17:19,515] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 15:17:19,522] INFO in app: System encoding: utf-8
[2025-06-26 15:17:19,530] INFO in app: ==================================================
2025-06-26 15:17:19,804 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-26 15:17:19,804 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-26 15:17:31,494] INFO in app: ==================================================
[2025-06-26 15:17:31,500] INFO in app: Application logging initialized successfully
[2025-06-26 15:17:31,502] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 15:17:31,505] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 15:17:31,511] INFO in app: System encoding: utf-8
[2025-06-26 15:17:31,513] INFO in app: ==================================================
2025-06-26 15:17:31,931 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-26 15:17:31,931 - INFO - [33mPress CTRL+C to quit[0m
2025-06-26 15:17:36,800 - INFO - 127.0.0.1 - - [26/Jun/2025 15:17:36] "GET /register HTTP/1.1" 200 -
2025-06-26 15:17:48,937 - INFO - 127.0.0.1 - - [26/Jun/2025 15:17:48] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-26 15:18:35,764 - INFO - 127.0.0.1 - - [26/Jun/2025 15:18:35] "GET /register HTTP/1.1" 200 -
2025-06-26 15:18:42,539 - INFO - 127.0.0.1 - - [26/Jun/2025 15:18:42] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-26 15:20:04,049 - INFO - 127.0.0.1 - - [26/Jun/2025 15:20:04] "[32mPOST /register HTTP/1.1[0m" 302 -
2025-06-26 15:20:04,060 - INFO - 127.0.0.1 - - [26/Jun/2025 15:20:04] "GET /register HTTP/1.1" 200 -
[2025-06-26 19:47:34,812] INFO in app: ==================================================
[2025-06-26 19:47:34,896] INFO in app: Application logging initialized successfully
[2025-06-26 19:47:34,897] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 19:47:34,899] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 19:47:34,901] INFO in app: System encoding: utf-8
[2025-06-26 19:47:34,913] INFO in app: ==================================================
2025-06-26 19:47:35,251 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-26 19:47:35,251 - INFO - [33mPress CTRL+C to quit[0m
2025-06-26 19:47:39,618 - INFO - 127.0.0.1 - - [26/Jun/2025 19:47:39] "GET /register HTTP/1.1" 200 -
2025-06-26 19:48:31,034 - INFO - 127.0.0.1 - - [26/Jun/2025 19:48:31] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-26 19:59:12,096 - INFO - 127.0.0.1 - - [26/Jun/2025 19:59:12] "[32mPOST /register HTTP/1.1[0m" 302 -
2025-06-26 19:59:12,106 - INFO - 127.0.0.1 - - [26/Jun/2025 19:59:12] "GET /register HTTP/1.1" 200 -
[2025-06-26 20:10:49,873] INFO in app: ==================================================
[2025-06-26 20:10:49,879] INFO in app: Application logging initialized successfully
[2025-06-26 20:10:49,882] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-26 20:10:49,885] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-26 20:10:49,889] INFO in app: System encoding: utf-8
[2025-06-26 20:10:49,895] INFO in app: ==================================================
2025-06-26 20:10:50,183 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-26 20:10:50,183 - INFO - [33mPress CTRL+C to quit[0m
2025-06-26 20:10:54,877 - INFO - 127.0.0.1 - - [26/Jun/2025 20:10:54] "GET /register HTTP/1.1" 200 -
2025-06-26 20:11:00,700 - INFO - 127.0.0.1 - - [26/Jun/2025 20:11:00] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-26 20:15:21,712 - INFO - 127.0.0.1 - - [26/Jun/2025 20:15:21] "[32mPOST /register HTTP/1.1[0m" 302 -
2025-06-26 20:15:21,722 - INFO - 127.0.0.1 - - [26/Jun/2025 20:15:21] "GET /register HTTP/1.1" 200 -
2025-06-26 20:15:58,881 - INFO - 127.0.0.1 - - [26/Jun/2025 20:15:58] "GET /register HTTP/1.1" 200 -
2025-06-26 20:16:04,972 - INFO - 127.0.0.1 - - [26/Jun/2025 20:16:04] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-26 20:17:32,016 - INFO - 127.0.0.1 - - [26/Jun/2025 20:17:32] "GET /approve_customers HTTP/1.1" 200 -
2025-06-26 20:18:17,455 - INFO - 127.0.0.1 - - [26/Jun/2025 20:18:17] "GET /approve_customers HTTP/1.1" 200 -
2025-06-26 20:19:57,625 - INFO - 127.0.0.1 - - [26/Jun/2025 20:19:57] "GET /approve_customers HTTP/1.1" 200 -
2025-06-26 20:26:42,321 - INFO - 127.0.0.1 - - [26/Jun/2025 20:26:42] "GET /approve_customers HTTP/1.1" 200 -
[2025-06-27 07:03:16,150] INFO in app: ==================================================
[2025-06-27 07:03:16,253] INFO in app: Application logging initialized successfully
[2025-06-27 07:03:16,257] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-27 07:03:16,259] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-27 07:03:16,261] INFO in app: System encoding: utf-8
[2025-06-27 07:03:16,266] INFO in app: ==================================================
2025-06-27 07:03:16,730 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-27 07:03:16,730 - INFO - [33mPress CTRL+C to quit[0m
2025-06-27 09:44:53,323 - INFO - 127.0.0.1 - - [27/Jun/2025 09:44:53] "GET /approve_customers HTTP/1.1" 200 -
2025-06-27 09:44:54,094 - INFO - 127.0.0.1 - - [27/Jun/2025 09:44:54] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-27 09:44:56,309 - INFO - 127.0.0.1 - - [27/Jun/2025 09:44:56] "GET /register HTTP/1.1" 200 -
2025-06-27 09:47:13,395 - INFO - 127.0.0.1 - - [27/Jun/2025 09:47:13] "[32mPOST /register HTTP/1.1[0m" 302 -
2025-06-27 09:47:13,405 - INFO - 127.0.0.1 - - [27/Jun/2025 09:47:13] "GET /register HTTP/1.1" 200 -
[2025-06-27 11:25:15,404] INFO in app: ==================================================
[2025-06-27 11:25:15,410] INFO in app: Application logging initialized successfully
[2025-06-27 11:25:15,413] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-27 11:25:15,415] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-27 11:25:15,419] INFO in app: System encoding: utf-8
[2025-06-27 11:25:15,421] INFO in app: ==================================================
2025-06-27 11:25:15,611 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-27 11:25:15,611 - INFO - [33mPress CTRL+C to quit[0m
2025-06-27 11:25:19,168 - INFO - 127.0.0.1 - - [27/Jun/2025 11:25:19] "GET /register HTTP/1.1" 200 -
2025-06-27 11:25:20,435 - INFO - 127.0.0.1 - - [27/Jun/2025 11:25:20] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-27 11:26:58,689 - INFO - 127.0.0.1 - - [27/Jun/2025 11:26:58] "[32mPOST /register HTTP/1.1[0m" 302 -
2025-06-27 11:26:58,695 - INFO - 127.0.0.1 - - [27/Jun/2025 11:26:58] "GET /register HTTP/1.1" 200 -
[2025-06-27 12:01:40,005] INFO in app: ==================================================
[2025-06-27 12:01:40,011] INFO in app: Application logging initialized successfully
[2025-06-27 12:01:40,014] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-27 12:01:40,018] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-27 12:01:40,022] INFO in app: System encoding: utf-8
[2025-06-27 12:01:40,027] INFO in app: ==================================================
2025-06-27 12:01:40,227 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-27 12:01:40,227 - INFO - [33mPress CTRL+C to quit[0m
2025-06-27 12:12:24,641 - INFO - 127.0.0.1 - - [27/Jun/2025 12:12:24] "GET /register HTTP/1.1" 200 -
2025-06-27 12:12:27,792 - INFO - 127.0.0.1 - - [27/Jun/2025 12:12:27] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-27 12:13:53,628 - INFO - 127.0.0.1 - - [27/Jun/2025 12:13:53] "[32mPOST /register HTTP/1.1[0m" 302 -
2025-06-27 12:13:53,635 - INFO - 127.0.0.1 - - [27/Jun/2025 12:13:53] "GET /register HTTP/1.1" 200 -
[2025-06-27 12:14:35,451] INFO in app: ==================================================
[2025-06-27 12:14:35,517] INFO in app: Application logging initialized successfully
[2025-06-27 12:14:35,519] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-27 12:14:35,521] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-27 12:14:35,523] INFO in app: System encoding: utf-8
[2025-06-27 12:14:35,525] INFO in app: ==================================================
2025-06-27 12:14:35,734 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-27 12:14:35,734 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-27 12:42:16,925] INFO in app: ==================================================
[2025-06-27 12:42:16,933] INFO in app: Application logging initialized successfully
[2025-06-27 12:42:16,936] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-27 12:42:16,938] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-27 12:42:16,941] INFO in app: System encoding: utf-8
[2025-06-27 12:42:16,943] INFO in app: ==================================================
2025-06-27 12:42:17,254 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-27 12:42:17,254 - INFO - [33mPress CTRL+C to quit[0m
2025-06-27 12:42:21,397 - INFO - 127.0.0.1 - - [27/Jun/2025 12:42:21] "GET /register HTTP/1.1" 200 -
2025-06-27 12:42:25,684 - INFO - 127.0.0.1 - - [27/Jun/2025 12:42:25] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-27 12:43:49,572 - INFO - 127.0.0.1 - - [27/Jun/2025 12:43:49] "[32mPOST /register HTTP/1.1[0m" 302 -
2025-06-27 12:43:49,580 - INFO - 127.0.0.1 - - [27/Jun/2025 12:43:49] "GET /register HTTP/1.1" 200 -
[2025-06-27 12:47:09,890] INFO in app: ==================================================
[2025-06-27 12:47:09,899] INFO in app: Application logging initialized successfully
[2025-06-27 12:47:09,901] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-27 12:47:09,904] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-27 12:47:09,906] INFO in app: System encoding: utf-8
[2025-06-27 12:47:09,909] INFO in app: ==================================================
2025-06-27 12:47:10,135 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-27 12:47:10,135 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-27 12:57:33,643] INFO in app: ==================================================
[2025-06-27 12:57:33,649] INFO in app: Application logging initialized successfully
[2025-06-27 12:57:33,651] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-27 12:57:33,654] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-27 12:57:33,656] INFO in app: System encoding: utf-8
[2025-06-27 12:57:33,657] INFO in app: ==================================================
2025-06-27 12:57:33,857 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-27 12:57:33,857 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-27 14:12:07,090] INFO in app: ==================================================
[2025-06-27 14:12:07,096] INFO in app: Application logging initialized successfully
[2025-06-27 14:12:07,099] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-27 14:12:07,102] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-27 14:12:07,104] INFO in app: System encoding: utf-8
[2025-06-27 14:12:07,107] INFO in app: ==================================================
2025-06-27 14:12:07,299 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-27 14:12:07,299 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-27 15:52:56,630] INFO in app: ==================================================
[2025-06-27 15:52:56,638] INFO in app: Application logging initialized successfully
[2025-06-27 15:52:56,641] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-27 15:52:56,643] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-27 15:52:56,645] INFO in app: System encoding: utf-8
[2025-06-27 15:52:56,649] INFO in app: ==================================================
2025-06-27 15:52:56,841 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-27 15:52:56,841 - INFO - [33mPress CTRL+C to quit[0m
2025-06-27 17:15:14,026 - INFO - 127.0.0.1 - - [27/Jun/2025 17:15:14] "GET /register HTTP/1.1" 200 -
2025-06-27 17:15:15,509 - INFO - 127.0.0.1 - - [27/Jun/2025 17:15:15] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-27 17:17:04,000 - INFO - 127.0.0.1 - - [27/Jun/2025 17:17:03] "[32mPOST /register HTTP/1.1[0m" 302 -
2025-06-27 17:17:04,023 - INFO - 127.0.0.1 - - [27/Jun/2025 17:17:04] "GET /register HTTP/1.1" 200 -
[2025-06-28 02:24:13,992] INFO in app: ==================================================
[2025-06-28 02:24:14,074] INFO in app: Application logging initialized successfully
[2025-06-28 02:24:14,075] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-28 02:24:14,077] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-28 02:24:14,079] INFO in app: System encoding: utf-8
[2025-06-28 02:24:14,086] INFO in app: ==================================================
2025-06-28 02:24:14,410 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-28 02:24:14,411 - INFO - [33mPress CTRL+C to quit[0m
2025-06-28 02:24:19,518 - INFO - 127.0.0.1 - - [28/Jun/2025 02:24:19] "GET /register HTTP/1.1" 200 -
2025-06-28 02:24:19,824 - INFO - 127.0.0.1 - - [28/Jun/2025 02:24:19] "GET /register HTTP/1.1" 200 -
2025-06-28 02:24:20,208 - INFO - 127.0.0.1 - - [28/Jun/2025 02:24:20] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-28 02:26:06,123 - INFO - 127.0.0.1 - - [28/Jun/2025 02:26:06] "[32mPOST /register HTTP/1.1[0m" 302 -
2025-06-28 02:26:06,131 - INFO - 127.0.0.1 - - [28/Jun/2025 02:26:06] "GET /register HTTP/1.1" 200 -
2025-06-28 02:29:30,765 - INFO - 127.0.0.1 - - [28/Jun/2025 02:29:30] "GET /approve_customers HTTP/1.1" 200 -
2025-06-28 02:30:08,625 - INFO - 127.0.0.1 - - [28/Jun/2025 02:30:08] "GET /register HTTP/1.1" 200 -
2025-06-28 02:30:24,565 - INFO - 127.0.0.1 - - [28/Jun/2025 02:30:24] "GET /approve_customers HTTP/1.1" 200 -
2025-06-28 02:30:25,713 - INFO - 127.0.0.1 - - [28/Jun/2025 02:30:25] "GET /customers HTTP/1.1" 200 -
2025-06-28 02:30:28,484 - INFO - 127.0.0.1 - - [28/Jun/2025 02:30:28] "GET /loans HTTP/1.1" 200 -
[2025-06-28 02:58:06,022] INFO in app: ==================================================
[2025-06-28 02:58:06,035] INFO in app: Application logging initialized successfully
[2025-06-28 02:58:06,072] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-28 02:58:06,096] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-28 02:58:06,103] INFO in app: System encoding: utf-8
[2025-06-28 02:58:06,106] INFO in app: ==================================================
[2025-06-28 02:58:18,578] INFO in app: ==================================================
[2025-06-28 02:58:18,583] INFO in app: Application logging initialized successfully
[2025-06-28 02:58:18,585] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-28 02:58:18,587] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-28 02:58:18,590] INFO in app: System encoding: utf-8
[2025-06-28 02:58:18,592] INFO in app: ==================================================
[2025-06-28 02:58:23,360] INFO in app: ==================================================
[2025-06-28 02:58:23,371] INFO in app: Application logging initialized successfully
[2025-06-28 02:58:23,374] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-28 02:58:23,376] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-28 02:58:23,379] INFO in app: System encoding: utf-8
[2025-06-28 02:58:23,381] INFO in app: ==================================================
2025-06-28 02:58:23,589 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-28 02:58:23,589 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-28 03:41:17,409] INFO in app: ==================================================
[2025-06-28 03:41:17,415] INFO in app: Application logging initialized successfully
[2025-06-28 03:41:17,418] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-28 03:41:17,420] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-28 03:41:17,422] INFO in app: System encoding: utf-8
[2025-06-28 03:41:17,425] INFO in app: ==================================================
[2025-06-28 03:41:31,143] INFO in app: ==================================================
[2025-06-28 03:41:31,150] INFO in app: Application logging initialized successfully
[2025-06-28 03:41:31,154] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-28 03:41:31,161] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-28 03:41:31,164] INFO in app: System encoding: utf-8
[2025-06-28 03:41:31,167] INFO in app: ==================================================
[2025-06-28 03:42:22,363] INFO in app: ==================================================
[2025-06-28 03:42:22,370] INFO in app: Application logging initialized successfully
[2025-06-28 03:42:22,375] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-28 03:42:22,380] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-28 03:42:22,383] INFO in app: System encoding: utf-8
[2025-06-28 03:42:22,385] INFO in app: ==================================================
[2025-06-28 03:42:51,402] INFO in app: ==================================================
[2025-06-28 03:42:51,407] INFO in app: Application logging initialized successfully
[2025-06-28 03:42:51,410] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-28 03:42:51,412] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-28 03:42:51,418] INFO in app: System encoding: utf-8
[2025-06-28 03:42:51,420] INFO in app: ==================================================
[2025-06-28 03:43:13,029] INFO in app: ==================================================
[2025-06-28 03:43:13,034] INFO in app: Application logging initialized successfully
[2025-06-28 03:43:13,037] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-28 03:43:13,039] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-28 03:43:13,044] INFO in app: System encoding: utf-8
[2025-06-28 03:43:13,046] INFO in app: ==================================================
[2025-06-28 03:43:29,939] INFO in app: ==================================================
[2025-06-28 03:43:29,945] INFO in app: Application logging initialized successfully
[2025-06-28 03:43:29,947] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-28 03:43:29,949] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-28 03:43:29,951] INFO in app: System encoding: utf-8
[2025-06-28 03:43:29,955] INFO in app: ==================================================
[2025-06-28 03:43:36,513] INFO in app: ==================================================
[2025-06-28 03:43:36,519] INFO in app: Application logging initialized successfully
[2025-06-28 03:43:36,522] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-28 03:43:36,523] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-28 03:43:36,525] INFO in app: System encoding: utf-8
[2025-06-28 03:43:36,529] INFO in app: ==================================================
2025-06-28 03:43:36,708 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-28 03:43:36,708 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-28 03:43:46,683] INFO in app: ==================================================
[2025-06-28 03:43:46,691] INFO in app: Application logging initialized successfully
[2025-06-28 03:43:46,693] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-28 03:43:46,694] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-28 03:43:46,699] INFO in app: System encoding: utf-8
[2025-06-28 03:43:46,701] INFO in app: ==================================================
[2025-06-28 03:43:51,673] INFO in app: ==================================================
[2025-06-28 03:43:51,679] INFO in app: Application logging initialized successfully
[2025-06-28 03:43:51,682] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-28 03:43:51,683] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-28 03:43:51,685] INFO in app: System encoding: utf-8
[2025-06-28 03:43:51,688] INFO in app: ==================================================
[2025-06-28 03:43:56,029] INFO in app: ==================================================
[2025-06-28 03:43:56,035] INFO in app: Application logging initialized successfully
[2025-06-28 03:43:56,038] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-28 03:43:56,040] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-28 03:43:56,041] INFO in app: System encoding: utf-8
[2025-06-28 03:43:56,048] INFO in app: ==================================================
2025-06-28 03:43:56,230 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-28 03:43:56,230 - INFO - [33mPress CTRL+C to quit[0m
2025-06-28 03:53:08,836 - INFO - 127.0.0.1 - - [28/Jun/2025 03:53:08] "GET /register HTTP/1.1" 200 -
2025-06-28 03:53:10,750 - INFO - 127.0.0.1 - - [28/Jun/2025 03:53:10] "GET /approve_customers HTTP/1.1" 200 -
2025-06-28 03:53:36,518 - INFO - 127.0.0.1 - - [28/Jun/2025 03:53:36] "GET /admin/dashboard HTTP/1.1" 200 -
2025-06-28 03:53:39,210 - INFO - 127.0.0.1 - - [28/Jun/2025 03:53:39] "GET /admin/dashboard/votes HTTP/1.1" 200 -
2025-06-28 03:53:56,772 - INFO - 127.0.0.1 - - [28/Jun/2025 03:53:56] "[32mPOST /admin/dashboard/votes HTTP/1.1[0m" 302 -
2025-06-28 03:53:56,785 - INFO - 127.0.0.1 - - [28/Jun/2025 03:53:56] "GET /admin/dashboard/votes HTTP/1.1" 200 -
2025-06-28 03:54:00,762 - INFO - 127.0.0.1 - - [28/Jun/2025 03:54:00] "GET /customers HTTP/1.1" 200 -
2025-06-28 03:54:02,206 - INFO - 127.0.0.1 - - [28/Jun/2025 03:54:02] "GET /approve_customers HTTP/1.1" 200 -
2025-06-28 03:54:06,487 - INFO - 127.0.0.1 - - [28/Jun/2025 03:54:06] "[32mPOST /approve_customers HTTP/1.1[0m" 302 -
2025-06-28 03:54:06,494 - INFO - 127.0.0.1 - - [28/Jun/2025 03:54:06] "GET /approve_customers HTTP/1.1" 200 -
2025-06-28 03:54:09,250 - INFO - 127.0.0.1 - - [28/Jun/2025 03:54:09] "GET /loans HTTP/1.1" 200 -
2025-06-28 03:54:14,334 - INFO - 127.0.0.1 - - [28/Jun/2025 03:54:14] "[32mPOST /process_loan/1/approve HTTP/1.1[0m" 302 -
2025-06-28 03:54:14,347 - INFO - 127.0.0.1 - - [28/Jun/2025 03:54:14] "GET /loans HTTP/1.1" 200 -
[2025-06-28 03:54:16,514] INFO in app: [DISBURSEMENT] Loan #136000001 | Top-up of: None | Cash to Client: 2600000.0
2025-06-28 03:54:16,514 - INFO - [DISBURSEMENT] Loan #136000001 | Top-up of: None | Cash to Client: 2600000.0
2025-06-28 03:54:16,524 - INFO - 127.0.0.1 - - [28/Jun/2025 03:54:16] "GET /disbursements HTTP/1.1" 200 -
2025-06-28 03:54:18,973 - INFO - 127.0.0.1 - - [28/Jun/2025 03:54:18] "GET /payments HTTP/1.1" 200 -
2025-06-28 03:54:20,929 - INFO - 127.0.0.1 - - [28/Jun/2025 03:54:20] "GET /loanbook HTTP/1.1" 200 -
2025-06-28 03:54:28,742 - INFO - 127.0.0.1 - - [28/Jun/2025 03:54:28] "GET /loan/136000001/statement HTTP/1.1" 200 -
2025-06-28 03:58:53,294 - INFO - 127.0.0.1 - - [28/Jun/2025 03:58:53] "GET /loanbook HTTP/1.1" 200 -
2025-06-28 03:58:55,181 - INFO - 127.0.0.1 - - [28/Jun/2025 03:58:55] "GET /admin/dashboard HTTP/1.1" 200 -
2025-06-28 03:58:56,983 - INFO - 127.0.0.1 - - [28/Jun/2025 03:58:56] "GET /loanbook HTTP/1.1" 200 -
2025-06-28 03:58:59,174 - INFO - 127.0.0.1 - - [28/Jun/2025 03:58:59] "GET /loan/136000001/statement HTTP/1.1" 200 -
2025-06-28 03:59:19,414 - INFO - 127.0.0.1 - - [28/Jun/2025 03:59:19] "GET /payments HTTP/1.1" 200 -
2025-06-28 03:59:23,014 - INFO - 127.0.0.1 - - [28/Jun/2025 03:59:23] "GET /api/verify_loan/136000001 HTTP/1.1" 200 -
[2025-06-28 03:59:36,809] INFO in app: [136000001] Recalculated balances → capitalized=3489600.0, paid_principal=0, paid_settlement_interest=0, current_balance=3489600.0, top_up_balance=3489600.0, settlement_balance=3489600.0, loan_state=active
2025-06-28 03:59:36,809 - INFO - [136000001] Recalculated balances → capitalized=3489600.0, paid_principal=0, paid_settlement_interest=0, current_balance=3489600.0, top_up_balance=3489600.0, settlement_balance=3489600.0, loan_state=active
[2025-06-28 03:59:36,818] INFO in app: [136000001] Recalculated balances → capitalized=3489600.0, paid_principal=0, paid_settlement_interest=0, current_balance=3489600.0, top_up_balance=3489600.0, settlement_balance=3489600.0, loan_state=active
2025-06-28 03:59:36,818 - INFO - [136000001] Recalculated balances → capitalized=3489600.0, paid_principal=0, paid_settlement_interest=0, current_balance=3489600.0, top_up_balance=3489600.0, settlement_balance=3489600.0, loan_state=active
[2025-06-28 03:59:36,830] ERROR in app: Payment error: (sqlite3.IntegrityError) UNIQUE constraint failed: payment_allocations.payment_id
[SQL: INSERT INTO payment_allocations (payment_id, principal, interest, settlement_interest, schedule_id, fees, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id]
[parameters: (1, 0.0, 0.0, 0.0, 2, 7.275957614183426e-12, '2025-06-28 01:59:36.802224')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2115, in _exec_insertmany_context
    dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~^
        cursor,
        ^^^^^^^
    ...<2 lines>...
        context,
        ^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.IntegrityError: UNIQUE constraint failed: payment_allocations.payment_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3754, in handle_payments
    amount_str = normalized_row.get('amount', '').replace(',', '')
    ^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1143, in _emit_insert_statements
    result = connection.execute(
        statement, multiparams, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1841, in _execute_context
    return self._exec_insertmany_context(dialect, context)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2123, in _exec_insertmany_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e,
        ^^
    ...<4 lines>...
        is_sub_exec=True,
        ^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2115, in _exec_insertmany_context
    dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~^
        cursor,
        ^^^^^^^
    ...<2 lines>...
        context,
        ^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: payment_allocations.payment_id
[SQL: INSERT INTO payment_allocations (payment_id, principal, interest, settlement_interest, schedule_id, fees, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id]
[parameters: (1, 0.0, 0.0, 0.0, 2, 7.275957614183426e-12, '2025-06-28 01:59:36.802224')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-06-28 03:59:36,830 - ERROR - Payment error: (sqlite3.IntegrityError) UNIQUE constraint failed: payment_allocations.payment_id
[SQL: INSERT INTO payment_allocations (payment_id, principal, interest, settlement_interest, schedule_id, fees, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id]
[parameters: (1, 0.0, 0.0, 0.0, 2, 7.275957614183426e-12, '2025-06-28 01:59:36.802224')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2115, in _exec_insertmany_context
    dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~^
        cursor,
        ^^^^^^^
    ...<2 lines>...
        context,
        ^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.IntegrityError: UNIQUE constraint failed: payment_allocations.payment_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3754, in handle_payments
    amount_str = normalized_row.get('amount', '').replace(',', '')
    ^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1143, in _emit_insert_statements
    result = connection.execute(
        statement, multiparams, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1841, in _execute_context
    return self._exec_insertmany_context(dialect, context)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2123, in _exec_insertmany_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e,
        ^^
    ...<4 lines>...
        is_sub_exec=True,
        ^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2115, in _exec_insertmany_context
    dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~^
        cursor,
        ^^^^^^^
    ...<2 lines>...
        context,
        ^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: payment_allocations.payment_id
[SQL: INSERT INTO payment_allocations (payment_id, principal, interest, settlement_interest, schedule_id, fees, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id]
[parameters: (1, 0.0, 0.0, 0.0, 2, 7.275957614183426e-12, '2025-06-28 01:59:36.802224')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-06-28 03:59:36,965 - INFO - 127.0.0.1 - - [28/Jun/2025 03:59:36] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-28 03:59:37,118 - INFO - 127.0.0.1 - - [28/Jun/2025 03:59:37] "GET /payments HTTP/1.1" 200 -
[2025-06-28 04:14:25,080] INFO in app: ==================================================
[2025-06-28 04:14:25,086] INFO in app: Application logging initialized successfully
[2025-06-28 04:14:25,088] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-28 04:14:25,090] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-28 04:14:25,092] INFO in app: System encoding: utf-8
[2025-06-28 04:14:25,095] INFO in app: ==================================================
[2025-06-28 04:16:35,060] INFO in app: ==================================================
[2025-06-28 04:16:35,067] INFO in app: Application logging initialized successfully
[2025-06-28 04:16:35,069] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-28 04:16:35,071] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-28 04:16:35,073] INFO in app: System encoding: utf-8
[2025-06-28 04:16:35,076] INFO in app: ==================================================
[2025-06-28 04:16:41,149] INFO in app: ==================================================
[2025-06-28 04:16:41,156] INFO in app: Application logging initialized successfully
[2025-06-28 04:16:41,158] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-28 04:16:41,160] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-28 04:16:41,162] INFO in app: System encoding: utf-8
[2025-06-28 04:16:41,165] INFO in app: ==================================================
[2025-06-28 04:16:45,654] INFO in app: ==================================================
[2025-06-28 04:16:45,660] INFO in app: Application logging initialized successfully
[2025-06-28 04:16:45,663] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-28 04:16:45,665] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-28 04:16:45,666] INFO in app: System encoding: utf-8
[2025-06-28 04:16:45,669] INFO in app: ==================================================
2025-06-28 04:16:45,850 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-28 04:16:45,850 - INFO - [33mPress CTRL+C to quit[0m
2025-06-28 04:16:52,128 - INFO - 127.0.0.1 - - [28/Jun/2025 04:16:52] "GET /payments HTTP/1.1" 200 -
2025-06-28 04:17:02,718 - INFO - 127.0.0.1 - - [28/Jun/2025 04:17:02] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-28 04:17:04,424 - INFO - 127.0.0.1 - - [28/Jun/2025 04:17:04] "[32mGET /loanbook HTTP/1.1[0m" 302 -
2025-06-28 04:17:04,747 - INFO - 127.0.0.1 - - [28/Jun/2025 04:17:04] "GET / HTTP/1.1" 200 -
[2025-06-28 04:25:52,573] INFO in app: ==================================================
[2025-06-28 04:25:52,579] INFO in app: Application logging initialized successfully
[2025-06-28 04:25:52,582] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-28 04:25:52,584] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-28 04:25:52,586] INFO in app: System encoding: utf-8
[2025-06-28 04:25:52,591] INFO in app: ==================================================
2025-06-28 04:25:52,773 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-28 04:25:52,773 - INFO - [33mPress CTRL+C to quit[0m
2025-06-28 04:25:56,942 - INFO - 127.0.0.1 - - [28/Jun/2025 04:25:56] "GET / HTTP/1.1" 200 -
2025-06-28 04:26:00,431 - INFO - 127.0.0.1 - - [28/Jun/2025 04:26:00] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-28 04:26:03,179 - INFO - 127.0.0.1 - - [28/Jun/2025 04:26:03] "[32mGET /loanbook HTTP/1.1[0m" 302 -
2025-06-28 04:26:03,511 - INFO - 127.0.0.1 - - [28/Jun/2025 04:26:03] "GET / HTTP/1.1" 200 -
[2025-06-28 07:38:40,758] INFO in app: ==================================================
[2025-06-28 07:38:40,866] INFO in app: Application logging initialized successfully
[2025-06-28 07:38:40,869] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-28 07:38:40,871] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-28 07:38:40,873] INFO in app: System encoding: utf-8
[2025-06-28 07:38:40,882] INFO in app: ==================================================
2025-06-28 07:38:41,506 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-28 07:38:41,506 - INFO - [33mPress CTRL+C to quit[0m
2025-06-28 07:38:41,803 - INFO - 127.0.0.1 - - [28/Jun/2025 07:38:41] "GET / HTTP/1.1" 200 -
2025-06-28 07:38:43,371 - INFO - 127.0.0.1 - - [28/Jun/2025 07:38:43] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-28 07:38:46,660 - INFO - 127.0.0.1 - - [28/Jun/2025 07:38:46] "GET /loanbook HTTP/1.1" 200 -
2025-06-28 07:38:49,574 - INFO - 127.0.0.1 - - [28/Jun/2025 07:38:49] "GET /loan/136000001/statement HTTP/1.1" 200 -
2025-06-28 07:39:01,188 - INFO - 127.0.0.1 - - [28/Jun/2025 07:39:01] "GET /payments HTTP/1.1" 200 -
2025-06-28 07:39:03,953 - INFO - 127.0.0.1 - - [28/Jun/2025 07:39:03] "GET /api/verify_loan/136000001 HTTP/1.1" 200 -
[2025-06-28 07:39:15,069] ERROR in app: Payment error: 'Payment' object has no attribute 'allocation'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3821, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1447, in process
    self._update_loan_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1518, in _update_loan_status
    self.loan.recalculate_balance()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 780, in recalculate_balance
    paid_settlement_interest = sum(
        (getattr(p.allocation, 'settlement_interest', 0.0) or 0.0)
        for p in self.payments
        if p.allocation and p.status in ['successful', 'completed']
    )
  File "C:\Users\pc\loan-app\app.py", line 783, in <genexpr>
    if p.allocation and p.status in ['successful', 'completed']
       ^^^^^^^^^^^^
AttributeError: 'Payment' object has no attribute 'allocation'. Did you mean: 'allocations'?
2025-06-28 07:39:15,069 - ERROR - Payment error: 'Payment' object has no attribute 'allocation'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3821, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1447, in process
    self._update_loan_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1518, in _update_loan_status
    self.loan.recalculate_balance()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 780, in recalculate_balance
    paid_settlement_interest = sum(
        (getattr(p.allocation, 'settlement_interest', 0.0) or 0.0)
        for p in self.payments
        if p.allocation and p.status in ['successful', 'completed']
    )
  File "C:\Users\pc\loan-app\app.py", line 783, in <genexpr>
    if p.allocation and p.status in ['successful', 'completed']
       ^^^^^^^^^^^^
AttributeError: 'Payment' object has no attribute 'allocation'. Did you mean: 'allocations'?
2025-06-28 07:39:15,088 - INFO - 127.0.0.1 - - [28/Jun/2025 07:39:15] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-28 07:39:15,100 - INFO - 127.0.0.1 - - [28/Jun/2025 07:39:15] "GET /payments HTTP/1.1" 200 -
2025-06-28 14:35:08,102 - INFO - 127.0.0.1 - - [28/Jun/2025 14:35:08] "GET /payments HTTP/1.1" 200 -
[2025-06-29 08:45:02,366] INFO in app: ==================================================
[2025-06-29 08:45:02,442] INFO in app: Application logging initialized successfully
[2025-06-29 08:45:02,443] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-29 08:45:02,444] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-29 08:45:02,446] INFO in app: System encoding: utf-8
[2025-06-29 08:45:02,447] INFO in app: ==================================================
2025-06-29 08:45:02,762 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-29 08:45:02,762 - INFO - [33mPress CTRL+C to quit[0m
2025-06-29 08:45:07,767 - INFO - 127.0.0.1 - - [29/Jun/2025 08:45:07] "GET /payments HTTP/1.1" 200 -
2025-06-29 08:45:14,657 - INFO - 127.0.0.1 - - [29/Jun/2025 08:45:14] "GET /payments HTTP/1.1" 200 -
2025-06-29 08:45:18,261 - INFO - 127.0.0.1 - - [29/Jun/2025 08:45:18] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-29 08:45:22,091 - INFO - 127.0.0.1 - - [29/Jun/2025 08:45:22] "GET /loanbook HTTP/1.1" 200 -
2025-06-29 08:45:23,607 - INFO - 127.0.0.1 - - [29/Jun/2025 08:45:23] "GET /loan/136000001/statement HTTP/1.1" 200 -
2025-06-29 08:45:32,229 - INFO - 127.0.0.1 - - [29/Jun/2025 08:45:32] "GET /payments HTTP/1.1" 200 -
2025-06-29 08:45:36,916 - INFO - 127.0.0.1 - - [29/Jun/2025 08:45:36] "GET /api/verify_loan/136000001 HTTP/1.1" 200 -
[2025-06-29 08:45:53,385] ERROR in app: Payment error: 'Payment' object has no attribute 'allocation'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3821, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1447, in process
    self._update_loan_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1518, in _update_loan_status
    self.loan.recalculate_balance()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 780, in recalculate_balance
    paid_settlement_interest = sum(
        (getattr(p.allocation, 'settlement_interest', 0.0) or 0.0)
        for p in self.payments
        if p.allocation and p.status in ['successful', 'completed']
    )
  File "C:\Users\pc\loan-app\app.py", line 783, in <genexpr>
    if p.allocation and p.status in ['successful', 'completed']
       ^^^^^^^^^^^^
AttributeError: 'Payment' object has no attribute 'allocation'. Did you mean: 'allocations'?
2025-06-29 08:45:53,385 - ERROR - Payment error: 'Payment' object has no attribute 'allocation'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3821, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1447, in process
    self._update_loan_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1518, in _update_loan_status
    self.loan.recalculate_balance()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 780, in recalculate_balance
    paid_settlement_interest = sum(
        (getattr(p.allocation, 'settlement_interest', 0.0) or 0.0)
        for p in self.payments
        if p.allocation and p.status in ['successful', 'completed']
    )
  File "C:\Users\pc\loan-app\app.py", line 783, in <genexpr>
    if p.allocation and p.status in ['successful', 'completed']
       ^^^^^^^^^^^^
AttributeError: 'Payment' object has no attribute 'allocation'. Did you mean: 'allocations'?
2025-06-29 08:45:53,411 - INFO - 127.0.0.1 - - [29/Jun/2025 08:45:53] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-29 08:45:53,681 - INFO - 127.0.0.1 - - [29/Jun/2025 08:45:53] "GET /payments HTTP/1.1" 200 -
[2025-06-30 08:21:33,542] INFO in app: ==================================================
[2025-06-30 08:21:33,650] INFO in app: Application logging initialized successfully
[2025-06-30 08:21:33,652] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-30 08:21:33,654] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-30 08:21:33,665] INFO in app: System encoding: utf-8
[2025-06-30 08:21:33,668] INFO in app: ==================================================
2025-06-30 08:21:34,123 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-30 08:21:34,123 - INFO - [33mPress CTRL+C to quit[0m
2025-06-30 08:21:50,647 - INFO - 127.0.0.1 - - [30/Jun/2025 08:21:50] "GET /payments HTTP/1.1" 200 -
2025-06-30 08:21:50,793 - INFO - 127.0.0.1 - - [30/Jun/2025 08:21:50] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-30 08:21:57,022 - INFO - 127.0.0.1 - - [30/Jun/2025 08:21:57] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 08:22:00,904 - INFO - 127.0.0.1 - - [30/Jun/2025 08:22:00] "GET /loan/136000001/statement HTTP/1.1" 200 -
2025-06-30 08:22:28,178 - INFO - 127.0.0.1 - - [30/Jun/2025 08:22:28] "GET /payments HTTP/1.1" 200 -
2025-06-30 08:22:34,200 - INFO - 127.0.0.1 - - [30/Jun/2025 08:22:34] "GET /api/verify_loan/136000001 HTTP/1.1" 200 -
[2025-06-30 08:22:59,156] ERROR in app: Payment error: 'Payment' object has no attribute 'allocation'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3821, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1447, in process
    self._update_loan_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1518, in _update_loan_status
    self.loan.recalculate_balance()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 780, in recalculate_balance
    paid_settlement_interest = sum(
        (getattr(p.allocation, 'settlement_interest', 0.0) or 0.0)
        for p in self.payments
        if p.allocation and p.status in ['successful', 'completed']
    )
  File "C:\Users\pc\loan-app\app.py", line 783, in <genexpr>
    if p.allocation and p.status in ['successful', 'completed']
       ^^^^^^^^^^^^
AttributeError: 'Payment' object has no attribute 'allocation'. Did you mean: 'allocations'?
2025-06-30 08:22:59,156 - ERROR - Payment error: 'Payment' object has no attribute 'allocation'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3821, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1447, in process
    self._update_loan_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1518, in _update_loan_status
    self.loan.recalculate_balance()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 780, in recalculate_balance
    paid_settlement_interest = sum(
        (getattr(p.allocation, 'settlement_interest', 0.0) or 0.0)
        for p in self.payments
        if p.allocation and p.status in ['successful', 'completed']
    )
  File "C:\Users\pc\loan-app\app.py", line 783, in <genexpr>
    if p.allocation and p.status in ['successful', 'completed']
       ^^^^^^^^^^^^
AttributeError: 'Payment' object has no attribute 'allocation'. Did you mean: 'allocations'?
2025-06-30 08:22:59,187 - INFO - 127.0.0.1 - - [30/Jun/2025 08:22:59] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-30 08:22:59,207 - INFO - 127.0.0.1 - - [30/Jun/2025 08:22:59] "GET /payments HTTP/1.1" 200 -
[2025-06-30 08:30:01,217] INFO in app: ==================================================
[2025-06-30 08:30:01,225] INFO in app: Application logging initialized successfully
[2025-06-30 08:30:01,227] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-30 08:30:01,228] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-30 08:30:01,230] INFO in app: System encoding: utf-8
[2025-06-30 08:30:01,232] INFO in app: ==================================================
2025-06-30 08:30:01,447 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-30 08:30:01,447 - INFO - [33mPress CTRL+C to quit[0m
2025-06-30 08:30:05,399 - INFO - 127.0.0.1 - - [30/Jun/2025 08:30:05] "GET /payments HTTP/1.1" 200 -
2025-06-30 08:30:05,490 - INFO - 127.0.0.1 - - [30/Jun/2025 08:30:05] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-30 08:30:09,807 - INFO - 127.0.0.1 - - [30/Jun/2025 08:30:09] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 08:30:11,744 - INFO - 127.0.0.1 - - [30/Jun/2025 08:30:11] "GET /loan/136000001/statement HTTP/1.1" 200 -
2025-06-30 08:30:21,574 - INFO - 127.0.0.1 - - [30/Jun/2025 08:30:21] "GET /payments HTTP/1.1" 200 -
2025-06-30 08:30:25,492 - INFO - 127.0.0.1 - - [30/Jun/2025 08:30:25] "GET /api/verify_loan/136000001 HTTP/1.1" 200 -
[2025-06-30 08:30:37,802] INFO in app: [136000001] Recalculated balances → capitalized=3489600.0, paid_principal=0, paid_settlement_interest=0, current_balance=3489600.0, top_up_balance=3489600.0, settlement_balance=3489600.0, loan_state=active
2025-06-30 08:30:37,802 - INFO - [136000001] Recalculated balances → capitalized=3489600.0, paid_principal=0, paid_settlement_interest=0, current_balance=3489600.0, top_up_balance=3489600.0, settlement_balance=3489600.0, loan_state=active
[2025-06-30 08:30:37,811] INFO in app: [136000001] Recalculated balances → capitalized=3489600.0, paid_principal=0, paid_settlement_interest=0, current_balance=3489600.0, top_up_balance=3489600.0, settlement_balance=3489600.0, loan_state=active
2025-06-30 08:30:37,811 - INFO - [136000001] Recalculated balances → capitalized=3489600.0, paid_principal=0, paid_settlement_interest=0, current_balance=3489600.0, top_up_balance=3489600.0, settlement_balance=3489600.0, loan_state=active
2025-06-30 08:30:37,828 - INFO - 127.0.0.1 - - [30/Jun/2025 08:30:37] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-30 08:30:38,098 - INFO - 127.0.0.1 - - [30/Jun/2025 08:30:38] "GET /payments HTTP/1.1" 200 -
2025-06-30 08:30:43,007 - INFO - 127.0.0.1 - - [30/Jun/2025 08:30:43] "[32mGET /loanbook HTTP/1.1[0m" 302 -
2025-06-30 08:30:43,245 - INFO - 127.0.0.1 - - [30/Jun/2025 08:30:43] "GET / HTTP/1.1" 200 -
2025-06-30 08:30:49,128 - INFO - 127.0.0.1 - - [30/Jun/2025 08:30:49] "[32mGET /loanbook HTTP/1.1[0m" 302 -
2025-06-30 08:30:49,443 - INFO - 127.0.0.1 - - [30/Jun/2025 08:30:49] "GET / HTTP/1.1" 200 -
[2025-06-30 08:31:29,102] INFO in app: [DISBURSEMENT] Loan #136000001 | Top-up of: None | Cash to Client: 2600000.0
2025-06-30 08:31:29,102 - INFO - [DISBURSEMENT] Loan #136000001 | Top-up of: None | Cash to Client: 2600000.0
2025-06-30 08:31:29,146 - INFO - 127.0.0.1 - - [30/Jun/2025 08:31:29] "GET /disbursements HTTP/1.1" 200 -
2025-06-30 08:31:32,532 - INFO - 127.0.0.1 - - [30/Jun/2025 08:31:32] "GET /customers HTTP/1.1" 200 -
2025-06-30 08:31:34,668 - INFO - 127.0.0.1 - - [30/Jun/2025 08:31:34] "GET /approve_customers HTTP/1.1" 200 -
2025-06-30 08:31:35,654 - INFO - 127.0.0.1 - - [30/Jun/2025 08:31:35] "GET /register HTTP/1.1" 200 -
[2025-06-30 08:31:37,038] INFO in app: [DISBURSEMENT] Loan #136000001 | Top-up of: None | Cash to Client: 2600000.0
2025-06-30 08:31:37,038 - INFO - [DISBURSEMENT] Loan #136000001 | Top-up of: None | Cash to Client: 2600000.0
2025-06-30 08:31:37,052 - INFO - 127.0.0.1 - - [30/Jun/2025 08:31:37] "GET /disbursements HTTP/1.1" 200 -
2025-06-30 08:31:39,339 - INFO - 127.0.0.1 - - [30/Jun/2025 08:31:39] "GET /payments HTTP/1.1" 200 -
2025-06-30 08:31:42,287 - INFO - 127.0.0.1 - - [30/Jun/2025 08:31:42] "GET /admin/dashboard HTTP/1.1" 200 -
2025-06-30 08:31:49,690 - INFO - 127.0.0.1 - - [30/Jun/2025 08:31:49] "[32mGET /loanbook HTTP/1.1[0m" 302 -
2025-06-30 08:31:50,008 - INFO - 127.0.0.1 - - [30/Jun/2025 08:31:50] "GET / HTTP/1.1" 200 -
[2025-06-30 08:33:54,715] INFO in app: ==================================================
[2025-06-30 08:33:54,722] INFO in app: Application logging initialized successfully
[2025-06-30 08:33:54,725] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-30 08:33:54,727] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-30 08:33:54,730] INFO in app: System encoding: utf-8
[2025-06-30 08:33:54,733] INFO in app: ==================================================
2025-06-30 08:33:54,951 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-30 08:33:54,952 - INFO - [33mPress CTRL+C to quit[0m
2025-06-30 08:33:57,811 - INFO - 127.0.0.1 - - [30/Jun/2025 08:33:57] "GET / HTTP/1.1" 200 -
2025-06-30 08:33:57,877 - INFO - 127.0.0.1 - - [30/Jun/2025 08:33:57] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-30 08:34:01,115 - INFO - 127.0.0.1 - - [30/Jun/2025 08:34:01] "[32mGET /loanbook HTTP/1.1[0m" 302 -
2025-06-30 08:34:01,412 - INFO - 127.0.0.1 - - [30/Jun/2025 08:34:01] "GET / HTTP/1.1" 200 -
[2025-06-30 09:06:27,137] INFO in app: ==================================================
[2025-06-30 09:06:27,257] INFO in app: Application logging initialized successfully
[2025-06-30 09:06:27,261] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-30 09:06:27,263] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-30 09:06:27,265] INFO in app: System encoding: utf-8
[2025-06-30 09:06:27,267] INFO in app: ==================================================
2025-06-30 09:06:27,617 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-30 09:06:27,617 - INFO - [33mPress CTRL+C to quit[0m
2025-06-30 09:06:31,910 - INFO - 127.0.0.1 - - [30/Jun/2025 09:06:31] "GET / HTTP/1.1" 200 -
2025-06-30 09:06:32,897 - INFO - 127.0.0.1 - - [30/Jun/2025 09:06:32] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-30 09:06:35,035 - INFO - 127.0.0.1 - - [30/Jun/2025 09:06:35] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 09:06:37,944 - INFO - 127.0.0.1 - - [30/Jun/2025 09:06:37] "GET /loan/136000001/statement HTTP/1.1" 200 -
2025-06-30 09:08:04,836 - INFO - 127.0.0.1 - - [30/Jun/2025 09:08:04] "GET /payments HTTP/1.1" 200 -
[2025-06-30 09:08:10,358] ERROR in app: Exception on /api/verify_loan/136000001 [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3887, in verify_loan
    "balance": loan.balance,
               ^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 726, in balance
    paid_principal = sum(
        alloc.principal for p in self.payments if p.allocation for alloc in [p.allocation]
    )
  File "C:\Users\pc\loan-app\app.py", line 727, in <genexpr>
    alloc.principal for p in self.payments if p.allocation for alloc in [p.allocation]
                                              ^^^^^^^^^^^^
AttributeError: 'Payment' object has no attribute 'allocation'. Did you mean: 'allocations'?
2025-06-30 09:08:10,358 - ERROR - Exception on /api/verify_loan/136000001 [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3887, in verify_loan
    "balance": loan.balance,
               ^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 726, in balance
    paid_principal = sum(
        alloc.principal for p in self.payments if p.allocation for alloc in [p.allocation]
    )
  File "C:\Users\pc\loan-app\app.py", line 727, in <genexpr>
    alloc.principal for p in self.payments if p.allocation for alloc in [p.allocation]
                                              ^^^^^^^^^^^^
AttributeError: 'Payment' object has no attribute 'allocation'. Did you mean: 'allocations'?
2025-06-30 09:08:10,424 - INFO - 127.0.0.1 - - [30/Jun/2025 09:08:10] "[35m[1mGET /api/verify_loan/136000001 HTTP/1.1[0m" 500 -
2025-06-30 09:08:12,675 - INFO - 127.0.0.1 - - [30/Jun/2025 09:08:12] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 09:08:14,738 - INFO - 127.0.0.1 - - [30/Jun/2025 09:08:14] "GET /loan/136000001/statement HTTP/1.1" 200 -
2025-06-30 09:08:19,155 - INFO - 127.0.0.1 - - [30/Jun/2025 09:08:19] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 09:08:21,389 - INFO - 127.0.0.1 - - [30/Jun/2025 09:08:21] "GET /payments HTTP/1.1" 200 -
[2025-06-30 09:08:24,058] ERROR in app: Exception on /api/verify_loan/136000001 [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3887, in verify_loan
    "balance": loan.balance,
               ^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 726, in balance
    paid_principal = sum(
        alloc.principal for p in self.payments if p.allocation for alloc in [p.allocation]
    )
  File "C:\Users\pc\loan-app\app.py", line 727, in <genexpr>
    alloc.principal for p in self.payments if p.allocation for alloc in [p.allocation]
                                              ^^^^^^^^^^^^
AttributeError: 'Payment' object has no attribute 'allocation'. Did you mean: 'allocations'?
2025-06-30 09:08:24,058 - ERROR - Exception on /api/verify_loan/136000001 [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3887, in verify_loan
    "balance": loan.balance,
               ^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 726, in balance
    paid_principal = sum(
        alloc.principal for p in self.payments if p.allocation for alloc in [p.allocation]
    )
  File "C:\Users\pc\loan-app\app.py", line 727, in <genexpr>
    alloc.principal for p in self.payments if p.allocation for alloc in [p.allocation]
                                              ^^^^^^^^^^^^
AttributeError: 'Payment' object has no attribute 'allocation'. Did you mean: 'allocations'?
2025-06-30 09:08:24,149 - INFO - 127.0.0.1 - - [30/Jun/2025 09:08:24] "[35m[1mGET /api/verify_loan/136000001 HTTP/1.1[0m" 500 -
2025-06-30 09:08:32,742 - INFO - 127.0.0.1 - - [30/Jun/2025 09:08:32] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 09:08:34,344 - INFO - 127.0.0.1 - - [30/Jun/2025 09:08:34] "GET /loan/136000001/statement HTTP/1.1" 200 -
2025-06-30 09:08:39,722 - INFO - 127.0.0.1 - - [30/Jun/2025 09:08:39] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 09:08:41,522 - INFO - 127.0.0.1 - - [30/Jun/2025 09:08:41] "GET /payments HTTP/1.1" 200 -
[2025-06-30 09:08:44,800] ERROR in app: Exception on /api/verify_loan/136000001 [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3887, in verify_loan
    "balance": loan.balance,
               ^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 726, in balance
    paid_principal = sum(
        alloc.principal for p in self.payments if p.allocation for alloc in [p.allocation]
    )
  File "C:\Users\pc\loan-app\app.py", line 727, in <genexpr>
    alloc.principal for p in self.payments if p.allocation for alloc in [p.allocation]
                                              ^^^^^^^^^^^^
AttributeError: 'Payment' object has no attribute 'allocation'. Did you mean: 'allocations'?
2025-06-30 09:08:44,800 - ERROR - Exception on /api/verify_loan/136000001 [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3887, in verify_loan
    "balance": loan.balance,
               ^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 726, in balance
    paid_principal = sum(
        alloc.principal for p in self.payments if p.allocation for alloc in [p.allocation]
    )
  File "C:\Users\pc\loan-app\app.py", line 727, in <genexpr>
    alloc.principal for p in self.payments if p.allocation for alloc in [p.allocation]
                                              ^^^^^^^^^^^^
AttributeError: 'Payment' object has no attribute 'allocation'. Did you mean: 'allocations'?
2025-06-30 09:08:44,841 - INFO - 127.0.0.1 - - [30/Jun/2025 09:08:44] "[35m[1mGET /api/verify_loan/136000001 HTTP/1.1[0m" 500 -
[2025-06-30 09:13:56,877] INFO in app: ==================================================
[2025-06-30 09:13:56,885] INFO in app: Application logging initialized successfully
[2025-06-30 09:13:56,887] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-30 09:13:56,889] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-30 09:13:56,892] INFO in app: System encoding: utf-8
[2025-06-30 09:13:56,895] INFO in app: ==================================================
2025-06-30 09:13:57,106 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-30 09:13:57,107 - INFO - [33mPress CTRL+C to quit[0m
2025-06-30 09:14:05,013 - INFO - 127.0.0.1 - - [30/Jun/2025 09:14:05] "GET /payments HTTP/1.1" 200 -
2025-06-30 09:14:05,686 - INFO - 127.0.0.1 - - [30/Jun/2025 09:14:05] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-30 09:14:08,488 - INFO - 127.0.0.1 - - [30/Jun/2025 09:14:08] "GET /api/verify_loan/136000001 HTTP/1.1" 200 -
[2025-06-30 09:14:26,354] INFO in app: [136000001] Recalculated balances → capitalized=3489600.0, paid_principal=0, paid_settlement_interest=0, current_balance=3489600.0, top_up_balance=3489600.0, settlement_balance=3489600.0, loan_state=active
2025-06-30 09:14:26,354 - INFO - [136000001] Recalculated balances → capitalized=3489600.0, paid_principal=0, paid_settlement_interest=0, current_balance=3489600.0, top_up_balance=3489600.0, settlement_balance=3489600.0, loan_state=active
[2025-06-30 09:14:26,373] INFO in app: [136000001] Recalculated balances → capitalized=3489600.0, paid_principal=0, paid_settlement_interest=0, current_balance=3489600.0, top_up_balance=3489600.0, settlement_balance=3489600.0, loan_state=active
2025-06-30 09:14:26,373 - INFO - [136000001] Recalculated balances → capitalized=3489600.0, paid_principal=0, paid_settlement_interest=0, current_balance=3489600.0, top_up_balance=3489600.0, settlement_balance=3489600.0, loan_state=active
2025-06-30 09:14:26,396 - INFO - 127.0.0.1 - - [30/Jun/2025 09:14:26] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-30 09:14:26,417 - INFO - 127.0.0.1 - - [30/Jun/2025 09:14:26] "GET /payments HTTP/1.1" 200 -
2025-06-30 09:14:28,212 - INFO - 127.0.0.1 - - [30/Jun/2025 09:14:28] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 09:14:30,195 - INFO - 127.0.0.1 - - [30/Jun/2025 09:14:30] "GET /loan/136000001/statement HTTP/1.1" 200 -
2025-06-30 09:15:23,525 - INFO - 127.0.0.1 - - [30/Jun/2025 09:15:23] "GET /payments HTTP/1.1" 200 -
2025-06-30 09:15:26,251 - INFO - 127.0.0.1 - - [30/Jun/2025 09:15:26] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 09:15:27,331 - INFO - 127.0.0.1 - - [30/Jun/2025 09:15:27] "GET /loan/136000001/statement HTTP/1.1" 200 -
2025-06-30 09:15:30,981 - INFO - 127.0.0.1 - - [30/Jun/2025 09:15:30] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 09:15:32,461 - INFO - 127.0.0.1 - - [30/Jun/2025 09:15:32] "GET /payments HTTP/1.1" 200 -
2025-06-30 09:15:35,187 - INFO - 127.0.0.1 - - [30/Jun/2025 09:15:35] "GET /api/verify_loan/136000001 HTTP/1.1" 200 -
[2025-06-30 09:15:48,085] INFO in app: [136000001] Recalculated balances → capitalized=3489600.0, paid_principal=0, paid_settlement_interest=0, current_balance=3489600.0, top_up_balance=3489600.0, settlement_balance=3489600.0, loan_state=active
2025-06-30 09:15:48,085 - INFO - [136000001] Recalculated balances → capitalized=3489600.0, paid_principal=0, paid_settlement_interest=0, current_balance=3489600.0, top_up_balance=3489600.0, settlement_balance=3489600.0, loan_state=active
[2025-06-30 09:15:48,097] INFO in app: [136000001] Recalculated balances → capitalized=3489600.0, paid_principal=0, paid_settlement_interest=0, current_balance=3489600.0, top_up_balance=3489600.0, settlement_balance=3489600.0, loan_state=active
2025-06-30 09:15:48,097 - INFO - [136000001] Recalculated balances → capitalized=3489600.0, paid_principal=0, paid_settlement_interest=0, current_balance=3489600.0, top_up_balance=3489600.0, settlement_balance=3489600.0, loan_state=active
2025-06-30 09:15:48,113 - INFO - 127.0.0.1 - - [30/Jun/2025 09:15:48] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-30 09:15:48,129 - INFO - 127.0.0.1 - - [30/Jun/2025 09:15:48] "GET /payments HTTP/1.1" 200 -
2025-06-30 09:15:49,721 - INFO - 127.0.0.1 - - [30/Jun/2025 09:15:49] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 09:15:51,809 - INFO - 127.0.0.1 - - [30/Jun/2025 09:15:51] "GET /loan/136000001/statement HTTP/1.1" 200 -
2025-06-30 09:16:37,794 - INFO - 127.0.0.1 - - [30/Jun/2025 09:16:37] "GET /payments HTTP/1.1" 200 -
2025-06-30 09:16:42,696 - INFO - 127.0.0.1 - - [30/Jun/2025 09:16:42] "GET /api/verify_loan/136000001 HTTP/1.1" 200 -
[2025-06-30 09:17:05,025] INFO in app: [136000001] Recalculated balances → capitalized=3489600.0, paid_principal=0, paid_settlement_interest=0, current_balance=3489600.0, top_up_balance=3489600.0, settlement_balance=3489600.0, loan_state=active
2025-06-30 09:17:05,025 - INFO - [136000001] Recalculated balances → capitalized=3489600.0, paid_principal=0, paid_settlement_interest=0, current_balance=3489600.0, top_up_balance=3489600.0, settlement_balance=3489600.0, loan_state=active
[2025-06-30 09:17:05,041] INFO in app: [136000001] Recalculated balances → capitalized=3489600.0, paid_principal=0, paid_settlement_interest=0, current_balance=3489600.0, top_up_balance=3489600.0, settlement_balance=3489600.0, loan_state=active
2025-06-30 09:17:05,041 - INFO - [136000001] Recalculated balances → capitalized=3489600.0, paid_principal=0, paid_settlement_interest=0, current_balance=3489600.0, top_up_balance=3489600.0, settlement_balance=3489600.0, loan_state=active
2025-06-30 09:17:05,085 - INFO - 127.0.0.1 - - [30/Jun/2025 09:17:05] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-30 09:17:05,310 - INFO - 127.0.0.1 - - [30/Jun/2025 09:17:05] "GET /payments HTTP/1.1" 200 -
2025-06-30 09:17:07,143 - INFO - 127.0.0.1 - - [30/Jun/2025 09:17:07] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 09:17:08,767 - INFO - 127.0.0.1 - - [30/Jun/2025 09:17:08] "GET /loan/136000001/statement HTTP/1.1" 200 -
[2025-06-30 10:00:20,317] INFO in app: ==================================================
[2025-06-30 10:00:20,388] INFO in app: Application logging initialized successfully
[2025-06-30 10:00:20,390] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-30 10:00:20,392] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-30 10:00:20,393] INFO in app: System encoding: utf-8
[2025-06-30 10:00:20,394] INFO in app: ==================================================
2025-06-30 10:26:56,162 - INFO - 127.0.0.1 - - [30/Jun/2025 10:26:56] "GET /loan/136000001/statement HTTP/1.1" 200 -
2025-06-30 10:26:56,931 - INFO - 127.0.0.1 - - [30/Jun/2025 10:26:56] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-30 10:27:00,311 - INFO - 127.0.0.1 - - [30/Jun/2025 10:27:00] "GET /loan/136000001/statement HTTP/1.1" 200 -
2025-06-30 10:27:00,824 - INFO - 127.0.0.1 - - [30/Jun/2025 10:27:00] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-06-30 11:22:56,828] INFO in app: ==================================================
[2025-06-30 11:22:56,835] INFO in app: Application logging initialized successfully
[2025-06-30 11:22:56,837] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-30 11:22:56,839] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-30 11:22:56,840] INFO in app: System encoding: utf-8
[2025-06-30 11:22:56,842] INFO in app: ==================================================
2025-06-30 11:22:57,064 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-30 11:22:57,064 - INFO - [33mPress CTRL+C to quit[0m
2025-06-30 12:06:22,976 - INFO - 127.0.0.1 - - [30/Jun/2025 12:06:22] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 12:06:24,587 - INFO - 127.0.0.1 - - [30/Jun/2025 12:06:24] "GET /loan/136000001/statement HTTP/1.1" 200 -
2025-06-30 12:06:26,818 - INFO - 127.0.0.1 - - [30/Jun/2025 12:06:26] "GET /loanbook HTTP/1.1" 200 -
[2025-06-30 12:06:28,541] INFO in app: Found 1 loans for customer 202506000001
2025-06-30 12:06:28,541 - INFO - Found 1 loans for customer 202506000001
[2025-06-30 12:06:28,546] INFO in app: Customer ID: 1
2025-06-30 12:06:28,546 - INFO - Customer ID: 1
[2025-06-30 12:06:28,563] INFO in app: Found Loans: [('136000001', 'active')]
2025-06-30 12:06:28,563 - INFO - Found Loans: [('136000001', 'active')]
2025-06-30 12:06:28,736 - INFO - 127.0.0.1 - - [30/Jun/2025 12:06:28] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-06-30 12:06:31,617] INFO in app: Found 1 loans for customer 202506000001
2025-06-30 12:06:31,617 - INFO - Found 1 loans for customer 202506000001
[2025-06-30 12:06:31,625] INFO in app: Customer ID: 1
2025-06-30 12:06:31,625 - INFO - Customer ID: 1
[2025-06-30 12:06:31,648] INFO in app: Found Loans: [('136000001', 'active')]
2025-06-30 12:06:31,648 - INFO - Found Loans: [('136000001', 'active')]
2025-06-30 12:06:31,701 - INFO - 127.0.0.1 - - [30/Jun/2025 12:06:31] "GET /customer/202506000001/account?section=additional HTTP/1.1" 200 -
2025-06-30 12:06:57,240 - INFO - 127.0.0.1 - - [30/Jun/2025 12:06:57] "[32mPOST /apply_additional/1 HTTP/1.1[0m" 302 -
[2025-06-30 12:06:57,425] INFO in app: Found 2 loans for customer 202506000001
2025-06-30 12:06:57,425 - INFO - Found 2 loans for customer 202506000001
[2025-06-30 12:06:57,428] INFO in app: Customer ID: 1
2025-06-30 12:06:57,428 - INFO - Customer ID: 1
[2025-06-30 12:06:57,431] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active')]
2025-06-30 12:06:57,431 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active')]
2025-06-30 12:06:57,444 - INFO - 127.0.0.1 - - [30/Jun/2025 12:06:57] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-06-30 12:07:00,064 - INFO - 127.0.0.1 - - [30/Jun/2025 12:07:00] "GET /loans HTTP/1.1" 200 -
2025-06-30 12:07:02,668 - INFO - 127.0.0.1 - - [30/Jun/2025 12:07:02] "[32mPOST /process_loan/2/approve HTTP/1.1[0m" 302 -
2025-06-30 12:07:02,713 - INFO - 127.0.0.1 - - [30/Jun/2025 12:07:02] "GET /loans HTTP/1.1" 200 -
2025-06-30 12:07:06,846 - INFO - 127.0.0.1 - - [30/Jun/2025 12:07:06] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 12:07:10,951 - INFO - 127.0.0.1 - - [30/Jun/2025 12:07:10] "GET /loan/103000002/statement HTTP/1.1" 200 -
2025-06-30 12:07:32,248 - INFO - 127.0.0.1 - - [30/Jun/2025 12:07:32] "GET /payments HTTP/1.1" 200 -
2025-06-30 12:07:34,696 - INFO - 127.0.0.1 - - [30/Jun/2025 12:07:34] "GET /api/verify_loan/103000002 HTTP/1.1" 200 -
[2025-06-30 12:07:50,077] INFO in app: [103000002] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
2025-06-30 12:07:50,077 - INFO - [103000002] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
[2025-06-30 12:07:50,101] INFO in app: [103000002] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
2025-06-30 12:07:50,101 - INFO - [103000002] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
2025-06-30 12:07:50,135 - INFO - 127.0.0.1 - - [30/Jun/2025 12:07:50] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-30 12:07:50,156 - INFO - 127.0.0.1 - - [30/Jun/2025 12:07:50] "GET /payments HTTP/1.1" 200 -
2025-06-30 12:07:52,824 - INFO - 127.0.0.1 - - [30/Jun/2025 12:07:52] "GET /api/verify_loan/103000002 HTTP/1.1" 200 -
[2025-06-30 12:08:04,976] INFO in app: [103000002] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
2025-06-30 12:08:04,976 - INFO - [103000002] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
[2025-06-30 12:08:04,993] INFO in app: [103000002] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
2025-06-30 12:08:04,993 - INFO - [103000002] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
2025-06-30 12:08:05,018 - INFO - 127.0.0.1 - - [30/Jun/2025 12:08:05] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-30 12:08:05,038 - INFO - 127.0.0.1 - - [30/Jun/2025 12:08:05] "GET /payments HTTP/1.1" 200 -
2025-06-30 12:08:07,600 - INFO - 127.0.0.1 - - [30/Jun/2025 12:08:07] "GET /api/verify_loan/103000002 HTTP/1.1" 200 -
[2025-06-30 12:08:20,817] INFO in app: [103000002] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
2025-06-30 12:08:20,817 - INFO - [103000002] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
[2025-06-30 12:08:20,832] INFO in app: [103000002] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
2025-06-30 12:08:20,832 - INFO - [103000002] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
2025-06-30 12:08:20,856 - INFO - 127.0.0.1 - - [30/Jun/2025 12:08:20] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-30 12:08:20,877 - INFO - 127.0.0.1 - - [30/Jun/2025 12:08:20] "GET /payments HTTP/1.1" 200 -
2025-06-30 12:08:21,962 - INFO - 127.0.0.1 - - [30/Jun/2025 12:08:21] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 12:08:25,001 - INFO - 127.0.0.1 - - [30/Jun/2025 12:08:25] "GET /loan/103000002/statement HTTP/1.1" 200 -
2025-06-30 12:08:54,609 - INFO - 127.0.0.1 - - [30/Jun/2025 12:08:54] "GET /loanbook HTTP/1.1" 200 -
[2025-06-30 12:08:57,438] INFO in app: Found 2 loans for customer 202506000001
2025-06-30 12:08:57,438 - INFO - Found 2 loans for customer 202506000001
[2025-06-30 12:08:57,449] INFO in app: Customer ID: 1
2025-06-30 12:08:57,449 - INFO - Customer ID: 1
[2025-06-30 12:08:57,461] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active')]
2025-06-30 12:08:57,461 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active')]
2025-06-30 12:08:57,504 - INFO - 127.0.0.1 - - [30/Jun/2025 12:08:57] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-06-30 12:08:58,665] INFO in app: Found 2 loans for customer 202506000001
2025-06-30 12:08:58,665 - INFO - Found 2 loans for customer 202506000001
[2025-06-30 12:08:58,671] INFO in app: Customer ID: 1
2025-06-30 12:08:58,671 - INFO - Customer ID: 1
[2025-06-30 12:08:58,687] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active')]
2025-06-30 12:08:58,687 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active')]
2025-06-30 12:08:58,724 - INFO - 127.0.0.1 - - [30/Jun/2025 12:08:58] "GET /customer/202506000001/account?section=additional HTTP/1.1" 200 -
2025-06-30 12:09:22,047 - INFO - 127.0.0.1 - - [30/Jun/2025 12:09:22] "[32mPOST /apply_additional/1 HTTP/1.1[0m" 302 -
[2025-06-30 12:09:22,334] INFO in app: Found 3 loans for customer 202506000001
2025-06-30 12:09:22,334 - INFO - Found 3 loans for customer 202506000001
[2025-06-30 12:09:22,348] INFO in app: Customer ID: 1
2025-06-30 12:09:22,348 - INFO - Customer ID: 1
[2025-06-30 12:09:22,354] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active')]
2025-06-30 12:09:22,354 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active')]
2025-06-30 12:09:22,422 - INFO - 127.0.0.1 - - [30/Jun/2025 12:09:22] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
[2025-06-30 12:09:28,477] INFO in app: Found 3 loans for customer 202506000001
2025-06-30 12:09:28,477 - INFO - Found 3 loans for customer 202506000001
[2025-06-30 12:09:28,482] INFO in app: Customer ID: 1
2025-06-30 12:09:28,482 - INFO - Customer ID: 1
[2025-06-30 12:09:28,493] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active')]
2025-06-30 12:09:28,493 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active')]
2025-06-30 12:09:28,560 - INFO - 127.0.0.1 - - [30/Jun/2025 12:09:28] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-06-30 12:09:53,003] INFO in app: [TOPUP] Submit route hit for loan 3
2025-06-30 12:09:53,003 - INFO - [TOPUP] Submit route hit for loan 3
2025-06-30 12:09:53,025 - DEBUG - [DEBUG] Balance calc for base loan #112000003: 1475342.79
2025-06-30 12:09:53,181 - INFO - 127.0.0.1 - - [30/Jun/2025 12:09:53] "[32mPOST /topup/3 HTTP/1.1[0m" 302 -
[2025-06-30 12:09:53,255] INFO in app: Found 4 loans for customer 202506000001
2025-06-30 12:09:53,255 - INFO - Found 4 loans for customer 202506000001
[2025-06-30 12:09:53,267] INFO in app: Customer ID: 1
2025-06-30 12:09:53,267 - INFO - Customer ID: 1
[2025-06-30 12:09:53,272] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'application')]
2025-06-30 12:09:53,272 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'application')]
2025-06-30 12:09:53,295 - INFO - 127.0.0.1 - - [30/Jun/2025 12:09:53] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-06-30 12:11:57,499] INFO in app: Found 4 loans for customer 202506000001
2025-06-30 12:11:57,499 - INFO - Found 4 loans for customer 202506000001
[2025-06-30 12:11:57,504] INFO in app: Customer ID: 1
2025-06-30 12:11:57,504 - INFO - Customer ID: 1
[2025-06-30 12:11:57,512] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'application')]
2025-06-30 12:11:57,512 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'application')]
2025-06-30 12:11:57,586 - INFO - 127.0.0.1 - - [30/Jun/2025 12:11:57] "GET /customer/202506000001/account?section=settlement HTTP/1.1" 200 -
2025-06-30 12:12:16,719 - INFO - 127.0.0.1 - - [30/Jun/2025 12:12:16] "[32mPOST /settle_loan/3 HTTP/1.1[0m" 302 -
[2025-06-30 12:12:16,748] INFO in app: Found 4 loans for customer 202506000001
2025-06-30 12:12:16,748 - INFO - Found 4 loans for customer 202506000001
[2025-06-30 12:12:16,752] INFO in app: Customer ID: 1
2025-06-30 12:12:16,752 - INFO - Customer ID: 1
[2025-06-30 12:12:16,759] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'application')]
2025-06-30 12:12:16,759 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'application')]
2025-06-30 12:12:16,791 - INFO - 127.0.0.1 - - [30/Jun/2025 12:12:16] "GET /customer/202506000001/account?section=settlement HTTP/1.1" 200 -
[2025-06-30 12:12:30,285] INFO in app: [112000003] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
2025-06-30 12:12:30,285 - INFO - [112000003] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
2025-06-30 12:12:30,345 - INFO - 127.0.0.1 - - [30/Jun/2025 12:12:30] "[32mPOST /settle_loan/3 HTTP/1.1[0m" 302 -
[2025-06-30 12:12:30,372] INFO in app: Found 4 loans for customer 202506000001
2025-06-30 12:12:30,372 - INFO - Found 4 loans for customer 202506000001
[2025-06-30 12:12:30,378] INFO in app: Customer ID: 1
2025-06-30 12:12:30,378 - INFO - Customer ID: 1
[2025-06-30 12:12:30,384] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'settled_client'), ('103000004', 'application')]
2025-06-30 12:12:30,384 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'settled_client'), ('103000004', 'application')]
2025-06-30 12:12:30,414 - INFO - 127.0.0.1 - - [30/Jun/2025 12:12:30] "GET /customer/202506000001/account?section=settlement HTTP/1.1" 200 -
[2025-06-30 12:12:37,148] INFO in app: Found 4 loans for customer 202506000001
2025-06-30 12:12:37,148 - INFO - Found 4 loans for customer 202506000001
[2025-06-30 12:12:37,169] INFO in app: Customer ID: 1
2025-06-30 12:12:37,169 - INFO - Customer ID: 1
[2025-06-30 12:12:37,179] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'settled_client'), ('103000004', 'application')]
2025-06-30 12:12:37,179 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'settled_client'), ('103000004', 'application')]
2025-06-30 12:12:37,228 - INFO - 127.0.0.1 - - [30/Jun/2025 12:12:37] "GET /customer/202506000001/account?section=additional HTTP/1.1" 200 -
2025-06-30 12:12:59,579 - INFO - 127.0.0.1 - - [30/Jun/2025 12:12:59] "[32mPOST /apply_additional/1 HTTP/1.1[0m" 302 -
[2025-06-30 12:12:59,814] INFO in app: Found 5 loans for customer 202506000001
2025-06-30 12:12:59,814 - INFO - Found 5 loans for customer 202506000001
[2025-06-30 12:12:59,827] INFO in app: Customer ID: 1
2025-06-30 12:12:59,827 - INFO - Customer ID: 1
[2025-06-30 12:12:59,952] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'settled_client'), ('103000004', 'application'), ('118000005', 'active')]
2025-06-30 12:12:59,952 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'settled_client'), ('103000004', 'application'), ('118000005', 'active')]
2025-06-30 12:13:00,064 - INFO - 127.0.0.1 - - [30/Jun/2025 12:13:00] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-06-30 12:13:02,483 - INFO - 127.0.0.1 - - [30/Jun/2025 12:13:02] "GET /loans HTTP/1.1" 200 -
2025-06-30 12:13:04,192 - INFO - 127.0.0.1 - - [30/Jun/2025 12:13:04] "[32mPOST /process_loan/3/approve HTTP/1.1[0m" 302 -
2025-06-30 12:13:04,251 - INFO - 127.0.0.1 - - [30/Jun/2025 12:13:04] "GET /loans HTTP/1.1" 200 -
2025-06-30 12:13:07,227 - INFO - 127.0.0.1 - - [30/Jun/2025 12:13:07] "[32mPOST /process_loan/5/approve HTTP/1.1[0m" 302 -
2025-06-30 12:13:07,537 - INFO - 127.0.0.1 - - [30/Jun/2025 12:13:07] "GET /loans HTTP/1.1" 200 -
2025-06-30 12:13:10,889 - INFO - 127.0.0.1 - - [30/Jun/2025 12:13:10] "[32mPOST /process_loan/4/approve HTTP/1.1[0m" 302 -
2025-06-30 12:13:10,922 - INFO - 127.0.0.1 - - [30/Jun/2025 12:13:10] "GET /loans HTTP/1.1" 200 -
2025-06-30 12:13:16,732 - INFO - 127.0.0.1 - - [30/Jun/2025 12:13:16] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 12:13:25,879 - INFO - 127.0.0.1 - - [30/Jun/2025 12:13:25] "GET /loan/103000002/statement HTTP/1.1" 200 -
2025-06-30 12:13:32,348 - INFO - 127.0.0.1 - - [30/Jun/2025 12:13:32] "GET /payments HTTP/1.1" 200 -
2025-06-30 12:13:33,603 - INFO - 127.0.0.1 - - [30/Jun/2025 12:13:33] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 12:13:35,311 - INFO - 127.0.0.1 - - [30/Jun/2025 12:13:35] "GET /loan/112000003/statement HTTP/1.1" 200 -
2025-06-30 12:13:59,661 - INFO - 127.0.0.1 - - [30/Jun/2025 12:13:59] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 12:14:02,385 - INFO - 127.0.0.1 - - [30/Jun/2025 12:14:02] "GET /loan/118000005/statement HTTP/1.1" 200 -
2025-06-30 12:14:05,295 - INFO - 127.0.0.1 - - [30/Jun/2025 12:14:05] "GET /loanbook HTTP/1.1" 200 -
[2025-06-30 12:14:06,518] INFO in app: Found 5 loans for customer 202506000001
2025-06-30 12:14:06,518 - INFO - Found 5 loans for customer 202506000001
[2025-06-30 12:14:06,545] INFO in app: Customer ID: 1
2025-06-30 12:14:06,545 - INFO - Customer ID: 1
[2025-06-30 12:14:06,580] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:14:06,580 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:14:06,615 - INFO - 127.0.0.1 - - [30/Jun/2025 12:14:06] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-06-30 12:14:08,042] INFO in app: Found 5 loans for customer 202506000001
2025-06-30 12:14:08,042 - INFO - Found 5 loans for customer 202506000001
[2025-06-30 12:14:08,056] INFO in app: Customer ID: 1
2025-06-30 12:14:08,056 - INFO - Customer ID: 1
[2025-06-30 12:14:08,068] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:14:08,068 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:14:08,122 - INFO - 127.0.0.1 - - [30/Jun/2025 12:14:08] "GET /customer/202506000001/account?section=settlement HTTP/1.1" 200 -
[2025-06-30 12:14:24,567] ERROR in app: Settlement error for loan 4: 'NoneType' object has no attribute 'lower'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 4540, in settle_loan
    loan.settlement_reason = reason  # Now guaranteed non-None for required types
    ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 537, in __set__
    self.impl.set(
    ~~~~~~~~~~~~~^
        instance_state(instance), instance_dict(instance), value, None
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1277, in set
    value = self.fire_replace_event(
        state, dict_, value, old, initiator
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1292, in fire_replace_event
    value = fn(
        state, value, previous, initiator or self._replace_token
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 2579, in wrap
    return fn(target, *arg)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\util.py", line 307, in set_
    return validator(state.obj(), key, value)
  File "C:\Users\pc\loan-app\app.py", line 635, in validate_reason
    if value.lower() not in allowed_reasons:
       ^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'lower'
2025-06-30 12:14:24,567 - ERROR - Settlement error for loan 4: 'NoneType' object has no attribute 'lower'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 4540, in settle_loan
    loan.settlement_reason = reason  # Now guaranteed non-None for required types
    ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 537, in __set__
    self.impl.set(
    ~~~~~~~~~~~~~^
        instance_state(instance), instance_dict(instance), value, None
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1277, in set
    value = self.fire_replace_event(
        state, dict_, value, old, initiator
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1292, in fire_replace_event
    value = fn(
        state, value, previous, initiator or self._replace_token
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\events.py", line 2579, in wrap
    return fn(target, *arg)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\util.py", line 307, in set_
    return validator(state.obj(), key, value)
  File "C:\Users\pc\loan-app\app.py", line 635, in validate_reason
    if value.lower() not in allowed_reasons:
       ^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'lower'
2025-06-30 12:14:24,722 - INFO - 127.0.0.1 - - [30/Jun/2025 12:14:24] "[32mPOST /settle_loan/4 HTTP/1.1[0m" 302 -
[2025-06-30 12:14:24,868] INFO in app: Found 5 loans for customer 202506000001
2025-06-30 12:14:24,868 - INFO - Found 5 loans for customer 202506000001
[2025-06-30 12:14:24,877] INFO in app: Customer ID: 1
2025-06-30 12:14:24,877 - INFO - Customer ID: 1
[2025-06-30 12:14:24,886] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:14:24,886 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:14:24,958 - INFO - 127.0.0.1 - - [30/Jun/2025 12:14:24] "GET /customer/202506000001/account?section=settlement HTTP/1.1" 200 -
2025-06-30 12:14:41,201 - INFO - 127.0.0.1 - - [30/Jun/2025 12:14:41] "[32mPOST /settle_loan/4 HTTP/1.1[0m" 302 -
[2025-06-30 12:14:41,228] INFO in app: Found 5 loans for customer 202506000001
2025-06-30 12:14:41,228 - INFO - Found 5 loans for customer 202506000001
[2025-06-30 12:14:41,234] INFO in app: Customer ID: 1
2025-06-30 12:14:41,234 - INFO - Customer ID: 1
[2025-06-30 12:14:41,240] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:14:41,240 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:14:41,328 - INFO - 127.0.0.1 - - [30/Jun/2025 12:14:41] "GET /customer/202506000001/account?section=settlement HTTP/1.1" 200 -
2025-06-30 12:14:49,092 - INFO - 127.0.0.1 - - [30/Jun/2025 12:14:49] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 12:14:51,892 - INFO - 127.0.0.1 - - [30/Jun/2025 12:14:51] "GET /loan/118000005/statement HTTP/1.1" 200 -
2025-06-30 12:14:56,209 - INFO - 127.0.0.1 - - [30/Jun/2025 12:14:56] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 12:14:57,719 - INFO - 127.0.0.1 - - [30/Jun/2025 12:14:57] "GET /payments HTTP/1.1" 200 -
2025-06-30 12:15:00,444 - INFO - 127.0.0.1 - - [30/Jun/2025 12:15:00] "GET /api/verify_loan/118000005 HTTP/1.1" 200 -
[2025-06-30 12:15:14,366] INFO in app: [118000005] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
2025-06-30 12:15:14,366 - INFO - [118000005] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
[2025-06-30 12:15:14,377] INFO in app: [118000005] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
2025-06-30 12:15:14,377 - INFO - [118000005] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
2025-06-30 12:15:14,387 - INFO - 127.0.0.1 - - [30/Jun/2025 12:15:14] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-06-30 12:15:14,678 - INFO - 127.0.0.1 - - [30/Jun/2025 12:15:14] "GET /payments HTTP/1.1" 200 -
2025-06-30 12:15:16,116 - INFO - 127.0.0.1 - - [30/Jun/2025 12:15:16] "GET /loanbook HTTP/1.1" 200 -
[2025-06-30 12:15:23,255] INFO in app: Found 5 loans for customer 202506000001
2025-06-30 12:15:23,255 - INFO - Found 5 loans for customer 202506000001
[2025-06-30 12:15:23,263] INFO in app: Customer ID: 1
2025-06-30 12:15:23,263 - INFO - Customer ID: 1
[2025-06-30 12:15:23,274] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:15:23,274 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:15:23,332 - INFO - 127.0.0.1 - - [30/Jun/2025 12:15:23] "GET /customer/202506000001/account HTTP/1.1" 200 -
2025-06-30 12:15:28,539 - INFO - 127.0.0.1 - - [30/Jun/2025 12:15:28] "GET /loan/118000005/statement HTTP/1.1" 200 -
2025-06-30 12:15:43,731 - INFO - 127.0.0.1 - - [30/Jun/2025 12:15:43] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 12:15:47,375 - INFO - 127.0.0.1 - - [30/Jun/2025 12:15:47] "GET /loan/118000005/statement HTTP/1.1" 200 -
2025-06-30 12:15:49,146 - INFO - 127.0.0.1 - - [30/Jun/2025 12:15:49] "GET /loanbook HTTP/1.1" 200 -
[2025-06-30 12:15:51,890] INFO in app: Found 5 loans for customer 202506000001
2025-06-30 12:15:51,890 - INFO - Found 5 loans for customer 202506000001
[2025-06-30 12:15:51,898] INFO in app: Customer ID: 1
2025-06-30 12:15:51,898 - INFO - Customer ID: 1
[2025-06-30 12:15:51,907] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:15:51,907 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:15:51,962 - INFO - 127.0.0.1 - - [30/Jun/2025 12:15:51] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-06-30 12:15:53,161] INFO in app: Found 5 loans for customer 202506000001
2025-06-30 12:15:53,161 - INFO - Found 5 loans for customer 202506000001
[2025-06-30 12:15:53,167] INFO in app: Customer ID: 1
2025-06-30 12:15:53,167 - INFO - Customer ID: 1
[2025-06-30 12:15:53,184] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:15:53,184 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:15:53,242 - INFO - 127.0.0.1 - - [30/Jun/2025 12:15:53] "GET /customer/202506000001/account?section=settlement HTTP/1.1" 200 -
2025-06-30 12:16:10,957 - INFO - 127.0.0.1 - - [30/Jun/2025 12:16:10] "GET /loanbook HTTP/1.1" 200 -
[2025-06-30 12:16:12,732] INFO in app: Found 5 loans for customer 202506000001
2025-06-30 12:16:12,732 - INFO - Found 5 loans for customer 202506000001
[2025-06-30 12:16:12,742] INFO in app: Customer ID: 1
2025-06-30 12:16:12,742 - INFO - Customer ID: 1
[2025-06-30 12:16:12,750] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:16:12,750 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:16:12,800 - INFO - 127.0.0.1 - - [30/Jun/2025 12:16:12] "GET /customer/202506000001/account HTTP/1.1" 200 -
2025-06-30 12:16:14,652 - INFO - 127.0.0.1 - - [30/Jun/2025 12:16:14] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 12:16:15,719 - INFO - 127.0.0.1 - - [30/Jun/2025 12:16:15] "GET /loan/118000005/statement HTTP/1.1" 200 -
2025-06-30 12:16:21,475 - INFO - 127.0.0.1 - - [30/Jun/2025 12:16:21] "GET /loanbook HTTP/1.1" 200 -
[2025-06-30 12:16:23,084] INFO in app: Found 5 loans for customer 202506000001
2025-06-30 12:16:23,084 - INFO - Found 5 loans for customer 202506000001
[2025-06-30 12:16:23,096] INFO in app: Customer ID: 1
2025-06-30 12:16:23,096 - INFO - Customer ID: 1
[2025-06-30 12:16:23,102] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:16:23,102 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:16:23,163 - INFO - 127.0.0.1 - - [30/Jun/2025 12:16:23] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-06-30 12:16:24,422] INFO in app: Found 5 loans for customer 202506000001
2025-06-30 12:16:24,422 - INFO - Found 5 loans for customer 202506000001
[2025-06-30 12:16:24,433] INFO in app: Customer ID: 1
2025-06-30 12:16:24,433 - INFO - Customer ID: 1
[2025-06-30 12:16:24,439] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:16:24,439 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:16:24,505 - INFO - 127.0.0.1 - - [30/Jun/2025 12:16:24] "GET /customer/202506000001/account?section=settlement HTTP/1.1" 200 -
2025-06-30 12:16:32,543 - INFO - 127.0.0.1 - - [30/Jun/2025 12:16:32] "[32mPOST /settle_loan/5 HTTP/1.1[0m" 302 -
[2025-06-30 12:16:32,850] INFO in app: Found 5 loans for customer 202506000001
2025-06-30 12:16:32,850 - INFO - Found 5 loans for customer 202506000001
[2025-06-30 12:16:32,858] INFO in app: Customer ID: 1
2025-06-30 12:16:32,858 - INFO - Customer ID: 1
[2025-06-30 12:16:32,868] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:16:32,868 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:16:32,904 - INFO - 127.0.0.1 - - [30/Jun/2025 12:16:32] "GET /customer/202506000001/account?section=settlement HTTP/1.1" 200 -
[2025-06-30 12:16:48,552] INFO in app: [118000005] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
2025-06-30 12:16:48,552 - INFO - [118000005] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
[2025-06-30 12:16:48,565] ERROR in app: Settlement error for loan 5: 'Payment' object has no attribute 'allocation'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 4575, in settle_loan
    bal = calculate_balances(loan)
  File "C:\Users\pc\loan-app\app.py", line 2706, in calculate_balances
    if p.allocation and p.allocation.principal:
       ^^^^^^^^^^^^
AttributeError: 'Payment' object has no attribute 'allocation'. Did you mean: 'allocations'?
2025-06-30 12:16:48,565 - ERROR - Settlement error for loan 5: 'Payment' object has no attribute 'allocation'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 4575, in settle_loan
    bal = calculate_balances(loan)
  File "C:\Users\pc\loan-app\app.py", line 2706, in calculate_balances
    if p.allocation and p.allocation.principal:
       ^^^^^^^^^^^^
AttributeError: 'Payment' object has no attribute 'allocation'. Did you mean: 'allocations'?
2025-06-30 12:16:48,584 - INFO - 127.0.0.1 - - [30/Jun/2025 12:16:48] "[32mPOST /settle_loan/5 HTTP/1.1[0m" 302 -
[2025-06-30 12:16:48,616] INFO in app: Found 5 loans for customer 202506000001
2025-06-30 12:16:48,616 - INFO - Found 5 loans for customer 202506000001
[2025-06-30 12:16:48,626] INFO in app: Customer ID: 1
2025-06-30 12:16:48,626 - INFO - Customer ID: 1
[2025-06-30 12:16:48,630] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:16:48,630 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:16:48,666 - INFO - 127.0.0.1 - - [30/Jun/2025 12:16:48] "GET /customer/202506000001/account?section=settlement HTTP/1.1" 200 -
[2025-06-30 12:26:52,500] INFO in app: Found 5 loans for customer 202506000001
2025-06-30 12:26:52,500 - INFO - Found 5 loans for customer 202506000001
[2025-06-30 12:26:52,504] INFO in app: Customer ID: 1
2025-06-30 12:26:52,504 - INFO - Customer ID: 1
[2025-06-30 12:26:52,511] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:26:52,511 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:26:52,568 - INFO - 127.0.0.1 - - [30/Jun/2025 12:26:52] "GET /customer/202506000001/account?section=additional HTTP/1.1" 200 -
[2025-06-30 12:26:56,265] INFO in app: Found 5 loans for customer 202506000001
2025-06-30 12:26:56,265 - INFO - Found 5 loans for customer 202506000001
[2025-06-30 12:26:56,271] INFO in app: Customer ID: 1
2025-06-30 12:26:56,271 - INFO - Customer ID: 1
[2025-06-30 12:26:56,286] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:26:56,286 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:26:56,336 - INFO - 127.0.0.1 - - [30/Jun/2025 12:26:56] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-06-30 12:27:48,083] INFO in app: [TOPUP] Submit route hit for loan 5
2025-06-30 12:27:48,083 - INFO - [TOPUP] Submit route hit for loan 5
2025-06-30 12:27:48,101 - INFO - 127.0.0.1 - - [30/Jun/2025 12:27:48] "[32mPOST /topup/5 HTTP/1.1[0m" 302 -
[2025-06-30 12:27:48,395] INFO in app: Found 5 loans for customer 202506000001
2025-06-30 12:27:48,395 - INFO - Found 5 loans for customer 202506000001
[2025-06-30 12:27:48,402] INFO in app: Customer ID: 1
2025-06-30 12:27:48,402 - INFO - Customer ID: 1
[2025-06-30 12:27:48,411] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:27:48,411 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 12:27:48,483 - INFO - 127.0.0.1 - - [30/Jun/2025 12:27:48] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-06-30 15:27:26,652] INFO in app: ==================================================
[2025-06-30 15:27:26,733] INFO in app: Application logging initialized successfully
[2025-06-30 15:27:26,735] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-30 15:27:26,737] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-30 15:27:26,739] INFO in app: System encoding: utf-8
[2025-06-30 15:27:26,742] INFO in app: ==================================================
2025-06-30 15:27:27,091 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-30 15:27:27,091 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-30 15:30:21,746] INFO in app: Found 5 loans for customer 202506000001
2025-06-30 15:30:21,746 - INFO - Found 5 loans for customer 202506000001
[2025-06-30 15:30:21,749] INFO in app: Customer ID: 1
2025-06-30 15:30:21,749 - INFO - Customer ID: 1
[2025-06-30 15:30:21,752] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 15:30:21,752 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active')]
2025-06-30 15:30:21,875 - INFO - 127.0.0.1 - - [30/Jun/2025 15:30:21] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
2025-06-30 15:30:22,548 - INFO - 127.0.0.1 - - [30/Jun/2025 15:30:22] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-06-30 15:30:44,521] INFO in app: [TOPUP] Submit route hit for loan 5
2025-06-30 15:30:44,521 - INFO - [TOPUP] Submit route hit for loan 5
2025-06-30 15:30:44,532 - DEBUG - [DEBUG] Balance calc for base loan #118000005: 1418470.87
2025-06-30 15:30:44,586 - INFO - 127.0.0.1 - - [30/Jun/2025 15:30:44] "[32mPOST /topup/5 HTTP/1.1[0m" 302 -
[2025-06-30 15:30:44,815] INFO in app: Found 6 loans for customer 202506000001
2025-06-30 15:30:44,815 - INFO - Found 6 loans for customer 202506000001
[2025-06-30 15:30:44,819] INFO in app: Customer ID: 1
2025-06-30 15:30:44,819 - INFO - Customer ID: 1
[2025-06-30 15:30:44,823] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active'), ('103000006', 'application')]
2025-06-30 15:30:44,823 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active'), ('103000006', 'application')]
2025-06-30 15:30:44,856 - INFO - 127.0.0.1 - - [30/Jun/2025 15:30:44] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-06-30 16:12:01,149] INFO in app: Found 6 loans for customer 202506000001
2025-06-30 16:12:01,149 - INFO - Found 6 loans for customer 202506000001
[2025-06-30 16:12:01,154] INFO in app: Customer ID: 1
2025-06-30 16:12:01,154 - INFO - Customer ID: 1
[2025-06-30 16:12:01,159] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active'), ('103000006', 'application')]
2025-06-30 16:12:01,159 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active'), ('103000006', 'application')]
2025-06-30 16:12:01,185 - INFO - 127.0.0.1 - - [30/Jun/2025 16:12:01] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
2025-06-30 16:12:01,859 - INFO - 127.0.0.1 - - [30/Jun/2025 16:12:01] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-06-30 16:13:21,695] INFO in app: [TOPUP] Submit route hit for loan 5
2025-06-30 16:13:21,695 - INFO - [TOPUP] Submit route hit for loan 5
2025-06-30 16:13:21,704 - DEBUG - [DEBUG] Balance calc for base loan #118000005: 1418470.87
2025-06-30 16:13:21,840 - INFO - 127.0.0.1 - - [30/Jun/2025 16:13:21] "[32mPOST /topup/5 HTTP/1.1[0m" 302 -
[2025-06-30 16:13:21,869] INFO in app: Found 7 loans for customer 202506000001
2025-06-30 16:13:21,869 - INFO - Found 7 loans for customer 202506000001
[2025-06-30 16:13:21,871] INFO in app: Customer ID: 1
2025-06-30 16:13:21,871 - INFO - Customer ID: 1
[2025-06-30 16:13:21,873] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active'), ('103000006', 'application'), ('103000007', 'application')]
2025-06-30 16:13:21,873 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active'), ('103000006', 'application'), ('103000007', 'application')]
2025-06-30 16:13:21,895 - INFO - 127.0.0.1 - - [30/Jun/2025 16:13:21] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-06-30 16:16:15,150] INFO in app: ==================================================
[2025-06-30 16:16:15,156] INFO in app: Application logging initialized successfully
[2025-06-30 16:16:15,158] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-30 16:16:15,160] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-30 16:16:15,162] INFO in app: System encoding: utf-8
[2025-06-30 16:16:15,164] INFO in app: ==================================================
2025-06-30 16:16:15,350 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-30 16:16:15,350 - INFO - [33mPress CTRL+C to quit[0m
[2025-06-30 16:16:18,247] INFO in app: Found 7 loans for customer 202506000001
2025-06-30 16:16:18,247 - INFO - Found 7 loans for customer 202506000001
[2025-06-30 16:16:18,251] INFO in app: Customer ID: 1
2025-06-30 16:16:18,251 - INFO - Customer ID: 1
[2025-06-30 16:16:18,253] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active'), ('103000006', 'application'), ('103000007', 'application')]
2025-06-30 16:16:18,253 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active'), ('103000006', 'application'), ('103000007', 'application')]
2025-06-30 16:16:18,320 - INFO - 127.0.0.1 - - [30/Jun/2025 16:16:18] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
2025-06-30 16:16:19,072 - INFO - 127.0.0.1 - - [30/Jun/2025 16:16:19] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-30 16:16:25,503 - INFO - 127.0.0.1 - - [30/Jun/2025 16:16:25] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 16:16:40,913 - INFO - 127.0.0.1 - - [30/Jun/2025 16:16:40] "GET /loan/103000007/statement HTTP/1.1" 200 -
2025-06-30 16:16:44,936 - INFO - 127.0.0.1 - - [30/Jun/2025 16:16:44] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 16:16:51,697 - INFO - 127.0.0.1 - - [30/Jun/2025 16:16:51] "GET /loan/118000005/statement HTTP/1.1" 200 -
2025-06-30 16:17:15,976 - INFO - 127.0.0.1 - - [30/Jun/2025 16:17:15] "GET /loans HTTP/1.1" 200 -
2025-06-30 16:17:19,114 - INFO - 127.0.0.1 - - [30/Jun/2025 16:17:19] "[32mPOST /process_loan/6/approve HTTP/1.1[0m" 302 -
2025-06-30 16:17:19,445 - INFO - 127.0.0.1 - - [30/Jun/2025 16:17:19] "GET /loans HTTP/1.1" 200 -
2025-06-30 16:17:22,501 - INFO - 127.0.0.1 - - [30/Jun/2025 16:17:22] "[32mPOST /process_loan/7/approve HTTP/1.1[0m" 302 -
2025-06-30 16:17:22,525 - INFO - 127.0.0.1 - - [30/Jun/2025 16:17:22] "GET /loans HTTP/1.1" 200 -
[2025-06-30 16:17:25,377] INFO in app: [DISBURSEMENT] Loan #136000001 | Top-up of: None | Cash to Client: 2600000.0
2025-06-30 16:17:25,377 - INFO - [DISBURSEMENT] Loan #136000001 | Top-up of: None | Cash to Client: 2600000.0
[2025-06-30 16:17:25,381] INFO in app: [DISBURSEMENT] Loan #103000002 | Top-up of: None | Cash to Client: 1000000.0
2025-06-30 16:17:25,381 - INFO - [DISBURSEMENT] Loan #103000002 | Top-up of: None | Cash to Client: 1000000.0
[2025-06-30 16:17:25,383] INFO in app: [DISBURSEMENT] Loan #112000003 | Top-up of: None | Cash to Client: 1000000.0
2025-06-30 16:17:25,383 - INFO - [DISBURSEMENT] Loan #112000003 | Top-up of: None | Cash to Client: 1000000.0
[2025-06-30 16:17:25,385] INFO in app: [DISBURSEMENT] Loan #103000004 | Top-up of: 3 | Cash to Client: 524657.21
2025-06-30 16:17:25,385 - INFO - [DISBURSEMENT] Loan #103000004 | Top-up of: 3 | Cash to Client: 524657.21
[2025-06-30 16:17:25,387] INFO in app: [DISBURSEMENT] Loan #118000005 | Top-up of: None | Cash to Client: 1000000.0
2025-06-30 16:17:25,387 - INFO - [DISBURSEMENT] Loan #118000005 | Top-up of: None | Cash to Client: 1000000.0
[2025-06-30 16:17:25,389] INFO in app: [DISBURSEMENT] Loan #103000006 | Top-up of: 5 | Cash to Client: 581529.13
2025-06-30 16:17:25,389 - INFO - [DISBURSEMENT] Loan #103000006 | Top-up of: 5 | Cash to Client: 581529.13
[2025-06-30 16:17:25,395] INFO in app: [DISBURSEMENT] Loan #103000007 | Top-up of: 5 | Cash to Client: 581529.13
2025-06-30 16:17:25,395 - INFO - [DISBURSEMENT] Loan #103000007 | Top-up of: 5 | Cash to Client: 581529.13
2025-06-30 16:17:25,407 - INFO - 127.0.0.1 - - [30/Jun/2025 16:17:25] "GET /disbursements HTTP/1.1" 200 -
2025-06-30 16:17:33,166 - INFO - 127.0.0.1 - - [30/Jun/2025 16:17:33] "GET /payments HTTP/1.1" 200 -
2025-06-30 16:17:34,201 - INFO - 127.0.0.1 - - [30/Jun/2025 16:17:34] "GET /loanbook HTTP/1.1" 200 -
[2025-06-30 21:11:26,986] INFO in app: ==================================================
[2025-06-30 21:11:27,151] INFO in app: Application logging initialized successfully
[2025-06-30 21:11:27,162] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-30 21:11:27,165] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-30 21:11:27,179] INFO in app: System encoding: utf-8
[2025-06-30 21:11:27,309] INFO in app: ==================================================
2025-06-30 21:11:28,010 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-06-30 21:11:28,011 - INFO - [33mPress CTRL+C to quit[0m
2025-06-30 21:12:14,903 - INFO - 127.0.0.1 - - [30/Jun/2025 21:12:14] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 21:12:15,382 - INFO - 127.0.0.1 - - [30/Jun/2025 21:12:15] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 21:12:54,203 - INFO - 127.0.0.1 - - [30/Jun/2025 21:12:54] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-30 21:25:17,323 - INFO - 127.0.0.1 - - [30/Jun/2025 21:25:17] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 21:25:43,531 - INFO - 127.0.0.1 - - [30/Jun/2025 21:25:43] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-06-30 21:26:35,168] INFO in app: Found 7 loans for customer 202506000001
2025-06-30 21:26:35,168 - INFO - Found 7 loans for customer 202506000001
[2025-06-30 21:26:35,171] INFO in app: Customer ID: 1
2025-06-30 21:26:35,171 - INFO - Customer ID: 1
[2025-06-30 21:26:35,181] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active'), ('103000006', 'active'), ('103000007', 'active')]
2025-06-30 21:26:35,181 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active'), ('103000006', 'active'), ('103000007', 'active')]
2025-06-30 21:26:35,276 - INFO - 127.0.0.1 - - [30/Jun/2025 21:26:35] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-06-30 21:26:37,626] INFO in app: Found 7 loans for customer 202506000001
2025-06-30 21:26:37,626 - INFO - Found 7 loans for customer 202506000001
[2025-06-30 21:26:37,628] INFO in app: Customer ID: 1
2025-06-30 21:26:37,628 - INFO - Customer ID: 1
[2025-06-30 21:26:37,634] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active'), ('103000006', 'active'), ('103000007', 'active')]
2025-06-30 21:26:37,634 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'active'), ('103000006', 'active'), ('103000007', 'active')]
2025-06-30 21:26:37,657 - INFO - 127.0.0.1 - - [30/Jun/2025 21:26:37] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-06-30 21:27:11,205] INFO in app: [TOPUP] Submit route hit for loan 5
2025-06-30 21:27:11,205 - INFO - [TOPUP] Submit route hit for loan 5
2025-06-30 21:27:11,231 - DEBUG - [DEBUG] Balance calc for base loan #118000005: 1418470.87
[2025-06-30 21:27:11,277] INFO in app: [118000005] Schedule 56 → Paid: fees=11200.0, interest=45119.98, principal=56777.86
2025-06-30 21:27:11,277 - INFO - [118000005] Schedule 56 → Paid: fees=11200.0, interest=45119.98, principal=56777.86
[2025-06-30 21:27:11,280] INFO in app: [118000005] Schedule 57 → Paid: fees=11200.0, interest=43132.75, principal=58765.08
2025-06-30 21:27:11,280 - INFO - [118000005] Schedule 57 → Paid: fees=11200.0, interest=43132.75, principal=58765.08
[2025-06-30 21:27:11,282] INFO in app: [118000005] Schedule 58 → Paid: fees=11200.0, interest=41075.97, principal=60821.86
2025-06-30 21:27:11,282 - INFO - [118000005] Schedule 58 → Paid: fees=11200.0, interest=41075.97, principal=60821.86
[2025-06-30 21:27:11,289] INFO in app: [118000005] Schedule 59 → Paid: fees=11200.0, interest=38947.21, principal=62950.63
2025-06-30 21:27:11,289 - INFO - [118000005] Schedule 59 → Paid: fees=11200.0, interest=38947.21, principal=62950.63
[2025-06-30 21:27:11,292] INFO in app: [118000005] Schedule 60 → Paid: fees=11200.0, interest=36743.94, principal=65153.9
2025-06-30 21:27:11,292 - INFO - [118000005] Schedule 60 → Paid: fees=11200.0, interest=36743.94, principal=65153.9
[2025-06-30 21:27:11,296] INFO in app: [118000005] Schedule 61 → Paid: fees=11200.0, interest=34463.55, principal=67434.28
2025-06-30 21:27:11,296 - INFO - [118000005] Schedule 61 → Paid: fees=11200.0, interest=34463.55, principal=67434.28
[2025-06-30 21:27:11,298] INFO in app: [118000005] Schedule 62 → Paid: fees=11200.0, interest=32103.35, principal=69794.48
2025-06-30 21:27:11,298 - INFO - [118000005] Schedule 62 → Paid: fees=11200.0, interest=32103.35, principal=69794.48
[2025-06-30 21:27:11,300] INFO in app: [118000005] Schedule 63 → Paid: fees=11200.0, interest=29660.54, principal=72237.29
2025-06-30 21:27:11,300 - INFO - [118000005] Schedule 63 → Paid: fees=11200.0, interest=29660.54, principal=72237.29
[2025-06-30 21:27:11,306] INFO in app: [118000005] Schedule 64 → Paid: fees=11200.0, interest=27132.24, principal=74765.6
2025-06-30 21:27:11,306 - INFO - [118000005] Schedule 64 → Paid: fees=11200.0, interest=27132.24, principal=74765.6
[2025-06-30 21:27:11,308] INFO in app: [118000005] Schedule 65 → Paid: fees=11200.0, interest=24515.44, principal=77382.39
2025-06-30 21:27:11,308 - INFO - [118000005] Schedule 65 → Paid: fees=11200.0, interest=24515.44, principal=77382.39
[2025-06-30 21:27:11,312] INFO in app: [118000005] Schedule 66 → Paid: fees=11200.0, interest=21807.06, principal=80090.78
2025-06-30 21:27:11,312 - INFO - [118000005] Schedule 66 → Paid: fees=11200.0, interest=21807.06, principal=80090.78
[2025-06-30 21:27:11,314] INFO in app: [118000005] Schedule 67 → Paid: fees=11200.0, interest=19003.88, principal=82893.95
2025-06-30 21:27:11,314 - INFO - [118000005] Schedule 67 → Paid: fees=11200.0, interest=19003.88, principal=82893.95
[2025-06-30 21:27:11,316] INFO in app: [118000005] Schedule 68 → Paid: fees=11200.0, interest=16102.59, principal=33994.26999999974
2025-06-30 21:27:11,316 - INFO - [118000005] Schedule 68 → Paid: fees=11200.0, interest=16102.59, principal=33994.26999999974
[2025-06-30 21:27:11,331] INFO in app: [118000005] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
2025-06-30 21:27:11,331 - INFO - [118000005] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
[2025-06-30 21:27:11,335] INFO in app: [118000005] Payment 1418470.87 allocated. Remaining: 0.0
2025-06-30 21:27:11,335 - INFO - [118000005] Payment 1418470.87 allocated. Remaining: 0.0
2025-06-30 21:27:11,355 - INFO - 127.0.0.1 - - [30/Jun/2025 21:27:11] "[32mPOST /topup/5 HTTP/1.1[0m" 302 -
[2025-06-30 21:27:11,520] INFO in app: Found 8 loans for customer 202506000001
2025-06-30 21:27:11,520 - INFO - Found 8 loans for customer 202506000001
[2025-06-30 21:27:11,525] INFO in app: Customer ID: 1
2025-06-30 21:27:11,525 - INFO - Customer ID: 1
[2025-06-30 21:27:11,531] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'application')]
2025-06-30 21:27:11,531 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'application')]
2025-06-30 21:27:11,567 - INFO - 127.0.0.1 - - [30/Jun/2025 21:27:11] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-06-30 21:27:32,349 - INFO - 127.0.0.1 - - [30/Jun/2025 21:27:32] "GET /loans HTTP/1.1" 200 -
2025-06-30 21:27:36,985 - INFO - 127.0.0.1 - - [30/Jun/2025 21:27:36] "[32mPOST /process_loan/8/approve HTTP/1.1[0m" 302 -
2025-06-30 21:27:37,011 - INFO - 127.0.0.1 - - [30/Jun/2025 21:27:37] "GET /loans HTTP/1.1" 200 -
2025-06-30 21:27:39,188 - INFO - 127.0.0.1 - - [30/Jun/2025 21:27:39] "GET /loanbook HTTP/1.1" 200 -
2025-06-30 21:27:53,482 - INFO - 127.0.0.1 - - [30/Jun/2025 21:27:53] "GET /loan/103000008/statement HTTP/1.1" 200 -
2025-06-30 21:27:56,075 - INFO - 127.0.0.1 - - [30/Jun/2025 21:27:56] "GET /loanbook HTTP/1.1" 200 -
[2025-06-30 21:27:57,892] INFO in app: Found 8 loans for customer 202506000001
2025-06-30 21:27:57,892 - INFO - Found 8 loans for customer 202506000001
[2025-06-30 21:27:57,894] INFO in app: Customer ID: 1
2025-06-30 21:27:57,894 - INFO - Customer ID: 1
[2025-06-30 21:27:57,901] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'active')]
2025-06-30 21:27:57,901 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'active')]
2025-06-30 21:27:57,931 - INFO - 127.0.0.1 - - [30/Jun/2025 21:27:57] "GET /customer/202506000001/account HTTP/1.1" 200 -
2025-06-30 21:28:08,652 - INFO - 127.0.0.1 - - [30/Jun/2025 21:28:08] "GET /loan/118000005/statement HTTP/1.1" 200 -
[2025-06-30 21:51:05,720] INFO in app: ==================================================
[2025-06-30 21:51:05,795] INFO in app: Application logging initialized successfully
[2025-06-30 21:51:05,797] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-06-30 21:51:05,798] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-06-30 21:51:05,800] INFO in app: System encoding: utf-8
[2025-06-30 21:51:05,802] INFO in app: ==================================================
[2025-07-01 10:58:16,826] INFO in app: ==================================================
[2025-07-01 10:58:17,059] INFO in app: Application logging initialized successfully
[2025-07-01 10:58:17,138] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-01 10:58:17,245] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-01 10:58:17,398] INFO in app: System encoding: utf-8
[2025-07-01 10:58:17,458] INFO in app: ==================================================
2025-07-01 10:58:18,721 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-01 10:58:18,722 - INFO - [33mPress CTRL+C to quit[0m
2025-07-01 11:01:50,431 - INFO - 127.0.0.1 - - [01/Jul/2025 11:01:50] "GET /loan/118000005/statement HTTP/1.1" 200 -
2025-07-01 11:01:50,432 - INFO - 127.0.0.1 - - [01/Jul/2025 11:01:50] "GET /loan/118000005/statement HTTP/1.1" 200 -
2025-07-01 11:01:51,827 - INFO - 127.0.0.1 - - [01/Jul/2025 11:01:51] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-01 11:42:26,164] INFO in app: ==================================================
[2025-07-01 11:42:26,236] INFO in app: Application logging initialized successfully
[2025-07-01 11:42:26,239] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-01 11:42:26,241] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-01 11:42:26,243] INFO in app: System encoding: utf-8
[2025-07-01 11:42:26,244] INFO in app: ==================================================
[2025-07-01 11:49:48,008] INFO in app: ==================================================
[2025-07-01 11:49:48,014] INFO in app: Application logging initialized successfully
[2025-07-01 11:49:48,017] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-01 11:49:48,019] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-01 11:49:48,021] INFO in app: System encoding: utf-8
[2025-07-01 11:49:48,023] INFO in app: ==================================================
2025-07-01 11:49:48,221 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-01 11:49:48,221 - INFO - [33mPress CTRL+C to quit[0m
2025-07-01 12:35:27,131 - INFO - 127.0.0.1 - - [01/Jul/2025 12:35:27] "GET /loan/118000005/statement HTTP/1.1" 200 -
2025-07-01 12:35:27,632 - INFO - 127.0.0.1 - - [01/Jul/2025 12:35:27] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-01 12:35:31,010 - INFO - 127.0.0.1 - - [01/Jul/2025 12:35:31] "GET /loanbook HTTP/1.1" 200 -
2025-07-01 12:35:35,216 - INFO - 127.0.0.1 - - [01/Jul/2025 12:35:35] "GET /loan/103000007/statement HTTP/1.1" 200 -
2025-07-01 12:35:39,229 - INFO - 127.0.0.1 - - [01/Jul/2025 12:35:39] "GET /loanbook HTTP/1.1" 200 -
[2025-07-01 12:35:55,411] INFO in app: Found 8 loans for customer 202506000001
2025-07-01 12:35:55,411 - INFO - Found 8 loans for customer 202506000001
[2025-07-01 12:35:55,414] INFO in app: Customer ID: 1
2025-07-01 12:35:55,414 - INFO - Customer ID: 1
[2025-07-01 12:35:55,418] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'active')]
2025-07-01 12:35:55,418 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'active')]
2025-07-01 12:35:55,518 - INFO - 127.0.0.1 - - [01/Jul/2025 12:35:55] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-01 12:35:57,524] INFO in app: Found 8 loans for customer 202506000001
2025-07-01 12:35:57,524 - INFO - Found 8 loans for customer 202506000001
[2025-07-01 12:35:57,526] INFO in app: Customer ID: 1
2025-07-01 12:35:57,526 - INFO - Customer ID: 1
[2025-07-01 12:35:57,528] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'active')]
2025-07-01 12:35:57,528 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'active')]
2025-07-01 12:35:57,553 - INFO - 127.0.0.1 - - [01/Jul/2025 12:35:57] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-07-01 12:36:22,962] INFO in app: [TOPUP] Submit route hit for loan 8
2025-07-01 12:36:22,962 - INFO - [TOPUP] Submit route hit for loan 8
2025-07-01 12:36:22,978 - DEBUG - [DEBUG] Base loan #103000008 → Top-up balance: 2875104.82, Interest: 190104.82
[2025-07-01 12:36:23,035] INFO in app: [103000008] Schedule 79 → Paid: fees=22400.0, interest=93975.0, principal=864393.27
2025-07-01 12:36:23,035 - INFO - [103000008] Schedule 79 → Paid: fees=22400.0, interest=93975.0, principal=864393.27
[2025-07-01 12:36:23,037] INFO in app: [103000008] Schedule 80 → Paid: fees=22400.0, interest=63721.24, principal=894647.04
2025-07-01 12:36:23,037 - INFO - [103000008] Schedule 80 → Paid: fees=22400.0, interest=63721.24, principal=894647.04
[2025-07-01 12:36:23,042] INFO in app: [103000008] Schedule 81 → Paid: fees=22400.0, interest=32408.58, principal=858759.6899999998
2025-07-01 12:36:23,042 - INFO - [103000008] Schedule 81 → Paid: fees=22400.0, interest=32408.58, principal=858759.6899999998
[2025-07-01 12:36:23,050] INFO in app: [103000008] Recalculated balances → capitalized=2685000.0, paid_principal=0, paid_settlement_interest=0, current_balance=2685000.0, top_up_balance=2814328.7, settlement_balance=2685000.0, loan_state=active
2025-07-01 12:36:23,050 - INFO - [103000008] Recalculated balances → capitalized=2685000.0, paid_principal=0, paid_settlement_interest=0, current_balance=2685000.0, top_up_balance=2814328.7, settlement_balance=2685000.0, loan_state=active
[2025-07-01 12:36:23,053] INFO in app: [103000008] Payment 2875104.82 allocated. Remaining: 0.0
2025-07-01 12:36:23,053 - INFO - [103000008] Payment 2875104.82 allocated. Remaining: 0.0
[2025-07-01 12:36:23,055] INFO in app: [103000008] Recalculated balances → capitalized=2685000.0, paid_principal=0, paid_settlement_interest=0, current_balance=2685000.0, top_up_balance=2814328.7, settlement_balance=2685000.0, loan_state=active
2025-07-01 12:36:23,055 - INFO - [103000008] Recalculated balances → capitalized=2685000.0, paid_principal=0, paid_settlement_interest=0, current_balance=2685000.0, top_up_balance=2814328.7, settlement_balance=2685000.0, loan_state=active
2025-07-01 12:36:23,068 - INFO - 127.0.0.1 - - [01/Jul/2025 12:36:23] "[32mPOST /topup/8 HTTP/1.1[0m" 302 -
[2025-07-01 12:36:23,267] INFO in app: Found 9 loans for customer 202506000001
2025-07-01 12:36:23,267 - INFO - Found 9 loans for customer 202506000001
[2025-07-01 12:36:23,270] INFO in app: Customer ID: 1
2025-07-01 12:36:23,270 - INFO - Customer ID: 1
[2025-07-01 12:36:23,272] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'application')]
2025-07-01 12:36:23,272 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'application')]
2025-07-01 12:36:23,300 - INFO - 127.0.0.1 - - [01/Jul/2025 12:36:23] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-01 12:36:28,197 - INFO - 127.0.0.1 - - [01/Jul/2025 12:36:28] "GET /loans HTTP/1.1" 200 -
2025-07-01 12:36:31,409 - INFO - 127.0.0.1 - - [01/Jul/2025 12:36:31] "[32mPOST /process_loan/9/approve HTTP/1.1[0m" 302 -
2025-07-01 12:36:31,443 - INFO - 127.0.0.1 - - [01/Jul/2025 12:36:31] "GET /loans HTTP/1.1" 200 -
2025-07-01 12:36:33,811 - INFO - 127.0.0.1 - - [01/Jul/2025 12:36:33] "GET /loanbook HTTP/1.1" 200 -
2025-07-01 12:36:47,259 - INFO - 127.0.0.1 - - [01/Jul/2025 12:36:47] "GET /loan/103000008/statement HTTP/1.1" 200 -
2025-07-01 12:36:49,472 - INFO - 127.0.0.1 - - [01/Jul/2025 12:36:49] "GET /loanbook HTTP/1.1" 200 -
[2025-07-01 12:36:50,983] INFO in app: Found 9 loans for customer 202506000001
2025-07-01 12:36:50,983 - INFO - Found 9 loans for customer 202506000001
[2025-07-01 12:36:50,985] INFO in app: Customer ID: 1
2025-07-01 12:36:50,985 - INFO - Customer ID: 1
[2025-07-01 12:36:50,989] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active')]
2025-07-01 12:36:50,989 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active')]
2025-07-01 12:36:51,010 - INFO - 127.0.0.1 - - [01/Jul/2025 12:36:51] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-01 17:17:36,219] INFO in app: ==================================================
[2025-07-01 17:17:36,304] INFO in app: Application logging initialized successfully
[2025-07-01 17:17:36,307] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-01 17:17:36,308] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-01 17:17:36,310] INFO in app: System encoding: utf-8
[2025-07-01 17:17:36,313] INFO in app: ==================================================
2025-07-01 17:17:36,632 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-01 17:17:36,632 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-01 17:17:54,351] INFO in app: ==================================================
[2025-07-01 17:17:54,488] INFO in app: Application logging initialized successfully
[2025-07-01 17:17:54,496] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-01 17:17:54,507] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-01 17:17:54,525] INFO in app: System encoding: utf-8
[2025-07-01 17:17:54,532] INFO in app: ==================================================
2025-07-01 17:17:54,805 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-01 17:17:54,805 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-01 17:17:57,842] INFO in app: Found 9 loans for customer 202506000001
2025-07-01 17:17:57,842 - INFO - Found 9 loans for customer 202506000001
[2025-07-01 17:17:57,844] INFO in app: Customer ID: 1
2025-07-01 17:17:57,844 - INFO - Customer ID: 1
[2025-07-01 17:17:57,849] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active')]
2025-07-01 17:17:57,849 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active')]
2025-07-01 17:17:57,982 - INFO - 127.0.0.1 - - [01/Jul/2025 17:17:57] "GET /customer/202506000001/account HTTP/1.1" 200 -
2025-07-01 17:17:58,659 - INFO - 127.0.0.1 - - [01/Jul/2025 17:17:58] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-01 17:21:53,399] INFO in app: ==================================================
[2025-07-01 17:21:53,475] INFO in app: Application logging initialized successfully
[2025-07-01 17:21:53,477] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-01 17:21:53,480] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-01 17:21:53,482] INFO in app: System encoding: utf-8
[2025-07-01 17:21:53,483] INFO in app: ==================================================
[2025-07-01 17:24:52,148] INFO in app: [118000005] Schedule 62 → Paid: fees=11200.0, interest=32103.35, principal=69794.48
2025-07-01 17:24:52,148 - INFO - [118000005] Schedule 62 → Paid: fees=11200.0, interest=32103.35, principal=69794.48
[2025-07-01 17:24:52,150] INFO in app: [118000005] Schedule 63 → Paid: fees=11200.0, interest=29660.54, principal=72237.29
2025-07-01 17:24:52,150 - INFO - [118000005] Schedule 63 → Paid: fees=11200.0, interest=29660.54, principal=72237.29
[2025-07-01 17:24:52,153] INFO in app: [118000005] Schedule 68 → Paid: fees=11200.0, interest=16102.59, principal=85795.24
2025-07-01 17:24:52,153 - INFO - [118000005] Schedule 68 → Paid: fees=11200.0, interest=16102.59, principal=85795.24
[2025-07-01 17:24:52,155] INFO in app: [118000005] Schedule 69 → Paid: fees=11200.0, interest=13099.76, principal=88798.08
2025-07-01 17:24:52,155 - INFO - [118000005] Schedule 69 → Paid: fees=11200.0, interest=13099.76, principal=88798.08
[2025-07-01 17:24:52,157] INFO in app: [118000005] Schedule 70 → Paid: fees=11200.0, interest=9991.83, principal=91906.01
2025-07-01 17:24:52,157 - INFO - [118000005] Schedule 70 → Paid: fees=11200.0, interest=9991.83, principal=91906.01
[2025-07-01 17:24:52,158] INFO in app: [118000005] Schedule 71 → Paid: fees=11200.0, interest=6775.12, principal=95122.72
2025-07-01 17:24:52,158 - INFO - [118000005] Schedule 71 → Paid: fees=11200.0, interest=6775.12, principal=95122.72
[2025-07-01 17:24:52,160] INFO in app: [118000005] Schedule 72 → Paid: fees=11200.0, interest=3445.81, principal=98452.02
2025-07-01 17:24:52,160 - INFO - [118000005] Schedule 72 → Paid: fees=11200.0, interest=3445.81, principal=98452.02
[2025-07-01 17:24:52,171] INFO in app: [118000005] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=topped_up
2025-07-01 17:24:52,171 - INFO - [118000005] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=topped_up
[2025-07-01 17:24:52,173] INFO in app: [118000005] Payment 1418470.87 allocated. Remaining: 914278.5499999996
2025-07-01 17:24:52,173 - INFO - [118000005] Payment 1418470.87 allocated. Remaining: 914278.5499999996
[2025-07-01 17:25:22,067] INFO in app: [118000005] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=topped_up
2025-07-01 17:25:22,067 - INFO - [118000005] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=topped_up
[2025-07-01 18:01:05,709] INFO in app: ==================================================
[2025-07-01 18:01:05,717] INFO in app: Application logging initialized successfully
[2025-07-01 18:01:05,721] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-01 18:01:05,723] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-01 18:01:05,728] INFO in app: System encoding: utf-8
[2025-07-01 18:01:05,731] INFO in app: ==================================================
[2025-07-01 18:01:14,071] INFO in app: ==================================================
[2025-07-01 18:01:14,106] INFO in app: Application logging initialized successfully
[2025-07-01 18:01:14,108] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-01 18:01:14,110] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-01 18:01:14,117] INFO in app: System encoding: utf-8
[2025-07-01 18:01:14,119] INFO in app: ==================================================
[2025-07-01 18:01:20,578] INFO in app: ==================================================
[2025-07-01 18:01:20,585] INFO in app: Application logging initialized successfully
[2025-07-01 18:01:20,588] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-01 18:01:20,595] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-01 18:01:20,598] INFO in app: System encoding: utf-8
[2025-07-01 18:01:20,600] INFO in app: ==================================================
2025-07-01 18:01:20,811 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-01 18:01:20,811 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-01 18:06:42,809] INFO in app: ==================================================
[2025-07-01 18:06:42,823] INFO in app: Application logging initialized successfully
[2025-07-01 18:06:42,826] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-01 18:06:42,831] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-01 18:06:42,833] INFO in app: System encoding: utf-8
[2025-07-01 18:06:42,859] INFO in app: ==================================================
2025-07-01 18:06:43,179 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-01 18:06:43,179 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-01 18:08:00,026] ERROR in app: Account view error: (sqlite3.OperationalError) no such column: loan_applications.written_off_amount
[SQL: SELECT loan_applications.id AS loan_applications_id, loan_applications.customer_id AS loan_applications_customer_id, loan_applications.loan_amount AS loan_applications_loan_amount, loan_applications.status AS loan_applications_status, loan_applications.created_at AS loan_applications_created_at, loan_applications.term_months AS loan_applications_term_months, loan_applications.monthly_instalment AS loan_applications_monthly_instalment, loan_applications.total_repayment AS loan_applications_total_repayment, loan_applications.effective_rate AS loan_applications_effective_rate, loan_applications.category AS loan_applications_category, loan_applications.loan_category AS loan_applications_loan_category, loan_applications.disbursed AS loan_applications_disbursed, loan_applications.disbursed_bank AS loan_applications_disbursed_bank, loan_applications.crb_fees AS loan_applications_crb_fees, loan_applications.origination_fees AS loan_applications_origination_fees, loan_applications.insurance_fees AS loan_applications_insurance_fees, loan_applications.total_fees AS loan_applications_total_fees, loan_applications.collection_fees AS loan_applications_collection_fees, loan_applications.schedule_id AS loan_applications_schedule_id, loan_applications.loan_number AS loan_applications_loan_number, loan_applications.file_number AS loan_applications_file_number, loan_applications.date_created AS loan_applications_date_created, loan_applications.disbursement_date AS loan_applications_disbursement_date, loan_applications.cash_to_client AS loan_applications_cash_to_client, loan_applications.top_up_interest AS loan_applications_top_up_interest, loan_applications.settlement_interest AS loan_applications_settlement_interest, loan_applications.closure_type AS loan_applications_closure_type, loan_applications.closure_date AS loan_applications_closure_date, loan_applications.top_up_of AS loan_applications_top_up_of, loan_applications.application_status AS loan_applications_application_status, loan_applications.loan_state AS loan_applications_loan_state, loan_applications.performance_status AS loan_applications_performance_status, loan_applications.top_up_balance AS loan_applications_top_up_balance, loan_applications.settlement_balance AS loan_applications_settlement_balance, loan_applications.current_balance AS loan_applications_current_balance, loan_applications.settlement_type AS loan_applications_settlement_type, loan_applications.settling_institution AS loan_applications_settling_institution, loan_applications.settlement_reason AS loan_applications_settlement_reason, loan_applications.vote_id AS loan_applications_vote_id, loan_applications.outstanding_fees AS loan_applications_outstanding_fees, loan_applications.pricing_version AS loan_applications_pricing_version, loan_applications.applied_interest_rate AS loan_applications_applied_interest_rate, loan_applications.applied_collection_fee AS loan_applications_applied_collection_fee, loan_applications.written_off_amount AS loan_applications_written_off_amount, loan_applications.insurance_settlement_amount AS loan_applications_insurance_settlement_amount, loan_applications.parent_loan_id AS loan_applications_parent_loan_id, payments_1.id AS payments_1_id, payments_1.loan_id AS payments_1_loan_id, payments_1.amount AS payments_1_amount, payments_1.reference AS payments_1_reference, payments_1.method AS payments_1_method, payments_1.status AS payments_1_status, payments_1.created_at AS payments_1_created_at, payments_1.settlement_proof AS payments_1_settlement_proof 
FROM loan_applications LEFT OUTER JOIN payments AS payments_1 ON loan_applications.id = payments_1.loan_id 
WHERE loan_applications.customer_id = ?]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-01 18:08:00,026 - ERROR - Account view error: (sqlite3.OperationalError) no such column: loan_applications.written_off_amount
[SQL: SELECT loan_applications.id AS loan_applications_id, loan_applications.customer_id AS loan_applications_customer_id, loan_applications.loan_amount AS loan_applications_loan_amount, loan_applications.status AS loan_applications_status, loan_applications.created_at AS loan_applications_created_at, loan_applications.term_months AS loan_applications_term_months, loan_applications.monthly_instalment AS loan_applications_monthly_instalment, loan_applications.total_repayment AS loan_applications_total_repayment, loan_applications.effective_rate AS loan_applications_effective_rate, loan_applications.category AS loan_applications_category, loan_applications.loan_category AS loan_applications_loan_category, loan_applications.disbursed AS loan_applications_disbursed, loan_applications.disbursed_bank AS loan_applications_disbursed_bank, loan_applications.crb_fees AS loan_applications_crb_fees, loan_applications.origination_fees AS loan_applications_origination_fees, loan_applications.insurance_fees AS loan_applications_insurance_fees, loan_applications.total_fees AS loan_applications_total_fees, loan_applications.collection_fees AS loan_applications_collection_fees, loan_applications.schedule_id AS loan_applications_schedule_id, loan_applications.loan_number AS loan_applications_loan_number, loan_applications.file_number AS loan_applications_file_number, loan_applications.date_created AS loan_applications_date_created, loan_applications.disbursement_date AS loan_applications_disbursement_date, loan_applications.cash_to_client AS loan_applications_cash_to_client, loan_applications.top_up_interest AS loan_applications_top_up_interest, loan_applications.settlement_interest AS loan_applications_settlement_interest, loan_applications.closure_type AS loan_applications_closure_type, loan_applications.closure_date AS loan_applications_closure_date, loan_applications.top_up_of AS loan_applications_top_up_of, loan_applications.application_status AS loan_applications_application_status, loan_applications.loan_state AS loan_applications_loan_state, loan_applications.performance_status AS loan_applications_performance_status, loan_applications.top_up_balance AS loan_applications_top_up_balance, loan_applications.settlement_balance AS loan_applications_settlement_balance, loan_applications.current_balance AS loan_applications_current_balance, loan_applications.settlement_type AS loan_applications_settlement_type, loan_applications.settling_institution AS loan_applications_settling_institution, loan_applications.settlement_reason AS loan_applications_settlement_reason, loan_applications.vote_id AS loan_applications_vote_id, loan_applications.outstanding_fees AS loan_applications_outstanding_fees, loan_applications.pricing_version AS loan_applications_pricing_version, loan_applications.applied_interest_rate AS loan_applications_applied_interest_rate, loan_applications.applied_collection_fee AS loan_applications_applied_collection_fee, loan_applications.written_off_amount AS loan_applications_written_off_amount, loan_applications.insurance_settlement_amount AS loan_applications_insurance_settlement_amount, loan_applications.parent_loan_id AS loan_applications_parent_loan_id, payments_1.id AS payments_1_id, payments_1.loan_id AS payments_1_loan_id, payments_1.amount AS payments_1_amount, payments_1.reference AS payments_1_reference, payments_1.method AS payments_1_method, payments_1.status AS payments_1_status, payments_1.created_at AS payments_1_created_at, payments_1.settlement_proof AS payments_1_settlement_proof 
FROM loan_applications LEFT OUTER JOIN payments AS payments_1 ON loan_applications.id = payments_1.loan_id 
WHERE loan_applications.customer_id = ?]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-01 18:08:00,125 - INFO - 127.0.0.1 - - [01/Jul/2025 18:08:00] "[32mGET /customer/202506000001/account HTTP/1.1[0m" 302 -
2025-07-01 18:08:00,164 - INFO - 127.0.0.1 - - [01/Jul/2025 18:08:00] "GET / HTTP/1.1" 200 -
2025-07-01 18:08:00,753 - INFO - 127.0.0.1 - - [01/Jul/2025 18:08:00] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-01 18:08:05,226 - INFO - 127.0.0.1 - - [01/Jul/2025 18:08:05] "[32mGET /loanbook HTTP/1.1[0m" 302 -
2025-07-01 18:08:05,355 - INFO - 127.0.0.1 - - [01/Jul/2025 18:08:05] "GET / HTTP/1.1" 200 -
[2025-07-01 18:52:28,964] INFO in app: ==================================================
[2025-07-01 18:52:28,971] INFO in app: Application logging initialized successfully
[2025-07-01 18:52:28,973] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-01 18:52:28,974] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-01 18:52:28,976] INFO in app: System encoding: utf-8
[2025-07-01 18:52:28,981] INFO in app: ==================================================
[2025-07-01 18:52:41,034] INFO in app: ==================================================
[2025-07-01 18:52:41,042] INFO in app: Application logging initialized successfully
[2025-07-01 18:52:41,045] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-01 18:52:41,047] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-01 18:52:41,111] INFO in app: System encoding: utf-8
[2025-07-01 18:52:41,168] INFO in app: ==================================================
[2025-07-01 18:52:45,766] INFO in app: ==================================================
[2025-07-01 18:52:45,776] INFO in app: Application logging initialized successfully
[2025-07-01 18:52:45,779] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-01 18:52:45,780] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-01 18:52:45,786] INFO in app: System encoding: utf-8
[2025-07-01 18:52:45,792] INFO in app: ==================================================
2025-07-01 18:52:46,032 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-01 18:52:46,033 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-01 18:53:04,690] INFO in app: ==================================================
[2025-07-01 18:53:04,697] INFO in app: Application logging initialized successfully
[2025-07-01 18:53:04,701] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-01 18:53:04,703] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-01 18:53:04,706] INFO in app: System encoding: utf-8
[2025-07-01 18:53:04,708] INFO in app: ==================================================
2025-07-01 18:53:05,032 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-01 18:53:05,033 - INFO - [33mPress CTRL+C to quit[0m
2025-07-01 18:53:08,673 - INFO - 127.0.0.1 - - [01/Jul/2025 18:53:08] "GET / HTTP/1.1" 200 -
2025-07-01 18:53:09,792 - INFO - 127.0.0.1 - - [01/Jul/2025 18:53:09] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-01 18:53:10,906 - INFO - 127.0.0.1 - - [01/Jul/2025 18:53:10] "GET /loanbook HTTP/1.1" 200 -
2025-07-01 18:53:22,002 - INFO - 127.0.0.1 - - [01/Jul/2025 18:53:22] "GET /loan/103000008/statement HTTP/1.1" 200 -
2025-07-01 18:53:46,215 - INFO - 127.0.0.1 - - [01/Jul/2025 18:53:46] "GET /loanbook HTTP/1.1" 200 -
[2025-07-01 18:53:49,896] INFO in app: Found 9 loans for customer 202506000001
2025-07-01 18:53:49,896 - INFO - Found 9 loans for customer 202506000001
[2025-07-01 18:53:49,903] INFO in app: Customer ID: 1
2025-07-01 18:53:49,903 - INFO - Customer ID: 1
[2025-07-01 18:53:49,916] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active')]
2025-07-01 18:53:49,916 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active')]
2025-07-01 18:53:50,032 - INFO - 127.0.0.1 - - [01/Jul/2025 18:53:50] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-01 18:53:58,169] INFO in app: Found 9 loans for customer 202506000001
2025-07-01 18:53:58,169 - INFO - Found 9 loans for customer 202506000001
[2025-07-01 18:53:58,189] INFO in app: Customer ID: 1
2025-07-01 18:53:58,189 - INFO - Customer ID: 1
[2025-07-01 18:53:58,193] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active')]
2025-07-01 18:53:58,193 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active')]
2025-07-01 18:53:58,225 - INFO - 127.0.0.1 - - [01/Jul/2025 18:53:58] "GET /customer/202506000001/account?section=additional HTTP/1.1" 200 -
2025-07-01 18:54:21,238 - INFO - 127.0.0.1 - - [01/Jul/2025 18:54:21] "[32mPOST /apply_additional/1 HTTP/1.1[0m" 302 -
[2025-07-01 18:54:21,445] INFO in app: Found 10 loans for customer 202506000001
2025-07-01 18:54:21,445 - INFO - Found 10 loans for customer 202506000001
[2025-07-01 18:54:21,449] INFO in app: Customer ID: 1
2025-07-01 18:54:21,449 - INFO - Customer ID: 1
[2025-07-01 18:54:21,452] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'active')]
2025-07-01 18:54:21,452 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'active')]
2025-07-01 18:54:21,562 - INFO - 127.0.0.1 - - [01/Jul/2025 18:54:21] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-01 18:54:23,683 - INFO - 127.0.0.1 - - [01/Jul/2025 18:54:23] "GET /loans HTTP/1.1" 200 -
2025-07-01 18:54:26,754 - INFO - 127.0.0.1 - - [01/Jul/2025 18:54:26] "[32mPOST /process_loan/10/approve HTTP/1.1[0m" 302 -
2025-07-01 18:54:26,795 - INFO - 127.0.0.1 - - [01/Jul/2025 18:54:26] "GET /loans HTTP/1.1" 200 -
2025-07-01 18:54:29,555 - INFO - 127.0.0.1 - - [01/Jul/2025 18:54:29] "GET /loanbook HTTP/1.1" 200 -
2025-07-01 18:54:32,446 - INFO - 127.0.0.1 - - [01/Jul/2025 18:54:32] "GET /loan/136000010/statement HTTP/1.1" 200 -
2025-07-01 18:54:35,549 - INFO - 127.0.0.1 - - [01/Jul/2025 18:54:35] "GET /loanbook HTTP/1.1" 200 -
[2025-07-01 18:54:40,871] INFO in app: Found 10 loans for customer 202506000001
2025-07-01 18:54:40,871 - INFO - Found 10 loans for customer 202506000001
[2025-07-01 18:54:40,907] INFO in app: Customer ID: 1
2025-07-01 18:54:40,907 - INFO - Customer ID: 1
[2025-07-01 18:54:40,940] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'active')]
2025-07-01 18:54:40,940 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'active')]
2025-07-01 18:54:41,018 - INFO - 127.0.0.1 - - [01/Jul/2025 18:54:41] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-01 18:54:44,996] INFO in app: Found 10 loans for customer 202506000001
2025-07-01 18:54:44,996 - INFO - Found 10 loans for customer 202506000001
[2025-07-01 18:54:45,018] INFO in app: Customer ID: 1
2025-07-01 18:54:45,018 - INFO - Customer ID: 1
[2025-07-01 18:54:45,025] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'active')]
2025-07-01 18:54:45,025 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'active')]
2025-07-01 18:54:45,054 - INFO - 127.0.0.1 - - [01/Jul/2025 18:54:45] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-07-01 18:55:11,682] INFO in app: [TOPUP] Submit route hit for loan 10
2025-07-01 18:55:11,682 - INFO - [TOPUP] Submit route hit for loan 10
2025-07-01 18:55:11,693 - DEBUG - [DEBUG] Base loan #136000010 → Top-up balance: 1483080.7, Interest: 139080.7
[2025-07-01 18:55:11,764] INFO in app: [136000010] Schedule 85 → Paid: fees=11200.0, interest=47040.0, principal=19197.91
2025-07-01 18:55:11,764 - INFO - [136000010] Schedule 85 → Paid: fees=11200.0, interest=47040.0, principal=19197.91
[2025-07-01 18:55:11,774] INFO in app: [136000010] Schedule 86 → Paid: fees=11200.0, interest=46368.07, principal=19869.84
2025-07-01 18:55:11,774 - INFO - [136000010] Schedule 86 → Paid: fees=11200.0, interest=46368.07, principal=19869.84
[2025-07-01 18:55:11,776] INFO in app: [136000010] Schedule 87 → Paid: fees=11200.0, interest=45672.63, principal=20565.29
2025-07-01 18:55:11,776 - INFO - [136000010] Schedule 87 → Paid: fees=11200.0, interest=45672.63, principal=20565.29
[2025-07-01 18:55:11,782] INFO in app: [136000010] Schedule 88 → Paid: fees=11200.0, interest=44952.84, principal=21285.07
2025-07-01 18:55:11,782 - INFO - [136000010] Schedule 88 → Paid: fees=11200.0, interest=44952.84, principal=21285.07
[2025-07-01 18:55:11,798] INFO in app: [136000010] Schedule 89 → Paid: fees=11200.0, interest=44207.87, principal=22030.05
2025-07-01 18:55:11,798 - INFO - [136000010] Schedule 89 → Paid: fees=11200.0, interest=44207.87, principal=22030.05
[2025-07-01 18:55:11,809] INFO in app: [136000010] Schedule 90 → Paid: fees=11200.0, interest=43436.81, principal=22801.1
2025-07-01 18:55:11,809 - INFO - [136000010] Schedule 90 → Paid: fees=11200.0, interest=43436.81, principal=22801.1
[2025-07-01 18:55:11,812] INFO in app: [136000010] Schedule 91 → Paid: fees=11200.0, interest=42638.78, principal=23599.14
2025-07-01 18:55:11,812 - INFO - [136000010] Schedule 91 → Paid: fees=11200.0, interest=42638.78, principal=23599.14
[2025-07-01 18:55:11,815] INFO in app: [136000010] Schedule 92 → Paid: fees=11200.0, interest=41812.81, principal=24425.11
2025-07-01 18:55:11,815 - INFO - [136000010] Schedule 92 → Paid: fees=11200.0, interest=41812.81, principal=24425.11
[2025-07-01 18:55:11,819] INFO in app: [136000010] Schedule 93 → Paid: fees=11200.0, interest=40957.93, principal=25279.99
2025-07-01 18:55:11,819 - INFO - [136000010] Schedule 93 → Paid: fees=11200.0, interest=40957.93, principal=25279.99
[2025-07-01 18:55:11,822] INFO in app: [136000010] Schedule 94 → Paid: fees=11200.0, interest=40073.13, principal=26164.79
2025-07-01 18:55:11,822 - INFO - [136000010] Schedule 94 → Paid: fees=11200.0, interest=40073.13, principal=26164.79
[2025-07-01 18:55:11,826] INFO in app: [136000010] Schedule 95 → Paid: fees=11200.0, interest=39157.36, principal=27080.55
2025-07-01 18:55:11,826 - INFO - [136000010] Schedule 95 → Paid: fees=11200.0, interest=39157.36, principal=27080.55
[2025-07-01 18:55:11,832] INFO in app: [136000010] Schedule 96 → Paid: fees=11200.0, interest=38209.54, principal=28028.37
2025-07-01 18:55:11,832 - INFO - [136000010] Schedule 96 → Paid: fees=11200.0, interest=38209.54, principal=28028.37
[2025-07-01 18:55:11,834] INFO in app: [136000010] Schedule 97 → Paid: fees=11200.0, interest=37228.55, principal=29009.37
2025-07-01 18:55:11,834 - INFO - [136000010] Schedule 97 → Paid: fees=11200.0, interest=37228.55, principal=29009.37
[2025-07-01 18:55:11,838] INFO in app: [136000010] Schedule 98 → Paid: fees=11200.0, interest=36213.22, principal=30024.7
2025-07-01 18:55:11,838 - INFO - [136000010] Schedule 98 → Paid: fees=11200.0, interest=36213.22, principal=30024.7
[2025-07-01 18:55:11,841] INFO in app: [136000010] Schedule 99 → Paid: fees=11200.0, interest=35162.36, principal=31075.56
2025-07-01 18:55:11,841 - INFO - [136000010] Schedule 99 → Paid: fees=11200.0, interest=35162.36, principal=31075.56
[2025-07-01 18:55:11,847] INFO in app: [136000010] Schedule 100 → Paid: fees=11200.0, interest=34074.71, principal=32163.2
2025-07-01 18:55:11,847 - INFO - [136000010] Schedule 100 → Paid: fees=11200.0, interest=34074.71, principal=32163.2
[2025-07-01 18:55:11,852] INFO in app: [136000010] Schedule 101 → Paid: fees=11200.0, interest=32949.0, principal=33288.92
2025-07-01 18:55:11,852 - INFO - [136000010] Schedule 101 → Paid: fees=11200.0, interest=32949.0, principal=33288.92
[2025-07-01 18:55:11,855] INFO in app: [136000010] Schedule 102 → Paid: fees=11200.0, interest=31783.89, principal=34454.03
2025-07-01 18:55:11,855 - INFO - [136000010] Schedule 102 → Paid: fees=11200.0, interest=31783.89, principal=34454.03
[2025-07-01 18:55:11,860] INFO in app: [136000010] Schedule 103 → Paid: fees=11200.0, interest=30578.0, principal=35659.92
2025-07-01 18:55:11,860 - INFO - [136000010] Schedule 103 → Paid: fees=11200.0, interest=30578.0, principal=35659.92
[2025-07-01 18:55:11,870] INFO in app: [136000010] Schedule 104 → Paid: fees=11200.0, interest=560.2899999993679, principal=0.0
2025-07-01 18:55:11,870 - INFO - [136000010] Schedule 104 → Paid: fees=11200.0, interest=560.2899999993679, principal=0.0
[2025-07-01 18:55:11,886] INFO in app: [136000010] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
2025-07-01 18:55:11,886 - INFO - [136000010] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
[2025-07-01 18:55:11,890] INFO in app: [136000010] Payment 1483080.7 allocated. Remaining: 0.0
2025-07-01 18:55:11,890 - INFO - [136000010] Payment 1483080.7 allocated. Remaining: 0.0
[2025-07-01 18:55:11,897] INFO in app: [136000010] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
2025-07-01 18:55:11,897 - INFO - [136000010] Recalculated balances → capitalized=1344000.0, paid_principal=0, paid_settlement_interest=0, current_balance=1344000.0, top_up_balance=1344000.0, settlement_balance=1344000.0, loan_state=active
2025-07-01 18:55:11,907 - INFO - 127.0.0.1 - - [01/Jul/2025 18:55:11] "[32mPOST /topup/10 HTTP/1.1[0m" 302 -
[2025-07-01 18:55:11,972] INFO in app: Found 11 loans for customer 202506000001
2025-07-01 18:55:11,972 - INFO - Found 11 loans for customer 202506000001
[2025-07-01 18:55:11,978] INFO in app: Customer ID: 1
2025-07-01 18:55:11,978 - INFO - Customer ID: 1
[2025-07-01 18:55:11,981] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'application')]
2025-07-01 18:55:11,981 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'application')]
2025-07-01 18:55:12,021 - INFO - 127.0.0.1 - - [01/Jul/2025 18:55:12] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-01 18:55:21,128 - INFO - 127.0.0.1 - - [01/Jul/2025 18:55:21] "GET /loans HTTP/1.1" 200 -
2025-07-01 18:55:23,773 - INFO - 127.0.0.1 - - [01/Jul/2025 18:55:23] "[32mPOST /process_loan/11/approve HTTP/1.1[0m" 302 -
2025-07-01 18:55:23,841 - INFO - 127.0.0.1 - - [01/Jul/2025 18:55:23] "GET /loans HTTP/1.1" 200 -
2025-07-01 18:55:25,472 - INFO - 127.0.0.1 - - [01/Jul/2025 18:55:25] "GET /loanbook HTTP/1.1" 200 -
2025-07-01 18:55:29,394 - INFO - 127.0.0.1 - - [01/Jul/2025 18:55:29] "GET /loan/103000011/statement HTTP/1.1" 200 -
2025-07-01 18:55:33,743 - INFO - 127.0.0.1 - - [01/Jul/2025 18:55:33] "GET /loanbook HTTP/1.1" 200 -
2025-07-01 18:55:44,315 - INFO - 127.0.0.1 - - [01/Jul/2025 18:55:44] "GET /loan/136000010/statement HTTP/1.1" 200 -
[2025-07-02 13:55:02,790] INFO in app: ==================================================
[2025-07-02 13:55:02,903] INFO in app: Application logging initialized successfully
[2025-07-02 13:55:02,906] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-02 13:55:02,908] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-02 13:55:02,911] INFO in app: System encoding: utf-8
[2025-07-02 13:55:02,913] INFO in app: ==================================================
2025-07-02 13:55:03,461 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-02 13:55:03,461 - INFO - [33mPress CTRL+C to quit[0m
2025-07-02 13:55:12,247 - INFO - 127.0.0.1 - - [02/Jul/2025 13:55:12] "GET /loan/136000010/statement HTTP/1.1" 200 -
2025-07-02 13:55:13,992 - INFO - 127.0.0.1 - - [02/Jul/2025 13:55:13] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-02 13:55:21,426 - INFO - 127.0.0.1 - - [02/Jul/2025 13:55:21] "GET /loanbook HTTP/1.1" 200 -
[2025-07-02 13:55:31,115] INFO in app: Found 11 loans for customer 202506000001
2025-07-02 13:55:31,115 - INFO - Found 11 loans for customer 202506000001
[2025-07-02 13:55:31,123] INFO in app: Customer ID: 1
2025-07-02 13:55:31,123 - INFO - Customer ID: 1
[2025-07-02 13:55:31,138] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'active')]
2025-07-02 13:55:31,138 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'active')]
2025-07-02 13:55:31,250 - INFO - 127.0.0.1 - - [02/Jul/2025 13:55:31] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-02 13:55:32,946] INFO in app: Found 11 loans for customer 202506000001
2025-07-02 13:55:32,946 - INFO - Found 11 loans for customer 202506000001
[2025-07-02 13:55:32,955] INFO in app: Customer ID: 1
2025-07-02 13:55:32,955 - INFO - Customer ID: 1
[2025-07-02 13:55:32,957] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'active')]
2025-07-02 13:55:32,957 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'active')]
2025-07-02 13:55:32,981 - INFO - 127.0.0.1 - - [02/Jul/2025 13:55:32] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-07-02 13:57:22,416] INFO in app: [TOPUP] Submit route hit for loan 11
2025-07-02 13:57:22,416 - INFO - [TOPUP] Submit route hit for loan 11
2025-07-02 13:57:22,443 - DEBUG - [DEBUG] Base loan #103000011 → Top-up balance: 2875104.82, Interest: 190104.82
[2025-07-02 13:57:22,512] INFO in app: [103000011] Schedule 121 updated → fees=22400.0, interest=93975.0, principal=864393.27
2025-07-02 13:57:22,512 - INFO - [103000011] Schedule 121 updated → fees=22400.0, interest=93975.0, principal=864393.27
[2025-07-02 13:57:22,514] INFO in app: [103000011] Schedule 122 updated → fees=22400.0, interest=63721.24, principal=894647.04
2025-07-02 13:57:22,514 - INFO - [103000011] Schedule 122 updated → fees=22400.0, interest=63721.24, principal=894647.04
[2025-07-02 13:57:22,516] INFO in app: [103000011] Schedule 123 updated → fees=22400.0, interest=32408.58, principal=858759.6899999998
2025-07-02 13:57:22,516 - INFO - [103000011] Schedule 123 updated → fees=22400.0, interest=32408.58, principal=858759.6899999998
[2025-07-02 13:57:22,533] INFO in app: [103000011] Recalculated balances → capitalized=2685000.0, paid_principal=0, paid_settlement_interest=0, current_balance=2685000.0, top_up_balance=2824080.7, settlement_balance=2685000.0, loan_state=active
2025-07-02 13:57:22,533 - INFO - [103000011] Recalculated balances → capitalized=2685000.0, paid_principal=0, paid_settlement_interest=0, current_balance=2685000.0, top_up_balance=2824080.7, settlement_balance=2685000.0, loan_state=active
[2025-07-02 13:57:22,535] INFO in app: [103000011] Payment of 2875104.82 allocated. Remaining: 0.0
2025-07-02 13:57:22,535 - INFO - [103000011] Payment of 2875104.82 allocated. Remaining: 0.0
[2025-07-02 13:57:22,537] INFO in app: [103000011] Recalculated balances → capitalized=2685000.0, paid_principal=0, paid_settlement_interest=0, current_balance=2685000.0, top_up_balance=2824080.7, settlement_balance=2685000.0, loan_state=active
2025-07-02 13:57:22,537 - INFO - [103000011] Recalculated balances → capitalized=2685000.0, paid_principal=0, paid_settlement_interest=0, current_balance=2685000.0, top_up_balance=2824080.7, settlement_balance=2685000.0, loan_state=active
2025-07-02 13:57:22,550 - INFO - 127.0.0.1 - - [02/Jul/2025 13:57:22] "[32mPOST /topup/11 HTTP/1.1[0m" 302 -
[2025-07-02 13:57:22,560] INFO in app: Found 12 loans for customer 202506000001
2025-07-02 13:57:22,560 - INFO - Found 12 loans for customer 202506000001
[2025-07-02 13:57:22,563] INFO in app: Customer ID: 1
2025-07-02 13:57:22,563 - INFO - Customer ID: 1
[2025-07-02 13:57:22,565] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'application')]
2025-07-02 13:57:22,565 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'application')]
2025-07-02 13:57:22,588 - INFO - 127.0.0.1 - - [02/Jul/2025 13:57:22] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-02 13:57:37,471 - INFO - 127.0.0.1 - - [02/Jul/2025 13:57:37] "GET /loans HTTP/1.1" 200 -
2025-07-02 13:57:44,804 - INFO - 127.0.0.1 - - [02/Jul/2025 13:57:44] "[32mPOST /process_loan/12/approve HTTP/1.1[0m" 302 -
2025-07-02 13:57:45,139 - INFO - 127.0.0.1 - - [02/Jul/2025 13:57:45] "GET /loans HTTP/1.1" 200 -
2025-07-02 13:57:51,139 - INFO - 127.0.0.1 - - [02/Jul/2025 13:57:51] "GET /loanbook HTTP/1.1" 200 -
[2025-07-02 13:58:04,129] INFO in app: Found 12 loans for customer 202506000001
2025-07-02 13:58:04,129 - INFO - Found 12 loans for customer 202506000001
[2025-07-02 13:58:04,134] INFO in app: Customer ID: 1
2025-07-02 13:58:04,134 - INFO - Customer ID: 1
[2025-07-02 13:58:04,139] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active')]
2025-07-02 13:58:04,139 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active')]
2025-07-02 13:58:04,196 - INFO - 127.0.0.1 - - [02/Jul/2025 13:58:04] "GET /customer/202506000001/account HTTP/1.1" 200 -
2025-07-02 13:58:07,788 - INFO - 127.0.0.1 - - [02/Jul/2025 13:58:07] "GET /loanbook HTTP/1.1" 200 -
2025-07-02 13:58:14,470 - INFO - 127.0.0.1 - - [02/Jul/2025 13:58:14] "GET /loan/103000011/statement HTTP/1.1" 200 -
[2025-07-02 14:27:31,005] INFO in app: [103000011] Schedule 123 → Paid: fees=22400.0, interest=32408.58, principal=925959.69
2025-07-02 14:27:31,005 - INFO - [103000011] Schedule 123 → Paid: fees=22400.0, interest=32408.58, principal=925959.69
[2025-07-02 14:27:31,040] INFO in app: [103000011] Recalculated balances → capitalized=2685000.0, paid_principal=0, paid_settlement_interest=0, current_balance=2685000.0, top_up_balance=2824080.7, settlement_balance=2685000.0, loan_state=topped_up
2025-07-02 14:27:31,040 - INFO - [103000011] Recalculated balances → capitalized=2685000.0, paid_principal=0, paid_settlement_interest=0, current_balance=2685000.0, top_up_balance=2824080.7, settlement_balance=2685000.0, loan_state=topped_up
[2025-07-02 14:27:31,063] INFO in app: [103000011] Payment 2875104.82 allocated. Remaining: 2807904.82
2025-07-02 14:27:31,063 - INFO - [103000011] Payment 2875104.82 allocated. Remaining: 2807904.82
[2025-07-05 19:29:39,726] INFO in app: ==================================================
[2025-07-05 19:29:40,049] INFO in app: Application logging initialized successfully
[2025-07-05 19:29:40,220] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-05 19:29:40,236] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-05 19:29:40,241] INFO in app: System encoding: utf-8
[2025-07-05 19:29:40,509] INFO in app: ==================================================
2025-07-05 19:29:43,912 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-05 19:29:43,913 - INFO - [33mPress CTRL+C to quit[0m
2025-07-05 19:29:51,491 - INFO - 127.0.0.1 - - [05/Jul/2025 19:29:51] "GET /loan/103000011/statement HTTP/1.1" 200 -
2025-07-05 19:29:56,384 - INFO - 127.0.0.1 - - [05/Jul/2025 19:29:56] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-05 19:52:46,774] INFO in app: ==================================================
[2025-07-05 19:52:46,783] INFO in app: Application logging initialized successfully
[2025-07-05 19:52:46,785] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-05 19:52:46,786] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-05 19:52:46,789] INFO in app: System encoding: utf-8
[2025-07-05 19:52:46,797] INFO in app: ==================================================
2025-07-05 19:52:47,339 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-05 19:52:47,339 - INFO - [33mPress CTRL+C to quit[0m
2025-07-05 19:52:56,871 - INFO - 127.0.0.1 - - [05/Jul/2025 19:52:56] "GET /loan/103000011/statement HTTP/1.1" 200 -
2025-07-05 19:53:00,566 - INFO - 127.0.0.1 - - [05/Jul/2025 19:53:00] "GET /loanbook HTTP/1.1" 200 -
2025-07-05 19:53:13,288 - INFO - 127.0.0.1 - - [05/Jul/2025 19:53:13] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-05 19:53:14,831 - INFO - 127.0.0.1 - - [05/Jul/2025 19:53:14] "GET /loan/124000012/statement HTTP/1.1" 200 -
2025-07-05 19:53:20,919 - INFO - 127.0.0.1 - - [05/Jul/2025 19:53:20] "GET /loanbook HTTP/1.1" 200 -
[2025-07-05 19:53:25,870] INFO in app: Found 12 loans for customer 202506000001
2025-07-05 19:53:25,870 - INFO - Found 12 loans for customer 202506000001
[2025-07-05 19:53:25,878] INFO in app: Customer ID: 1
2025-07-05 19:53:25,878 - INFO - Customer ID: 1
[2025-07-05 19:53:25,883] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active')]
2025-07-05 19:53:25,883 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active')]
2025-07-05 19:53:26,090 - INFO - 127.0.0.1 - - [05/Jul/2025 19:53:26] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-05 19:53:28,725] INFO in app: Found 12 loans for customer 202506000001
2025-07-05 19:53:28,725 - INFO - Found 12 loans for customer 202506000001
[2025-07-05 19:53:28,739] INFO in app: Customer ID: 1
2025-07-05 19:53:28,739 - INFO - Customer ID: 1
[2025-07-05 19:53:28,745] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active')]
2025-07-05 19:53:28,745 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active')]
2025-07-05 19:53:28,806 - INFO - 127.0.0.1 - - [05/Jul/2025 19:53:28] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-07-05 19:54:06,137] INFO in app: [TOPUP] Submit route hit for loan 12
2025-07-05 19:54:06,137 - INFO - [TOPUP] Submit route hit for loan 12
2025-07-05 19:54:06,160 - INFO - 127.0.0.1 - - [05/Jul/2025 19:54:06] "[31m[1mPOST /topup/12 HTTP/1.1[0m" 413 -
[2025-07-05 19:55:02,904] INFO in app: [TOPUP] Submit route hit for loan 12
2025-07-05 19:55:02,904 - INFO - [TOPUP] Submit route hit for loan 12
2025-07-05 19:55:02,925 - DEBUG - [DEBUG] Base loan #124000012 → Top-up balance: 5914986.5, Interest: 547986.5
2025-07-05 19:55:03,031 - INFO - 127.0.0.1 - - [05/Jul/2025 19:55:03] "[32mPOST /topup/12 HTTP/1.1[0m" 302 -
[2025-07-05 19:55:03,051] INFO in app: Found 13 loans for customer 202506000001
2025-07-05 19:55:03,051 - INFO - Found 13 loans for customer 202506000001
[2025-07-05 19:55:03,055] INFO in app: Customer ID: 1
2025-07-05 19:55:03,055 - INFO - Customer ID: 1
[2025-07-05 19:55:03,059] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'application')]
2025-07-05 19:55:03,059 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'application')]
2025-07-05 19:55:03,111 - INFO - 127.0.0.1 - - [05/Jul/2025 19:55:03] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-07-05 20:02:26,663] INFO in app: ==================================================
[2025-07-05 20:02:26,670] INFO in app: Application logging initialized successfully
[2025-07-05 20:02:26,673] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-05 20:02:26,675] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-05 20:02:26,677] INFO in app: System encoding: utf-8
[2025-07-05 20:02:26,680] INFO in app: ==================================================
2025-07-05 20:02:26,891 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-05 20:02:26,891 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-05 20:02:52,200] INFO in app: Found 13 loans for customer 202506000001
2025-07-05 20:02:52,200 - INFO - Found 13 loans for customer 202506000001
[2025-07-05 20:02:52,203] INFO in app: Customer ID: 1
2025-07-05 20:02:52,203 - INFO - Customer ID: 1
[2025-07-05 20:02:52,206] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'application')]
2025-07-05 20:02:52,206 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'application')]
2025-07-05 20:02:52,368 - INFO - 127.0.0.1 - - [05/Jul/2025 20:02:52] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
[2025-07-05 20:03:06,644] INFO in app: Found 13 loans for customer 202506000001
2025-07-05 20:03:06,644 - INFO - Found 13 loans for customer 202506000001
[2025-07-05 20:03:06,662] INFO in app: Customer ID: 1
2025-07-05 20:03:06,662 - INFO - Customer ID: 1
[2025-07-05 20:03:06,667] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'application')]
2025-07-05 20:03:06,667 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'application')]
2025-07-05 20:03:06,714 - INFO - 127.0.0.1 - - [05/Jul/2025 20:03:06] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-07-05 20:03:48,802] INFO in app: [TOPUP] Submit route hit for loan 12
2025-07-05 20:03:48,802 - INFO - [TOPUP] Submit route hit for loan 12
2025-07-05 20:03:48,830 - DEBUG - [DEBUG] Base loan #124000012 → Top-up balance: 5914986.5, Interest: 547986.5
2025-07-05 20:03:48,911 - INFO - 127.0.0.1 - - [05/Jul/2025 20:03:48] "[32mPOST /topup/12 HTTP/1.1[0m" 302 -
[2025-07-05 20:03:49,112] INFO in app: Found 14 loans for customer 202506000001
2025-07-05 20:03:49,112 - INFO - Found 14 loans for customer 202506000001
[2025-07-05 20:03:49,119] INFO in app: Customer ID: 1
2025-07-05 20:03:49,119 - INFO - Customer ID: 1
[2025-07-05 20:03:49,126] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'application'), ('124000014', 'application')]
2025-07-05 20:03:49,126 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'application'), ('124000014', 'application')]
2025-07-05 20:03:49,232 - INFO - 127.0.0.1 - - [05/Jul/2025 20:03:49] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-07-05 20:04:13,578] INFO in app: ==================================================
[2025-07-05 20:04:13,590] INFO in app: Application logging initialized successfully
[2025-07-05 20:04:13,594] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-05 20:04:13,597] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-05 20:04:13,601] INFO in app: System encoding: utf-8
[2025-07-05 20:04:13,607] INFO in app: ==================================================
2025-07-05 20:04:14,021 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-05 20:04:14,021 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-05 20:04:32,988] INFO in app: Found 14 loans for customer 202506000001
2025-07-05 20:04:32,988 - INFO - Found 14 loans for customer 202506000001
[2025-07-05 20:04:32,993] INFO in app: Customer ID: 1
2025-07-05 20:04:32,993 - INFO - Customer ID: 1
[2025-07-05 20:04:33,010] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'application'), ('124000014', 'application')]
2025-07-05 20:04:33,010 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'application'), ('124000014', 'application')]
2025-07-05 20:04:33,222 - INFO - 127.0.0.1 - - [05/Jul/2025 20:04:33] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
2025-07-05 20:05:10,200 - INFO - 127.0.0.1 - - [05/Jul/2025 20:05:10] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-05 20:10:57,508] INFO in app: Found 14 loans for customer 202506000001
2025-07-05 20:10:57,508 - INFO - Found 14 loans for customer 202506000001
[2025-07-05 20:10:57,514] INFO in app: Customer ID: 1
2025-07-05 20:10:57,514 - INFO - Customer ID: 1
[2025-07-05 20:10:57,520] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'application'), ('124000014', 'application')]
2025-07-05 20:10:57,520 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'application'), ('124000014', 'application')]
2025-07-05 20:10:57,569 - INFO - 127.0.0.1 - - [05/Jul/2025 20:10:57] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-05 20:11:06,685 - INFO - 127.0.0.1 - - [05/Jul/2025 20:11:06] "GET /loans HTTP/1.1" 200 -
2025-07-05 20:11:10,626 - INFO - 127.0.0.1 - - [05/Jul/2025 20:11:10] "[32mPOST /process_loan/13/approve HTTP/1.1[0m" 302 -
2025-07-05 20:11:11,035 - INFO - 127.0.0.1 - - [05/Jul/2025 20:11:11] "GET /loans HTTP/1.1" 200 -
2025-07-05 20:11:13,746 - INFO - 127.0.0.1 - - [05/Jul/2025 20:11:13] "[32mPOST /process_loan/14/approve HTTP/1.1[0m" 302 -
2025-07-05 20:11:13,841 - INFO - 127.0.0.1 - - [05/Jul/2025 20:11:13] "GET /loans HTTP/1.1" 200 -
2025-07-05 20:11:15,772 - INFO - 127.0.0.1 - - [05/Jul/2025 20:11:15] "GET /loanbook HTTP/1.1" 200 -
[2025-07-05 20:11:36,082] INFO in app: Found 14 loans for customer 202506000001
2025-07-05 20:11:36,082 - INFO - Found 14 loans for customer 202506000001
[2025-07-05 20:11:36,139] INFO in app: Customer ID: 1
2025-07-05 20:11:36,139 - INFO - Customer ID: 1
[2025-07-05 20:11:36,142] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'active'), ('124000014', 'active')]
2025-07-05 20:11:36,142 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'active'), ('124000014', 'active')]
2025-07-05 20:11:36,189 - INFO - 127.0.0.1 - - [05/Jul/2025 20:11:36] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-06 06:47:58,121] INFO in app: ==================================================
[2025-07-06 06:47:58,218] INFO in app: Application logging initialized successfully
[2025-07-06 06:47:58,220] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-06 06:47:58,222] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-06 06:47:58,224] INFO in app: System encoding: utf-8
[2025-07-06 06:47:58,227] INFO in app: ==================================================
2025-07-06 06:47:58,873 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-06 06:47:58,873 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-06 06:48:06,471] INFO in app: Found 14 loans for customer 202506000001
2025-07-06 06:48:06,471 - INFO - Found 14 loans for customer 202506000001
[2025-07-06 06:48:06,474] INFO in app: Customer ID: 1
2025-07-06 06:48:06,474 - INFO - Customer ID: 1
[2025-07-06 06:48:06,477] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'active'), ('124000014', 'active')]
2025-07-06 06:48:06,477 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'active'), ('124000014', 'active')]
2025-07-06 06:48:06,675 - INFO - 127.0.0.1 - - [06/Jul/2025 06:48:06] "GET /customer/202506000001/account HTTP/1.1" 200 -
2025-07-06 06:48:07,370 - INFO - 127.0.0.1 - - [06/Jul/2025 06:48:07] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-06 06:48:11,914 - INFO - 127.0.0.1 - - [06/Jul/2025 06:48:11] "GET /loans HTTP/1.1" 200 -
2025-07-06 06:48:20,764 - INFO - 127.0.0.1 - - [06/Jul/2025 06:48:20] "GET /loanbook HTTP/1.1" 200 -
[2025-07-06 06:48:22,665] INFO in app: Found 14 loans for customer 202506000001
2025-07-06 06:48:22,665 - INFO - Found 14 loans for customer 202506000001
[2025-07-06 06:48:22,683] INFO in app: Customer ID: 1
2025-07-06 06:48:22,683 - INFO - Customer ID: 1
[2025-07-06 06:48:22,699] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'active'), ('124000014', 'active')]
2025-07-06 06:48:22,699 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'active'), ('124000014', 'active')]
2025-07-06 06:48:22,780 - INFO - 127.0.0.1 - - [06/Jul/2025 06:48:22] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-06 06:48:25,075] INFO in app: Found 14 loans for customer 202506000001
2025-07-06 06:48:25,075 - INFO - Found 14 loans for customer 202506000001
[2025-07-06 06:48:25,120] INFO in app: Customer ID: 1
2025-07-06 06:48:25,120 - INFO - Customer ID: 1
[2025-07-06 06:48:25,150] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'active'), ('124000014', 'active')]
2025-07-06 06:48:25,150 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'active'), ('124000014', 'active')]
2025-07-06 06:48:25,283 - INFO - 127.0.0.1 - - [06/Jul/2025 06:48:25] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-07-06 06:49:07,101] INFO in app: [TOPUP] Submit route hit for loan 13
2025-07-06 06:49:07,101 - INFO - [TOPUP] Submit route hit for loan 13
2025-07-06 06:49:07,131 - DEBUG - [DEBUG] Base loan #124000013 → Top-up balance: 11826666.69, Interest: 1095666.69
[2025-07-06 06:49:07,282] INFO in app: [124000013] Schedule 148 updated → fees=89600.0, interest=375585.0, principal=292664.74
2025-07-06 06:49:07,282 - INFO - [124000013] Schedule 148 updated → fees=89600.0, interest=375585.0, principal=292664.74
[2025-07-06 06:49:07,287] INFO in app: [124000013] Schedule 149 updated → fees=89600.0, interest=365341.73, principal=302908.01
2025-07-06 06:49:07,287 - INFO - [124000013] Schedule 149 updated → fees=89600.0, interest=365341.73, principal=302908.01
[2025-07-06 06:49:07,295] INFO in app: [124000013] Schedule 150 updated → fees=89600.0, interest=354739.95, principal=313509.79
2025-07-06 06:49:07,295 - INFO - [124000013] Schedule 150 updated → fees=89600.0, interest=354739.95, principal=313509.79
[2025-07-06 06:49:07,301] INFO in app: [124000013] Schedule 151 updated → fees=89600.0, interest=343767.11, principal=324482.63
2025-07-06 06:49:07,301 - INFO - [124000013] Schedule 151 updated → fees=89600.0, interest=343767.11, principal=324482.63
[2025-07-06 06:49:07,314] INFO in app: [124000013] Schedule 152 updated → fees=89600.0, interest=332410.22, principal=335839.52
2025-07-06 06:49:07,314 - INFO - [124000013] Schedule 152 updated → fees=89600.0, interest=332410.22, principal=335839.52
[2025-07-06 06:49:07,320] INFO in app: [124000013] Schedule 153 updated → fees=89600.0, interest=320655.84, principal=347593.91
2025-07-06 06:49:07,320 - INFO - [124000013] Schedule 153 updated → fees=89600.0, interest=320655.84, principal=347593.91
[2025-07-06 06:49:07,331] INFO in app: [124000013] Schedule 154 updated → fees=89600.0, interest=308490.05, principal=359759.69
2025-07-06 06:49:07,331 - INFO - [124000013] Schedule 154 updated → fees=89600.0, interest=308490.05, principal=359759.69
[2025-07-06 06:49:07,343] INFO in app: [124000013] Schedule 155 updated → fees=89600.0, interest=295898.46, principal=372351.28
2025-07-06 06:49:07,343 - INFO - [124000013] Schedule 155 updated → fees=89600.0, interest=295898.46, principal=372351.28
[2025-07-06 06:49:07,352] INFO in app: [124000013] Schedule 156 updated → fees=89600.0, interest=282866.17, principal=385383.58
2025-07-06 06:49:07,352 - INFO - [124000013] Schedule 156 updated → fees=89600.0, interest=282866.17, principal=385383.58
[2025-07-06 06:49:07,369] INFO in app: [124000013] Schedule 157 updated → fees=89600.0, interest=269377.74, principal=398872.0
2025-07-06 06:49:07,369 - INFO - [124000013] Schedule 157 updated → fees=89600.0, interest=269377.74, principal=398872.0
[2025-07-06 06:49:07,382] INFO in app: [124000013] Schedule 158 updated → fees=89600.0, interest=255417.22, principal=412832.52
2025-07-06 06:49:07,382 - INFO - [124000013] Schedule 158 updated → fees=89600.0, interest=255417.22, principal=412832.52
[2025-07-06 06:49:07,387] INFO in app: [124000013] Schedule 159 updated → fees=89600.0, interest=240968.08, principal=427281.66
2025-07-06 06:49:07,387 - INFO - [124000013] Schedule 159 updated → fees=89600.0, interest=240968.08, principal=427281.66
[2025-07-06 06:49:07,399] INFO in app: [124000013] Schedule 160 updated → fees=89600.0, interest=226013.22, principal=442236.52
2025-07-06 06:49:07,399 - INFO - [124000013] Schedule 160 updated → fees=89600.0, interest=226013.22, principal=442236.52
[2025-07-06 06:49:07,410] INFO in app: [124000013] Schedule 161 updated → fees=89600.0, interest=210534.95, principal=457714.8
2025-07-06 06:49:07,410 - INFO - [124000013] Schedule 161 updated → fees=89600.0, interest=210534.95, principal=457714.8
[2025-07-06 06:49:07,419] INFO in app: [124000013] Schedule 162 updated → fees=89600.0, interest=194514.93, principal=473734.81
2025-07-06 06:49:07,419 - INFO - [124000013] Schedule 162 updated → fees=89600.0, interest=194514.93, principal=473734.81
[2025-07-06 06:49:07,428] INFO in app: [124000013] Schedule 163 updated → fees=89600.0, interest=177934.21, principal=191386.34999999896
2025-07-06 06:49:07,428 - INFO - [124000013] Schedule 163 updated → fees=89600.0, interest=177934.21, principal=191386.34999999896
[2025-07-06 06:49:07,465] INFO in app: [124000013] Recalculated balances → capitalized=10731000.0, paid_principal=5838551.809999999, paid_settlement_interest=0.0, current_balance=4892448.19, top_up_balance=5440434.69, settlement_balance=4892448.19, loan_state=active
2025-07-06 06:49:07,465 - INFO - [124000013] Recalculated balances → capitalized=10731000.0, paid_principal=5838551.809999999, paid_settlement_interest=0.0, current_balance=4892448.19, top_up_balance=5440434.69, settlement_balance=4892448.19, loan_state=active
[2025-07-06 06:49:07,471] INFO in app: [124000013] Payment of 11826666.69 allocated. Remaining: 0.0
2025-07-06 06:49:07,471 - INFO - [124000013] Payment of 11826666.69 allocated. Remaining: 0.0
[2025-07-06 06:49:07,482] INFO in app: [124000013] Recalculated balances → capitalized=10731000.0, paid_principal=5838551.809999999, paid_settlement_interest=0.0, current_balance=4892448.19, top_up_balance=5440434.69, settlement_balance=4892448.19, loan_state=active
2025-07-06 06:49:07,482 - INFO - [124000013] Recalculated balances → capitalized=10731000.0, paid_principal=5838551.809999999, paid_settlement_interest=0.0, current_balance=4892448.19, top_up_balance=5440434.69, settlement_balance=4892448.19, loan_state=active
2025-07-06 06:49:07,539 - INFO - 127.0.0.1 - - [06/Jul/2025 06:49:07] "[32mPOST /topup/13 HTTP/1.1[0m" 302 -
[2025-07-06 06:49:07,572] INFO in app: Found 15 loans for customer 202506000001
2025-07-06 06:49:07,572 - INFO - Found 15 loans for customer 202506000001
[2025-07-06 06:49:07,578] INFO in app: Customer ID: 1
2025-07-06 06:49:07,578 - INFO - Customer ID: 1
[2025-07-06 06:49:07,585] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'topped_up'), ('124000014', 'active'), ('124000015', 'application')]
2025-07-06 06:49:07,585 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'topped_up'), ('124000014', 'active'), ('124000015', 'application')]
2025-07-06 06:49:07,647 - INFO - 127.0.0.1 - - [06/Jul/2025 06:49:07] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-06 06:49:20,900 - INFO - 127.0.0.1 - - [06/Jul/2025 06:49:20] "GET /loans HTTP/1.1" 200 -
2025-07-06 06:49:27,913 - INFO - 127.0.0.1 - - [06/Jul/2025 06:49:27] "[32mPOST /process_loan/15/approve HTTP/1.1[0m" 302 -
2025-07-06 06:49:28,264 - INFO - 127.0.0.1 - - [06/Jul/2025 06:49:28] "GET /loans HTTP/1.1" 200 -
2025-07-06 06:49:31,217 - INFO - 127.0.0.1 - - [06/Jul/2025 06:49:31] "GET /loanbook HTTP/1.1" 200 -
[2025-07-06 06:49:59,589] INFO in app: Found 15 loans for customer 202506000001
2025-07-06 06:49:59,589 - INFO - Found 15 loans for customer 202506000001
[2025-07-06 06:49:59,598] INFO in app: Customer ID: 1
2025-07-06 06:49:59,598 - INFO - Customer ID: 1
[2025-07-06 06:49:59,617] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'topped_up'), ('124000014', 'active'), ('124000015', 'active')]
2025-07-06 06:49:59,617 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'topped_up'), ('124000014', 'active'), ('124000015', 'active')]
2025-07-06 06:49:59,715 - INFO - 127.0.0.1 - - [06/Jul/2025 06:49:59] "GET /customer/202506000001/account HTTP/1.1" 200 -
2025-07-06 06:50:22,740 - INFO - 127.0.0.1 - - [06/Jul/2025 06:50:22] "GET /loan/124000013/statement HTTP/1.1" 200 -
[2025-07-06 07:04:41,054] INFO in app: ==================================================
[2025-07-06 07:04:41,061] INFO in app: Application logging initialized successfully
[2025-07-06 07:04:41,064] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-06 07:04:41,066] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-06 07:04:41,069] INFO in app: System encoding: utf-8
[2025-07-06 07:04:41,073] INFO in app: ==================================================
2025-07-06 07:04:41,263 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-06 07:04:41,263 - INFO - [33mPress CTRL+C to quit[0m
2025-07-06 07:04:48,255 - INFO - 127.0.0.1 - - [06/Jul/2025 07:04:48] "GET /loan/124000013/statement HTTP/1.1" 200 -
2025-07-06 07:04:49,557 - INFO - 127.0.0.1 - - [06/Jul/2025 07:04:49] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-06 07:04:51,898 - INFO - 127.0.0.1 - - [06/Jul/2025 07:04:51] "GET /loanbook HTTP/1.1" 200 -
[2025-07-06 07:04:56,296] INFO in app: Found 15 loans for customer 202506000001
2025-07-06 07:04:56,296 - INFO - Found 15 loans for customer 202506000001
[2025-07-06 07:04:56,299] INFO in app: Customer ID: 1
2025-07-06 07:04:56,299 - INFO - Customer ID: 1
[2025-07-06 07:04:56,301] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'topped_up'), ('124000014', 'active'), ('124000015', 'active')]
2025-07-06 07:04:56,301 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'topped_up'), ('124000014', 'active'), ('124000015', 'active')]
2025-07-06 07:04:56,366 - INFO - 127.0.0.1 - - [06/Jul/2025 07:04:56] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-06 07:04:58,581] INFO in app: Found 15 loans for customer 202506000001
2025-07-06 07:04:58,581 - INFO - Found 15 loans for customer 202506000001
[2025-07-06 07:04:58,590] INFO in app: Customer ID: 1
2025-07-06 07:04:58,590 - INFO - Customer ID: 1
[2025-07-06 07:04:58,597] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'topped_up'), ('124000014', 'active'), ('124000015', 'active')]
2025-07-06 07:04:58,597 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'topped_up'), ('124000014', 'active'), ('124000015', 'active')]
2025-07-06 07:04:58,629 - INFO - 127.0.0.1 - - [06/Jul/2025 07:04:58] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-07-06 07:05:36,034] INFO in app: [TOPUP] Submit route hit for loan 14
2025-07-06 07:05:36,034 - INFO - [TOPUP] Submit route hit for loan 14
2025-07-06 07:05:36,194 - DEBUG - [DEBUG] Base loan #124000014 → Top-up balance: 11826666.69, Interest: 1095666.69
[2025-07-06 07:05:36,258] INFO in app: [124000014] Schedule 172 updated → fees=89600.0, interest=375585.0, principal=292664.74
2025-07-06 07:05:36,258 - INFO - [124000014] Schedule 172 updated → fees=89600.0, interest=375585.0, principal=292664.74
[2025-07-06 07:05:36,260] INFO in app: [124000014] Schedule 173 updated → fees=89600.0, interest=365341.73, principal=302908.01
2025-07-06 07:05:36,260 - INFO - [124000014] Schedule 173 updated → fees=89600.0, interest=365341.73, principal=302908.01
[2025-07-06 07:05:36,262] INFO in app: [124000014] Schedule 174 updated → fees=89600.0, interest=354739.95, principal=313509.79
2025-07-06 07:05:36,262 - INFO - [124000014] Schedule 174 updated → fees=89600.0, interest=354739.95, principal=313509.79
[2025-07-06 07:05:36,266] INFO in app: [124000014] Schedule 175 updated → fees=89600.0, interest=343767.11, principal=324482.63
2025-07-06 07:05:36,266 - INFO - [124000014] Schedule 175 updated → fees=89600.0, interest=343767.11, principal=324482.63
[2025-07-06 07:05:36,269] INFO in app: [124000014] Schedule 176 updated → fees=89600.0, interest=332410.22, principal=335839.52
2025-07-06 07:05:36,269 - INFO - [124000014] Schedule 176 updated → fees=89600.0, interest=332410.22, principal=335839.52
[2025-07-06 07:05:36,271] INFO in app: [124000014] Schedule 177 updated → fees=89600.0, interest=320655.84, principal=347593.91
2025-07-06 07:05:36,271 - INFO - [124000014] Schedule 177 updated → fees=89600.0, interest=320655.84, principal=347593.91
[2025-07-06 07:05:36,277] INFO in app: [124000014] Schedule 178 updated → fees=89600.0, interest=308490.05, principal=359759.69
2025-07-06 07:05:36,277 - INFO - [124000014] Schedule 178 updated → fees=89600.0, interest=308490.05, principal=359759.69
[2025-07-06 07:05:36,279] INFO in app: [124000014] Schedule 179 updated → fees=89600.0, interest=295898.46, principal=372351.28
2025-07-06 07:05:36,279 - INFO - [124000014] Schedule 179 updated → fees=89600.0, interest=295898.46, principal=372351.28
[2025-07-06 07:05:36,283] INFO in app: [124000014] Schedule 180 updated → fees=89600.0, interest=282866.17, principal=385383.58
2025-07-06 07:05:36,283 - INFO - [124000014] Schedule 180 updated → fees=89600.0, interest=282866.17, principal=385383.58
[2025-07-06 07:05:36,286] INFO in app: [124000014] Schedule 181 updated → fees=89600.0, interest=269377.74, principal=398872.0
2025-07-06 07:05:36,286 - INFO - [124000014] Schedule 181 updated → fees=89600.0, interest=269377.74, principal=398872.0
[2025-07-06 07:05:36,288] INFO in app: [124000014] Schedule 182 updated → fees=89600.0, interest=255417.22, principal=412832.52
2025-07-06 07:05:36,288 - INFO - [124000014] Schedule 182 updated → fees=89600.0, interest=255417.22, principal=412832.52
[2025-07-06 07:05:36,296] INFO in app: [124000014] Schedule 183 updated → fees=89600.0, interest=240968.08, principal=427281.66
2025-07-06 07:05:36,296 - INFO - [124000014] Schedule 183 updated → fees=89600.0, interest=240968.08, principal=427281.66
[2025-07-06 07:05:36,301] INFO in app: [124000014] Schedule 184 updated → fees=89600.0, interest=226013.22, principal=442236.52
2025-07-06 07:05:36,301 - INFO - [124000014] Schedule 184 updated → fees=89600.0, interest=226013.22, principal=442236.52
[2025-07-06 07:05:36,304] INFO in app: [124000014] Schedule 185 updated → fees=89600.0, interest=210534.95, principal=457714.8
2025-07-06 07:05:36,304 - INFO - [124000014] Schedule 185 updated → fees=89600.0, interest=210534.95, principal=457714.8
[2025-07-06 07:05:36,310] INFO in app: [124000014] Schedule 186 updated → fees=89600.0, interest=194514.93, principal=473734.81
2025-07-06 07:05:36,310 - INFO - [124000014] Schedule 186 updated → fees=89600.0, interest=194514.93, principal=473734.81
[2025-07-06 07:05:36,312] INFO in app: [124000014] Schedule 187 updated → fees=89600.0, interest=177934.21, principal=191386.34999999896
2025-07-06 07:05:36,312 - INFO - [124000014] Schedule 187 updated → fees=89600.0, interest=177934.21, principal=191386.34999999896
[2025-07-06 07:05:36,320] INFO in app: [124000014] Recalculated balances → capitalized=10731000.0, paid_principal=5838551.809999999, paid_settlement_interest=0.0, current_balance=4892448.19, top_up_balance=5440434.69, settlement_balance=4892448.19, loan_state=active
2025-07-06 07:05:36,320 - INFO - [124000014] Recalculated balances → capitalized=10731000.0, paid_principal=5838551.809999999, paid_settlement_interest=0.0, current_balance=4892448.19, top_up_balance=5440434.69, settlement_balance=4892448.19, loan_state=active
[2025-07-06 07:05:36,326] INFO in app: [124000014] Payment of 11826666.69 allocated. Remaining: 0.0
2025-07-06 07:05:36,326 - INFO - [124000014] Payment of 11826666.69 allocated. Remaining: 0.0
[2025-07-06 07:05:36,329] INFO in app: [124000014] Recalculated balances → capitalized=10731000.0, paid_principal=5838551.809999999, paid_settlement_interest=0.0, current_balance=4892448.19, top_up_balance=5440434.69, settlement_balance=4892448.19, loan_state=active
2025-07-06 07:05:36,329 - INFO - [124000014] Recalculated balances → capitalized=10731000.0, paid_principal=5838551.809999999, paid_settlement_interest=0.0, current_balance=4892448.19, top_up_balance=5440434.69, settlement_balance=4892448.19, loan_state=active
2025-07-06 07:05:36,339 - INFO - 127.0.0.1 - - [06/Jul/2025 07:05:36] "[32mPOST /topup/14 HTTP/1.1[0m" 302 -
[2025-07-06 07:05:36,350] INFO in app: Found 16 loans for customer 202506000001
2025-07-06 07:05:36,350 - INFO - Found 16 loans for customer 202506000001
[2025-07-06 07:05:36,352] INFO in app: Customer ID: 1
2025-07-06 07:05:36,352 - INFO - Customer ID: 1
[2025-07-06 07:05:36,354] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'application')]
2025-07-06 07:05:36,354 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'application')]
2025-07-06 07:05:36,379 - INFO - 127.0.0.1 - - [06/Jul/2025 07:05:36] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-06 07:05:39,276 - INFO - 127.0.0.1 - - [06/Jul/2025 07:05:39] "GET /loans HTTP/1.1" 200 -
2025-07-06 07:05:42,569 - INFO - 127.0.0.1 - - [06/Jul/2025 07:05:42] "[32mPOST /process_loan/16/approve HTTP/1.1[0m" 302 -
2025-07-06 07:05:42,613 - INFO - 127.0.0.1 - - [06/Jul/2025 07:05:42] "GET /loans HTTP/1.1" 200 -
2025-07-06 07:05:45,106 - INFO - 127.0.0.1 - - [06/Jul/2025 07:05:45] "GET /loanbook HTTP/1.1" 200 -
[2025-07-06 07:06:13,877] INFO in app: Found 16 loans for customer 202506000001
2025-07-06 07:06:13,877 - INFO - Found 16 loans for customer 202506000001
[2025-07-06 07:06:13,883] INFO in app: Customer ID: 1
2025-07-06 07:06:13,883 - INFO - Customer ID: 1
[2025-07-06 07:06:13,889] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active')]
2025-07-06 07:06:13,889 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active')]
2025-07-06 07:06:13,926 - INFO - 127.0.0.1 - - [06/Jul/2025 07:06:13] "GET /customer/202506000001/account HTTP/1.1" 200 -
2025-07-06 07:06:22,918 - INFO - 127.0.0.1 - - [06/Jul/2025 07:06:22] "GET /loan/103000002/statement HTTP/1.1" 200 -
2025-07-06 07:06:34,736 - INFO - 127.0.0.1 - - [06/Jul/2025 07:06:34] "GET /loanbook HTTP/1.1" 200 -
[2025-07-06 07:06:50,552] INFO in app: Found 16 loans for customer 202506000001
2025-07-06 07:06:50,552 - INFO - Found 16 loans for customer 202506000001
[2025-07-06 07:06:50,557] INFO in app: Customer ID: 1
2025-07-06 07:06:50,557 - INFO - Customer ID: 1
[2025-07-06 07:06:50,564] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active')]
2025-07-06 07:06:50,564 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active')]
2025-07-06 07:06:50,602 - INFO - 127.0.0.1 - - [06/Jul/2025 07:06:50] "GET /customer/202506000001/account HTTP/1.1" 200 -
2025-07-06 07:06:57,528 - INFO - 127.0.0.1 - - [06/Jul/2025 07:06:57] "GET /loan/124000014/statement HTTP/1.1" 200 -
[2025-07-06 07:12:18,614] INFO in app: ==================================================
[2025-07-06 07:12:18,620] INFO in app: Application logging initialized successfully
[2025-07-06 07:12:18,623] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-06 07:12:18,625] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-06 07:12:18,628] INFO in app: System encoding: utf-8
[2025-07-06 07:12:18,631] INFO in app: ==================================================
2025-07-06 07:12:18,823 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-06 07:12:18,824 - INFO - [33mPress CTRL+C to quit[0m
2025-07-06 07:12:25,793 - INFO - 127.0.0.1 - - [06/Jul/2025 07:12:25] "GET /loan/124000014/statement HTTP/1.1" 200 -
2025-07-06 07:12:28,595 - INFO - 127.0.0.1 - - [06/Jul/2025 07:12:28] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-06 07:12:29,093 - INFO - 127.0.0.1 - - [06/Jul/2025 07:12:29] "GET /loanbook HTTP/1.1" 200 -
[2025-07-06 07:12:44,461] INFO in app: Found 16 loans for customer 202506000001
2025-07-06 07:12:44,461 - INFO - Found 16 loans for customer 202506000001
[2025-07-06 07:12:44,467] INFO in app: Customer ID: 1
2025-07-06 07:12:44,467 - INFO - Customer ID: 1
[2025-07-06 07:12:44,471] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active')]
2025-07-06 07:12:44,471 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active')]
2025-07-06 07:12:44,534 - INFO - 127.0.0.1 - - [06/Jul/2025 07:12:44] "GET /customer/202506000001/account HTTP/1.1" 200 -
2025-07-06 07:13:00,170 - INFO - 127.0.0.1 - - [06/Jul/2025 07:13:00] "GET /loan/124000012/statement HTTP/1.1" 200 -
2025-07-06 07:13:30,753 - INFO - 127.0.0.1 - - [06/Jul/2025 07:13:30] "GET /payments HTTP/1.1" 200 -
2025-07-06 07:13:33,583 - INFO - 127.0.0.1 - - [06/Jul/2025 07:13:33] "GET /api/verify_loan/124000012 HTTP/1.1" 200 -
[2025-07-06 07:13:49,325] ERROR in app: Payment error: Unsupported payment method: Bank Transfer
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3909, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1514, in __init__
    raise ValueError(f"Unsupported payment method: {payment.method}")
ValueError: Unsupported payment method: Bank Transfer
2025-07-06 07:13:49,325 - ERROR - Payment error: Unsupported payment method: Bank Transfer
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3909, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1514, in __init__
    raise ValueError(f"Unsupported payment method: {payment.method}")
ValueError: Unsupported payment method: Bank Transfer
2025-07-06 07:13:49,350 - INFO - 127.0.0.1 - - [06/Jul/2025 07:13:49] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-07-06 07:13:49,363 - INFO - 127.0.0.1 - - [06/Jul/2025 07:13:49] "GET /payments HTTP/1.1" 200 -
2025-07-06 07:14:04,514 - INFO - 127.0.0.1 - - [06/Jul/2025 07:14:04] "GET /loanbook HTTP/1.1" 200 -
[2025-07-06 07:14:12,536] INFO in app: Found 16 loans for customer 202506000001
2025-07-06 07:14:12,536 - INFO - Found 16 loans for customer 202506000001
[2025-07-06 07:14:12,543] INFO in app: Customer ID: 1
2025-07-06 07:14:12,543 - INFO - Customer ID: 1
[2025-07-06 07:14:12,547] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active')]
2025-07-06 07:14:12,547 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active')]
2025-07-06 07:14:12,580 - INFO - 127.0.0.1 - - [06/Jul/2025 07:14:12] "GET /customer/202506000001/account HTTP/1.1" 200 -
2025-07-06 07:14:20,274 - INFO - 127.0.0.1 - - [06/Jul/2025 07:14:20] "GET /loan/124000012/statement HTTP/1.1" 200 -
2025-07-06 07:14:31,364 - INFO - 127.0.0.1 - - [06/Jul/2025 07:14:31] "GET /payments HTTP/1.1" 200 -
2025-07-06 07:14:33,938 - INFO - 127.0.0.1 - - [06/Jul/2025 07:14:33] "GET /api/verify_loan/124000012 HTTP/1.1" 200 -
[2025-07-06 07:14:47,336] ERROR in app: Payment error: Unsupported payment method: Bank Transfer
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3909, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1514, in __init__
    raise ValueError(f"Unsupported payment method: {payment.method}")
ValueError: Unsupported payment method: Bank Transfer
2025-07-06 07:14:47,336 - ERROR - Payment error: Unsupported payment method: Bank Transfer
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3909, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1514, in __init__
    raise ValueError(f"Unsupported payment method: {payment.method}")
ValueError: Unsupported payment method: Bank Transfer
2025-07-06 07:14:47,348 - INFO - 127.0.0.1 - - [06/Jul/2025 07:14:47] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-07-06 07:14:47,653 - INFO - 127.0.0.1 - - [06/Jul/2025 07:14:47] "GET /payments HTTP/1.1" 200 -
[2025-07-06 07:53:59,574] INFO in app: ==================================================
[2025-07-06 07:53:59,581] INFO in app: Application logging initialized successfully
[2025-07-06 07:53:59,583] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-06 07:53:59,586] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-06 07:53:59,589] INFO in app: System encoding: utf-8
[2025-07-06 07:53:59,591] INFO in app: ==================================================
2025-07-06 07:53:59,779 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-06 07:53:59,779 - INFO - [33mPress CTRL+C to quit[0m
2025-07-06 07:54:05,122 - INFO - 127.0.0.1 - - [06/Jul/2025 07:54:05] "GET /payments HTTP/1.1" 200 -
2025-07-06 07:54:06,033 - INFO - 127.0.0.1 - - [06/Jul/2025 07:54:06] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-06 07:54:06,596 - INFO - 127.0.0.1 - - [06/Jul/2025 07:54:06] "GET /loanbook HTTP/1.1" 200 -
2025-07-06 07:54:20,783 - INFO - 127.0.0.1 - - [06/Jul/2025 07:54:20] "GET /loan/124000012/statement HTTP/1.1" 200 -
2025-07-06 07:54:27,408 - INFO - 127.0.0.1 - - [06/Jul/2025 07:54:27] "GET /payments HTTP/1.1" 200 -
2025-07-06 07:54:29,758 - INFO - 127.0.0.1 - - [06/Jul/2025 07:54:29] "GET /api/verify_loan/124000012 HTTP/1.1" 200 -
[2025-07-06 07:54:42,399] ERROR in app: Payment error: Unsupported payment method: bank transfer
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3977, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1530, in __init__
    raise ValueError(f"Unsupported payment method: {self.method}")
ValueError: Unsupported payment method: bank transfer
2025-07-06 07:54:42,399 - ERROR - Payment error: Unsupported payment method: bank transfer
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 3977, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1530, in __init__
    raise ValueError(f"Unsupported payment method: {self.method}")
ValueError: Unsupported payment method: bank transfer
2025-07-06 07:54:42,413 - INFO - 127.0.0.1 - - [06/Jul/2025 07:54:42] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-07-06 07:54:42,714 - INFO - 127.0.0.1 - - [06/Jul/2025 07:54:42] "GET /payments HTTP/1.1" 200 -
[2025-07-06 07:57:50,731] INFO in app: ==================================================
[2025-07-06 07:57:50,737] INFO in app: Application logging initialized successfully
[2025-07-06 07:57:50,740] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-06 07:57:50,742] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-06 07:57:50,744] INFO in app: System encoding: utf-8
[2025-07-06 07:57:50,747] INFO in app: ==================================================
2025-07-06 07:57:50,934 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-06 07:57:50,934 - INFO - [33mPress CTRL+C to quit[0m
2025-07-06 07:57:57,640 - INFO - 127.0.0.1 - - [06/Jul/2025 07:57:57] "[33mGET /api/verify_loan/224000001 HTTP/1.1[0m" 404 -
2025-07-06 07:57:57,861 - INFO - 127.0.0.1 - - [06/Jul/2025 07:57:57] "[33mGET /api/verify_loan/224000001 HTTP/1.1[0m" 404 -
2025-07-06 07:57:59,325 - INFO - 127.0.0.1 - - [06/Jul/2025 07:57:59] "GET /loanbook HTTP/1.1" 200 -
2025-07-06 07:58:05,421 - INFO - 127.0.0.1 - - [06/Jul/2025 07:58:05] "GET /loan/124000012/statement HTTP/1.1" 200 -
2025-07-06 07:58:10,308 - INFO - 127.0.0.1 - - [06/Jul/2025 07:58:10] "GET /payments HTTP/1.1" 200 -
2025-07-06 07:58:13,253 - INFO - 127.0.0.1 - - [06/Jul/2025 07:58:13] "GET /api/verify_loan/124000012 HTTP/1.1" 200 -
[2025-07-06 07:58:25,703] INFO in app: [124000012] Schedule 124 → Paid: fees=44800.0, interest=187845.0, principal=146373.28
2025-07-06 07:58:25,703 - INFO - [124000012] Schedule 124 → Paid: fees=44800.0, interest=187845.0, principal=146373.28
[2025-07-06 07:58:25,707] INFO in app: [124000012] Schedule 125 → Paid: fees=2.9103830456733704e-11, interest=0.0, principal=0.0
2025-07-06 07:58:25,707 - INFO - [124000012] Schedule 125 → Paid: fees=2.9103830456733704e-11, interest=0.0, principal=0.0
[2025-07-06 07:58:25,712] INFO in app: [124000012] Underpayment detected; arrears recorded.
2025-07-06 07:58:25,712 - INFO - [124000012] Underpayment detected; arrears recorded.
[2025-07-06 07:58:25,723] INFO in app: [124000012] Recalculated balances → capitalized=5367000.0, paid_principal=0, paid_settlement_interest=0, current_balance=5367000.0, top_up_balance=5557104.82, settlement_balance=5367000.0, loan_state=active
2025-07-06 07:58:25,723 - INFO - [124000012] Recalculated balances → capitalized=5367000.0, paid_principal=0, paid_settlement_interest=0, current_balance=5367000.0, top_up_balance=5557104.82, settlement_balance=5367000.0, loan_state=active
[2025-07-06 07:58:25,731] INFO in app: [124000012] Recalculated balances → capitalized=5367000.0, paid_principal=0, paid_settlement_interest=0, current_balance=5367000.0, top_up_balance=5557104.82, settlement_balance=5367000.0, loan_state=active
2025-07-06 07:58:25,731 - INFO - [124000012] Recalculated balances → capitalized=5367000.0, paid_principal=0, paid_settlement_interest=0, current_balance=5367000.0, top_up_balance=5557104.82, settlement_balance=5367000.0, loan_state=active
2025-07-06 07:58:25,745 - INFO - 127.0.0.1 - - [06/Jul/2025 07:58:25] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-07-06 07:58:25,752 - INFO - 127.0.0.1 - - [06/Jul/2025 07:58:25] "GET /payments HTTP/1.1" 200 -
2025-07-06 07:58:28,132 - INFO - 127.0.0.1 - - [06/Jul/2025 07:58:28] "GET /loanbook HTTP/1.1" 200 -
2025-07-06 07:58:33,409 - INFO - 127.0.0.1 - - [06/Jul/2025 07:58:33] "GET /loan/124000012/statement HTTP/1.1" 200 -
2025-07-06 07:59:52,293 - INFO - 127.0.0.1 - - [06/Jul/2025 07:59:52] "GET /loanbook HTTP/1.1" 200 -
2025-07-06 07:59:58,316 - INFO - 127.0.0.1 - - [06/Jul/2025 07:59:58] "GET /loan/124000012/statement HTTP/1.1" 200 -
2025-07-06 08:00:11,071 - INFO - 127.0.0.1 - - [06/Jul/2025 08:00:11] "GET /loanbook HTTP/1.1" 200 -
[2025-07-06 08:00:17,759] INFO in app: Found 16 loans for customer 202506000001
2025-07-06 08:00:17,759 - INFO - Found 16 loans for customer 202506000001
[2025-07-06 08:00:17,762] INFO in app: Customer ID: 1
2025-07-06 08:00:17,762 - INFO - Customer ID: 1
[2025-07-06 08:00:17,772] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active')]
2025-07-06 08:00:17,772 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active')]
2025-07-06 08:00:17,842 - INFO - 127.0.0.1 - - [06/Jul/2025 08:00:17] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-06 08:00:19,993] INFO in app: Found 16 loans for customer 202506000001
2025-07-06 08:00:19,993 - INFO - Found 16 loans for customer 202506000001
[2025-07-06 08:00:19,996] INFO in app: Customer ID: 1
2025-07-06 08:00:19,996 - INFO - Customer ID: 1
[2025-07-06 08:00:20,002] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active')]
2025-07-06 08:00:20,002 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'active'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active')]
2025-07-06 08:00:20,036 - INFO - 127.0.0.1 - - [06/Jul/2025 08:00:20] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-07-06 08:00:58,699] INFO in app: [TOPUP] Submit route hit for loan 12
2025-07-06 08:00:58,699 - INFO - [TOPUP] Submit route hit for loan 12
2025-07-06 08:00:58,717 - DEBUG - [DEBUG] Base loan #124000012 → Top-up balance: 5752699.83, Interest: 532073.11
[2025-07-06 08:00:58,767] INFO in app: [124000012] Schedule 125 updated → fees=44800.0, interest=182721.94, principal=151496.34
2025-07-06 08:00:58,767 - INFO - [124000012] Schedule 125 updated → fees=44800.0, interest=182721.94, principal=151496.34
[2025-07-06 08:00:58,773] INFO in app: [124000012] Schedule 126 updated → fees=44800.0, interest=177419.56, principal=156798.72
2025-07-06 08:00:58,773 - INFO - [124000012] Schedule 126 updated → fees=44800.0, interest=177419.56, principal=156798.72
[2025-07-06 08:00:58,776] INFO in app: [124000012] Schedule 127 updated → fees=44800.0, interest=171931.61, principal=162286.67
2025-07-06 08:00:58,776 - INFO - [124000012] Schedule 127 updated → fees=44800.0, interest=171931.61, principal=162286.67
[2025-07-06 08:00:58,778] INFO in app: [124000012] Schedule 128 updated → fees=44800.0, interest=166251.57, principal=167966.71
2025-07-06 08:00:58,778 - INFO - [124000012] Schedule 128 updated → fees=44800.0, interest=166251.57, principal=167966.71
[2025-07-06 08:00:58,781] INFO in app: [124000012] Schedule 129 updated → fees=44800.0, interest=160372.74, principal=173845.54
2025-07-06 08:00:58,781 - INFO - [124000012] Schedule 129 updated → fees=44800.0, interest=160372.74, principal=173845.54
[2025-07-06 08:00:58,784] INFO in app: [124000012] Schedule 130 updated → fees=44800.0, interest=154288.15, principal=179930.13
2025-07-06 08:00:58,784 - INFO - [124000012] Schedule 130 updated → fees=44800.0, interest=154288.15, principal=179930.13
[2025-07-06 08:00:58,791] INFO in app: [124000012] Schedule 131 updated → fees=44800.0, interest=147990.59, principal=186227.69
2025-07-06 08:00:58,791 - INFO - [124000012] Schedule 131 updated → fees=44800.0, interest=147990.59, principal=186227.69
[2025-07-06 08:00:58,796] INFO in app: [124000012] Schedule 132 updated → fees=44800.0, interest=141472.62, principal=192745.66
2025-07-06 08:00:58,796 - INFO - [124000012] Schedule 132 updated → fees=44800.0, interest=141472.62, principal=192745.66
[2025-07-06 08:00:58,800] INFO in app: [124000012] Schedule 133 updated → fees=44800.0, interest=134726.52, principal=199491.76
2025-07-06 08:00:58,800 - INFO - [124000012] Schedule 133 updated → fees=44800.0, interest=134726.52, principal=199491.76
[2025-07-06 08:00:58,807] INFO in app: [124000012] Schedule 134 updated → fees=44800.0, interest=127744.31, principal=206473.97
2025-07-06 08:00:58,807 - INFO - [124000012] Schedule 134 updated → fees=44800.0, interest=127744.31, principal=206473.97
[2025-07-06 08:00:58,810] INFO in app: [124000012] Schedule 135 updated → fees=44800.0, interest=120517.72, principal=213700.56
2025-07-06 08:00:58,810 - INFO - [124000012] Schedule 135 updated → fees=44800.0, interest=120517.72, principal=213700.56
[2025-07-06 08:00:58,815] INFO in app: [124000012] Schedule 136 updated → fees=44800.0, interest=113038.2, principal=221180.08
2025-07-06 08:00:58,815 - INFO - [124000012] Schedule 136 updated → fees=44800.0, interest=113038.2, principal=221180.08
[2025-07-06 08:00:58,821] INFO in app: [124000012] Schedule 137 updated → fees=44800.0, interest=105296.9, principal=228921.38
2025-07-06 08:00:58,821 - INFO - [124000012] Schedule 137 updated → fees=44800.0, interest=105296.9, principal=228921.38
[2025-07-06 08:00:58,825] INFO in app: [124000012] Schedule 138 updated → fees=44800.0, interest=97284.65, principal=236933.63
2025-07-06 08:00:58,825 - INFO - [124000012] Schedule 138 updated → fees=44800.0, interest=97284.65, principal=236933.63
[2025-07-06 08:00:58,829] INFO in app: [124000012] Schedule 139 updated → fees=44800.0, interest=88991.98, principal=245226.3
2025-07-06 08:00:58,829 - INFO - [124000012] Schedule 139 updated → fees=44800.0, interest=88991.98, principal=245226.3
[2025-07-06 08:00:58,832] INFO in app: [124000012] Schedule 140 updated → fees=44800.0, interest=22625.629999999597, principal=0.0
2025-07-06 08:00:58,832 - INFO - [124000012] Schedule 140 updated → fees=44800.0, interest=22625.629999999597, principal=0.0
[2025-07-06 08:00:58,847] INFO in app: [124000012] Recalculated balances → capitalized=5367000.0, paid_principal=2923225.14, paid_settlement_interest=0.0, current_balance=2443774.86, top_up_balance=2633879.6799999997, settlement_balance=2443774.86, loan_state=active
2025-07-06 08:00:58,847 - INFO - [124000012] Recalculated balances → capitalized=5367000.0, paid_principal=2923225.14, paid_settlement_interest=0.0, current_balance=2443774.86, top_up_balance=2633879.6799999997, settlement_balance=2443774.86, loan_state=active
[2025-07-06 08:00:58,851] INFO in app: [124000012] Payment of 5752699.83 allocated. Remaining: 0.0
2025-07-06 08:00:58,851 - INFO - [124000012] Payment of 5752699.83 allocated. Remaining: 0.0
[2025-07-06 08:00:58,856] INFO in app: [124000012] Recalculated balances → capitalized=5367000.0, paid_principal=2923225.14, paid_settlement_interest=0.0, current_balance=2443774.86, top_up_balance=2633879.6799999997, settlement_balance=2443774.86, loan_state=active
2025-07-06 08:00:58,856 - INFO - [124000012] Recalculated balances → capitalized=5367000.0, paid_principal=2923225.14, paid_settlement_interest=0.0, current_balance=2443774.86, top_up_balance=2633879.6799999997, settlement_balance=2443774.86, loan_state=active
2025-07-06 08:00:58,865 - INFO - 127.0.0.1 - - [06/Jul/2025 08:00:58] "[32mPOST /topup/12 HTTP/1.1[0m" 302 -
[2025-07-06 08:00:59,025] INFO in app: Found 17 loans for customer 202506000001
2025-07-06 08:00:59,025 - INFO - Found 17 loans for customer 202506000001
[2025-07-06 08:00:59,030] INFO in app: Customer ID: 1
2025-07-06 08:00:59,030 - INFO - Customer ID: 1
[2025-07-06 08:00:59,044] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'application')]
2025-07-06 08:00:59,044 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'application')]
2025-07-06 08:00:59,086 - INFO - 127.0.0.1 - - [06/Jul/2025 08:00:59] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-06 08:01:11,951 - INFO - 127.0.0.1 - - [06/Jul/2025 08:01:11] "GET /loan/124000012/statement HTTP/1.1" 200 -
[2025-07-06 08:15:34,808] INFO in app: ==================================================
[2025-07-06 08:15:34,814] INFO in app: Application logging initialized successfully
[2025-07-06 08:15:34,817] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-06 08:15:34,819] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-06 08:15:34,826] INFO in app: System encoding: utf-8
[2025-07-06 08:15:34,828] INFO in app: ==================================================
2025-07-06 08:15:35,049 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-06 08:15:35,049 - INFO - [33mPress CTRL+C to quit[0m
2025-07-06 08:22:17,402 - INFO - 127.0.0.1 - - [06/Jul/2025 08:22:17] "GET /loanbook HTTP/1.1" 200 -
2025-07-06 08:22:34,298 - INFO - 127.0.0.1 - - [06/Jul/2025 08:22:34] "GET /loan/103000008/statement HTTP/1.1" 200 -
2025-07-06 08:22:41,718 - INFO - 127.0.0.1 - - [06/Jul/2025 08:22:41] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-06 08:22:42,971 - INFO - 127.0.0.1 - - [06/Jul/2025 08:22:42] "GET /loanbook HTTP/1.1" 200 -
[2025-07-06 08:22:45,293] INFO in app: Found 17 loans for customer 202506000001
2025-07-06 08:22:45,293 - INFO - Found 17 loans for customer 202506000001
[2025-07-06 08:22:45,299] INFO in app: Customer ID: 1
2025-07-06 08:22:45,299 - INFO - Customer ID: 1
[2025-07-06 08:22:45,302] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'application')]
2025-07-06 08:22:45,302 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'application')]
2025-07-06 08:22:45,375 - INFO - 127.0.0.1 - - [06/Jul/2025 08:22:45] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-06 08:22:46,875] INFO in app: Found 17 loans for customer 202506000001
2025-07-06 08:22:46,875 - INFO - Found 17 loans for customer 202506000001
[2025-07-06 08:22:46,880] INFO in app: Customer ID: 1
2025-07-06 08:22:46,880 - INFO - Customer ID: 1
[2025-07-06 08:22:46,884] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'application')]
2025-07-06 08:22:46,884 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'application')]
2025-07-06 08:22:46,918 - INFO - 127.0.0.1 - - [06/Jul/2025 08:22:46] "GET /customer/202506000001/account?section=additional HTTP/1.1" 200 -
2025-07-06 08:23:09,963 - INFO - 127.0.0.1 - - [06/Jul/2025 08:23:09] "[32mPOST /apply_additional/1 HTTP/1.1[0m" 302 -
[2025-07-06 08:23:10,217] INFO in app: Found 18 loans for customer 202506000001
2025-07-06 08:23:10,217 - INFO - Found 18 loans for customer 202506000001
[2025-07-06 08:23:10,223] INFO in app: Customer ID: 1
2025-07-06 08:23:10,223 - INFO - Customer ID: 1
[2025-07-06 08:23:10,227] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'application'), ('118000018', 'active')]
2025-07-06 08:23:10,227 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'application'), ('118000018', 'active')]
2025-07-06 08:23:10,260 - INFO - 127.0.0.1 - - [06/Jul/2025 08:23:10] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-06 08:23:12,147 - INFO - 127.0.0.1 - - [06/Jul/2025 08:23:12] "GET /loans HTTP/1.1" 200 -
2025-07-06 08:23:14,383 - INFO - 127.0.0.1 - - [06/Jul/2025 08:23:14] "[32mPOST /process_loan/17/approve HTTP/1.1[0m" 302 -
2025-07-06 08:23:14,425 - INFO - 127.0.0.1 - - [06/Jul/2025 08:23:14] "GET /loans HTTP/1.1" 200 -
2025-07-06 08:23:16,756 - INFO - 127.0.0.1 - - [06/Jul/2025 08:23:16] "[32mPOST /process_loan/18/approve HTTP/1.1[0m" 302 -
2025-07-06 08:23:17,081 - INFO - 127.0.0.1 - - [06/Jul/2025 08:23:17] "GET /loans HTTP/1.1" 200 -
2025-07-06 08:23:17,405 - INFO - 127.0.0.1 - - [06/Jul/2025 08:23:17] "[32mPOST /process_loan/18/approve HTTP/1.1[0m" 302 -
2025-07-06 08:23:17,436 - INFO - 127.0.0.1 - - [06/Jul/2025 08:23:17] "GET /loans HTTP/1.1" 200 -
2025-07-06 08:23:19,830 - INFO - 127.0.0.1 - - [06/Jul/2025 08:23:19] "GET /loanbook HTTP/1.1" 200 -
2025-07-06 08:23:30,755 - INFO - 127.0.0.1 - - [06/Jul/2025 08:23:30] "GET /loan/118000018/statement HTTP/1.1" 200 -
2025-07-06 08:23:36,406 - INFO - 127.0.0.1 - - [06/Jul/2025 08:23:36] "GET /payments HTTP/1.1" 200 -
2025-07-06 08:23:38,466 - INFO - 127.0.0.1 - - [06/Jul/2025 08:23:38] "GET /loanbook HTTP/1.1" 200 -
[2025-07-06 08:23:40,063] INFO in app: Found 18 loans for customer 202506000001
2025-07-06 08:23:40,063 - INFO - Found 18 loans for customer 202506000001
[2025-07-06 08:23:40,069] INFO in app: Customer ID: 1
2025-07-06 08:23:40,069 - INFO - Customer ID: 1
[2025-07-06 08:23:40,071] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'active')]
2025-07-06 08:23:40,071 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'active')]
2025-07-06 08:23:40,118 - INFO - 127.0.0.1 - - [06/Jul/2025 08:23:40] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-06 08:23:41,272] INFO in app: Found 18 loans for customer 202506000001
2025-07-06 08:23:41,272 - INFO - Found 18 loans for customer 202506000001
[2025-07-06 08:23:41,275] INFO in app: Customer ID: 1
2025-07-06 08:23:41,275 - INFO - Customer ID: 1
[2025-07-06 08:23:41,282] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'active')]
2025-07-06 08:23:41,282 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'active')]
2025-07-06 08:23:41,322 - INFO - 127.0.0.1 - - [06/Jul/2025 08:23:41] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-07-06 08:24:11,337] INFO in app: [TOPUP] Submit route hit for loan 18
2025-07-06 08:24:11,337 - INFO - [TOPUP] Submit route hit for loan 18
2025-07-06 08:24:11,347 - DEBUG - [DEBUG] Base loan #118000018 → Top-up balance: 1479292.73, Interest: 135292.73
[2025-07-06 08:24:11,389] INFO in app: [118000018] Schedule 280 updated → fees=11200.0, interest=47040.0, principal=54857.83
2025-07-06 08:24:11,389 - INFO - [118000018] Schedule 280 updated → fees=11200.0, interest=47040.0, principal=54857.83
[2025-07-06 08:24:11,392] INFO in app: [118000018] Schedule 281 updated → fees=11200.0, interest=45119.98, principal=56777.86
2025-07-06 08:24:11,392 - INFO - [118000018] Schedule 281 updated → fees=11200.0, interest=45119.98, principal=56777.86
[2025-07-06 08:24:11,395] INFO in app: [118000018] Schedule 282 updated → fees=11200.0, interest=43132.75, principal=58765.08
2025-07-06 08:24:11,395 - INFO - [118000018] Schedule 282 updated → fees=11200.0, interest=43132.75, principal=58765.08
[2025-07-06 08:24:11,401] INFO in app: [118000018] Schedule 283 updated → fees=11200.0, interest=41075.97, principal=60821.86
2025-07-06 08:24:11,401 - INFO - [118000018] Schedule 283 updated → fees=11200.0, interest=41075.97, principal=60821.86
[2025-07-06 08:24:11,407] INFO in app: [118000018] Schedule 284 updated → fees=11200.0, interest=38947.21, principal=62950.63
2025-07-06 08:24:11,407 - INFO - [118000018] Schedule 284 updated → fees=11200.0, interest=38947.21, principal=62950.63
[2025-07-06 08:24:11,409] INFO in app: [118000018] Schedule 285 updated → fees=11200.0, interest=36743.94, principal=65153.9
2025-07-06 08:24:11,409 - INFO - [118000018] Schedule 285 updated → fees=11200.0, interest=36743.94, principal=65153.9
[2025-07-06 08:24:11,412] INFO in app: [118000018] Schedule 286 updated → fees=11200.0, interest=34463.55, principal=67434.28
2025-07-06 08:24:11,412 - INFO - [118000018] Schedule 286 updated → fees=11200.0, interest=34463.55, principal=67434.28
[2025-07-06 08:24:11,422] INFO in app: [118000018] Schedule 287 updated → fees=11200.0, interest=32103.35, principal=69794.48
2025-07-06 08:24:11,422 - INFO - [118000018] Schedule 287 updated → fees=11200.0, interest=32103.35, principal=69794.48
[2025-07-06 08:24:11,430] INFO in app: [118000018] Schedule 288 updated → fees=11200.0, interest=29660.54, principal=72237.29
2025-07-06 08:24:11,430 - INFO - [118000018] Schedule 288 updated → fees=11200.0, interest=29660.54, principal=72237.29
[2025-07-06 08:24:11,438] INFO in app: [118000018] Schedule 289 updated → fees=11200.0, interest=27132.24, principal=74765.6
2025-07-06 08:24:11,438 - INFO - [118000018] Schedule 289 updated → fees=11200.0, interest=27132.24, principal=74765.6
[2025-07-06 08:24:11,441] INFO in app: [118000018] Schedule 290 updated → fees=11200.0, interest=24515.44, principal=77382.39
2025-07-06 08:24:11,441 - INFO - [118000018] Schedule 290 updated → fees=11200.0, interest=24515.44, principal=77382.39
[2025-07-06 08:24:11,445] INFO in app: [118000018] Schedule 291 updated → fees=11200.0, interest=21807.06, principal=80090.78
2025-07-06 08:24:11,445 - INFO - [118000018] Schedule 291 updated → fees=11200.0, interest=21807.06, principal=80090.78
[2025-07-06 08:24:11,454] INFO in app: [118000018] Schedule 292 updated → fees=11200.0, interest=19003.88, principal=82893.95
2025-07-06 08:24:11,454 - INFO - [118000018] Schedule 292 updated → fees=11200.0, interest=19003.88, principal=82893.95
[2025-07-06 08:24:11,457] INFO in app: [118000018] Schedule 293 updated → fees=9020.889999999767, interest=0.0, principal=0.0
2025-07-06 08:24:11,457 - INFO - [118000018] Schedule 293 updated → fees=9020.889999999767, interest=0.0, principal=0.0
[2025-07-06 08:24:11,479] INFO in app: [118000018] Recalculated balances → capitalized=1344000.0, paid_principal=883925.9299999999, paid_settlement_interest=0.0, current_balance=460074.07, top_up_balance=460074.07, settlement_balance=460074.07, loan_state=active
2025-07-06 08:24:11,479 - INFO - [118000018] Recalculated balances → capitalized=1344000.0, paid_principal=883925.9299999999, paid_settlement_interest=0.0, current_balance=460074.07, top_up_balance=460074.07, settlement_balance=460074.07, loan_state=active
[2025-07-06 08:24:11,485] INFO in app: [118000018] Payment of 1479292.73 allocated. Remaining: 0.0
2025-07-06 08:24:11,485 - INFO - [118000018] Payment of 1479292.73 allocated. Remaining: 0.0
[2025-07-06 08:24:11,490] INFO in app: [118000018] Recalculated balances → capitalized=1344000.0, paid_principal=883925.9299999999, paid_settlement_interest=0.0, current_balance=460074.07, top_up_balance=460074.07, settlement_balance=460074.07, loan_state=active
2025-07-06 08:24:11,490 - INFO - [118000018] Recalculated balances → capitalized=1344000.0, paid_principal=883925.9299999999, paid_settlement_interest=0.0, current_balance=460074.07, top_up_balance=460074.07, settlement_balance=460074.07, loan_state=active
2025-07-06 08:24:11,506 - INFO - 127.0.0.1 - - [06/Jul/2025 08:24:11] "[32mPOST /topup/18 HTTP/1.1[0m" 302 -
[2025-07-06 08:24:11,636] INFO in app: Found 19 loans for customer 202506000001
2025-07-06 08:24:11,636 - INFO - Found 19 loans for customer 202506000001
[2025-07-06 08:24:11,639] INFO in app: Customer ID: 1
2025-07-06 08:24:11,639 - INFO - Customer ID: 1
[2025-07-06 08:24:11,641] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'application')]
2025-07-06 08:24:11,641 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'application')]
2025-07-06 08:24:11,684 - INFO - 127.0.0.1 - - [06/Jul/2025 08:24:11] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-06 08:24:15,247 - INFO - 127.0.0.1 - - [06/Jul/2025 08:24:15] "GET /loans HTTP/1.1" 200 -
2025-07-06 08:24:17,765 - INFO - 127.0.0.1 - - [06/Jul/2025 08:24:17] "[32mPOST /process_loan/19/approve HTTP/1.1[0m" 302 -
2025-07-06 08:24:17,804 - INFO - 127.0.0.1 - - [06/Jul/2025 08:24:17] "GET /loans HTTP/1.1" 200 -
[2025-07-06 08:24:19,475] INFO in app: [DISBURSEMENT] Loan #136000001 | Top-up of: None | Cash to Client: 2600000.0
2025-07-06 08:24:19,475 - INFO - [DISBURSEMENT] Loan #136000001 | Top-up of: None | Cash to Client: 2600000.0
[2025-07-06 08:24:19,480] INFO in app: [DISBURSEMENT] Loan #103000002 | Top-up of: None | Cash to Client: 1000000.0
2025-07-06 08:24:19,480 - INFO - [DISBURSEMENT] Loan #103000002 | Top-up of: None | Cash to Client: 1000000.0
[2025-07-06 08:24:19,484] INFO in app: [DISBURSEMENT] Loan #112000003 | Top-up of: None | Cash to Client: 1000000.0
2025-07-06 08:24:19,484 - INFO - [DISBURSEMENT] Loan #112000003 | Top-up of: None | Cash to Client: 1000000.0
[2025-07-06 08:24:19,487] INFO in app: [DISBURSEMENT] Loan #103000004 | Top-up of: 3 | Cash to Client: 524657.21
2025-07-06 08:24:19,487 - INFO - [DISBURSEMENT] Loan #103000004 | Top-up of: 3 | Cash to Client: 524657.21
[2025-07-06 08:24:19,490] INFO in app: [DISBURSEMENT] Loan #118000005 | Top-up of: None | Cash to Client: 1000000.0
2025-07-06 08:24:19,490 - INFO - [DISBURSEMENT] Loan #118000005 | Top-up of: None | Cash to Client: 1000000.0
[2025-07-06 08:24:19,492] INFO in app: [DISBURSEMENT] Loan #103000006 | Top-up of: 5 | Cash to Client: 581529.13
2025-07-06 08:24:19,492 - INFO - [DISBURSEMENT] Loan #103000006 | Top-up of: 5 | Cash to Client: 581529.13
[2025-07-06 08:24:19,495] INFO in app: [DISBURSEMENT] Loan #103000007 | Top-up of: 5 | Cash to Client: 581529.13
2025-07-06 08:24:19,495 - INFO - [DISBURSEMENT] Loan #103000007 | Top-up of: 5 | Cash to Client: 581529.13
[2025-07-06 08:24:19,505] INFO in app: [DISBURSEMENT] Loan #103000008 | Top-up of: 5 | Cash to Client: 581529.13
2025-07-06 08:24:19,505 - INFO - [DISBURSEMENT] Loan #103000008 | Top-up of: 5 | Cash to Client: 581529.13
[2025-07-06 08:24:19,510] INFO in app: [DISBURSEMENT] Loan #103000009 | Top-up of: 8 | Cash to Client: 2124895.18
2025-07-06 08:24:19,510 - INFO - [DISBURSEMENT] Loan #103000009 | Top-up of: 8 | Cash to Client: 2124895.18
[2025-07-06 08:24:19,520] INFO in app: [DISBURSEMENT] Loan #136000010 | Top-up of: None | Cash to Client: 1000000.0
2025-07-06 08:24:19,520 - INFO - [DISBURSEMENT] Loan #136000010 | Top-up of: None | Cash to Client: 1000000.0
[2025-07-06 08:24:19,524] INFO in app: [DISBURSEMENT] Loan #103000011 | Top-up of: 10 | Cash to Client: 516919.3
2025-07-06 08:24:19,524 - INFO - [DISBURSEMENT] Loan #103000011 | Top-up of: 10 | Cash to Client: 516919.3
[2025-07-06 08:24:19,527] INFO in app: [DISBURSEMENT] Loan #124000012 | Top-up of: 11 | Cash to Client: 1124895.18
2025-07-06 08:24:19,527 - INFO - [DISBURSEMENT] Loan #124000012 | Top-up of: 11 | Cash to Client: 1124895.18
[2025-07-06 08:24:19,537] INFO in app: [DISBURSEMENT] Loan #124000013 | Top-up of: 12 | Cash to Client: 2085013.5
2025-07-06 08:24:19,537 - INFO - [DISBURSEMENT] Loan #124000013 | Top-up of: 12 | Cash to Client: 2085013.5
[2025-07-06 08:24:19,540] INFO in app: [DISBURSEMENT] Loan #124000014 | Top-up of: 12 | Cash to Client: 2085013.5
2025-07-06 08:24:19,540 - INFO - [DISBURSEMENT] Loan #124000014 | Top-up of: 12 | Cash to Client: 2085013.5
[2025-07-06 08:24:19,542] INFO in app: [DISBURSEMENT] Loan #124000015 | Top-up of: 13 | Cash to Client: 8173333.31
2025-07-06 08:24:19,542 - INFO - [DISBURSEMENT] Loan #124000015 | Top-up of: 13 | Cash to Client: 8173333.31
[2025-07-06 08:24:19,545] INFO in app: [DISBURSEMENT] Loan #136000016 | Top-up of: 14 | Cash to Client: 8173333.31
2025-07-06 08:24:19,545 - INFO - [DISBURSEMENT] Loan #136000016 | Top-up of: 14 | Cash to Client: 8173333.31
[2025-07-06 08:24:19,552] INFO in app: [DISBURSEMENT] Loan #124000017 | Top-up of: 12 | Cash to Client: 2247300.17
2025-07-06 08:24:19,552 - INFO - [DISBURSEMENT] Loan #124000017 | Top-up of: 12 | Cash to Client: 2247300.17
[2025-07-06 08:24:19,556] INFO in app: [DISBURSEMENT] Loan #118000018 | Top-up of: None | Cash to Client: 1000000.0
2025-07-06 08:24:19,556 - INFO - [DISBURSEMENT] Loan #118000018 | Top-up of: None | Cash to Client: 1000000.0
[2025-07-06 08:24:19,560] INFO in app: [DISBURSEMENT] Loan #124000019 | Top-up of: 18 | Cash to Client: 1520707.27
2025-07-06 08:24:19,560 - INFO - [DISBURSEMENT] Loan #124000019 | Top-up of: 18 | Cash to Client: 1520707.27
2025-07-06 08:24:19,638 - INFO - 127.0.0.1 - - [06/Jul/2025 08:24:19] "GET /disbursements HTTP/1.1" 200 -
2025-07-06 08:24:59,208 - INFO - 127.0.0.1 - - [06/Jul/2025 08:24:59] "[32mPOST /disbursements HTTP/1.1[0m" 302 -
2025-07-06 08:24:59,527 - INFO - 127.0.0.1 - - [06/Jul/2025 08:24:59] "[32mPOST /disbursements HTTP/1.1[0m" 302 -
2025-07-06 08:24:59,537 - INFO - 127.0.0.1 - - [06/Jul/2025 08:24:59] "GET /disbursements HTTP/1.1" 200 -
2025-07-06 08:25:02,543 - INFO - 127.0.0.1 - - [06/Jul/2025 08:25:02] "GET /loanbook HTTP/1.1" 200 -
[2025-07-06 08:25:15,697] INFO in app: Found 19 loans for customer 202506000001
2025-07-06 08:25:15,697 - INFO - Found 19 loans for customer 202506000001
[2025-07-06 08:25:15,704] INFO in app: Customer ID: 1
2025-07-06 08:25:15,704 - INFO - Customer ID: 1
[2025-07-06 08:25:15,719] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'active')]
2025-07-06 08:25:15,719 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'active')]
2025-07-06 08:25:15,750 - INFO - 127.0.0.1 - - [06/Jul/2025 08:25:15] "GET /customer/202506000001/account HTTP/1.1" 200 -
2025-07-06 08:25:25,705 - INFO - 127.0.0.1 - - [06/Jul/2025 08:25:25] "GET /loan/118000018/statement HTTP/1.1" 200 -
[2025-07-06 08:53:40,755] INFO in app: ==================================================
[2025-07-06 08:53:40,763] INFO in app: Application logging initialized successfully
[2025-07-06 08:53:40,769] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-06 08:53:40,775] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-06 08:53:40,780] INFO in app: System encoding: utf-8
[2025-07-06 08:53:40,782] INFO in app: ==================================================
2025-07-06 08:53:41,090 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-06 08:53:41,090 - INFO - [33mPress CTRL+C to quit[0m
2025-07-06 08:58:38,499 - INFO - 127.0.0.1 - - [06/Jul/2025 08:58:38] "GET /loanbook HTTP/1.1" 200 -
2025-07-06 08:58:50,201 - INFO - 127.0.0.1 - - [06/Jul/2025 08:58:50] "GET /loan/124000019/statement HTTP/1.1" 200 -
2025-07-06 08:58:53,606 - INFO - 127.0.0.1 - - [06/Jul/2025 08:58:53] "GET /loanbook HTTP/1.1" 200 -
[2025-07-06 08:58:55,401] INFO in app: Found 19 loans for customer 202506000001
2025-07-06 08:58:55,401 - INFO - Found 19 loans for customer 202506000001
[2025-07-06 08:58:55,407] INFO in app: Customer ID: 1
2025-07-06 08:58:55,407 - INFO - Customer ID: 1
[2025-07-06 08:58:55,411] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'active')]
2025-07-06 08:58:55,411 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'active')]
2025-07-06 08:58:55,488 - INFO - 127.0.0.1 - - [06/Jul/2025 08:58:55] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-06 08:58:56,734] INFO in app: Found 19 loans for customer 202506000001
2025-07-06 08:58:56,734 - INFO - Found 19 loans for customer 202506000001
[2025-07-06 08:58:56,737] INFO in app: Customer ID: 1
2025-07-06 08:58:56,737 - INFO - Customer ID: 1
[2025-07-06 08:58:56,742] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'active')]
2025-07-06 08:58:56,742 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'active')]
2025-07-06 08:58:56,778 - INFO - 127.0.0.1 - - [06/Jul/2025 08:58:56] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-07-06 08:59:25,531] INFO in app: [TOPUP] Submit route hit for loan 19
2025-07-06 08:59:25,531 - INFO - [TOPUP] Submit route hit for loan 19
2025-07-06 08:59:25,547 - DEBUG - [DEBUG] Base loan #124000019 → Top-up balance: 4437066.45, Interest: 411066.45
[2025-07-06 08:59:25,609] INFO in app: [124000019] Schedule 619 updated → fees=33600.0, interest=140910.0, principal=109800.41
2025-07-06 08:59:25,609 - INFO - [124000019] Schedule 619 updated → fees=33600.0, interest=140910.0, principal=109800.41
[2025-07-06 08:59:25,612] INFO in app: [124000019] Schedule 620 updated → fees=33600.0, interest=137066.99, principal=113643.43
2025-07-06 08:59:25,612 - INFO - [124000019] Schedule 620 updated → fees=33600.0, interest=137066.99, principal=113643.43
[2025-07-06 08:59:25,616] INFO in app: [124000019] Schedule 621 updated → fees=33600.0, interest=133089.47, principal=117620.95
2025-07-06 08:59:25,616 - INFO - [124000019] Schedule 621 updated → fees=33600.0, interest=133089.47, principal=117620.95
[2025-07-06 08:59:25,623] INFO in app: [124000019] Schedule 622 updated → fees=33600.0, interest=128972.73, principal=121737.68
2025-07-06 08:59:25,623 - INFO - [124000019] Schedule 622 updated → fees=33600.0, interest=128972.73, principal=121737.68
[2025-07-06 08:59:25,626] INFO in app: [124000019] Schedule 623 updated → fees=33600.0, interest=124711.91, principal=125998.5
2025-07-06 08:59:25,626 - INFO - [124000019] Schedule 623 updated → fees=33600.0, interest=124711.91, principal=125998.5
[2025-07-06 08:59:25,628] INFO in app: [124000019] Schedule 624 updated → fees=33600.0, interest=120301.97, principal=130408.45
2025-07-06 08:59:25,628 - INFO - [124000019] Schedule 624 updated → fees=33600.0, interest=120301.97, principal=130408.45
[2025-07-06 08:59:25,632] INFO in app: [124000019] Schedule 625 updated → fees=33600.0, interest=115737.67, principal=134972.74
2025-07-06 08:59:25,632 - INFO - [124000019] Schedule 625 updated → fees=33600.0, interest=115737.67, principal=134972.74
[2025-07-06 08:59:25,634] INFO in app: [124000019] Schedule 626 updated → fees=33600.0, interest=111013.62, principal=139696.79
2025-07-06 08:59:25,634 - INFO - [124000019] Schedule 626 updated → fees=33600.0, interest=111013.62, principal=139696.79
[2025-07-06 08:59:25,641] INFO in app: [124000019] Schedule 627 updated → fees=33600.0, interest=106124.24, principal=144586.18
2025-07-06 08:59:25,641 - INFO - [124000019] Schedule 627 updated → fees=33600.0, interest=106124.24, principal=144586.18
[2025-07-06 08:59:25,644] INFO in app: [124000019] Schedule 628 updated → fees=33600.0, interest=101063.72, principal=149646.69
2025-07-06 08:59:25,644 - INFO - [124000019] Schedule 628 updated → fees=33600.0, interest=101063.72, principal=149646.69
[2025-07-06 08:59:25,648] INFO in app: [124000019] Schedule 629 updated → fees=33600.0, interest=95826.09, principal=154884.33
2025-07-06 08:59:25,648 - INFO - [124000019] Schedule 629 updated → fees=33600.0, interest=95826.09, principal=154884.33
[2025-07-06 08:59:25,650] INFO in app: [124000019] Schedule 630 updated → fees=33600.0, interest=90405.13, principal=160305.28
2025-07-06 08:59:25,650 - INFO - [124000019] Schedule 630 updated → fees=33600.0, interest=90405.13, principal=160305.28
[2025-07-06 08:59:25,658] INFO in app: [124000019] Schedule 631 updated → fees=33600.0, interest=84794.45, principal=165915.96
2025-07-06 08:59:25,658 - INFO - [124000019] Schedule 631 updated → fees=33600.0, interest=84794.45, principal=165915.96
[2025-07-06 08:59:25,664] INFO in app: [124000019] Schedule 632 updated → fees=33600.0, interest=78987.39, principal=171723.02
2025-07-06 08:59:25,664 - INFO - [124000019] Schedule 632 updated → fees=33600.0, interest=78987.39, principal=171723.02
[2025-07-06 08:59:25,667] INFO in app: [124000019] Schedule 633 updated → fees=33600.0, interest=72977.09, principal=177733.33
2025-07-06 08:59:25,667 - INFO - [124000019] Schedule 633 updated → fees=33600.0, interest=72977.09, principal=177733.33
[2025-07-06 08:59:25,673] INFO in app: [124000019] Schedule 634 updated → fees=33600.0, interest=66756.42, principal=72053.81999999892
2025-07-06 08:59:25,673 - INFO - [124000019] Schedule 634 updated → fees=33600.0, interest=66756.42, principal=72053.81999999892
[2025-07-06 08:59:25,684] INFO in app: [124000019] Recalculated balances → capitalized=4026000.0, paid_principal=2190727.5599999987, paid_settlement_interest=0.0, current_balance=1835272.44, top_up_balance=1970565.17, settlement_balance=1835272.44, loan_state=active
2025-07-06 08:59:25,684 - INFO - [124000019] Recalculated balances → capitalized=4026000.0, paid_principal=2190727.5599999987, paid_settlement_interest=0.0, current_balance=1835272.44, top_up_balance=1970565.17, settlement_balance=1835272.44, loan_state=active
[2025-07-06 08:59:25,691] INFO in app: [124000019] Payment of 4437066.45 allocated. Remaining: 0.0
2025-07-06 08:59:25,691 - INFO - [124000019] Payment of 4437066.45 allocated. Remaining: 0.0
[2025-07-06 08:59:25,695] INFO in app: [124000019] Recalculated balances → capitalized=4026000.0, paid_principal=2190727.5599999987, paid_settlement_interest=0.0, current_balance=1835272.44, top_up_balance=1970565.17, settlement_balance=1835272.44, loan_state=active
2025-07-06 08:59:25,695 - INFO - [124000019] Recalculated balances → capitalized=4026000.0, paid_principal=2190727.5599999987, paid_settlement_interest=0.0, current_balance=1835272.44, top_up_balance=1970565.17, settlement_balance=1835272.44, loan_state=active
2025-07-06 08:59:25,711 - INFO - 127.0.0.1 - - [06/Jul/2025 08:59:25] "[32mPOST /topup/19 HTTP/1.1[0m" 302 -
[2025-07-06 08:59:25,840] INFO in app: Found 20 loans for customer 202506000001
2025-07-06 08:59:25,840 - INFO - Found 20 loans for customer 202506000001
[2025-07-06 08:59:25,842] INFO in app: Customer ID: 1
2025-07-06 08:59:25,842 - INFO - Customer ID: 1
[2025-07-06 08:59:25,845] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'application')]
2025-07-06 08:59:25,845 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'application')]
2025-07-06 08:59:25,884 - INFO - 127.0.0.1 - - [06/Jul/2025 08:59:25] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-06 08:59:27,666 - INFO - 127.0.0.1 - - [06/Jul/2025 08:59:27] "GET /loans HTTP/1.1" 200 -
2025-07-06 08:59:31,237 - INFO - 127.0.0.1 - - [06/Jul/2025 08:59:31] "[32mPOST /process_loan/20/approve HTTP/1.1[0m" 302 -
2025-07-06 08:59:31,274 - INFO - 127.0.0.1 - - [06/Jul/2025 08:59:31] "GET /loans HTTP/1.1" 200 -
2025-07-06 08:59:33,595 - INFO - 127.0.0.1 - - [06/Jul/2025 08:59:33] "GET /loanbook HTTP/1.1" 200 -
2025-07-06 08:59:55,468 - INFO - 127.0.0.1 - - [06/Jul/2025 08:59:55] "GET /loan/124000019/statement HTTP/1.1" 200 -
[2025-07-06 09:10:05,099] INFO in app: ==================================================
[2025-07-06 09:10:05,106] INFO in app: Application logging initialized successfully
[2025-07-06 09:10:05,108] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-06 09:10:05,111] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-06 09:10:05,113] INFO in app: System encoding: utf-8
[2025-07-06 09:10:05,116] INFO in app: ==================================================
2025-07-06 09:10:05,374 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-06 09:10:05,375 - INFO - [33mPress CTRL+C to quit[0m
2025-07-06 09:10:31,367 - INFO - 127.0.0.1 - - [06/Jul/2025 09:10:31] "GET /loanbook HTTP/1.1" 200 -
2025-07-06 09:10:38,103 - INFO - 127.0.0.1 - - [06/Jul/2025 09:10:38] "GET /loan/118000020/statement HTTP/1.1" 200 -
2025-07-06 09:10:45,301 - INFO - 127.0.0.1 - - [06/Jul/2025 09:10:45] "GET /payments HTTP/1.1" 200 -
2025-07-06 09:10:48,716 - INFO - 127.0.0.1 - - [06/Jul/2025 09:10:48] "GET /api/verify_loan/118000020 HTTP/1.1" 200 -
[2025-07-06 09:10:59,743] ERROR in app: Payment error: 'RepaymentSchedule' object has no attribute 'due_amount'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 4015, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1546, in process
    self._handle_credit_or_arrears()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1703, in _handle_credit_or_arrears
    elif any(s.status != "paid" and s.due_amount > 0 for s in self.loan.repayment_schedules):
         ~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1703, in <genexpr>
    elif any(s.status != "paid" and s.due_amount > 0 for s in self.loan.repayment_schedules):
                                    ^^^^^^^^^^^^
AttributeError: 'RepaymentSchedule' object has no attribute 'due_amount'. Did you mean: 'paid_amount'?
2025-07-06 09:10:59,743 - ERROR - Payment error: 'RepaymentSchedule' object has no attribute 'due_amount'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 4015, in handle_payments
    PaymentAllocator(payment).process()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1546, in process
    self._handle_credit_or_arrears()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\app.py", line 1703, in _handle_credit_or_arrears
    elif any(s.status != "paid" and s.due_amount > 0 for s in self.loan.repayment_schedules):
         ~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1703, in <genexpr>
    elif any(s.status != "paid" and s.due_amount > 0 for s in self.loan.repayment_schedules):
                                    ^^^^^^^^^^^^
AttributeError: 'RepaymentSchedule' object has no attribute 'due_amount'. Did you mean: 'paid_amount'?
2025-07-06 09:10:59,757 - INFO - 127.0.0.1 - - [06/Jul/2025 09:10:59] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-07-06 09:10:59,763 - INFO - 127.0.0.1 - - [06/Jul/2025 09:10:59] "GET /payments HTTP/1.1" 200 -
[2025-07-06 09:15:41,535] INFO in app: ==================================================
[2025-07-06 09:15:41,542] INFO in app: Application logging initialized successfully
[2025-07-06 09:15:41,545] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-06 09:15:41,548] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-06 09:15:41,550] INFO in app: System encoding: utf-8
[2025-07-06 09:15:41,553] INFO in app: ==================================================
2025-07-06 09:15:41,749 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-06 09:15:41,750 - INFO - [33mPress CTRL+C to quit[0m
2025-07-06 09:15:50,284 - INFO - 127.0.0.1 - - [06/Jul/2025 09:15:50] "GET /loanbook HTTP/1.1" 200 -
2025-07-06 09:15:53,138 - INFO - 127.0.0.1 - - [06/Jul/2025 09:15:53] "GET /loanbook HTTP/1.1" 200 -
2025-07-06 09:15:58,650 - INFO - 127.0.0.1 - - [06/Jul/2025 09:15:58] "GET /loan/118000020/statement HTTP/1.1" 200 -
2025-07-06 09:15:58,913 - INFO - 127.0.0.1 - - [06/Jul/2025 09:15:58] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-06 09:16:03,344 - INFO - 127.0.0.1 - - [06/Jul/2025 09:16:03] "GET /payments HTTP/1.1" 200 -
2025-07-06 09:16:06,950 - INFO - 127.0.0.1 - - [06/Jul/2025 09:16:06] "GET /api/verify_loan/118000020 HTTP/1.1" 200 -
[2025-07-06 09:16:16,707] INFO in app: [118000020] Underpayment detected; arrears recorded.
2025-07-06 09:16:16,707 - INFO - [118000020] Underpayment detected; arrears recorded.
[2025-07-06 09:16:16,729] INFO in app: [118000020] Recalculated balances → capitalized=8049000.0, paid_principal=0, paid_settlement_interest=0, current_balance=8049000.0, top_up_balance=8460066.45, settlement_balance=8049000.0, loan_state=active
2025-07-06 09:16:16,729 - INFO - [118000020] Recalculated balances → capitalized=8049000.0, paid_principal=0, paid_settlement_interest=0, current_balance=8049000.0, top_up_balance=8460066.45, settlement_balance=8049000.0, loan_state=active
[2025-07-06 09:16:16,740] INFO in app: [118000020] Recalculated balances → capitalized=8049000.0, paid_principal=0, paid_settlement_interest=0, current_balance=8049000.0, top_up_balance=8460066.45, settlement_balance=8049000.0, loan_state=active
2025-07-06 09:16:16,740 - INFO - [118000020] Recalculated balances → capitalized=8049000.0, paid_principal=0, paid_settlement_interest=0, current_balance=8049000.0, top_up_balance=8460066.45, settlement_balance=8049000.0, loan_state=active
2025-07-06 09:16:16,755 - INFO - 127.0.0.1 - - [06/Jul/2025 09:16:16] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-07-06 09:16:17,017 - INFO - 127.0.0.1 - - [06/Jul/2025 09:16:17] "GET /payments HTTP/1.1" 200 -
2025-07-06 09:16:20,538 - INFO - 127.0.0.1 - - [06/Jul/2025 09:16:20] "GET /loanbook HTTP/1.1" 200 -
2025-07-06 09:16:29,583 - INFO - 127.0.0.1 - - [06/Jul/2025 09:16:29] "GET /loan/118000020/statement HTTP/1.1" 200 -
2025-07-06 09:16:54,634 - INFO - 127.0.0.1 - - [06/Jul/2025 09:16:54] "GET /loanbook HTTP/1.1" 200 -
[2025-07-06 09:16:57,663] INFO in app: Found 20 loans for customer 202506000001
2025-07-06 09:16:57,663 - INFO - Found 20 loans for customer 202506000001
[2025-07-06 09:16:57,668] INFO in app: Customer ID: 1
2025-07-06 09:16:57,668 - INFO - Customer ID: 1
[2025-07-06 09:16:57,670] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'active')]
2025-07-06 09:16:57,670 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'active')]
2025-07-06 09:16:57,754 - INFO - 127.0.0.1 - - [06/Jul/2025 09:16:57] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-06 09:16:59,119] INFO in app: Found 20 loans for customer 202506000001
2025-07-06 09:16:59,119 - INFO - Found 20 loans for customer 202506000001
[2025-07-06 09:16:59,125] INFO in app: Customer ID: 1
2025-07-06 09:16:59,125 - INFO - Customer ID: 1
[2025-07-06 09:16:59,137] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'active')]
2025-07-06 09:16:59,137 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'active')]
2025-07-06 09:16:59,170 - INFO - 127.0.0.1 - - [06/Jul/2025 09:16:59] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-07-06 09:17:28,849] INFO in app: [TOPUP] Submit route hit for loan 20
2025-07-06 09:17:28,849 - INFO - [TOPUP] Submit route hit for loan 20
2025-07-06 09:17:28,865 - DEBUG - [DEBUG] Base loan #118000020 → Top-up balance: 8494994.05, Interest: 774528.8
[2025-07-06 09:17:28,916] INFO in app: [118000020] Schedule 644 updated → fees=67200.0, interest=270216.28, principal=340033.47
2025-07-06 09:17:28,916 - INFO - [118000020] Schedule 644 updated → fees=67200.0, interest=270216.28, principal=340033.47
[2025-07-06 09:17:28,918] INFO in app: [118000020] Schedule 645 updated → fees=67200.0, interest=258315.11, principal=351934.64
2025-07-06 09:17:28,918 - INFO - [118000020] Schedule 645 updated → fees=67200.0, interest=258315.11, principal=351934.64
[2025-07-06 09:17:28,926] INFO in app: [118000020] Schedule 646 updated → fees=67200.0, interest=245997.4, principal=364252.35
2025-07-06 09:17:28,926 - INFO - [118000020] Schedule 646 updated → fees=67200.0, interest=245997.4, principal=364252.35
[2025-07-06 09:17:28,929] INFO in app: [118000020] Schedule 647 updated → fees=67200.0, interest=233248.57, principal=377001.18
2025-07-06 09:17:28,929 - INFO - [118000020] Schedule 647 updated → fees=67200.0, interest=233248.57, principal=377001.18
[2025-07-06 09:17:28,932] INFO in app: [118000020] Schedule 648 updated → fees=67200.0, interest=220053.53, principal=390196.23
2025-07-06 09:17:28,932 - INFO - [118000020] Schedule 648 updated → fees=67200.0, interest=220053.53, principal=390196.23
[2025-07-06 09:17:28,934] INFO in app: [118000020] Schedule 649 updated → fees=67200.0, interest=206396.66, principal=403853.09
2025-07-06 09:17:28,934 - INFO - [118000020] Schedule 649 updated → fees=67200.0, interest=206396.66, principal=403853.09
[2025-07-06 09:17:28,941] INFO in app: [118000020] Schedule 650 updated → fees=67200.0, interest=192261.8, principal=417987.95
2025-07-06 09:17:28,941 - INFO - [118000020] Schedule 650 updated → fees=67200.0, interest=192261.8, principal=417987.95
[2025-07-06 09:17:28,945] INFO in app: [118000020] Schedule 651 updated → fees=67200.0, interest=177632.22, principal=432617.53
2025-07-06 09:17:28,945 - INFO - [118000020] Schedule 651 updated → fees=67200.0, interest=177632.22, principal=432617.53
[2025-07-06 09:17:28,949] INFO in app: [118000020] Schedule 652 updated → fees=67200.0, interest=162490.61, principal=447759.14
2025-07-06 09:17:28,949 - INFO - [118000020] Schedule 652 updated → fees=67200.0, interest=162490.61, principal=447759.14
[2025-07-06 09:17:28,954] INFO in app: [118000020] Schedule 653 updated → fees=67200.0, interest=146819.04, principal=463430.71
2025-07-06 09:17:28,954 - INFO - [118000020] Schedule 653 updated → fees=67200.0, interest=146819.04, principal=463430.71
[2025-07-06 09:17:28,959] INFO in app: [118000020] Schedule 654 updated → fees=67200.0, interest=130598.96, principal=479650.79
2025-07-06 09:17:28,959 - INFO - [118000020] Schedule 654 updated → fees=67200.0, interest=130598.96, principal=479650.79
[2025-07-06 09:17:28,963] INFO in app: [118000020] Schedule 655 updated → fees=67200.0, interest=113811.19, principal=496438.57
2025-07-06 09:17:28,963 - INFO - [118000020] Schedule 655 updated → fees=67200.0, interest=113811.19, principal=496438.57
[2025-07-06 09:17:28,966] INFO in app: [118000020] Schedule 656 updated → fees=67200.0, interest=96435.84, principal=201961.19000000102
2025-07-06 09:17:28,966 - INFO - [118000020] Schedule 656 updated → fees=67200.0, interest=96435.84, principal=201961.19000000102
[2025-07-06 09:17:28,979] INFO in app: [118000020] Recalculated balances → capitalized=8049000.0, paid_principal=5167116.840000001, paid_settlement_interest=0.0, current_balance=2881883.16, top_up_balance=3292949.6100000003, settlement_balance=2881883.16, loan_state=active
2025-07-06 09:17:28,979 - INFO - [118000020] Recalculated balances → capitalized=8049000.0, paid_principal=5167116.840000001, paid_settlement_interest=0.0, current_balance=2881883.16, top_up_balance=3292949.6100000003, settlement_balance=2881883.16, loan_state=active
[2025-07-06 09:17:28,982] INFO in app: [118000020] Payment of 8494994.05 allocated. Remaining: 0.0
2025-07-06 09:17:28,982 - INFO - [118000020] Payment of 8494994.05 allocated. Remaining: 0.0
[2025-07-06 09:17:28,988] INFO in app: [118000020] Recalculated balances → capitalized=8049000.0, paid_principal=5167116.840000001, paid_settlement_interest=0.0, current_balance=2881883.16, top_up_balance=3292949.6100000003, settlement_balance=2881883.16, loan_state=active
2025-07-06 09:17:28,988 - INFO - [118000020] Recalculated balances → capitalized=8049000.0, paid_principal=5167116.840000001, paid_settlement_interest=0.0, current_balance=2881883.16, top_up_balance=3292949.6100000003, settlement_balance=2881883.16, loan_state=active
2025-07-06 09:17:29,002 - INFO - 127.0.0.1 - - [06/Jul/2025 09:17:29] "[32mPOST /topup/20 HTTP/1.1[0m" 302 -
[2025-07-06 09:17:29,149] INFO in app: Found 21 loans for customer 202506000001
2025-07-06 09:17:29,149 - INFO - Found 21 loans for customer 202506000001
[2025-07-06 09:17:29,156] INFO in app: Customer ID: 1
2025-07-06 09:17:29,156 - INFO - Customer ID: 1
[2025-07-06 09:17:29,159] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'application')]
2025-07-06 09:17:29,159 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'application')]
2025-07-06 09:17:29,193 - INFO - 127.0.0.1 - - [06/Jul/2025 09:17:29] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-06 09:17:33,449 - INFO - 127.0.0.1 - - [06/Jul/2025 09:17:33] "GET /loans HTTP/1.1" 200 -
2025-07-06 09:17:36,006 - INFO - 127.0.0.1 - - [06/Jul/2025 09:17:36] "[32mPOST /process_loan/21/approve HTTP/1.1[0m" 302 -
2025-07-06 09:17:36,048 - INFO - 127.0.0.1 - - [06/Jul/2025 09:17:36] "GET /loans HTTP/1.1" 200 -
2025-07-06 09:17:38,311 - INFO - 127.0.0.1 - - [06/Jul/2025 09:17:38] "GET /loanbook HTTP/1.1" 200 -
2025-07-06 09:17:48,276 - INFO - 127.0.0.1 - - [06/Jul/2025 09:17:48] "GET /loan/118000020/statement HTTP/1.1" 200 -
[2025-07-08 11:07:44,925] INFO in app: ==================================================
[2025-07-08 11:07:45,018] INFO in app: Application logging initialized successfully
[2025-07-08 11:07:45,020] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-08 11:07:45,022] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-08 11:07:45,024] INFO in app: System encoding: utf-8
[2025-07-08 11:07:45,034] INFO in app: ==================================================
2025-07-08 11:07:45,420 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-08 11:07:45,420 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-08 19:16:35,849] INFO in app: ==================================================
[2025-07-08 19:16:35,989] INFO in app: Application logging initialized successfully
[2025-07-08 19:16:35,995] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-08 19:16:35,997] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-08 19:16:36,005] INFO in app: System encoding: utf-8
[2025-07-08 19:16:36,045] INFO in app: ==================================================
2025-07-08 19:16:36,863 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-08 19:16:36,863 - INFO - [33mPress CTRL+C to quit[0m
2025-07-08 19:17:15,159 - INFO - 127.0.0.1 - - [08/Jul/2025 19:17:15] "GET /loan/118000020/statement HTTP/1.1" 200 -
2025-07-08 19:17:15,644 - INFO - 127.0.0.1 - - [08/Jul/2025 19:17:15] "GET /loan/118000020/statement HTTP/1.1" 200 -
2025-07-08 19:20:39,367 - INFO - 127.0.0.1 - - [08/Jul/2025 19:20:39] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-08 20:48:04,718 - INFO - 127.0.0.1 - - [08/Jul/2025 20:48:04] "GET /loanbook HTTP/1.1" 200 -
2025-07-08 20:48:14,833 - INFO - 127.0.0.1 - - [08/Jul/2025 20:48:14] "GET /loan/103000011/statement HTTP/1.1" 200 -
2025-07-08 20:49:18,548 - INFO - 127.0.0.1 - - [08/Jul/2025 20:49:18] "[32mGET /payments HTTP/1.1[0m" 302 -
2025-07-08 20:49:18,700 - INFO - 127.0.0.1 - - [08/Jul/2025 20:49:18] "GET /login HTTP/1.1" 200 -
2025-07-08 20:49:18,889 - INFO - 127.0.0.1 - - [08/Jul/2025 20:49:18] "GET /static/img/logo.png HTTP/1.1" 200 -
2025-07-08 20:49:25,821 - INFO - 127.0.0.1 - - [08/Jul/2025 20:49:25] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-07-08 20:49:26,014 - INFO - 127.0.0.1 - - [08/Jul/2025 20:49:26] "GET / HTTP/1.1" 200 -
2025-07-08 20:49:28,671 - INFO - 127.0.0.1 - - [08/Jul/2025 20:49:28] "GET /loanbook HTTP/1.1" 200 -
2025-07-08 20:49:32,398 - INFO - 127.0.0.1 - - [08/Jul/2025 20:49:32] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-08 20:49:35,145 - INFO - 127.0.0.1 - - [08/Jul/2025 20:49:35] "GET /admin/reports HTTP/1.1" 200 -
2025-07-08 20:49:36,206 - INFO - 127.0.0.1 - - [08/Jul/2025 20:49:36] "GET /admin/dashboard/votes HTTP/1.1" 200 -
2025-07-08 20:49:37,555 - INFO - 127.0.0.1 - - [08/Jul/2025 20:49:37] "GET /admin/dashboard?section=cutoff_dates HTTP/1.1" 200 -
2025-07-08 20:49:41,343 - INFO - 127.0.0.1 - - [08/Jul/2025 20:49:41] "GET /admin/notifications HTTP/1.1" 200 -
2025-07-08 20:50:31,267 - INFO - 127.0.0.1 - - [08/Jul/2025 20:50:31] "GET /loanbook HTTP/1.1" 200 -
2025-07-08 20:50:33,660 - INFO - 127.0.0.1 - - [08/Jul/2025 20:50:33] "GET /loan/112000003/statement HTTP/1.1" 200 -
2025-07-08 21:00:15,738 - INFO - 127.0.0.1 - - [08/Jul/2025 21:00:15] "GET /loanbook HTTP/1.1" 200 -
[2025-07-08 21:00:17,870] INFO in app: Found 21 loans for customer 202506000001
2025-07-08 21:00:17,870 - INFO - Found 21 loans for customer 202506000001
[2025-07-08 21:00:17,878] INFO in app: Customer ID: 1
2025-07-08 21:00:17,878 - INFO - Customer ID: 1
[2025-07-08 21:00:17,880] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active')]
2025-07-08 21:00:17,880 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active')]
2025-07-08 21:00:18,004 - INFO - 127.0.0.1 - - [08/Jul/2025 21:00:18] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-08 21:00:21,340] INFO in app: Found 21 loans for customer 202506000001
2025-07-08 21:00:21,340 - INFO - Found 21 loans for customer 202506000001
[2025-07-08 21:00:21,345] INFO in app: Customer ID: 1
2025-07-08 21:00:21,345 - INFO - Customer ID: 1
[2025-07-08 21:00:21,352] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active')]
2025-07-08 21:00:21,352 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active')]
2025-07-08 21:00:21,392 - INFO - 127.0.0.1 - - [08/Jul/2025 21:00:21] "GET /customer/202506000001/account?section=additional HTTP/1.1" 200 -
2025-07-08 21:00:49,602 - INFO - 127.0.0.1 - - [08/Jul/2025 21:00:49] "[32mPOST /apply_additional/1 HTTP/1.1[0m" 302 -
[2025-07-08 21:00:49,851] INFO in app: Found 22 loans for customer 202506000001
2025-07-08 21:00:49,851 - INFO - Found 22 loans for customer 202506000001
[2025-07-08 21:00:49,862] INFO in app: Customer ID: 1
2025-07-08 21:00:49,862 - INFO - Customer ID: 1
[2025-07-08 21:00:49,867] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'active')]
2025-07-08 21:00:49,867 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'active')]
2025-07-08 21:00:49,947 - INFO - 127.0.0.1 - - [08/Jul/2025 21:00:49] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-08 21:00:51,196 - INFO - 127.0.0.1 - - [08/Jul/2025 21:00:51] "GET /loans HTTP/1.1" 200 -
2025-07-08 21:00:56,593 - INFO - 127.0.0.1 - - [08/Jul/2025 21:00:56] "[32mPOST /process_loan/22/approve HTTP/1.1[0m" 302 -
2025-07-08 21:00:56,971 - INFO - 127.0.0.1 - - [08/Jul/2025 21:00:56] "GET /loans HTTP/1.1" 200 -
2025-07-08 21:00:59,115 - INFO - 127.0.0.1 - - [08/Jul/2025 21:00:59] "GET /loanbook HTTP/1.1" 200 -
2025-07-08 21:01:19,829 - INFO - 127.0.0.1 - - [08/Jul/2025 21:01:19] "GET /loan/112000022/statement HTTP/1.1" 200 -
2025-07-08 21:01:26,938 - INFO - 127.0.0.1 - - [08/Jul/2025 21:01:26] "GET /loanbook HTTP/1.1" 200 -
[2025-07-08 21:01:29,775] INFO in app: Found 22 loans for customer 202506000001
2025-07-08 21:01:29,775 - INFO - Found 22 loans for customer 202506000001
[2025-07-08 21:01:29,782] INFO in app: Customer ID: 1
2025-07-08 21:01:29,782 - INFO - Customer ID: 1
[2025-07-08 21:01:29,787] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'active')]
2025-07-08 21:01:29,787 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'active')]
2025-07-08 21:01:29,832 - INFO - 127.0.0.1 - - [08/Jul/2025 21:01:29] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-08 21:01:31,632] INFO in app: Found 22 loans for customer 202506000001
2025-07-08 21:01:31,632 - INFO - Found 22 loans for customer 202506000001
[2025-07-08 21:01:31,651] INFO in app: Customer ID: 1
2025-07-08 21:01:31,651 - INFO - Customer ID: 1
[2025-07-08 21:01:31,660] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'active')]
2025-07-08 21:01:31,660 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'active')]
2025-07-08 21:01:31,705 - INFO - 127.0.0.1 - - [08/Jul/2025 21:01:31] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-07-08 21:02:15,221] INFO in app: [TOPUP] Submit route hit for loan 22
2025-07-08 21:02:15,221 - INFO - [TOPUP] Submit route hit for loan 22
2025-07-08 21:02:15,237 - DEBUG - [DEBUG] Base loan #112000022 → Top-up balance: 1475342.79, Interest: 131342.79
[2025-07-08 21:02:15,283] INFO in app: [112000022] Schedule 697 updated → fees=11200.0, interest=47040.0, principal=92042.43
2025-07-08 21:02:15,283 - INFO - [112000022] Schedule 697 updated → fees=11200.0, interest=47040.0, principal=92042.43
[2025-07-08 21:02:15,285] INFO in app: [112000022] Schedule 698 updated → fees=11200.0, interest=43818.51, principal=95263.91
2025-07-08 21:02:15,285 - INFO - [112000022] Schedule 698 updated → fees=11200.0, interest=43818.51, principal=95263.91
[2025-07-08 21:02:15,288] INFO in app: [112000022] Schedule 699 updated → fees=11200.0, interest=40484.28, principal=98598.15
2025-07-08 21:02:15,288 - INFO - [112000022] Schedule 699 updated → fees=11200.0, interest=40484.28, principal=98598.15
[2025-07-08 21:02:15,291] INFO in app: [112000022] Schedule 700 updated → fees=11200.0, interest=37033.34, principal=102049.08
2025-07-08 21:02:15,291 - INFO - [112000022] Schedule 700 updated → fees=11200.0, interest=37033.34, principal=102049.08
[2025-07-08 21:02:15,299] INFO in app: [112000022] Schedule 701 updated → fees=11200.0, interest=33461.63, principal=105620.8
2025-07-08 21:02:15,299 - INFO - [112000022] Schedule 701 updated → fees=11200.0, interest=33461.63, principal=105620.8
[2025-07-08 21:02:15,302] INFO in app: [112000022] Schedule 702 updated → fees=11200.0, interest=29764.9, principal=109317.53
2025-07-08 21:02:15,302 - INFO - [112000022] Schedule 702 updated → fees=11200.0, interest=29764.9, principal=109317.53
[2025-07-08 21:02:15,306] INFO in app: [112000022] Schedule 703 updated → fees=11200.0, interest=25938.78, principal=113143.64
2025-07-08 21:02:15,306 - INFO - [112000022] Schedule 703 updated → fees=11200.0, interest=25938.78, principal=113143.64
[2025-07-08 21:02:15,314] INFO in app: [112000022] Schedule 704 updated → fees=11200.0, interest=21978.76, principal=117103.67
2025-07-08 21:02:15,314 - INFO - [112000022] Schedule 704 updated → fees=11200.0, interest=21978.76, principal=117103.67
[2025-07-08 21:02:15,316] INFO in app: [112000022] Schedule 705 updated → fees=11200.0, interest=17880.13, principal=121202.3
2025-07-08 21:02:15,316 - INFO - [112000022] Schedule 705 updated → fees=11200.0, interest=17880.13, principal=121202.3
[2025-07-08 21:02:15,319] INFO in app: [112000022] Schedule 706 updated → fees=11200.0, interest=13638.05, principal=97962.90000000005
2025-07-08 21:02:15,319 - INFO - [112000022] Schedule 706 updated → fees=11200.0, interest=13638.05, principal=97962.90000000005
[2025-07-08 21:02:15,336] INFO in app: [112000022] Recalculated balances → capitalized=1344000.0, paid_principal=1052304.4100000001, paid_settlement_interest=0.0, current_balance=291695.59, top_up_balance=291695.59, settlement_balance=291695.59, loan_state=active
2025-07-08 21:02:15,336 - INFO - [112000022] Recalculated balances → capitalized=1344000.0, paid_principal=1052304.4100000001, paid_settlement_interest=0.0, current_balance=291695.59, top_up_balance=291695.59, settlement_balance=291695.59, loan_state=active
[2025-07-08 21:02:15,338] INFO in app: [112000022] Payment of 1475342.79 allocated. Remaining: 0.0
2025-07-08 21:02:15,338 - INFO - [112000022] Payment of 1475342.79 allocated. Remaining: 0.0
[2025-07-08 21:02:15,340] INFO in app: [112000022] Recalculated balances → capitalized=1344000.0, paid_principal=1052304.4100000001, paid_settlement_interest=0.0, current_balance=291695.59, top_up_balance=291695.59, settlement_balance=291695.59, loan_state=active
2025-07-08 21:02:15,340 - INFO - [112000022] Recalculated balances → capitalized=1344000.0, paid_principal=1052304.4100000001, paid_settlement_interest=0.0, current_balance=291695.59, top_up_balance=291695.59, settlement_balance=291695.59, loan_state=active
2025-07-08 21:02:15,355 - INFO - 127.0.0.1 - - [08/Jul/2025 21:02:15] "[32mPOST /topup/22 HTTP/1.1[0m" 302 -
[2025-07-08 21:02:15,529] INFO in app: Found 23 loans for customer 202506000001
2025-07-08 21:02:15,529 - INFO - Found 23 loans for customer 202506000001
[2025-07-08 21:02:15,531] INFO in app: Customer ID: 1
2025-07-08 21:02:15,531 - INFO - Customer ID: 1
[2025-07-08 21:02:15,534] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'application')]
2025-07-08 21:02:15,534 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'application')]
2025-07-08 21:02:15,581 - INFO - 127.0.0.1 - - [08/Jul/2025 21:02:15] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-08 21:02:20,305 - INFO - 127.0.0.1 - - [08/Jul/2025 21:02:20] "GET /loans HTTP/1.1" 200 -
2025-07-08 21:02:24,531 - INFO - 127.0.0.1 - - [08/Jul/2025 21:02:24] "[32mPOST /process_loan/23/approve HTTP/1.1[0m" 302 -
2025-07-08 21:02:24,570 - INFO - 127.0.0.1 - - [08/Jul/2025 21:02:24] "GET /loans HTTP/1.1" 200 -
2025-07-08 21:02:26,306 - INFO - 127.0.0.1 - - [08/Jul/2025 21:02:26] "GET /loanbook HTTP/1.1" 200 -
2025-07-08 21:02:44,107 - INFO - 127.0.0.1 - - [08/Jul/2025 21:02:44] "GET /loan/112000022/statement HTTP/1.1" 200 -
[2025-07-09 05:36:34,242] INFO in app: ==================================================
[2025-07-09 05:36:34,324] INFO in app: Application logging initialized successfully
[2025-07-09 05:36:34,326] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-09 05:36:34,327] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-09 05:36:34,329] INFO in app: System encoding: utf-8
[2025-07-09 05:36:34,332] INFO in app: ==================================================
2025-07-09 05:36:34,665 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-09 05:36:34,665 - INFO - [33mPress CTRL+C to quit[0m
2025-07-09 05:37:19,547 - INFO - 127.0.0.1 - - [09/Jul/2025 05:37:19] "GET /loan/112000022/statement HTTP/1.1" 200 -
2025-07-09 05:37:20,121 - INFO - 127.0.0.1 - - [09/Jul/2025 05:37:20] "GET /loan/112000022/statement HTTP/1.1" 200 -
2025-07-09 05:37:20,853 - INFO - 127.0.0.1 - - [09/Jul/2025 05:37:20] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-09 05:37:23,623 - INFO - 127.0.0.1 - - [09/Jul/2025 05:37:23] "GET /loanbook HTTP/1.1" 200 -
[2025-07-09 05:37:24,979] INFO in app: Found 23 loans for customer 202506000001
2025-07-09 05:37:24,979 - INFO - Found 23 loans for customer 202506000001
[2025-07-09 05:37:25,025] INFO in app: Customer ID: 1
2025-07-09 05:37:25,025 - INFO - Customer ID: 1
[2025-07-09 05:37:25,062] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active')]
2025-07-09 05:37:25,062 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active')]
2025-07-09 05:37:25,201 - INFO - 127.0.0.1 - - [09/Jul/2025 05:37:25] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-09 05:37:26,901] INFO in app: Found 23 loans for customer 202506000001
2025-07-09 05:37:26,901 - INFO - Found 23 loans for customer 202506000001
[2025-07-09 05:37:26,905] INFO in app: Customer ID: 1
2025-07-09 05:37:26,905 - INFO - Customer ID: 1
[2025-07-09 05:37:26,909] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active')]
2025-07-09 05:37:26,909 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active')]
2025-07-09 05:37:26,967 - INFO - 127.0.0.1 - - [09/Jul/2025 05:37:26] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-07-09 05:37:27,738] INFO in app: Found 23 loans for customer 202506000001
2025-07-09 05:37:27,738 - INFO - Found 23 loans for customer 202506000001
[2025-07-09 05:37:27,743] INFO in app: Customer ID: 1
2025-07-09 05:37:27,743 - INFO - Customer ID: 1
[2025-07-09 05:37:27,746] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active')]
2025-07-09 05:37:27,746 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active')]
2025-07-09 05:37:27,804 - INFO - 127.0.0.1 - - [09/Jul/2025 05:37:27] "GET /customer/202506000001/account?section=additional HTTP/1.1" 200 -
2025-07-09 05:37:51,161 - INFO - 127.0.0.1 - - [09/Jul/2025 05:37:51] "[32mPOST /apply_additional/1 HTTP/1.1[0m" 302 -
[2025-07-09 05:37:51,405] INFO in app: Found 24 loans for customer 202506000001
2025-07-09 05:37:51,405 - INFO - Found 24 loans for customer 202506000001
[2025-07-09 05:37:51,414] INFO in app: Customer ID: 1
2025-07-09 05:37:51,414 - INFO - Customer ID: 1
[2025-07-09 05:37:51,428] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'active')]
2025-07-09 05:37:51,428 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'active')]
2025-07-09 05:37:51,496 - INFO - 127.0.0.1 - - [09/Jul/2025 05:37:51] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-09 05:37:53,488 - INFO - 127.0.0.1 - - [09/Jul/2025 05:37:53] "GET /loans HTTP/1.1" 200 -
2025-07-09 05:37:58,128 - INFO - 127.0.0.1 - - [09/Jul/2025 05:37:58] "[32mPOST /process_loan/24/approve HTTP/1.1[0m" 302 -
2025-07-09 05:37:58,179 - INFO - 127.0.0.1 - - [09/Jul/2025 05:37:58] "GET /loans HTTP/1.1" 200 -
2025-07-09 05:38:00,683 - INFO - 127.0.0.1 - - [09/Jul/2025 05:38:00] "GET /loanbook HTTP/1.1" 200 -
[2025-07-09 05:38:05,394] INFO in app: Found 24 loans for customer 202506000001
2025-07-09 05:38:05,394 - INFO - Found 24 loans for customer 202506000001
[2025-07-09 05:38:05,403] INFO in app: Customer ID: 1
2025-07-09 05:38:05,403 - INFO - Customer ID: 1
[2025-07-09 05:38:05,420] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'active')]
2025-07-09 05:38:05,420 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'active')]
2025-07-09 05:38:05,473 - INFO - 127.0.0.1 - - [09/Jul/2025 05:38:05] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-09 05:38:06,631] INFO in app: Found 24 loans for customer 202506000001
2025-07-09 05:38:06,631 - INFO - Found 24 loans for customer 202506000001
[2025-07-09 05:38:06,637] INFO in app: Customer ID: 1
2025-07-09 05:38:06,637 - INFO - Customer ID: 1
[2025-07-09 05:38:06,646] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'active')]
2025-07-09 05:38:06,646 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'active')]
2025-07-09 05:38:06,699 - INFO - 127.0.0.1 - - [09/Jul/2025 05:38:06] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-07-09 05:38:35,254] INFO in app: [TOPUP] Submit route hit for loan 24
2025-07-09 05:38:35,254 - INFO - [TOPUP] Submit route hit for loan 24
2025-07-09 05:38:35,261 - DEBUG - [DEBUG] Base loan #112000024 → Top-up balance: 297703.1, Interest: 26503.1
[2025-07-09 05:38:35,304] INFO in app: [112000024] Schedule 733 updated → fees=2240.0, interest=9492.0, principal=18572.85
2025-07-09 05:38:35,304 - INFO - [112000024] Schedule 733 updated → fees=2240.0, interest=9492.0, principal=18572.85
[2025-07-09 05:38:35,307] INFO in app: [112000024] Schedule 734 updated → fees=2240.0, interest=8841.95, principal=19222.9
2025-07-09 05:38:35,307 - INFO - [112000024] Schedule 734 updated → fees=2240.0, interest=8841.95, principal=19222.9
[2025-07-09 05:38:35,309] INFO in app: [112000024] Schedule 735 updated → fees=2240.0, interest=8169.15, principal=19895.7
2025-07-09 05:38:35,309 - INFO - [112000024] Schedule 735 updated → fees=2240.0, interest=8169.15, principal=19895.7
[2025-07-09 05:38:35,319] INFO in app: [112000024] Schedule 736 updated → fees=2240.0, interest=7472.8, principal=20592.05
2025-07-09 05:38:35,319 - INFO - [112000024] Schedule 736 updated → fees=2240.0, interest=7472.8, principal=20592.05
[2025-07-09 05:38:35,321] INFO in app: [112000024] Schedule 737 updated → fees=2240.0, interest=6752.08, principal=21312.77
2025-07-09 05:38:35,321 - INFO - [112000024] Schedule 737 updated → fees=2240.0, interest=6752.08, principal=21312.77
[2025-07-09 05:38:35,323] INFO in app: [112000024] Schedule 738 updated → fees=2240.0, interest=6006.13, principal=22058.72
2025-07-09 05:38:35,323 - INFO - [112000024] Schedule 738 updated → fees=2240.0, interest=6006.13, principal=22058.72
[2025-07-09 05:38:35,325] INFO in app: [112000024] Schedule 739 updated → fees=2240.0, interest=5234.08, principal=22830.77
2025-07-09 05:38:35,325 - INFO - [112000024] Schedule 739 updated → fees=2240.0, interest=5234.08, principal=22830.77
[2025-07-09 05:38:35,335] INFO in app: [112000024] Schedule 740 updated → fees=2240.0, interest=4435.0, principal=23629.85
2025-07-09 05:38:35,335 - INFO - [112000024] Schedule 740 updated → fees=2240.0, interest=4435.0, principal=23629.85
[2025-07-09 05:38:35,339] INFO in app: [112000024] Schedule 741 updated → fees=2240.0, interest=3607.95, principal=24456.89
2025-07-09 05:38:35,339 - INFO - [112000024] Schedule 741 updated → fees=2240.0, interest=3607.95, principal=24456.89
[2025-07-09 05:38:35,342] INFO in app: [112000024] Schedule 742 updated → fees=2240.0, interest=2751.96, principal=19967.50000000003
2025-07-09 05:38:35,342 - INFO - [112000024] Schedule 742 updated → fees=2240.0, interest=2751.96, principal=19967.50000000003
[2025-07-09 05:38:35,358] INFO in app: [112000024] Recalculated balances → capitalized=271200.0, paid_principal=212540.00000000003, paid_settlement_interest=0.0, current_balance=58660.0, top_up_balance=58660.0, settlement_balance=58660.0, loan_state=active
2025-07-09 05:38:35,358 - INFO - [112000024] Recalculated balances → capitalized=271200.0, paid_principal=212540.00000000003, paid_settlement_interest=0.0, current_balance=58660.0, top_up_balance=58660.0, settlement_balance=58660.0, loan_state=active
[2025-07-09 05:38:35,368] INFO in app: [112000024] Payment of 297703.1 allocated. Remaining: 0.0
2025-07-09 05:38:35,368 - INFO - [112000024] Payment of 297703.1 allocated. Remaining: 0.0
[2025-07-09 05:38:35,370] INFO in app: [112000024] Recalculated balances → capitalized=271200.0, paid_principal=212540.00000000003, paid_settlement_interest=0.0, current_balance=58660.0, top_up_balance=58660.0, settlement_balance=58660.0, loan_state=active
2025-07-09 05:38:35,370 - INFO - [112000024] Recalculated balances → capitalized=271200.0, paid_principal=212540.00000000003, paid_settlement_interest=0.0, current_balance=58660.0, top_up_balance=58660.0, settlement_balance=58660.0, loan_state=active
2025-07-09 05:38:35,384 - INFO - 127.0.0.1 - - [09/Jul/2025 05:38:35] "[32mPOST /topup/24 HTTP/1.1[0m" 302 -
[2025-07-09 05:38:35,572] INFO in app: Found 25 loans for customer 202506000001
2025-07-09 05:38:35,572 - INFO - Found 25 loans for customer 202506000001
[2025-07-09 05:38:35,586] INFO in app: Customer ID: 1
2025-07-09 05:38:35,586 - INFO - Customer ID: 1
[2025-07-09 05:38:35,592] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'application')]
2025-07-09 05:38:35,592 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'application')]
2025-07-09 05:38:35,643 - INFO - 127.0.0.1 - - [09/Jul/2025 05:38:35] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-09 05:38:38,605 - INFO - 127.0.0.1 - - [09/Jul/2025 05:38:38] "GET /loans HTTP/1.1" 200 -
2025-07-09 05:38:46,516 - INFO - 127.0.0.1 - - [09/Jul/2025 05:38:46] "[32mPOST /process_loan/25/approve HTTP/1.1[0m" 302 -
2025-07-09 05:38:46,579 - INFO - 127.0.0.1 - - [09/Jul/2025 05:38:46] "GET /loans HTTP/1.1" 200 -
2025-07-09 05:38:48,406 - INFO - 127.0.0.1 - - [09/Jul/2025 05:38:48] "GET /loanbook HTTP/1.1" 200 -
2025-07-09 05:38:59,356 - INFO - 127.0.0.1 - - [09/Jul/2025 05:38:59] "GET /loan/112000024/statement HTTP/1.1" 200 -
[2025-07-09 05:52:01,528] INFO in app: ==================================================
[2025-07-09 05:52:01,537] INFO in app: Application logging initialized successfully
[2025-07-09 05:52:01,539] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-09 05:52:01,541] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-09 05:52:01,547] INFO in app: System encoding: utf-8
[2025-07-09 05:52:01,552] INFO in app: ==================================================
2025-07-09 05:52:01,869 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-09 05:52:01,869 - INFO - [33mPress CTRL+C to quit[0m
2025-07-09 05:52:10,094 - INFO - 127.0.0.1 - - [09/Jul/2025 05:52:10] "GET /loan/112000024/statement HTTP/1.1" 200 -
2025-07-09 05:52:13,631 - INFO - 127.0.0.1 - - [09/Jul/2025 05:52:13] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-09 05:52:14,990 - INFO - 127.0.0.1 - - [09/Jul/2025 05:52:14] "GET /loanbook HTTP/1.1" 200 -
[2025-07-09 05:52:16,512] INFO in app: Found 25 loans for customer 202506000001
2025-07-09 05:52:16,512 - INFO - Found 25 loans for customer 202506000001
[2025-07-09 05:52:16,515] INFO in app: Customer ID: 1
2025-07-09 05:52:16,515 - INFO - Customer ID: 1
[2025-07-09 05:52:16,517] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active')]
2025-07-09 05:52:16,517 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active')]
2025-07-09 05:52:16,628 - INFO - 127.0.0.1 - - [09/Jul/2025 05:52:16] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-09 05:52:18,472] INFO in app: Found 25 loans for customer 202506000001
2025-07-09 05:52:18,472 - INFO - Found 25 loans for customer 202506000001
[2025-07-09 05:52:18,479] INFO in app: Customer ID: 1
2025-07-09 05:52:18,479 - INFO - Customer ID: 1
[2025-07-09 05:52:18,482] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active')]
2025-07-09 05:52:18,482 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active')]
2025-07-09 05:52:18,602 - INFO - 127.0.0.1 - - [09/Jul/2025 05:52:18] "GET /customer/202506000001/account?section=additional HTTP/1.1" 200 -
2025-07-09 05:52:50,075 - INFO - 127.0.0.1 - - [09/Jul/2025 05:52:50] "[32mPOST /apply_additional/1 HTTP/1.1[0m" 302 -
[2025-07-09 05:52:50,289] INFO in app: Found 26 loans for customer 202506000001
2025-07-09 05:52:50,289 - INFO - Found 26 loans for customer 202506000001
[2025-07-09 05:52:50,292] INFO in app: Customer ID: 1
2025-07-09 05:52:50,292 - INFO - Customer ID: 1
[2025-07-09 05:52:50,302] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'active')]
2025-07-09 05:52:50,302 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'active')]
2025-07-09 05:52:50,401 - INFO - 127.0.0.1 - - [09/Jul/2025 05:52:50] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-09 05:52:51,456 - INFO - 127.0.0.1 - - [09/Jul/2025 05:52:51] "GET /loans HTTP/1.1" 200 -
2025-07-09 05:53:24,392 - INFO - 127.0.0.1 - - [09/Jul/2025 05:53:24] "[32mPOST /process_loan/26/approve HTTP/1.1[0m" 302 -
2025-07-09 05:53:24,461 - INFO - 127.0.0.1 - - [09/Jul/2025 05:53:24] "GET /loans HTTP/1.1" 200 -
2025-07-09 05:53:26,945 - INFO - 127.0.0.1 - - [09/Jul/2025 05:53:26] "GET /loanbook HTTP/1.1" 200 -
[2025-07-09 05:53:32,859] INFO in app: Found 26 loans for customer 202506000001
2025-07-09 05:53:32,859 - INFO - Found 26 loans for customer 202506000001
[2025-07-09 05:53:32,865] INFO in app: Customer ID: 1
2025-07-09 05:53:32,865 - INFO - Customer ID: 1
[2025-07-09 05:53:32,877] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'active')]
2025-07-09 05:53:32,877 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'active')]
2025-07-09 05:53:32,969 - INFO - 127.0.0.1 - - [09/Jul/2025 05:53:32] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-09 05:53:34,853] INFO in app: Found 26 loans for customer 202506000001
2025-07-09 05:53:34,853 - INFO - Found 26 loans for customer 202506000001
[2025-07-09 05:53:34,861] INFO in app: Customer ID: 1
2025-07-09 05:53:34,861 - INFO - Customer ID: 1
[2025-07-09 05:53:34,865] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'active')]
2025-07-09 05:53:34,865 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'active')]
2025-07-09 05:53:34,919 - INFO - 127.0.0.1 - - [09/Jul/2025 05:53:34] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-07-09 05:54:22,003] INFO in app: [TOPUP] Submit route hit for loan 26
2025-07-09 05:54:22,003 - INFO - [TOPUP] Submit route hit for loan 26
2025-07-09 05:54:22,023 - DEBUG - [DEBUG] Base loan #124000026 → Top-up balance: 742266.33, Interest: 68766.33
[2025-07-09 05:54:22,083] INFO in app: [124000026] Schedule 757 updated → fees=5600.0, interest=23572.5, principal=18368.25
2025-07-09 05:54:22,083 - INFO - [124000026] Schedule 757 updated → fees=5600.0, interest=23572.5, principal=18368.25
[2025-07-09 05:54:22,085] INFO in app: [124000026] Schedule 758 updated → fees=5600.0, interest=22929.61, principal=19011.14
2025-07-09 05:54:22,085 - INFO - [124000026] Schedule 758 updated → fees=5600.0, interest=22929.61, principal=19011.14
[2025-07-09 05:54:22,095] INFO in app: [124000026] Schedule 759 updated → fees=5600.0, interest=22264.22, principal=19676.53
2025-07-09 05:54:22,095 - INFO - [124000026] Schedule 759 updated → fees=5600.0, interest=22264.22, principal=19676.53
[2025-07-09 05:54:22,098] INFO in app: [124000026] Schedule 760 updated → fees=5600.0, interest=21575.54, principal=20365.21
2025-07-09 05:54:22,098 - INFO - [124000026] Schedule 760 updated → fees=5600.0, interest=21575.54, principal=20365.21
[2025-07-09 05:54:22,101] INFO in app: [124000026] Schedule 761 updated → fees=5600.0, interest=20862.76, principal=21077.99
2025-07-09 05:54:22,101 - INFO - [124000026] Schedule 761 updated → fees=5600.0, interest=20862.76, principal=21077.99
[2025-07-09 05:54:22,116] INFO in app: [124000026] Schedule 762 updated → fees=5600.0, interest=20125.03, principal=21815.72
2025-07-09 05:54:22,116 - INFO - [124000026] Schedule 762 updated → fees=5600.0, interest=20125.03, principal=21815.72
[2025-07-09 05:54:22,123] INFO in app: [124000026] Schedule 763 updated → fees=5600.0, interest=19361.48, principal=22579.27
2025-07-09 05:54:22,123 - INFO - [124000026] Schedule 763 updated → fees=5600.0, interest=19361.48, principal=22579.27
[2025-07-09 05:54:22,132] INFO in app: [124000026] Schedule 764 updated → fees=5600.0, interest=18571.21, principal=23369.55
2025-07-09 05:54:22,132 - INFO - [124000026] Schedule 764 updated → fees=5600.0, interest=18571.21, principal=23369.55
[2025-07-09 05:54:22,136] INFO in app: [124000026] Schedule 765 updated → fees=5600.0, interest=17753.27, principal=24187.48
2025-07-09 05:54:22,136 - INFO - [124000026] Schedule 765 updated → fees=5600.0, interest=17753.27, principal=24187.48
[2025-07-09 05:54:22,144] INFO in app: [124000026] Schedule 766 updated → fees=5600.0, interest=16906.71, principal=25034.04
2025-07-09 05:54:22,144 - INFO - [124000026] Schedule 766 updated → fees=5600.0, interest=16906.71, principal=25034.04
[2025-07-09 05:54:22,147] INFO in app: [124000026] Schedule 767 updated → fees=5600.0, interest=16030.52, principal=25910.23
2025-07-09 05:54:22,147 - INFO - [124000026] Schedule 767 updated → fees=5600.0, interest=16030.52, principal=25910.23
[2025-07-09 05:54:22,150] INFO in app: [124000026] Schedule 768 updated → fees=5600.0, interest=15123.66, principal=26817.09
2025-07-09 05:54:22,150 - INFO - [124000026] Schedule 768 updated → fees=5600.0, interest=15123.66, principal=26817.09
[2025-07-09 05:54:22,153] INFO in app: [124000026] Schedule 769 updated → fees=5600.0, interest=14185.06, principal=27755.69
2025-07-09 05:54:22,153 - INFO - [124000026] Schedule 769 updated → fees=5600.0, interest=14185.06, principal=27755.69
[2025-07-09 05:54:22,164] INFO in app: [124000026] Schedule 770 updated → fees=5600.0, interest=13213.61, principal=28727.14
2025-07-09 05:54:22,164 - INFO - [124000026] Schedule 770 updated → fees=5600.0, interest=13213.61, principal=28727.14
[2025-07-09 05:54:22,167] INFO in app: [124000026] Schedule 771 updated → fees=5600.0, interest=12208.16, principal=29732.59
2025-07-09 05:54:22,167 - INFO - [124000026] Schedule 771 updated → fees=5600.0, interest=12208.16, principal=29732.59
[2025-07-09 05:54:22,169] INFO in app: [124000026] Schedule 772 updated → fees=5600.0, interest=11167.52, principal=12387.549999999945
2025-07-09 05:54:22,169 - INFO - [124000026] Schedule 772 updated → fees=5600.0, interest=11167.52, principal=12387.549999999945
[2025-07-09 05:54:22,193] INFO in app: [124000026] Recalculated: capitalized=673500.0, paid_principal=366815.47, current_balance=306684.53
2025-07-09 05:54:22,193 - INFO - [124000026] Recalculated: capitalized=673500.0, paid_principal=366815.47, current_balance=306684.53
[2025-07-09 05:54:22,195] INFO in app: [124000026] Payment of 742266.33 allocated. Remaining: 0.0
2025-07-09 05:54:22,195 - INFO - [124000026] Payment of 742266.33 allocated. Remaining: 0.0
[2025-07-09 05:54:22,198] INFO in app: [124000026] Recalculated: capitalized=673500.0, paid_principal=366815.47, current_balance=306684.53
2025-07-09 05:54:22,198 - INFO - [124000026] Recalculated: capitalized=673500.0, paid_principal=366815.47, current_balance=306684.53
2025-07-09 05:54:22,213 - INFO - 127.0.0.1 - - [09/Jul/2025 05:54:22] "[32mPOST /topup/26 HTTP/1.1[0m" 302 -
[2025-07-09 05:54:22,319] INFO in app: Found 27 loans for customer 202506000001
2025-07-09 05:54:22,319 - INFO - Found 27 loans for customer 202506000001
[2025-07-09 05:54:22,332] INFO in app: Customer ID: 1
2025-07-09 05:54:22,332 - INFO - Customer ID: 1
[2025-07-09 05:54:22,342] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'application')]
2025-07-09 05:54:22,342 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'application')]
2025-07-09 05:54:22,478 - INFO - 127.0.0.1 - - [09/Jul/2025 05:54:22] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-09 05:54:23,745 - INFO - 127.0.0.1 - - [09/Jul/2025 05:54:23] "GET /loans HTTP/1.1" 200 -
2025-07-09 05:54:29,609 - INFO - 127.0.0.1 - - [09/Jul/2025 05:54:29] "[32mPOST /process_loan/27/approve HTTP/1.1[0m" 302 -
2025-07-09 05:54:29,682 - INFO - 127.0.0.1 - - [09/Jul/2025 05:54:29] "GET /loans HTTP/1.1" 200 -
2025-07-09 05:54:31,765 - INFO - 127.0.0.1 - - [09/Jul/2025 05:54:31] "GET /loanbook HTTP/1.1" 200 -
2025-07-09 05:54:48,167 - INFO - 127.0.0.1 - - [09/Jul/2025 05:54:48] "GET /loan/124000026/statement HTTP/1.1" 200 -
[2025-07-09 06:01:40,023] INFO in app: ==================================================
[2025-07-09 06:01:40,042] INFO in app: Application logging initialized successfully
[2025-07-09 06:01:40,050] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-09 06:01:40,053] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-09 06:01:40,054] INFO in app: System encoding: utf-8
[2025-07-09 06:01:40,058] INFO in app: ==================================================
2025-07-09 06:01:40,423 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-09 06:01:40,424 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-09 09:51:37,499] INFO in app: ==================================================
[2025-07-09 09:51:37,611] INFO in app: Application logging initialized successfully
[2025-07-09 09:51:37,613] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-09 09:51:37,614] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-09 09:51:37,616] INFO in app: System encoding: utf-8
[2025-07-09 09:51:37,618] INFO in app: ==================================================
2025-07-09 09:51:38,098 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-09 09:51:38,098 - INFO - [33mPress CTRL+C to quit[0m
2025-07-09 09:51:42,562 - INFO - 127.0.0.1 - - [09/Jul/2025 09:51:42] "GET /loan/124000026/statement HTTP/1.1" 200 -
2025-07-09 09:51:44,096 - INFO - 127.0.0.1 - - [09/Jul/2025 09:51:44] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-09 09:51:47,114 - INFO - 127.0.0.1 - - [09/Jul/2025 09:51:47] "GET /loanbook HTTP/1.1" 200 -
[2025-07-09 09:51:52,040] INFO in app: Found 27 loans for customer 202506000001
2025-07-09 09:51:52,040 - INFO - Found 27 loans for customer 202506000001
[2025-07-09 09:51:52,048] INFO in app: Customer ID: 1
2025-07-09 09:51:52,048 - INFO - Customer ID: 1
[2025-07-09 09:51:52,055] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'active')]
2025-07-09 09:51:52,055 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'active')]
2025-07-09 09:51:52,315 - INFO - 127.0.0.1 - - [09/Jul/2025 09:51:52] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-09 09:51:54,373] INFO in app: Found 27 loans for customer 202506000001
2025-07-09 09:51:54,373 - INFO - Found 27 loans for customer 202506000001
[2025-07-09 09:51:54,391] INFO in app: Customer ID: 1
2025-07-09 09:51:54,391 - INFO - Customer ID: 1
[2025-07-09 09:51:54,408] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'active')]
2025-07-09 09:51:54,408 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'active')]
2025-07-09 09:51:54,509 - INFO - 127.0.0.1 - - [09/Jul/2025 09:51:54] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-07-09 09:52:29,431] INFO in app: [TOPUP] Submit route hit for loan 27
2025-07-09 09:52:29,431 - INFO - [TOPUP] Submit route hit for loan 27
2025-07-09 09:52:29,456 - DEBUG - [DEBUG] Base loan #136000027 → Top-up balance: 1335103.68, Interest: 125203.68
[2025-07-09 09:52:29,559] INFO in app: [136000027] Schedule 781 updated → fees=10080.0, interest=42346.5, principal=17282.41
2025-07-09 09:52:29,559 - INFO - [136000027] Schedule 781 updated → fees=10080.0, interest=42346.5, principal=17282.41
[2025-07-09 09:52:29,565] INFO in app: [136000027] Schedule 782 updated → fees=10080.0, interest=41741.62, principal=17887.29
2025-07-09 09:52:29,565 - INFO - [136000027] Schedule 782 updated → fees=10080.0, interest=41741.62, principal=17887.29
[2025-07-09 09:52:29,569] INFO in app: [136000027] Schedule 783 updated → fees=10080.0, interest=41115.56, principal=18513.35
2025-07-09 09:52:29,569 - INFO - [136000027] Schedule 783 updated → fees=10080.0, interest=41115.56, principal=18513.35
[2025-07-09 09:52:29,578] INFO in app: [136000027] Schedule 784 updated → fees=10080.0, interest=40467.59, principal=19161.32
2025-07-09 09:52:29,578 - INFO - [136000027] Schedule 784 updated → fees=10080.0, interest=40467.59, principal=19161.32
[2025-07-09 09:52:29,584] INFO in app: [136000027] Schedule 785 updated → fees=10080.0, interest=39796.95, principal=19831.96
2025-07-09 09:52:29,584 - INFO - [136000027] Schedule 785 updated → fees=10080.0, interest=39796.95, principal=19831.96
[2025-07-09 09:52:29,602] INFO in app: [136000027] Schedule 786 updated → fees=10080.0, interest=39102.83, principal=20526.08
2025-07-09 09:52:29,602 - INFO - [136000027] Schedule 786 updated → fees=10080.0, interest=39102.83, principal=20526.08
[2025-07-09 09:52:29,611] INFO in app: [136000027] Schedule 787 updated → fees=10080.0, interest=38384.42, principal=21244.49
2025-07-09 09:52:29,611 - INFO - [136000027] Schedule 787 updated → fees=10080.0, interest=38384.42, principal=21244.49
[2025-07-09 09:52:29,615] INFO in app: [136000027] Schedule 788 updated → fees=10080.0, interest=37640.86, principal=21988.05
2025-07-09 09:52:29,615 - INFO - [136000027] Schedule 788 updated → fees=10080.0, interest=37640.86, principal=21988.05
[2025-07-09 09:52:29,625] INFO in app: [136000027] Schedule 789 updated → fees=10080.0, interest=36871.28, principal=22757.63
2025-07-09 09:52:29,625 - INFO - [136000027] Schedule 789 updated → fees=10080.0, interest=36871.28, principal=22757.63
[2025-07-09 09:52:29,631] INFO in app: [136000027] Schedule 790 updated → fees=10080.0, interest=36074.76, principal=23554.15
2025-07-09 09:52:29,631 - INFO - [136000027] Schedule 790 updated → fees=10080.0, interest=36074.76, principal=23554.15
[2025-07-09 09:52:29,644] INFO in app: [136000027] Schedule 791 updated → fees=10080.0, interest=35250.36, principal=24378.54
2025-07-09 09:52:29,644 - INFO - [136000027] Schedule 791 updated → fees=10080.0, interest=35250.36, principal=24378.54
[2025-07-09 09:52:29,650] INFO in app: [136000027] Schedule 792 updated → fees=10080.0, interest=34397.12, principal=25231.79
2025-07-09 09:52:29,650 - INFO - [136000027] Schedule 792 updated → fees=10080.0, interest=34397.12, principal=25231.79
[2025-07-09 09:52:29,662] INFO in app: [136000027] Schedule 793 updated → fees=10080.0, interest=33514.0, principal=26114.91
2025-07-09 09:52:29,662 - INFO - [136000027] Schedule 793 updated → fees=10080.0, interest=33514.0, principal=26114.91
[2025-07-09 09:52:29,668] INFO in app: [136000027] Schedule 794 updated → fees=10080.0, interest=32599.98, principal=27028.93
2025-07-09 09:52:29,668 - INFO - [136000027] Schedule 794 updated → fees=10080.0, interest=32599.98, principal=27028.93
[2025-07-09 09:52:29,677] INFO in app: [136000027] Schedule 795 updated → fees=10080.0, interest=31653.97, principal=27974.94
2025-07-09 09:52:29,677 - INFO - [136000027] Schedule 795 updated → fees=10080.0, interest=31653.97, principal=27974.94
[2025-07-09 09:52:29,684] INFO in app: [136000027] Schedule 796 updated → fees=10080.0, interest=30674.85, principal=28954.06
2025-07-09 09:52:29,684 - INFO - [136000027] Schedule 796 updated → fees=10080.0, interest=30674.85, principal=28954.06
[2025-07-09 09:52:29,693] INFO in app: [136000027] Schedule 797 updated → fees=10080.0, interest=29661.45, principal=29967.46
2025-07-09 09:52:29,693 - INFO - [136000027] Schedule 797 updated → fees=10080.0, interest=29661.45, principal=29967.46
[2025-07-09 09:52:29,698] INFO in app: [136000027] Schedule 798 updated → fees=10080.0, interest=28612.59, principal=31016.32
2025-07-09 09:52:29,698 - INFO - [136000027] Schedule 798 updated → fees=10080.0, interest=28612.59, principal=31016.32
[2025-07-09 09:52:29,703] INFO in app: [136000027] Schedule 799 updated → fees=10080.0, interest=27527.02, principal=32101.89
2025-07-09 09:52:29,703 - INFO - [136000027] Schedule 799 updated → fees=10080.0, interest=27527.02, principal=32101.89
[2025-07-09 09:52:29,711] INFO in app: [136000027] Schedule 800 updated → fees=10080.0, interest=554.3999999996158, principal=0.0
2025-07-09 09:52:29,711 - INFO - [136000027] Schedule 800 updated → fees=10080.0, interest=554.3999999996158, principal=0.0
[2025-07-09 09:52:29,737] INFO in app: [136000027] Recalculated: capitalized=1209900.0, paid_principal=455515.57, current_balance=754384.43
2025-07-09 09:52:29,737 - INFO - [136000027] Recalculated: capitalized=1209900.0, paid_principal=455515.57, current_balance=754384.43
[2025-07-09 09:52:29,745] INFO in app: [136000027] Payment of 1335103.68 allocated. Remaining: 0.0
2025-07-09 09:52:29,745 - INFO - [136000027] Payment of 1335103.68 allocated. Remaining: 0.0
[2025-07-09 09:52:29,749] INFO in app: [136000027] Recalculated: capitalized=1209900.0, paid_principal=455515.57, current_balance=754384.43
2025-07-09 09:52:29,749 - INFO - [136000027] Recalculated: capitalized=1209900.0, paid_principal=455515.57, current_balance=754384.43
2025-07-09 09:52:29,808 - INFO - 127.0.0.1 - - [09/Jul/2025 09:52:29] "[32mPOST /topup/27 HTTP/1.1[0m" 302 -
[2025-07-09 09:52:29,842] INFO in app: Found 28 loans for customer 202506000001
2025-07-09 09:52:29,842 - INFO - Found 28 loans for customer 202506000001
[2025-07-09 09:52:29,850] INFO in app: Customer ID: 1
2025-07-09 09:52:29,850 - INFO - Customer ID: 1
[2025-07-09 09:52:29,857] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'application')]
2025-07-09 09:52:29,857 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'application')]
2025-07-09 09:52:29,951 - INFO - 127.0.0.1 - - [09/Jul/2025 09:52:29] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-09 09:52:31,731 - INFO - 127.0.0.1 - - [09/Jul/2025 09:52:31] "GET /loans HTTP/1.1" 200 -
2025-07-09 09:52:34,144 - INFO - 127.0.0.1 - - [09/Jul/2025 09:52:34] "[32mPOST /process_loan/28/approve HTTP/1.1[0m" 302 -
2025-07-09 09:52:34,291 - INFO - 127.0.0.1 - - [09/Jul/2025 09:52:34] "GET /loans HTTP/1.1" 200 -
2025-07-09 09:52:35,767 - INFO - 127.0.0.1 - - [09/Jul/2025 09:52:35] "GET /loanbook HTTP/1.1" 200 -
2025-07-09 09:52:46,300 - INFO - 127.0.0.1 - - [09/Jul/2025 09:52:46] "GET /loan/136000027/statement HTTP/1.1" 200 -
2025-07-09 20:11:44,418 - INFO - 127.0.0.1 - - [09/Jul/2025 20:11:44] "GET /loan/136000027/statement HTTP/1.1" 200 -
[2025-07-12 11:59:51,556] INFO in app: ==================================================
[2025-07-12 11:59:51,630] INFO in app: Application logging initialized successfully
[2025-07-12 11:59:51,632] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-12 11:59:51,633] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-12 11:59:51,636] INFO in app: System encoding: utf-8
[2025-07-12 11:59:51,639] INFO in app: ==================================================
[2025-07-12 12:00:04,750] INFO in app: ==================================================
[2025-07-12 12:00:04,755] INFO in app: Application logging initialized successfully
[2025-07-12 12:00:04,760] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-12 12:00:04,768] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-12 12:00:04,771] INFO in app: System encoding: utf-8
[2025-07-12 12:00:04,773] INFO in app: ==================================================
[2025-07-12 12:00:13,685] INFO in app: ==================================================
[2025-07-12 12:00:13,691] INFO in app: Application logging initialized successfully
[2025-07-12 12:00:13,693] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-12 12:00:13,697] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-12 12:00:13,699] INFO in app: System encoding: utf-8
[2025-07-12 12:00:13,701] INFO in app: ==================================================
[2025-07-12 12:00:17,821] INFO in app: ==================================================
[2025-07-12 12:00:17,829] INFO in app: Application logging initialized successfully
[2025-07-12 12:00:17,831] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-12 12:00:17,832] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-12 12:00:17,834] INFO in app: System encoding: utf-8
[2025-07-12 12:00:17,837] INFO in app: ==================================================
2025-07-12 12:00:18,087 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-12 12:00:18,087 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-12 12:22:25,086] INFO in app: ==================================================
[2025-07-12 12:22:25,092] INFO in app: Application logging initialized successfully
[2025-07-12 12:22:25,096] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-12 12:22:25,099] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-12 12:22:25,109] INFO in app: System encoding: utf-8
[2025-07-12 12:22:25,118] INFO in app: ==================================================
2025-07-12 12:22:25,311 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-12 12:22:25,311 - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 12:25:43,810 - INFO - 127.0.0.1 - - [12/Jul/2025 12:25:43] "GET /loan/136000027/statement HTTP/1.1" 200 -
2025-07-12 12:25:44,620 - INFO - 127.0.0.1 - - [12/Jul/2025 12:25:44] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-12 12:25:49,381 - INFO - 127.0.0.1 - - [12/Jul/2025 12:25:49] "GET / HTTP/1.1" 200 -
2025-07-12 12:27:37,818 - INFO - 127.0.0.1 - - [12/Jul/2025 12:27:37] "GET /loanbook HTTP/1.1" 200 -
2025-07-12 12:28:01,880 - INFO - 127.0.0.1 - - [12/Jul/2025 12:28:01] "GET /loan/124000023/statement HTTP/1.1" 200 -
2025-07-12 12:28:16,718 - INFO - 127.0.0.1 - - [12/Jul/2025 12:28:16] "GET /loanbook HTTP/1.1" 200 -
[2025-07-12 12:28:18,263] INFO in app: Found 28 loans for customer 202506000001
2025-07-12 12:28:18,263 - INFO - Found 28 loans for customer 202506000001
[2025-07-12 12:28:18,265] INFO in app: Customer ID: 1
2025-07-12 12:28:18,265 - INFO - Customer ID: 1
[2025-07-12 12:28:18,268] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active')]
2025-07-12 12:28:18,268 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active')]
2025-07-12 12:28:18,389 - INFO - 127.0.0.1 - - [12/Jul/2025 12:28:18] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-12 12:28:20,639] INFO in app: Found 28 loans for customer 202506000001
2025-07-12 12:28:20,639 - INFO - Found 28 loans for customer 202506000001
[2025-07-12 12:28:20,643] INFO in app: Customer ID: 1
2025-07-12 12:28:20,643 - INFO - Customer ID: 1
[2025-07-12 12:28:20,648] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active')]
2025-07-12 12:28:20,648 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active')]
2025-07-12 12:28:20,716 - INFO - 127.0.0.1 - - [12/Jul/2025 12:28:20] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-07-12 12:28:44,334] INFO in app: Found 28 loans for customer 202506000001
2025-07-12 12:28:44,334 - INFO - Found 28 loans for customer 202506000001
[2025-07-12 12:28:44,342] INFO in app: Customer ID: 1
2025-07-12 12:28:44,342 - INFO - Customer ID: 1
[2025-07-12 12:28:44,346] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active')]
2025-07-12 12:28:44,346 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active')]
2025-07-12 12:28:44,415 - INFO - 127.0.0.1 - - [12/Jul/2025 12:28:44] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-12 12:29:00,540 - INFO - 127.0.0.1 - - [12/Jul/2025 12:29:00] "GET /loan/124000023/statement HTTP/1.1" 200 -
2025-07-12 12:29:04,138 - INFO - 127.0.0.1 - - [12/Jul/2025 12:29:04] "GET /loanbook HTTP/1.1" 200 -
[2025-07-12 12:29:05,925] INFO in app: Found 28 loans for customer 202506000001
2025-07-12 12:29:05,925 - INFO - Found 28 loans for customer 202506000001
[2025-07-12 12:29:05,931] INFO in app: Customer ID: 1
2025-07-12 12:29:05,931 - INFO - Customer ID: 1
[2025-07-12 12:29:05,937] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active')]
2025-07-12 12:29:05,937 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active')]
2025-07-12 12:29:05,999 - INFO - 127.0.0.1 - - [12/Jul/2025 12:29:05] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-12 12:29:07,106] INFO in app: Found 28 loans for customer 202506000001
2025-07-12 12:29:07,106 - INFO - Found 28 loans for customer 202506000001
[2025-07-12 12:29:07,116] INFO in app: Customer ID: 1
2025-07-12 12:29:07,116 - INFO - Customer ID: 1
[2025-07-12 12:29:07,119] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active')]
2025-07-12 12:29:07,119 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'active'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active')]
2025-07-12 12:29:07,180 - INFO - 127.0.0.1 - - [12/Jul/2025 12:29:07] "GET /customer/202506000001/account?section=topup HTTP/1.1" 200 -
[2025-07-12 12:30:10,565] INFO in app: [TOPUP] Submit route hit for loan 23
2025-07-12 12:30:10,565 - INFO - [TOPUP] Submit route hit for loan 23
2025-07-12 12:30:10,595 - DEBUG - [DEBUG] Base loan #124000023 → Top-up balance: 3698106.43, Interest: 342606.43
[2025-07-12 12:30:10,651] INFO in app: [124000023] Schedule 709 updated → fees=28000.0, interest=117442.5, principal=91513.98
2025-07-12 12:30:10,651 - INFO - [124000023] Schedule 709 updated → fees=28000.0, interest=117442.5, principal=91513.98
[2025-07-12 12:30:10,653] INFO in app: [124000023] Schedule 710 updated → fees=28000.0, interest=114239.51, principal=94716.97
2025-07-12 12:30:10,653 - INFO - [124000023] Schedule 710 updated → fees=28000.0, interest=114239.51, principal=94716.97
[2025-07-12 12:30:10,657] INFO in app: [124000023] Schedule 711 updated → fees=28000.0, interest=110924.42, principal=98032.07
2025-07-12 12:30:10,657 - INFO - [124000023] Schedule 711 updated → fees=28000.0, interest=110924.42, principal=98032.07
[2025-07-12 12:30:10,662] INFO in app: [124000023] Schedule 712 updated → fees=28000.0, interest=107493.29, principal=101463.19
2025-07-12 12:30:10,662 - INFO - [124000023] Schedule 712 updated → fees=28000.0, interest=107493.29, principal=101463.19
[2025-07-12 12:30:10,664] INFO in app: [124000023] Schedule 713 updated → fees=28000.0, interest=103942.08, principal=105014.4
2025-07-12 12:30:10,664 - INFO - [124000023] Schedule 713 updated → fees=28000.0, interest=103942.08, principal=105014.4
[2025-07-12 12:30:10,665] INFO in app: [124000023] Schedule 714 updated → fees=28000.0, interest=100266.58, principal=108689.9
2025-07-12 12:30:10,665 - INFO - [124000023] Schedule 714 updated → fees=28000.0, interest=100266.58, principal=108689.9
[2025-07-12 12:30:10,669] INFO in app: [124000023] Schedule 715 updated → fees=28000.0, interest=96462.43, principal=112494.05
2025-07-12 12:30:10,669 - INFO - [124000023] Schedule 715 updated → fees=28000.0, interest=96462.43, principal=112494.05
[2025-07-12 12:30:10,672] INFO in app: [124000023] Schedule 716 updated → fees=28000.0, interest=92525.14, principal=116431.34
2025-07-12 12:30:10,672 - INFO - [124000023] Schedule 716 updated → fees=28000.0, interest=92525.14, principal=116431.34
[2025-07-12 12:30:10,779] INFO in app: [124000023] Schedule 717 updated → fees=28000.0, interest=88450.04, principal=120506.44
2025-07-12 12:30:10,779 - INFO - [124000023] Schedule 717 updated → fees=28000.0, interest=88450.04, principal=120506.44
[2025-07-12 12:30:10,783] INFO in app: [124000023] Schedule 718 updated → fees=28000.0, interest=84232.32, principal=124724.16
2025-07-12 12:30:10,783 - INFO - [124000023] Schedule 718 updated → fees=28000.0, interest=84232.32, principal=124724.16
[2025-07-12 12:30:10,785] INFO in app: [124000023] Schedule 719 updated → fees=28000.0, interest=79866.97, principal=129089.51
2025-07-12 12:30:10,785 - INFO - [124000023] Schedule 719 updated → fees=28000.0, interest=79866.97, principal=129089.51
[2025-07-12 12:30:10,799] INFO in app: [124000023] Schedule 720 updated → fees=28000.0, interest=75348.84, principal=133607.64
2025-07-12 12:30:10,799 - INFO - [124000023] Schedule 720 updated → fees=28000.0, interest=75348.84, principal=133607.64
[2025-07-12 12:30:10,809] INFO in app: [124000023] Schedule 721 updated → fees=28000.0, interest=70672.57, principal=138283.91
2025-07-12 12:30:10,809 - INFO - [124000023] Schedule 721 updated → fees=28000.0, interest=70672.57, principal=138283.91
[2025-07-12 12:30:10,813] INFO in app: [124000023] Schedule 722 updated → fees=28000.0, interest=65832.64, principal=143123.85
2025-07-12 12:30:10,813 - INFO - [124000023] Schedule 722 updated → fees=28000.0, interest=65832.64, principal=143123.85
[2025-07-12 12:30:10,816] INFO in app: [124000023] Schedule 723 updated → fees=28000.0, interest=60823.3, principal=148133.18
2025-07-12 12:30:10,816 - INFO - [124000023] Schedule 723 updated → fees=28000.0, interest=60823.3, principal=148133.18
[2025-07-12 12:30:10,821] INFO in app: [124000023] Schedule 724 updated → fees=28000.0, interest=55638.64, principal=60120.57000000031
2025-07-12 12:30:10,821 - INFO - [124000023] Schedule 724 updated → fees=28000.0, interest=55638.64, principal=60120.57000000031
[2025-07-12 12:30:10,844] INFO in app: [124000023] Recalculated: capitalized=3355500.0, paid_principal=1825945.1600000004, current_balance=1529554.84
2025-07-12 12:30:10,844 - INFO - [124000023] Recalculated: capitalized=3355500.0, paid_principal=1825945.1600000004, current_balance=1529554.84
[2025-07-12 12:30:10,851] INFO in app: [124000023] Payment of 3698106.43 allocated. Remaining: 0.0
2025-07-12 12:30:10,851 - INFO - [124000023] Payment of 3698106.43 allocated. Remaining: 0.0
[2025-07-12 12:30:10,857] INFO in app: [124000023] Recalculated: capitalized=3355500.0, paid_principal=1825945.1600000004, current_balance=1529554.84
2025-07-12 12:30:10,857 - INFO - [124000023] Recalculated: capitalized=3355500.0, paid_principal=1825945.1600000004, current_balance=1529554.84
2025-07-12 12:30:10,884 - INFO - 127.0.0.1 - - [12/Jul/2025 12:30:10] "[32mPOST /topup/23 HTTP/1.1[0m" 302 -
[2025-07-12 12:30:10,900] INFO in app: Found 29 loans for customer 202506000001
2025-07-12 12:30:10,900 - INFO - Found 29 loans for customer 202506000001
[2025-07-12 12:30:10,902] INFO in app: Customer ID: 1
2025-07-12 12:30:10,902 - INFO - Customer ID: 1
[2025-07-12 12:30:10,904] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'application')]
2025-07-12 12:30:10,904 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'application')]
2025-07-12 12:30:10,949 - INFO - 127.0.0.1 - - [12/Jul/2025 12:30:10] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-12 12:30:15,957 - INFO - 127.0.0.1 - - [12/Jul/2025 12:30:15] "GET /loans HTTP/1.1" 200 -
2025-07-12 12:30:21,069 - INFO - 127.0.0.1 - - [12/Jul/2025 12:30:21] "[32mPOST /process_loan/29/approve HTTP/1.1[0m" 302 -
2025-07-12 12:30:21,453 - INFO - 127.0.0.1 - - [12/Jul/2025 12:30:21] "GET /loans HTTP/1.1" 200 -
2025-07-12 12:30:24,027 - INFO - 127.0.0.1 - - [12/Jul/2025 12:30:24] "GET /loanbook HTTP/1.1" 200 -
2025-07-12 12:30:35,619 - INFO - 127.0.0.1 - - [12/Jul/2025 12:30:35] "GET /loan/124000023/statement HTTP/1.1" 200 -
2025-07-12 12:30:45,702 - INFO - 127.0.0.1 - - [12/Jul/2025 12:30:45] "GET /payment/26/edit HTTP/1.1" 200 -
2025-07-12 12:31:04,209 - INFO - 127.0.0.1 - - [12/Jul/2025 12:31:04] "GET /loan/124000023/statement HTTP/1.1" 200 -
2025-07-12 12:33:23,560 - INFO - 127.0.0.1 - - [12/Jul/2025 12:33:23] "GET /loanbook HTTP/1.1" 200 -
[2025-07-12 13:21:53,703] INFO in app: ==================================================
[2025-07-12 13:21:53,710] INFO in app: Application logging initialized successfully
[2025-07-12 13:21:53,713] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-12 13:21:53,716] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-12 13:21:53,723] INFO in app: System encoding: utf-8
[2025-07-12 13:21:53,725] INFO in app: ==================================================
2025-07-12 13:21:53,950 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-12 13:21:53,950 - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 13:21:58,689 - INFO - 127.0.0.1 - - [12/Jul/2025 13:21:58] "GET /loanbook HTTP/1.1" 200 -
2025-07-12 13:21:59,960 - INFO - 127.0.0.1 - - [12/Jul/2025 13:21:59] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-12 13:22:02,425] ERROR in app: Exception on /income_report [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 465, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 4964, in income_report
    return render_template(
        'income_report.html',
    ...<5 lines>...
        categories=categories
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\income_report.html", line 53, in template
    <td class="text-end">{{ report[category]['origination'] | format_currency }}</td>
    
jinja2.exceptions.TemplateAssertionError: No filter named 'format_currency'.
2025-07-12 13:22:02,425 - ERROR - Exception on /income_report [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 465, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 4964, in income_report
    return render_template(
        'income_report.html',
    ...<5 lines>...
        categories=categories
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\income_report.html", line 53, in template
    <td class="text-end">{{ report[category]['origination'] | format_currency }}</td>
    
jinja2.exceptions.TemplateAssertionError: No filter named 'format_currency'.
2025-07-12 13:22:02,467 - INFO - 127.0.0.1 - - [12/Jul/2025 13:22:02] "[35m[1mGET /income_report HTTP/1.1[0m" 500 -
[2025-07-12 15:54:15,526] INFO in app: ==================================================
[2025-07-12 15:54:15,611] INFO in app: Application logging initialized successfully
[2025-07-12 15:54:15,612] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-12 15:54:15,614] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-12 15:54:15,615] INFO in app: System encoding: utf-8
[2025-07-12 15:54:15,617] INFO in app: ==================================================
2025-07-12 15:54:15,989 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-12 15:54:15,989 - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 15:54:20,673 - INFO - 127.0.0.1 - - [12/Jul/2025 15:54:20] "GET /loanbook HTTP/1.1" 200 -
2025-07-12 15:54:21,829 - INFO - 127.0.0.1 - - [12/Jul/2025 15:54:21] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-12 15:54:23,979] ERROR in app: Exception on /income_report [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 474, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 4973, in income_report
    return render_template(
        'income_report.html',
    ...<5 lines>...
        categories=categories
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\income_report.html", line 53, in template
    <td class="text-end">{{ report[category]['origination'] | format_currency }}</td>
    
jinja2.exceptions.TemplateAssertionError: No filter named 'format_currency'.
2025-07-12 15:54:23,979 - ERROR - Exception on /income_report [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 474, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 4973, in income_report
    return render_template(
        'income_report.html',
    ...<5 lines>...
        categories=categories
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\income_report.html", line 53, in template
    <td class="text-end">{{ report[category]['origination'] | format_currency }}</td>
    
jinja2.exceptions.TemplateAssertionError: No filter named 'format_currency'.
2025-07-12 15:54:24,010 - INFO - 127.0.0.1 - - [12/Jul/2025 15:54:24] "[35m[1mGET /income_report HTTP/1.1[0m" 500 -
[2025-07-12 15:59:07,056] INFO in app: ==================================================
[2025-07-12 15:59:07,063] INFO in app: Application logging initialized successfully
[2025-07-12 15:59:07,066] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-12 15:59:07,069] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-12 15:59:07,072] INFO in app: System encoding: utf-8
[2025-07-12 15:59:07,076] INFO in app: ==================================================
2025-07-12 15:59:07,275 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-12 15:59:07,276 - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 15:59:13,293 - INFO - 127.0.0.1 - - [12/Jul/2025 15:59:13] "GET /income_report HTTP/1.1" 200 -
2025-07-12 15:59:15,592 - INFO - 127.0.0.1 - - [12/Jul/2025 15:59:15] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-12 15:59:17,375 - INFO - 127.0.0.1 - - [12/Jul/2025 15:59:17] "GET /payments HTTP/1.1" 200 -
2025-07-12 15:59:19,794 - INFO - 127.0.0.1 - - [12/Jul/2025 15:59:19] "GET /income_report HTTP/1.1" 200 -
2025-07-12 16:00:22,630 - INFO - 127.0.0.1 - - [12/Jul/2025 16:00:22] "POST /income_report HTTP/1.1" 200 -
2025-07-12 16:00:57,569 - INFO - 127.0.0.1 - - [12/Jul/2025 16:00:57] "POST /income_report HTTP/1.1" 200 -
2025-07-12 16:01:14,711 - INFO - 127.0.0.1 - - [12/Jul/2025 16:01:14] "GET /loanbook HTTP/1.1" 200 -
2025-07-12 16:01:19,489 - INFO - 127.0.0.1 - - [12/Jul/2025 16:01:19] "GET /loan/112000003/statement HTTP/1.1" 200 -
2025-07-12 16:01:26,123 - INFO - 127.0.0.1 - - [12/Jul/2025 16:01:26] "GET /loanbook HTTP/1.1" 200 -
[2025-07-12 16:01:27,540] INFO in app: Found 29 loans for customer 202506000001
2025-07-12 16:01:27,540 - INFO - Found 29 loans for customer 202506000001
[2025-07-12 16:01:27,543] INFO in app: Customer ID: 1
2025-07-12 16:01:27,543 - INFO - Customer ID: 1
[2025-07-12 16:01:27,547] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active')]
2025-07-12 16:01:27,547 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active')]
2025-07-12 16:01:27,671 - INFO - 127.0.0.1 - - [12/Jul/2025 16:01:27] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-12 16:01:30,208] INFO in app: Found 29 loans for customer 202506000001
2025-07-12 16:01:30,208 - INFO - Found 29 loans for customer 202506000001
[2025-07-12 16:01:30,211] INFO in app: Customer ID: 1
2025-07-12 16:01:30,211 - INFO - Customer ID: 1
[2025-07-12 16:01:30,215] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active')]
2025-07-12 16:01:30,215 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active')]
2025-07-12 16:01:30,265 - INFO - 127.0.0.1 - - [12/Jul/2025 16:01:30] "GET /customer/202506000001/account?section=additional HTTP/1.1" 200 -
2025-07-12 16:01:56,138 - INFO - 127.0.0.1 - - [12/Jul/2025 16:01:56] "[32mPOST /apply_additional/1 HTTP/1.1[0m" 302 -
[2025-07-12 16:01:56,379] INFO in app: Found 30 loans for customer 202506000001
2025-07-12 16:01:56,379 - INFO - Found 30 loans for customer 202506000001
[2025-07-12 16:01:56,382] INFO in app: Customer ID: 1
2025-07-12 16:01:56,382 - INFO - Customer ID: 1
[2025-07-12 16:01:56,385] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active')]
2025-07-12 16:01:56,385 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active')]
2025-07-12 16:01:56,439 - INFO - 127.0.0.1 - - [12/Jul/2025 16:01:56] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-12 16:01:58,605 - INFO - 127.0.0.1 - - [12/Jul/2025 16:01:58] "GET /loanbook HTTP/1.1" 200 -
2025-07-12 16:02:00,905 - INFO - 127.0.0.1 - - [12/Jul/2025 16:02:00] "GET /loans HTTP/1.1" 200 -
2025-07-12 16:02:04,226 - INFO - 127.0.0.1 - - [12/Jul/2025 16:02:04] "[32mPOST /process_loan/30/approve HTTP/1.1[0m" 302 -
2025-07-12 16:02:04,602 - INFO - 127.0.0.1 - - [12/Jul/2025 16:02:04] "GET /loans HTTP/1.1" 200 -
2025-07-12 16:02:11,919 - INFO - 127.0.0.1 - - [12/Jul/2025 16:02:11] "GET /income_report HTTP/1.1" 200 -
2025-07-12 16:02:18,454 - INFO - 127.0.0.1 - - [12/Jul/2025 16:02:18] "POST /income_report HTTP/1.1" 200 -
2025-07-12 16:02:34,953 - INFO - 127.0.0.1 - - [12/Jul/2025 16:02:34] "POST /income_report HTTP/1.1" 200 -
2025-07-12 16:02:42,960 - INFO - 127.0.0.1 - - [12/Jul/2025 16:02:42] "POST /income_report HTTP/1.1" 200 -
2025-07-12 16:02:44,672 - INFO - 127.0.0.1 - - [12/Jul/2025 16:02:44] "POST /income_report HTTP/1.1" 200 -
2025-07-12 16:02:50,216 - INFO - 127.0.0.1 - - [12/Jul/2025 16:02:50] "GET /loanbook HTTP/1.1" 200 -
2025-07-12 16:03:24,347 - INFO - 127.0.0.1 - - [12/Jul/2025 16:03:24] "GET /income_report HTTP/1.1" 200 -
2025-07-12 16:03:39,743 - INFO - 127.0.0.1 - - [12/Jul/2025 16:03:39] "POST /income_report HTTP/1.1" 200 -
2025-07-12 16:06:13,560 - INFO - 127.0.0.1 - - [12/Jul/2025 16:06:13] "GET /loans HTTP/1.1" 200 -
2025-07-12 16:06:31,720 - INFO - 127.0.0.1 - - [12/Jul/2025 16:06:31] "GET /income_report HTTP/1.1" 200 -
2025-07-12 16:06:49,864 - INFO - 127.0.0.1 - - [12/Jul/2025 16:06:49] "POST /income_report HTTP/1.1" 200 -
[2025-07-12 16:12:02,667] INFO in app: ==================================================
[2025-07-12 16:12:02,684] INFO in app: Application logging initialized successfully
[2025-07-12 16:12:02,688] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-12 16:12:02,695] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-12 16:12:02,698] INFO in app: System encoding: utf-8
[2025-07-12 16:12:02,700] INFO in app: ==================================================
2025-07-12 16:12:02,954 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-12 16:12:02,954 - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 16:13:35,323 - INFO - 127.0.0.1 - - [12/Jul/2025 16:13:35] "POST /income_report HTTP/1.1" 200 -
2025-07-12 16:13:36,694 - INFO - 127.0.0.1 - - [12/Jul/2025 16:13:36] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-12 16:13:43,739] INFO in app: ==================================================
[2025-07-12 16:13:43,745] INFO in app: Application logging initialized successfully
[2025-07-12 16:13:43,747] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-12 16:13:43,749] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-12 16:13:43,751] INFO in app: System encoding: utf-8
[2025-07-12 16:13:43,752] INFO in app: ==================================================
2025-07-12 16:13:43,952 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-12 16:13:43,952 - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 16:13:51,382 - INFO - 127.0.0.1 - - [12/Jul/2025 16:13:51] "POST /income_report HTTP/1.1" 200 -
2025-07-12 16:13:52,127 - INFO - 127.0.0.1 - - [12/Jul/2025 16:13:52] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-12 16:13:53,111 - INFO - 127.0.0.1 - - [12/Jul/2025 16:13:53] "POST /income_report HTTP/1.1" 200 -
2025-07-12 16:14:16,199 - INFO - 127.0.0.1 - - [12/Jul/2025 16:14:16] "POST /income_report HTTP/1.1" 200 -
2025-07-12 16:14:23,100 - INFO - 127.0.0.1 - - [12/Jul/2025 16:14:23] "GET / HTTP/1.1" 200 -
2025-07-12 16:14:24,447 - INFO - 127.0.0.1 - - [12/Jul/2025 16:14:24] "GET /income_report HTTP/1.1" 200 -
2025-07-12 16:14:32,218 - INFO - 127.0.0.1 - - [12/Jul/2025 16:14:32] "POST /income_report HTTP/1.1" 200 -
2025-07-12 16:14:33,764 - INFO - 127.0.0.1 - - [12/Jul/2025 16:14:33] "POST /income_report HTTP/1.1" 200 -
2025-07-12 16:14:34,155 - INFO - 127.0.0.1 - - [12/Jul/2025 16:14:34] "POST /income_report HTTP/1.1" 200 -
2025-07-12 16:14:34,386 - INFO - 127.0.0.1 - - [12/Jul/2025 16:14:34] "POST /income_report HTTP/1.1" 200 -
[2025-07-12 16:28:11,770] INFO in app: ==================================================
[2025-07-12 16:28:11,778] INFO in app: Application logging initialized successfully
[2025-07-12 16:28:11,782] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-12 16:28:11,784] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-12 16:28:11,787] INFO in app: System encoding: utf-8
[2025-07-12 16:28:11,790] INFO in app: ==================================================
2025-07-12 16:28:12,008 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-12 16:28:12,009 - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 16:28:18,079 - INFO - 127.0.0.1 - - [12/Jul/2025 16:28:18] "POST /income_report HTTP/1.1" 200 -
2025-07-12 16:28:20,302 - INFO - 127.0.0.1 - - [12/Jul/2025 16:28:20] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-12 16:28:31,580 - INFO - 127.0.0.1 - - [12/Jul/2025 16:28:31] "POST /income_report HTTP/1.1" 200 -
2025-07-12 16:28:33,831 - INFO - 127.0.0.1 - - [12/Jul/2025 16:28:33] "GET /loanbook HTTP/1.1" 200 -
[2025-07-12 16:28:35,098] INFO in app: Found 30 loans for customer 202506000001
2025-07-12 16:28:35,098 - INFO - Found 30 loans for customer 202506000001
[2025-07-12 16:28:35,100] INFO in app: Customer ID: 1
2025-07-12 16:28:35,100 - INFO - Customer ID: 1
[2025-07-12 16:28:35,105] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active')]
2025-07-12 16:28:35,105 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active')]
2025-07-12 16:28:35,214 - INFO - 127.0.0.1 - - [12/Jul/2025 16:28:35] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-12 16:28:36,387] INFO in app: Found 30 loans for customer 202506000001
2025-07-12 16:28:36,387 - INFO - Found 30 loans for customer 202506000001
[2025-07-12 16:28:36,393] INFO in app: Customer ID: 1
2025-07-12 16:28:36,393 - INFO - Customer ID: 1
[2025-07-12 16:28:36,395] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active')]
2025-07-12 16:28:36,395 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active')]
2025-07-12 16:28:36,443 - INFO - 127.0.0.1 - - [12/Jul/2025 16:28:36] "GET /customer/202506000001/account?section=additional HTTP/1.1" 200 -
2025-07-12 16:28:56,539 - INFO - 127.0.0.1 - - [12/Jul/2025 16:28:56] "[31m[1mPOST /apply_additional/1 HTTP/1.1[0m" 413 -
2025-07-12 16:29:09,737 - INFO - 127.0.0.1 - - [12/Jul/2025 16:29:09] "[32mPOST /apply_additional/1 HTTP/1.1[0m" 302 -
[2025-07-12 16:29:09,750] INFO in app: Found 31 loans for customer 202506000001
2025-07-12 16:29:09,750 - INFO - Found 31 loans for customer 202506000001
[2025-07-12 16:29:09,752] INFO in app: Customer ID: 1
2025-07-12 16:29:09,752 - INFO - Customer ID: 1
[2025-07-12 16:29:09,754] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active'), ('112000031', 'active')]
2025-07-12 16:29:09,754 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active'), ('112000031', 'active')]
2025-07-12 16:29:09,801 - INFO - 127.0.0.1 - - [12/Jul/2025 16:29:09] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-12 16:29:11,817 - INFO - 127.0.0.1 - - [12/Jul/2025 16:29:11] "GET /loans HTTP/1.1" 200 -
2025-07-12 16:29:15,786 - INFO - 127.0.0.1 - - [12/Jul/2025 16:29:15] "[32mPOST /process_loan/31/approve HTTP/1.1[0m" 302 -
2025-07-12 16:29:15,842 - INFO - 127.0.0.1 - - [12/Jul/2025 16:29:15] "GET /loans HTTP/1.1" 200 -
2025-07-12 16:29:18,006 - INFO - 127.0.0.1 - - [12/Jul/2025 16:29:18] "GET /income_report HTTP/1.1" 200 -
2025-07-12 16:29:21,646 - INFO - 127.0.0.1 - - [12/Jul/2025 16:29:21] "GET /income_report HTTP/1.1" 200 -
2025-07-12 16:29:28,653 - INFO - 127.0.0.1 - - [12/Jul/2025 16:29:28] "POST /income_report HTTP/1.1" 200 -
[2025-07-12 16:32:02,158] INFO in app: [DISBURSEMENT] Loan #118000020 | Top-up of: 19 | Cash to Client: 1562933.55
2025-07-12 16:32:02,158 - INFO - [DISBURSEMENT] Loan #118000020 | Top-up of: 19 | Cash to Client: 1562933.55
[2025-07-12 16:32:02,160] INFO in app: [DISBURSEMENT] Loan #136000021 | Top-up of: 20 | Cash to Client: 6505005.95
2025-07-12 16:32:02,160 - INFO - [DISBURSEMENT] Loan #136000021 | Top-up of: 20 | Cash to Client: 6505005.95
[2025-07-12 16:32:02,163] INFO in app: [DISBURSEMENT] Loan #112000022 | Top-up of: None | Cash to Client: 1000000.0
2025-07-12 16:32:02,163 - INFO - [DISBURSEMENT] Loan #112000022 | Top-up of: None | Cash to Client: 1000000.0
[2025-07-12 16:32:02,167] INFO in app: [DISBURSEMENT] Loan #124000023 | Top-up of: 22 | Cash to Client: 1024657.21
2025-07-12 16:32:02,167 - INFO - [DISBURSEMENT] Loan #124000023 | Top-up of: 22 | Cash to Client: 1024657.21
[2025-07-12 16:32:02,170] INFO in app: [DISBURSEMENT] Loan #112000024 | Top-up of: None | Cash to Client: 200000.0
2025-07-12 16:32:02,170 - INFO - [DISBURSEMENT] Loan #112000024 | Top-up of: None | Cash to Client: 200000.0
[2025-07-12 16:32:02,175] INFO in app: [DISBURSEMENT] Loan #112000025 | Top-up of: 24 | Cash to Client: 202296.9
2025-07-12 16:32:02,175 - INFO - [DISBURSEMENT] Loan #112000025 | Top-up of: 24 | Cash to Client: 202296.9
[2025-07-12 16:32:02,178] INFO in app: [DISBURSEMENT] Loan #124000026 | Top-up of: None | Cash to Client: 500000.0
2025-07-12 16:32:02,178 - INFO - [DISBURSEMENT] Loan #124000026 | Top-up of: None | Cash to Client: 500000.0
[2025-07-12 16:32:02,181] INFO in app: [DISBURSEMENT] Loan #136000027 | Top-up of: 26 | Cash to Client: 157733.67
2025-07-12 16:32:02,181 - INFO - [DISBURSEMENT] Loan #136000027 | Top-up of: 26 | Cash to Client: 157733.67
[2025-07-12 16:32:02,190] INFO in app: [DISBURSEMENT] Loan #118000028 | Top-up of: 27 | Cash to Client: 664896.32
2025-07-12 16:32:02,190 - INFO - [DISBURSEMENT] Loan #118000028 | Top-up of: 27 | Cash to Client: 664896.32
[2025-07-12 16:32:02,193] INFO in app: [DISBURSEMENT] Loan #118000029 | Top-up of: 23 | Cash to Client: 1301893.57
2025-07-12 16:32:02,193 - INFO - [DISBURSEMENT] Loan #118000029 | Top-up of: 23 | Cash to Client: 1301893.57
[2025-07-12 16:32:02,195] INFO in app: [DISBURSEMENT] Loan #136000030 | Top-up of: None | Cash to Client: 1000000.0
2025-07-12 16:32:02,195 - INFO - [DISBURSEMENT] Loan #136000030 | Top-up of: None | Cash to Client: 1000000.0
[2025-07-12 16:32:02,201] INFO in app: [DISBURSEMENT] Loan #112000031 | Top-up of: None | Cash to Client: 1000000.0
2025-07-12 16:32:02,201 - INFO - [DISBURSEMENT] Loan #112000031 | Top-up of: None | Cash to Client: 1000000.0
2025-07-12 16:32:02,223 - INFO - 127.0.0.1 - - [12/Jul/2025 16:32:02] "GET /disbursements HTTP/1.1" 200 -
2025-07-12 16:32:15,003 - INFO - 127.0.0.1 - - [12/Jul/2025 16:32:15] "[32mPOST /disbursements HTTP/1.1[0m" 302 -
2025-07-12 16:32:15,012 - INFO - 127.0.0.1 - - [12/Jul/2025 16:32:15] "GET /disbursements HTTP/1.1" 200 -
2025-07-12 16:32:17,587 - INFO - 127.0.0.1 - - [12/Jul/2025 16:32:17] "GET /income_report HTTP/1.1" 200 -
2025-07-12 16:32:34,557 - INFO - 127.0.0.1 - - [12/Jul/2025 16:32:34] "POST /income_report HTTP/1.1" 200 -
2025-07-12 16:33:25,622 - INFO - 127.0.0.1 - - [12/Jul/2025 16:33:25] "POST /income_report HTTP/1.1" 200 -
2025-07-12 16:33:37,676 - INFO - 127.0.0.1 - - [12/Jul/2025 16:33:37] "POST /income_report HTTP/1.1" 200 -
2025-07-12 16:33:39,815 - INFO - 127.0.0.1 - - [12/Jul/2025 16:33:39] "POST /income_report HTTP/1.1" 200 -
2025-07-12 16:36:30,278 - INFO - 127.0.0.1 - - [12/Jul/2025 16:36:30] "GET /loans HTTP/1.1" 200 -
[2025-07-12 16:39:37,639] INFO in app: ==================================================
[2025-07-12 16:39:37,647] INFO in app: Application logging initialized successfully
[2025-07-12 16:39:37,650] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-12 16:39:37,652] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-12 16:39:37,654] INFO in app: System encoding: utf-8
[2025-07-12 16:39:37,657] INFO in app: ==================================================
2025-07-12 16:39:37,906 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-12 16:39:37,906 - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 16:39:43,961 - INFO - 127.0.0.1 - - [12/Jul/2025 16:39:43] "GET /loans HTTP/1.1" 200 -
2025-07-12 16:39:45,218 - INFO - 127.0.0.1 - - [12/Jul/2025 16:39:45] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-12 16:39:46,225] ERROR in app: Exception on /income_report [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 484, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 4983, in income_report
    one_time, recurring = _compute_income_db(start_date, end_date)
                          ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 4943, in _compute_income_db
    .filter(LoanApplication.date_approved >= start_dt,
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'LoanApplication' has no attribute 'date_approved'
2025-07-12 16:39:46,225 - ERROR - Exception on /income_report [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 484, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 4983, in income_report
    one_time, recurring = _compute_income_db(start_date, end_date)
                          ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 4943, in _compute_income_db
    .filter(LoanApplication.date_approved >= start_dt,
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'LoanApplication' has no attribute 'date_approved'
2025-07-12 16:39:46,240 - INFO - 127.0.0.1 - - [12/Jul/2025 16:39:46] "[35m[1mGET /income_report HTTP/1.1[0m" 500 -
[2025-07-12 16:41:54,377] INFO in app: ==================================================
[2025-07-12 16:41:54,387] INFO in app: Application logging initialized successfully
[2025-07-12 16:41:54,391] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-12 16:41:54,394] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-12 16:41:54,403] INFO in app: System encoding: utf-8
[2025-07-12 16:41:54,405] INFO in app: ==================================================
2025-07-12 16:41:54,626 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-12 16:41:54,626 - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 16:41:58,548 - INFO - 127.0.0.1 - - [12/Jul/2025 16:41:58] "GET /income_report HTTP/1.1" 200 -
2025-07-12 16:41:59,500 - INFO - 127.0.0.1 - - [12/Jul/2025 16:41:59] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-12 16:42:11,830 - INFO - 127.0.0.1 - - [12/Jul/2025 16:42:11] "POST /income_report HTTP/1.1" 200 -
2025-07-12 16:43:05,709 - INFO - 127.0.0.1 - - [12/Jul/2025 16:43:05] "POST /income_report HTTP/1.1" 200 -
2025-07-12 16:43:26,672 - INFO - 127.0.0.1 - - [12/Jul/2025 16:43:26] "POST /income_report HTTP/1.1" 200 -
2025-07-12 17:15:59,617 - INFO - 127.0.0.1 - - [12/Jul/2025 17:15:59] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-12 17:16:02,664 - INFO - 127.0.0.1 - - [12/Jul/2025 17:16:02] "GET /admin/pricing HTTP/1.1" 200 -
2025-07-12 17:16:20,057 - INFO - 127.0.0.1 - - [12/Jul/2025 17:16:20] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-12 17:16:30,862 - INFO - 127.0.0.1 - - [12/Jul/2025 17:16:30] "GET /loanbook HTTP/1.1" 200 -
[2025-07-12 17:44:56,559] INFO in app: ==================================================
[2025-07-12 17:44:56,567] INFO in app: Application logging initialized successfully
[2025-07-12 17:44:56,568] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-12 17:44:56,570] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-12 17:44:56,572] INFO in app: System encoding: utf-8
[2025-07-12 17:44:56,574] INFO in app: ==================================================
2025-07-12 17:44:56,774 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-12 17:44:56,775 - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 17:45:00,899 - INFO - 127.0.0.1 - - [12/Jul/2025 17:45:00] "GET /loanbook HTTP/1.1" 200 -
2025-07-12 17:45:02,161 - INFO - 127.0.0.1 - - [12/Jul/2025 17:45:02] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-12 17:45:03,579] ERROR in app: Exception on /admin/dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 2165, in admin_dashboard
    return render_template(
        'admin_dashboard.html',
    ...<6 lines>...
        terms=[]
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\admin_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 160, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\admin_dashboard.html", line 39, in block 'content'
    <a class="nav-link {% if section == 'batch_import' %}active{% endif %}" href="{{ url_for('batch_import_loans') }}">
    ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'batch_import_loans'. Did you mean 'batch_write_off' instead?
2025-07-12 17:45:03,579 - ERROR - Exception on /admin/dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 2165, in admin_dashboard
    return render_template(
        'admin_dashboard.html',
    ...<6 lines>...
        terms=[]
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\admin_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 160, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\admin_dashboard.html", line 39, in block 'content'
    <a class="nav-link {% if section == 'batch_import' %}active{% endif %}" href="{{ url_for('batch_import_loans') }}">
    ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'batch_import_loans'. Did you mean 'batch_write_off' instead?
2025-07-12 17:45:03,640 - INFO - 127.0.0.1 - - [12/Jul/2025 17:45:03] "[35m[1mGET /admin/dashboard HTTP/1.1[0m" 500 -
[2025-07-12 17:51:07,615] INFO in app: ==================================================
[2025-07-12 17:51:07,621] INFO in app: Application logging initialized successfully
[2025-07-12 17:51:07,625] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-12 17:51:07,627] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-12 17:51:07,629] INFO in app: System encoding: utf-8
[2025-07-12 17:51:07,631] INFO in app: ==================================================
2025-07-12 17:51:07,831 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-12 17:51:07,831 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-12 17:51:11,959] ERROR in app: Exception on /admin/dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 2165, in admin_dashboard
    return render_template(
        'admin_dashboard.html',
    ...<6 lines>...
        terms=[]
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\admin_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 160, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\admin_dashboard.html", line 39, in block 'content'
    <a class="nav-link {% if section == 'batch_import' %}active{% endif %}" href="{{ url_for('batch_import_loans') }}">
    ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'batch_import_loans'. Did you mean 'batch_write_off' instead?
2025-07-12 17:51:11,959 - ERROR - Exception on /admin/dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 2165, in admin_dashboard
    return render_template(
        'admin_dashboard.html',
    ...<6 lines>...
        terms=[]
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\admin_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 160, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\admin_dashboard.html", line 39, in block 'content'
    <a class="nav-link {% if section == 'batch_import' %}active{% endif %}" href="{{ url_for('batch_import_loans') }}">
    ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'batch_import_loans'. Did you mean 'batch_write_off' instead?
2025-07-12 17:51:11,982 - INFO - 127.0.0.1 - - [12/Jul/2025 17:51:11] "[35m[1mGET /admin/dashboard HTTP/1.1[0m" 500 -
2025-07-12 17:51:12,043 - INFO - 127.0.0.1 - - [12/Jul/2025 17:51:12] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-12 17:51:15,646 - INFO - 127.0.0.1 - - [12/Jul/2025 17:51:15] "GET /payments HTTP/1.1" 200 -
2025-07-12 17:51:16,814 - INFO - 127.0.0.1 - - [12/Jul/2025 17:51:16] "GET /income_report HTTP/1.1" 200 -
[2025-07-12 17:51:18,121] ERROR in app: Exception on /admin/dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 2165, in admin_dashboard
    return render_template(
        'admin_dashboard.html',
    ...<6 lines>...
        terms=[]
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\admin_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 160, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\admin_dashboard.html", line 39, in block 'content'
    <a class="nav-link {% if section == 'batch_import' %}active{% endif %}" href="{{ url_for('batch_import_loans') }}">
    ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'batch_import_loans'. Did you mean 'batch_write_off' instead?
2025-07-12 17:51:18,121 - ERROR - Exception on /admin/dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 2165, in admin_dashboard
    return render_template(
        'admin_dashboard.html',
    ...<6 lines>...
        terms=[]
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\admin_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 160, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\admin_dashboard.html", line 39, in block 'content'
    <a class="nav-link {% if section == 'batch_import' %}active{% endif %}" href="{{ url_for('batch_import_loans') }}">
    ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'batch_import_loans'. Did you mean 'batch_write_off' instead?
2025-07-12 17:51:18,152 - INFO - 127.0.0.1 - - [12/Jul/2025 17:51:18] "[35m[1mGET /admin/dashboard HTTP/1.1[0m" 500 -
[2025-07-12 17:51:53,671] INFO in app: ==================================================
[2025-07-12 17:51:53,678] INFO in app: Application logging initialized successfully
[2025-07-12 17:51:53,680] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-12 17:51:53,682] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-12 17:51:53,684] INFO in app: System encoding: utf-8
[2025-07-12 17:51:53,687] INFO in app: ==================================================
2025-07-12 17:51:53,911 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-12 17:51:53,911 - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 17:51:57,496 - INFO - 127.0.0.1 - - [12/Jul/2025 17:51:57] "GET /loanbook HTTP/1.1" 200 -
2025-07-12 17:52:00,119 - INFO - 127.0.0.1 - - [12/Jul/2025 17:52:00] "GET /income_report HTTP/1.1" 200 -
2025-07-12 17:52:08,273 - INFO - 127.0.0.1 - - [12/Jul/2025 17:52:08] "POST /income_report HTTP/1.1" 200 -
[2025-07-12 17:52:24,536] ERROR in app: Exception on /admin/dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 2165, in admin_dashboard
    return render_template(
        'admin_dashboard.html',
    ...<6 lines>...
        terms=[]
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\admin_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 160, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\admin_dashboard.html", line 39, in block 'content'
    <a class="nav-link {% if section == 'batch_import' %}active{% endif %}" href="{{ url_for('batch_import_loans') }}">
    ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'batch_import_loans'. Did you mean 'batch_write_off' instead?
2025-07-12 17:52:24,536 - ERROR - Exception on /admin/dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 2165, in admin_dashboard
    return render_template(
        'admin_dashboard.html',
    ...<6 lines>...
        terms=[]
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\admin_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 160, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\admin_dashboard.html", line 39, in block 'content'
    <a class="nav-link {% if section == 'batch_import' %}active{% endif %}" href="{{ url_for('batch_import_loans') }}">
    ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'batch_import_loans'. Did you mean 'batch_write_off' instead?
2025-07-12 17:52:24,566 - INFO - 127.0.0.1 - - [12/Jul/2025 17:52:24] "[35m[1mGET /admin/dashboard HTTP/1.1[0m" 500 -
[2025-07-12 18:04:40,996] INFO in app: ==================================================
[2025-07-12 18:04:41,003] INFO in app: Application logging initialized successfully
[2025-07-12 18:04:41,005] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-12 18:04:41,009] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-12 18:04:41,010] INFO in app: System encoding: utf-8
[2025-07-12 18:04:41,014] INFO in app: ==================================================
2025-07-12 18:04:41,239 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-12 18:04:41,240 - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 18:04:52,586 - INFO - 127.0.0.1 - - [12/Jul/2025 18:04:52] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-12 18:04:55,551 - INFO - 127.0.0.1 - - [12/Jul/2025 18:04:55] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-12 18:05:02,336 - INFO - 127.0.0.1 - - [12/Jul/2025 18:05:02] "GET /admin/batch_import_loans HTTP/1.1" 200 -
[2025-07-12 18:06:27,297] INFO in app: ==================================================
[2025-07-12 18:06:27,305] INFO in app: Application logging initialized successfully
[2025-07-12 18:06:27,307] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-12 18:06:27,310] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-12 18:06:27,312] INFO in app: System encoding: utf-8
[2025-07-12 18:06:27,315] INFO in app: ==================================================
2025-07-12 18:06:27,548 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-12 18:06:27,548 - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 18:06:30,950 - INFO - 127.0.0.1 - - [12/Jul/2025 18:06:30] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-12 18:06:32,076 - INFO - 127.0.0.1 - - [12/Jul/2025 18:06:32] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-12 18:06:52,996 - INFO - 127.0.0.1 - - [12/Jul/2025 18:06:52] "GET /admin/dashboard?section=cutoff_dates HTTP/1.1" 200 -
2025-07-12 18:06:55,704 - INFO - 127.0.0.1 - - [12/Jul/2025 18:06:55] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-12 18:07:25,367 - INFO - 127.0.0.1 - - [12/Jul/2025 18:07:25] "GET /admin/download_sample_csv HTTP/1.1" 200 -
2025-07-12 18:09:06,995 - INFO - 127.0.0.1 - - [12/Jul/2025 18:09:06] "GET /loanbook HTTP/1.1" 200 -
2025-07-12 18:09:34,837 - INFO - 127.0.0.1 - - [12/Jul/2025 18:09:34] "GET /loan/136000030/statement HTTP/1.1" 200 -
2025-07-12 18:09:47,343 - INFO - 127.0.0.1 - - [12/Jul/2025 18:09:47] "GET /loanbook HTTP/1.1" 200 -
[2025-07-12 18:10:41,787] INFO in app: Found 31 loans for customer 202506000001
2025-07-12 18:10:41,787 - INFO - Found 31 loans for customer 202506000001
[2025-07-12 18:10:41,807] INFO in app: Customer ID: 1
2025-07-12 18:10:41,807 - INFO - Customer ID: 1
[2025-07-12 18:10:41,811] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active'), ('112000031', 'active')]
2025-07-12 18:10:41,811 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active'), ('112000031', 'active')]
2025-07-12 18:10:42,011 - INFO - 127.0.0.1 - - [12/Jul/2025 18:10:42] "GET /customer/202506000001/account HTTP/1.1" 200 -
2025-07-12 18:11:07,541 - INFO - 127.0.0.1 - - [12/Jul/2025 18:11:07] "GET /income_report HTTP/1.1" 200 -
2025-07-12 18:11:08,516 - INFO - 127.0.0.1 - - [12/Jul/2025 18:11:08] "GET /loanbook HTTP/1.1" 200 -
2025-07-12 18:12:23,244 - INFO - 127.0.0.1 - - [12/Jul/2025 18:12:23] "GET /loan/112000031/statement HTTP/1.1" 200 -
2025-07-12 18:12:40,866 - INFO - 127.0.0.1 - - [12/Jul/2025 18:12:40] "GET /loanbook HTTP/1.1" 200 -
[2025-07-12 18:12:42,746] INFO in app: Found 31 loans for customer 202506000001
2025-07-12 18:12:42,746 - INFO - Found 31 loans for customer 202506000001
[2025-07-12 18:12:42,751] INFO in app: Customer ID: 1
2025-07-12 18:12:42,751 - INFO - Customer ID: 1
[2025-07-12 18:12:42,755] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active'), ('112000031', 'active')]
2025-07-12 18:12:42,755 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active'), ('112000031', 'active')]
2025-07-12 18:12:42,840 - INFO - 127.0.0.1 - - [12/Jul/2025 18:12:42] "GET /customer/202506000001/account HTTP/1.1" 200 -
2025-07-12 18:14:29,993 - INFO - 127.0.0.1 - - [12/Jul/2025 18:14:29] "GET /loanbook HTTP/1.1" 200 -
2025-07-12 18:15:26,997 - INFO - 127.0.0.1 - - [12/Jul/2025 18:15:26] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-12 18:15:29,994 - INFO - 127.0.0.1 - - [12/Jul/2025 18:15:29] "GET /admin/pricing HTTP/1.1" 200 -
2025-07-12 18:16:00,354 - INFO - 127.0.0.1 - - [12/Jul/2025 18:16:00] "GET /loanbook HTTP/1.1" 200 -
2025-07-12 18:16:37,682 - INFO - 127.0.0.1 - - [12/Jul/2025 18:16:37] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-12 18:16:40,648 - INFO - 127.0.0.1 - - [12/Jul/2025 18:16:40] "GET /admin/pricing HTTP/1.1" 200 -
2025-07-12 18:20:16,602 - INFO - 127.0.0.1 - - [12/Jul/2025 18:20:16] "[32mPOST /admin/pricing HTTP/1.1[0m" 302 -
2025-07-12 18:20:16,632 - INFO - 127.0.0.1 - - [12/Jul/2025 18:20:16] "GET /admin/pricing HTTP/1.1" 200 -
2025-07-12 18:21:00,452 - INFO - 127.0.0.1 - - [12/Jul/2025 18:21:00] "GET /loanbook HTTP/1.1" 200 -
2025-07-12 18:22:23,019 - INFO - 127.0.0.1 - - [12/Jul/2025 18:22:23] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-12 18:22:24,368 - INFO - 127.0.0.1 - - [12/Jul/2025 18:22:24] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-12 18:22:38,784 - INFO - 127.0.0.1 - - [12/Jul/2025 18:22:38] "[32mPOST /admin/batch_import_loans HTTP/1.1[0m" 302 -
2025-07-12 18:22:38,810 - INFO - 127.0.0.1 - - [12/Jul/2025 18:22:38] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-12 18:24:19,221 - INFO - 127.0.0.1 - - [12/Jul/2025 18:24:19] "[32mPOST /admin/batch_import_loans HTTP/1.1[0m" 302 -
2025-07-12 18:24:19,236 - INFO - 127.0.0.1 - - [12/Jul/2025 18:24:19] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-12 18:26:42,951 - INFO - 127.0.0.1 - - [12/Jul/2025 18:26:42] "GET /loanbook HTTP/1.1" 200 -
[2025-07-12 18:26:44,159] INFO in app: Found 31 loans for customer 202506000001
2025-07-12 18:26:44,159 - INFO - Found 31 loans for customer 202506000001
[2025-07-12 18:26:44,169] INFO in app: Customer ID: 1
2025-07-12 18:26:44,169 - INFO - Customer ID: 1
[2025-07-12 18:26:44,172] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active'), ('112000031', 'active')]
2025-07-12 18:26:44,172 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active'), ('112000031', 'active')]
2025-07-12 18:26:44,349 - INFO - 127.0.0.1 - - [12/Jul/2025 18:26:44] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-12 18:26:45,588] INFO in app: Found 31 loans for customer 202506000001
2025-07-12 18:26:45,588 - INFO - Found 31 loans for customer 202506000001
[2025-07-12 18:26:45,591] INFO in app: Customer ID: 1
2025-07-12 18:26:45,591 - INFO - Customer ID: 1
[2025-07-12 18:26:45,596] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active'), ('112000031', 'active')]
2025-07-12 18:26:45,596 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active'), ('112000031', 'active')]
2025-07-12 18:26:45,657 - INFO - 127.0.0.1 - - [12/Jul/2025 18:26:45] "GET /customer/202506000001/account?section=additional HTTP/1.1" 200 -
2025-07-12 18:27:13,159 - INFO - 127.0.0.1 - - [12/Jul/2025 18:27:13] "[32mPOST /apply_additional/1 HTTP/1.1[0m" 302 -
[2025-07-12 18:27:13,359] INFO in app: Found 32 loans for customer 202506000001
2025-07-12 18:27:13,359 - INFO - Found 32 loans for customer 202506000001
[2025-07-12 18:27:13,362] INFO in app: Customer ID: 1
2025-07-12 18:27:13,362 - INFO - Customer ID: 1
[2025-07-12 18:27:13,367] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active'), ('112000031', 'active'), ('112000032', 'active')]
2025-07-12 18:27:13,367 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active'), ('112000031', 'active'), ('112000032', 'active')]
2025-07-12 18:27:13,455 - INFO - 127.0.0.1 - - [12/Jul/2025 18:27:13] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-12 18:27:15,229 - INFO - 127.0.0.1 - - [12/Jul/2025 18:27:15] "GET /loans HTTP/1.1" 200 -
2025-07-12 18:27:18,644 - INFO - 127.0.0.1 - - [12/Jul/2025 18:27:18] "[32mPOST /process_loan/32/approve HTTP/1.1[0m" 302 -
2025-07-12 18:27:18,779 - INFO - 127.0.0.1 - - [12/Jul/2025 18:27:18] "GET /loans HTTP/1.1" 200 -
2025-07-12 18:27:21,264 - INFO - 127.0.0.1 - - [12/Jul/2025 18:27:21] "GET /loanbook HTTP/1.1" 200 -
[2025-07-12 18:30:33,459] INFO in app: ==================================================
[2025-07-12 18:30:33,479] INFO in app: Application logging initialized successfully
[2025-07-12 18:30:33,486] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-12 18:30:33,494] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-12 18:30:33,497] INFO in app: System encoding: utf-8
[2025-07-12 18:30:33,503] INFO in app: ==================================================
2025-07-12 18:30:33,814 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-12 18:30:33,814 - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 18:30:42,046 - INFO - 127.0.0.1 - - [12/Jul/2025 18:30:42] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-12 18:30:43,410 - INFO - 127.0.0.1 - - [12/Jul/2025 18:30:43] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-12 18:30:51,955 - INFO - 127.0.0.1 - - [12/Jul/2025 18:30:51] "[32mPOST /admin/batch_import_loans HTTP/1.1[0m" 302 -
2025-07-12 18:30:51,987 - INFO - 127.0.0.1 - - [12/Jul/2025 18:30:51] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-12 18:32:46,049 - INFO - 127.0.0.1 - - [12/Jul/2025 18:32:46] "GET /loanbook HTTP/1.1" 200 -
2025-07-12 18:32:55,017 - INFO - 127.0.0.1 - - [12/Jul/2025 18:32:55] "GET /loan/112000031/statement HTTP/1.1" 200 -
2025-07-12 18:33:05,752 - INFO - 127.0.0.1 - - [12/Jul/2025 18:33:05] "GET /income_report HTTP/1.1" 200 -
2025-07-12 18:33:08,328 - INFO - 127.0.0.1 - - [12/Jul/2025 18:33:08] "GET /loanbook HTTP/1.1" 200 -
[2025-07-12 18:33:17,984] INFO in app: Found 32 loans for customer 202506000001
2025-07-12 18:33:17,984 - INFO - Found 32 loans for customer 202506000001
[2025-07-12 18:33:17,999] INFO in app: Customer ID: 1
2025-07-12 18:33:17,999 - INFO - Customer ID: 1
[2025-07-12 18:33:18,003] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active'), ('112000031', 'active'), ('112000032', 'active')]
2025-07-12 18:33:18,003 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active'), ('112000031', 'active'), ('112000032', 'active')]
2025-07-12 18:33:18,237 - INFO - 127.0.0.1 - - [12/Jul/2025 18:33:18] "GET /customer/202506000001/account HTTP/1.1" 200 -
2025-07-12 18:33:54,353 - INFO - 127.0.0.1 - - [12/Jul/2025 18:33:54] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-12 18:33:56,462 - INFO - 127.0.0.1 - - [12/Jul/2025 18:33:56] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-12 18:34:02,826 - INFO - 127.0.0.1 - - [12/Jul/2025 18:34:02] "[32mPOST /admin/batch_import_loans HTTP/1.1[0m" 302 -
2025-07-12 18:34:03,123 - INFO - 127.0.0.1 - - [12/Jul/2025 18:34:03] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-12 18:37:41,480 - INFO - 127.0.0.1 - - [12/Jul/2025 18:37:41] "[32mPOST /admin/batch_import_loans HTTP/1.1[0m" 302 -
2025-07-12 18:37:41,490 - INFO - 127.0.0.1 - - [12/Jul/2025 18:37:41] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-12 18:38:36,968 - INFO - 127.0.0.1 - - [12/Jul/2025 18:38:36] "[32mPOST /admin/batch_import_loans HTTP/1.1[0m" 302 -
2025-07-12 18:38:37,257 - INFO - 127.0.0.1 - - [12/Jul/2025 18:38:37] "GET /admin/batch_import_loans HTTP/1.1" 200 -
[2025-07-12 18:43:29,492] INFO in app: ==================================================
[2025-07-12 18:43:29,501] INFO in app: Application logging initialized successfully
[2025-07-12 18:43:29,507] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-12 18:43:29,518] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-12 18:43:29,521] INFO in app: System encoding: utf-8
[2025-07-12 18:43:29,523] INFO in app: ==================================================
2025-07-12 18:43:29,845 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-12 18:43:29,845 - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 18:43:34,516 - INFO - 127.0.0.1 - - [12/Jul/2025 18:43:34] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-12 18:43:36,962 - INFO - 127.0.0.1 - - [12/Jul/2025 18:43:36] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-12 18:43:44,570 - INFO - 127.0.0.1 - - [12/Jul/2025 18:43:44] "[32mPOST /admin/batch_import_loans HTTP/1.1[0m" 302 -
2025-07-12 18:43:44,867 - INFO - 127.0.0.1 - - [12/Jul/2025 18:43:44] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-12 18:46:57,757 - INFO - 127.0.0.1 - - [12/Jul/2025 18:46:57] "GET /admin/download_sample_csv HTTP/1.1" 200 -
[2025-07-13 18:00:34,475] INFO in app: ==================================================
[2025-07-13 18:00:34,639] INFO in app: Application logging initialized successfully
[2025-07-13 18:00:34,642] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-13 18:00:34,644] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-13 18:00:34,646] INFO in app: System encoding: utf-8
[2025-07-13 18:00:34,659] INFO in app: ==================================================
2025-07-13 18:00:35,527 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-13 18:00:35,528 - INFO - [33mPress CTRL+C to quit[0m
2025-07-13 18:01:11,416 - INFO - 127.0.0.1 - - [13/Jul/2025 18:01:11] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-13 18:01:12,371 - INFO - 127.0.0.1 - - [13/Jul/2025 18:01:12] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-13 18:26:42,583 - INFO - 127.0.0.1 - - [13/Jul/2025 18:26:42] "[32mPOST /admin/batch_import_loans HTTP/1.1[0m" 302 -
2025-07-13 18:26:42,602 - INFO - 127.0.0.1 - - [13/Jul/2025 18:26:42] "GET /admin/batch_import_loans HTTP/1.1" 200 -
[2025-07-13 18:32:25,683] INFO in app: ==================================================
[2025-07-13 18:32:25,689] INFO in app: Application logging initialized successfully
[2025-07-13 18:32:25,691] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-13 18:32:25,693] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-13 18:32:25,696] INFO in app: System encoding: utf-8
[2025-07-13 18:32:25,698] INFO in app: ==================================================
2025-07-13 18:32:25,896 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-13 18:32:25,896 - INFO - [33mPress CTRL+C to quit[0m
2025-07-13 18:32:30,646 - INFO - 127.0.0.1 - - [13/Jul/2025 18:32:30] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-13 18:32:31,345 - INFO - 127.0.0.1 - - [13/Jul/2025 18:32:31] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-13 18:32:36,992 - INFO - 127.0.0.1 - - [13/Jul/2025 18:32:36] "[32mPOST /admin/batch_import_loans HTTP/1.1[0m" 302 -
2025-07-13 18:32:37,287 - INFO - 127.0.0.1 - - [13/Jul/2025 18:32:37] "GET /admin/batch_import_loans HTTP/1.1" 200 -
[2025-07-13 18:40:45,956] INFO in app: ==================================================
[2025-07-13 18:40:45,964] INFO in app: Application logging initialized successfully
[2025-07-13 18:40:45,971] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-13 18:40:45,974] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-13 18:40:45,980] INFO in app: System encoding: utf-8
[2025-07-13 18:40:45,982] INFO in app: ==================================================
2025-07-13 18:40:46,226 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-13 18:40:46,227 - INFO - [33mPress CTRL+C to quit[0m
2025-07-13 18:40:50,800 - INFO - 127.0.0.1 - - [13/Jul/2025 18:40:50] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-13 18:40:51,955 - INFO - 127.0.0.1 - - [13/Jul/2025 18:40:51] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-13 18:40:58,448] INFO in app: CSV headers: ['customer_id', 'loan_amount', 'term_months', 'created_at', 'category_code', 'category_label', 'loan_number', 'file_number', 'application_status', 'loan_state', 'performance_status', 'crb_fees', 'origination_fees', 'insurance_fees', 'collection_fees', 'cash_to_client', 'applied_interest_rate', 'applied_collection_fee']
2025-07-13 18:40:58,448 - INFO - CSV headers: ['customer_id', 'loan_amount', 'term_months', 'created_at', 'category_code', 'category_label', 'loan_number', 'file_number', 'application_status', 'loan_state', 'performance_status', 'crb_fees', 'origination_fees', 'insurance_fees', 'collection_fees', 'cash_to_client', 'applied_interest_rate', 'applied_collection_fee']
[2025-07-13 18:40:58,458] ERROR in app: Error in row 1: 'origination'
2025-07-13 18:40:58,458 - ERROR - Error in row 1: 'origination'
[2025-07-13 18:40:58,461] ERROR in app: Row data: {'customer_id': '31', 'loan_amount': '1000000', 'term_months': '12', 'created_at': '2025-04-29', 'category_code': '1', 'category_label': 'Civil Servant', 'loan_number': '112000031', 'file_number': '2.02506E+11', 'application_status': 'Approved', 'loan_state': 'Active', 'performance_status': 'Performing', 'crb_fees': '', 'origination_fees': '', 'insurance_fees': '', 'collection_fees': '', 'cash_to_client': '', 'applied_interest_rate': '', 'applied_collection_fee': ''}
2025-07-13 18:40:58,461 - ERROR - Row data: {'customer_id': '31', 'loan_amount': '1000000', 'term_months': '12', 'created_at': '2025-04-29', 'category_code': '1', 'category_label': 'Civil Servant', 'loan_number': '112000031', 'file_number': '2.02506E+11', 'application_status': 'Approved', 'loan_state': 'Active', 'performance_status': 'Performing', 'crb_fees': '', 'origination_fees': '', 'insurance_fees': '', 'collection_fees': '', 'cash_to_client': '', 'applied_interest_rate': '', 'applied_collection_fee': ''}
2025-07-13 18:40:58,466 - INFO - 127.0.0.1 - - [13/Jul/2025 18:40:58] "[32mPOST /admin/batch_import_loans HTTP/1.1[0m" 302 -
2025-07-13 18:40:58,756 - INFO - 127.0.0.1 - - [13/Jul/2025 18:40:58] "GET /admin/batch_import_loans HTTP/1.1" 200 -
[2025-07-13 18:49:24,201] INFO in app: ==================================================
[2025-07-13 18:49:24,208] INFO in app: Application logging initialized successfully
[2025-07-13 18:49:24,210] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-13 18:49:24,213] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-13 18:49:24,215] INFO in app: System encoding: utf-8
[2025-07-13 18:49:24,219] INFO in app: ==================================================
2025-07-13 18:49:24,403 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-13 18:49:24,403 - INFO - [33mPress CTRL+C to quit[0m
2025-07-13 18:49:30,405 - INFO - 127.0.0.1 - - [13/Jul/2025 18:49:30] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-13 18:49:31,236 - INFO - 127.0.0.1 - - [13/Jul/2025 18:49:31] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-13 18:49:37,588] INFO in app: CSV headers: ['customer_id', 'loan_amount', 'term_months', 'created_at', 'category_code', 'category_label', 'loan_number', 'file_number', 'application_status', 'loan_state', 'performance_status', 'crb_fees', 'origination_fees', 'insurance_fees', 'collection_fees', 'cash_to_client', 'applied_interest_rate', 'applied_collection_fee']
2025-07-13 18:49:37,588 - INFO - CSV headers: ['customer_id', 'loan_amount', 'term_months', 'created_at', 'category_code', 'category_label', 'loan_number', 'file_number', 'application_status', 'loan_state', 'performance_status', 'crb_fees', 'origination_fees', 'insurance_fees', 'collection_fees', 'cash_to_client', 'applied_interest_rate', 'applied_collection_fee']
[2025-07-13 18:49:37,600] ERROR in app: Error in row 1: 'origination'
2025-07-13 18:49:37,600 - ERROR - Error in row 1: 'origination'
[2025-07-13 18:49:37,604] ERROR in app: Row data: {'customer_id': '31', 'loan_amount': '1000000', 'term_months': '12', 'created_at': '4/29/2025', 'category_code': '1', 'category_label': 'Civil Servant', 'loan_number': '112000031', 'file_number': '', 'application_status': 'Approved', 'loan_state': 'Active', 'performance_status': 'Performing', 'crb_fees': '', 'origination_fees': '', 'insurance_fees': '', 'collection_fees': '', 'cash_to_client': '', 'applied_interest_rate': '', 'applied_collection_fee': ''}
2025-07-13 18:49:37,604 - ERROR - Row data: {'customer_id': '31', 'loan_amount': '1000000', 'term_months': '12', 'created_at': '4/29/2025', 'category_code': '1', 'category_label': 'Civil Servant', 'loan_number': '112000031', 'file_number': '', 'application_status': 'Approved', 'loan_state': 'Active', 'performance_status': 'Performing', 'crb_fees': '', 'origination_fees': '', 'insurance_fees': '', 'collection_fees': '', 'cash_to_client': '', 'applied_interest_rate': '', 'applied_collection_fee': ''}
[2025-07-13 18:49:37,615] ERROR in app: Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 5330, in batch_import_loans
    effective_rate=calculate_eir(loan_amount, term_months, {'rate': applied_interest_rate}),
                   ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3830, in calculate_eir
    fees = (principal * (config['origination'] + config['insurance'])) + config['crb']
                         ~~~~~~^^^^^^^^^^^^^^^
KeyError: 'origination'

2025-07-13 18:49:37,615 - ERROR - Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 5330, in batch_import_loans
    effective_rate=calculate_eir(loan_amount, term_months, {'rate': applied_interest_rate}),
                   ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3830, in calculate_eir
    fees = (principal * (config['origination'] + config['insurance'])) + config['crb']
                         ~~~~~~^^^^^^^^^^^^^^^
KeyError: 'origination'

2025-07-13 18:49:37,620 - INFO - 127.0.0.1 - - [13/Jul/2025 18:49:37] "[32mPOST /admin/batch_import_loans HTTP/1.1[0m" 302 -
2025-07-13 18:49:37,896 - INFO - 127.0.0.1 - - [13/Jul/2025 18:49:37] "GET /admin/batch_import_loans HTTP/1.1" 200 -
[2025-07-13 19:06:24,231] INFO in app: ==================================================
[2025-07-13 19:06:24,239] INFO in app: Application logging initialized successfully
[2025-07-13 19:06:24,243] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-13 19:06:24,247] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-13 19:06:24,252] INFO in app: System encoding: utf-8
[2025-07-13 19:06:24,256] INFO in app: ==================================================
2025-07-13 19:06:24,492 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-13 19:06:24,493 - INFO - [33mPress CTRL+C to quit[0m
2025-07-13 19:06:28,211 - INFO - 127.0.0.1 - - [13/Jul/2025 19:06:28] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-13 19:06:28,896 - INFO - 127.0.0.1 - - [13/Jul/2025 19:06:28] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-13 19:06:33,596] INFO in app: CSV headers: ['customer_id', 'loan_amount', 'term_months', 'created_at', 'category_code', 'category_label', 'loan_number', 'file_number', 'application_status', 'loan_state', 'performance_status', 'crb_fees', 'origination_fees', 'insurance_fees', 'collection_fees', 'cash_to_client', 'applied_interest_rate', 'applied_collection_fee']
2025-07-13 19:06:33,596 - INFO - CSV headers: ['customer_id', 'loan_amount', 'term_months', 'created_at', 'category_code', 'category_label', 'loan_number', 'file_number', 'application_status', 'loan_state', 'performance_status', 'crb_fees', 'origination_fees', 'insurance_fees', 'collection_fees', 'cash_to_client', 'applied_interest_rate', 'applied_collection_fee']
[2025-07-13 19:06:33,642] ERROR in app: Error in row 1: (sqlite3.IntegrityError) UNIQUE constraint failed: loan_applications.loan_number
[SQL: INSERT INTO loan_applications (customer_id, loan_amount, status, created_at, term_months, monthly_instalment, total_repayment, effective_rate, category, loan_category, disbursed, disbursed_bank, crb_fees, origination_fees, insurance_fees, total_fees, collection_fees, schedule_id, loan_number, file_number, date_created, disbursement_date, cash_to_client, top_up_interest, settlement_interest, closure_type, closure_date, top_up_of, application_status, loan_state, performance_status, top_up_balance, settlement_balance, current_balance, settlement_type, settling_institution, settlement_reason, vote_id, outstanding_fees, pricing_version, applied_interest_rate, applied_collection_fee, written_off_amount, insurance_settlement_amount, parent_loan_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (31, 1000000.0, 'pending', '2025-04-29 00:00:00.000000', 12, 83333.33, 1000000.0, 0.0, 'Civil Servant', 1, 0, None, 0.0, 0.0, 0.0, None, 0.0, None, '112000031', '', '2025-04-29 00:00:00.000000', '2025-04-29', 1000000.0, 0.0, 0.0, None, None, None, 'Approved', 'Active', 'Performing', 0.0, 0.0, 0.0, None, None, None, None, 0.0, 1, 0.0, 0.0, 0.0, 0.0, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-13 19:06:33,642 - ERROR - Error in row 1: (sqlite3.IntegrityError) UNIQUE constraint failed: loan_applications.loan_number
[SQL: INSERT INTO loan_applications (customer_id, loan_amount, status, created_at, term_months, monthly_instalment, total_repayment, effective_rate, category, loan_category, disbursed, disbursed_bank, crb_fees, origination_fees, insurance_fees, total_fees, collection_fees, schedule_id, loan_number, file_number, date_created, disbursement_date, cash_to_client, top_up_interest, settlement_interest, closure_type, closure_date, top_up_of, application_status, loan_state, performance_status, top_up_balance, settlement_balance, current_balance, settlement_type, settling_institution, settlement_reason, vote_id, outstanding_fees, pricing_version, applied_interest_rate, applied_collection_fee, written_off_amount, insurance_settlement_amount, parent_loan_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (31, 1000000.0, 'pending', '2025-04-29 00:00:00.000000', 12, 83333.33, 1000000.0, 0.0, 'Civil Servant', 1, 0, None, 0.0, 0.0, 0.0, None, 0.0, None, '112000031', '', '2025-04-29 00:00:00.000000', '2025-04-29', 1000000.0, 0.0, 0.0, None, None, None, 'Approved', 'Active', 'Performing', 0.0, 0.0, 0.0, None, None, None, None, 0.0, 1, 0.0, 0.0, 0.0, 0.0, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
[2025-07-13 19:06:33,688] ERROR in app: Row data: {'customer_id': '31', 'loan_amount': '1000000', 'term_months': '12', 'created_at': '4/29/2025', 'category_code': '1', 'category_label': 'Civil Servant', 'loan_number': '112000031', 'file_number': '', 'application_status': 'Approved', 'loan_state': 'Active', 'performance_status': 'Performing', 'crb_fees': '', 'origination_fees': '', 'insurance_fees': '', 'collection_fees': '', 'cash_to_client': '', 'applied_interest_rate': '', 'applied_collection_fee': ''}
2025-07-13 19:06:33,688 - ERROR - Row data: {'customer_id': '31', 'loan_amount': '1000000', 'term_months': '12', 'created_at': '4/29/2025', 'category_code': '1', 'category_label': 'Civil Servant', 'loan_number': '112000031', 'file_number': '', 'application_status': 'Approved', 'loan_state': 'Active', 'performance_status': 'Performing', 'crb_fees': '', 'origination_fees': '', 'insurance_fees': '', 'collection_fees': '', 'cash_to_client': '', 'applied_interest_rate': '', 'applied_collection_fee': ''}
[2025-07-13 19:06:33,788] ERROR in app: Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.IntegrityError: UNIQUE constraint failed: loan_applications.loan_number

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 5380, in batch_import_loans
    db.session.flush()  # Get ID for repayment schedule
    ~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 938, in flush
    return self._proxied.flush(objects=objects)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: loan_applications.loan_number
[SQL: INSERT INTO loan_applications (customer_id, loan_amount, status, created_at, term_months, monthly_instalment, total_repayment, effective_rate, category, loan_category, disbursed, disbursed_bank, crb_fees, origination_fees, insurance_fees, total_fees, collection_fees, schedule_id, loan_number, file_number, date_created, disbursement_date, cash_to_client, top_up_interest, settlement_interest, closure_type, closure_date, top_up_of, application_status, loan_state, performance_status, top_up_balance, settlement_balance, current_balance, settlement_type, settling_institution, settlement_reason, vote_id, outstanding_fees, pricing_version, applied_interest_rate, applied_collection_fee, written_off_amount, insurance_settlement_amount, parent_loan_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (31, 1000000.0, 'pending', '2025-04-29 00:00:00.000000', 12, 83333.33, 1000000.0, 0.0, 'Civil Servant', 1, 0, None, 0.0, 0.0, 0.0, None, 0.0, None, '112000031', '', '2025-04-29 00:00:00.000000', '2025-04-29', 1000000.0, 0.0, 0.0, None, None, None, 'Approved', 'Active', 'Performing', 0.0, 0.0, 0.0, None, None, None, None, 0.0, 1, 0.0, 0.0, 0.0, 0.0, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)

2025-07-13 19:06:33,788 - ERROR - Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.IntegrityError: UNIQUE constraint failed: loan_applications.loan_number

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 5380, in batch_import_loans
    db.session.flush()  # Get ID for repayment schedule
    ~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 938, in flush
    return self._proxied.flush(objects=objects)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: loan_applications.loan_number
[SQL: INSERT INTO loan_applications (customer_id, loan_amount, status, created_at, term_months, monthly_instalment, total_repayment, effective_rate, category, loan_category, disbursed, disbursed_bank, crb_fees, origination_fees, insurance_fees, total_fees, collection_fees, schedule_id, loan_number, file_number, date_created, disbursement_date, cash_to_client, top_up_interest, settlement_interest, closure_type, closure_date, top_up_of, application_status, loan_state, performance_status, top_up_balance, settlement_balance, current_balance, settlement_type, settling_institution, settlement_reason, vote_id, outstanding_fees, pricing_version, applied_interest_rate, applied_collection_fee, written_off_amount, insurance_settlement_amount, parent_loan_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (31, 1000000.0, 'pending', '2025-04-29 00:00:00.000000', 12, 83333.33, 1000000.0, 0.0, 'Civil Servant', 1, 0, None, 0.0, 0.0, 0.0, None, 0.0, None, '112000031', '', '2025-04-29 00:00:00.000000', '2025-04-29', 1000000.0, 0.0, 0.0, None, None, None, 'Approved', 'Active', 'Performing', 0.0, 0.0, 0.0, None, None, None, None, 0.0, 1, 0.0, 0.0, 0.0, 0.0, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)

[2025-07-13 19:06:33,847] ERROR in app: Batch import failed: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (sqlite3.IntegrityError) UNIQUE constraint failed: loan_applications.loan_number
[SQL: INSERT INTO loan_applications (customer_id, loan_amount, status, created_at, term_months, monthly_instalment, total_repayment, effective_rate, category, loan_category, disbursed, disbursed_bank, crb_fees, origination_fees, insurance_fees, total_fees, collection_fees, schedule_id, loan_number, file_number, date_created, disbursement_date, cash_to_client, top_up_interest, settlement_interest, closure_type, closure_date, top_up_of, application_status, loan_state, performance_status, top_up_balance, settlement_balance, current_balance, settlement_type, settling_institution, settlement_reason, vote_id, outstanding_fees, pricing_version, applied_interest_rate, applied_collection_fee, written_off_amount, insurance_settlement_amount, parent_loan_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (31, 1000000.0, 'pending', '2025-04-29 00:00:00.000000', 12, 83333.33, 1000000.0, 0.0, 'Civil Servant', 1, 0, None, 0.0, 0.0, 0.0, None, 0.0, None, '112000031', '', '2025-04-29 00:00:00.000000', '2025-04-29', 1000000.0, 0.0, 0.0, None, None, None, 'Approved', 'Active', 'Performing', 0.0, 0.0, 0.0, None, None, None, None, 0.0, 1, 0.0, 0.0, 0.0, 0.0, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
2025-07-13 19:06:33,847 - ERROR - Batch import failed: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (sqlite3.IntegrityError) UNIQUE constraint failed: loan_applications.loan_number
[SQL: INSERT INTO loan_applications (customer_id, loan_amount, status, created_at, term_months, monthly_instalment, total_repayment, effective_rate, category, loan_category, disbursed, disbursed_bank, crb_fees, origination_fees, insurance_fees, total_fees, collection_fees, schedule_id, loan_number, file_number, date_created, disbursement_date, cash_to_client, top_up_interest, settlement_interest, closure_type, closure_date, top_up_of, application_status, loan_state, performance_status, top_up_balance, settlement_balance, current_balance, settlement_type, settling_institution, settlement_reason, vote_id, outstanding_fees, pricing_version, applied_interest_rate, applied_collection_fee, written_off_amount, insurance_settlement_amount, parent_loan_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (31, 1000000.0, 'pending', '2025-04-29 00:00:00.000000', 12, 83333.33, 1000000.0, 0.0, 'Civil Servant', 1, 0, None, 0.0, 0.0, 0.0, None, 0.0, None, '112000031', '', '2025-04-29 00:00:00.000000', '2025-04-29', 1000000.0, 0.0, 0.0, None, None, None, 'Approved', 'Active', 'Performing', 0.0, 0.0, 0.0, None, None, None, None, 0.0, 1, 0.0, 0.0, 0.0, 0.0, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[2025-07-13 19:06:33,884] ERROR in app: Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 5395, in batch_import_loans
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (sqlite3.IntegrityError) UNIQUE constraint failed: loan_applications.loan_number
[SQL: INSERT INTO loan_applications (customer_id, loan_amount, status, created_at, term_months, monthly_instalment, total_repayment, effective_rate, category, loan_category, disbursed, disbursed_bank, crb_fees, origination_fees, insurance_fees, total_fees, collection_fees, schedule_id, loan_number, file_number, date_created, disbursement_date, cash_to_client, top_up_interest, settlement_interest, closure_type, closure_date, top_up_of, application_status, loan_state, performance_status, top_up_balance, settlement_balance, current_balance, settlement_type, settling_institution, settlement_reason, vote_id, outstanding_fees, pricing_version, applied_interest_rate, applied_collection_fee, written_off_amount, insurance_settlement_amount, parent_loan_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (31, 1000000.0, 'pending', '2025-04-29 00:00:00.000000', 12, 83333.33, 1000000.0, 0.0, 'Civil Servant', 1, 0, None, 0.0, 0.0, 0.0, None, 0.0, None, '112000031', '', '2025-04-29 00:00:00.000000', '2025-04-29', 1000000.0, 0.0, 0.0, None, None, None, 'Approved', 'Active', 'Performing', 0.0, 0.0, 0.0, None, None, None, None, 0.0, 1, 0.0, 0.0, 0.0, 0.0, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)

2025-07-13 19:06:33,884 - ERROR - Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 5395, in batch_import_loans
    db.session.commit()
    ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
    ...<6 lines>...
    )
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (sqlite3.IntegrityError) UNIQUE constraint failed: loan_applications.loan_number
[SQL: INSERT INTO loan_applications (customer_id, loan_amount, status, created_at, term_months, monthly_instalment, total_repayment, effective_rate, category, loan_category, disbursed, disbursed_bank, crb_fees, origination_fees, insurance_fees, total_fees, collection_fees, schedule_id, loan_number, file_number, date_created, disbursement_date, cash_to_client, top_up_interest, settlement_interest, closure_type, closure_date, top_up_of, application_status, loan_state, performance_status, top_up_balance, settlement_balance, current_balance, settlement_type, settling_institution, settlement_reason, vote_id, outstanding_fees, pricing_version, applied_interest_rate, applied_collection_fee, written_off_amount, insurance_settlement_amount, parent_loan_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (31, 1000000.0, 'pending', '2025-04-29 00:00:00.000000', 12, 83333.33, 1000000.0, 0.0, 'Civil Servant', 1, 0, None, 0.0, 0.0, 0.0, None, 0.0, None, '112000031', '', '2025-04-29 00:00:00.000000', '2025-04-29', 1000000.0, 0.0, 0.0, None, None, None, 'Approved', 'Active', 'Performing', 0.0, 0.0, 0.0, None, None, None, None, 0.0, 1, 0.0, 0.0, 0.0, 0.0, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)

2025-07-13 19:06:33,897 - INFO - 127.0.0.1 - - [13/Jul/2025 19:06:33] "[32mPOST /admin/batch_import_loans HTTP/1.1[0m" 302 -
2025-07-13 19:06:33,907 - INFO - 127.0.0.1 - - [13/Jul/2025 19:06:33] "GET /admin/batch_import_loans HTTP/1.1" 200 -
[2025-07-13 23:21:18,874] INFO in app: ==================================================
[2025-07-13 23:21:18,967] INFO in app: Application logging initialized successfully
[2025-07-13 23:21:18,968] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-13 23:21:18,969] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-13 23:21:18,971] INFO in app: System encoding: utf-8
[2025-07-13 23:21:18,973] INFO in app: ==================================================
2025-07-13 23:21:19,313 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-13 23:21:19,313 - INFO - [33mPress CTRL+C to quit[0m
2025-07-13 23:31:08,652 - INFO - 127.0.0.1 - - [13/Jul/2025 23:31:08] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-13 23:31:09,745 - INFO - 127.0.0.1 - - [13/Jul/2025 23:31:09] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-13 23:31:26,737 - INFO - 127.0.0.1 - - [13/Jul/2025 23:31:26] "GET /admin/download_sample_csv HTTP/1.1" 200 -
2025-07-13 23:32:54,806 - INFO - 127.0.0.1 - - [13/Jul/2025 23:32:54] "GET /loanbook HTTP/1.1" 200 -
2025-07-13 23:33:08,754 - INFO - 127.0.0.1 - - [13/Jul/2025 23:33:08] "GET /loan/112000032/statement HTTP/1.1" 200 -
2025-07-13 23:34:37,507 - INFO - 127.0.0.1 - - [13/Jul/2025 23:34:37] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-13 23:34:39,819 - INFO - 127.0.0.1 - - [13/Jul/2025 23:34:39] "GET /admin/batch_import_loans HTTP/1.1" 200 -
[2025-07-13 23:34:47,321] INFO in app: CSV headers: ['loan_number', 'created_at', 'loan_amount', 'term_months', 'application_status', 'loan_state', 'performance_status']
2025-07-13 23:34:47,321 - INFO - CSV headers: ['loan_number', 'created_at', 'loan_amount', 'term_months', 'application_status', 'loan_state', 'performance_status']
[2025-07-13 23:34:47,344] ERROR in app: Error in row 1: LoanApplication.generate_repayment_schedule() got an unexpected keyword argument 'start_date'
2025-07-13 23:34:47,344 - ERROR - Error in row 1: LoanApplication.generate_repayment_schedule() got an unexpected keyword argument 'start_date'
[2025-07-13 23:34:47,349] ERROR in app: Row data: {'loan_number': '112000032', 'created_at': '4/28/2025', 'loan_amount': '1,000,000.00', 'term_months': '12', 'application_status': 'Approved', 'loan_state': 'Active', 'performance_status': 'Performing'}
2025-07-13 23:34:47,349 - ERROR - Row data: {'loan_number': '112000032', 'created_at': '4/28/2025', 'loan_amount': '1,000,000.00', 'term_months': '12', 'application_status': 'Approved', 'loan_state': 'Active', 'performance_status': 'Performing'}
[2025-07-13 23:34:47,356] ERROR in app: Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 5296, in batch_import_loans
    loan.generate_repayment_schedule(start_date=start_date)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
TypeError: LoanApplication.generate_repayment_schedule() got an unexpected keyword argument 'start_date'

2025-07-13 23:34:47,356 - ERROR - Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 5296, in batch_import_loans
    loan.generate_repayment_schedule(start_date=start_date)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
TypeError: LoanApplication.generate_repayment_schedule() got an unexpected keyword argument 'start_date'

2025-07-13 23:34:47,376 - INFO - 127.0.0.1 - - [13/Jul/2025 23:34:47] "[32mPOST /admin/batch_import_loans HTTP/1.1[0m" 302 -
2025-07-13 23:34:47,635 - INFO - 127.0.0.1 - - [13/Jul/2025 23:34:47] "GET /admin/batch_import_loans HTTP/1.1" 200 -
[2025-07-14 00:23:40,341] INFO in app: ==================================================
[2025-07-14 00:23:40,347] INFO in app: Application logging initialized successfully
[2025-07-14 00:23:40,349] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-14 00:23:40,351] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-14 00:23:40,354] INFO in app: System encoding: utf-8
[2025-07-14 00:23:40,357] INFO in app: ==================================================
2025-07-14 00:23:40,643 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-14 00:23:40,643 - INFO - [33mPress CTRL+C to quit[0m
2025-07-14 00:23:46,821 - INFO - 127.0.0.1 - - [14/Jul/2025 00:23:46] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-14 00:23:48,061 - INFO - 127.0.0.1 - - [14/Jul/2025 00:23:48] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-14 00:24:02,267 - INFO - 127.0.0.1 - - [14/Jul/2025 00:24:02] "GET /admin/download_sample_csv HTTP/1.1" 200 -
[2025-07-14 00:24:54,509] INFO in app: CSV headers: ['loan_number', 'created_at', 'loan_amount', 'term_months', 'application_status', 'loan_state', 'performance_status']
2025-07-14 00:24:54,509 - INFO - CSV headers: ['loan_number', 'created_at', 'loan_amount', 'term_months', 'application_status', 'loan_state', 'performance_status']
2025-07-14 00:24:54,567 - INFO - 127.0.0.1 - - [14/Jul/2025 00:24:54] "[32mPOST /admin/batch_import_loans HTTP/1.1[0m" 302 -
2025-07-14 00:24:54,573 - INFO - 127.0.0.1 - - [14/Jul/2025 00:24:54] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-14 00:25:00,865 - INFO - 127.0.0.1 - - [14/Jul/2025 00:25:00] "GET /loanbook HTTP/1.1" 200 -
2025-07-14 00:25:43,153 - INFO - 127.0.0.1 - - [14/Jul/2025 00:25:43] "GET /loan/112000032/statement HTTP/1.1" 200 -
2025-07-14 00:27:29,229 - INFO - 127.0.0.1 - - [14/Jul/2025 00:27:29] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-14 00:27:31,104 - INFO - 127.0.0.1 - - [14/Jul/2025 00:27:31] "GET /admin/batch_import_loans HTTP/1.1" 200 -
[2025-07-14 00:27:37,102] INFO in app: CSV headers: ['loan_number', 'created_at', 'loan_amount', 'term_months', 'application_status', 'loan_state', 'performance_status']
2025-07-14 00:27:37,102 - INFO - CSV headers: ['loan_number', 'created_at', 'loan_amount', 'term_months', 'application_status', 'loan_state', 'performance_status']
2025-07-14 00:27:37,120 - INFO - 127.0.0.1 - - [14/Jul/2025 00:27:37] "[32mPOST /admin/batch_import_loans HTTP/1.1[0m" 302 -
2025-07-14 00:27:37,137 - INFO - 127.0.0.1 - - [14/Jul/2025 00:27:37] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-14 00:27:40,052 - INFO - 127.0.0.1 - - [14/Jul/2025 00:27:40] "GET /loanbook HTTP/1.1" 200 -
2025-07-14 00:28:00,758 - INFO - 127.0.0.1 - - [14/Jul/2025 00:28:00] "GET /loan/112000031/statement HTTP/1.1" 200 -
2025-07-14 00:30:33,431 - INFO - 127.0.0.1 - - [14/Jul/2025 00:30:33] "GET /loanbook HTTP/1.1" 200 -
[2025-07-14 00:47:42,180] INFO in app: ==================================================
[2025-07-14 00:47:42,185] INFO in app: Application logging initialized successfully
[2025-07-14 00:47:42,189] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-14 00:47:42,190] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-14 00:47:42,192] INFO in app: System encoding: utf-8
[2025-07-14 00:47:42,195] INFO in app: ==================================================
2025-07-14 00:47:42,398 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-14 00:47:42,398 - INFO - [33mPress CTRL+C to quit[0m
2025-07-14 00:47:47,302 - INFO - 127.0.0.1 - - [14/Jul/2025 00:47:47] "GET /loanbook HTTP/1.1" 200 -
2025-07-14 00:47:48,453 - INFO - 127.0.0.1 - - [14/Jul/2025 00:47:48] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-14 00:48:42,835 - INFO - 127.0.0.1 - - [14/Jul/2025 00:48:42] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-14 00:48:44,200 - INFO - 127.0.0.1 - - [14/Jul/2025 00:48:44] "GET /admin/batch_import_loans HTTP/1.1" 200 -
[2025-07-14 00:48:51,951] INFO in app: CSV headers: ['loan_number', 'created_at', 'loan_amount', 'term_months', 'application_status', 'loan_state', 'performance_status']
2025-07-14 00:48:51,951 - INFO - CSV headers: ['loan_number', 'created_at', 'loan_amount', 'term_months', 'application_status', 'loan_state', 'performance_status']
2025-07-14 00:48:51,973 - INFO - 127.0.0.1 - - [14/Jul/2025 00:48:51] "[32mPOST /admin/batch_import_loans HTTP/1.1[0m" 302 -
2025-07-14 00:48:52,257 - INFO - 127.0.0.1 - - [14/Jul/2025 00:48:52] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-14 00:48:57,932 - INFO - 127.0.0.1 - - [14/Jul/2025 00:48:57] "GET /loanbook HTTP/1.1" 200 -
2025-07-14 00:50:09,183 - INFO - 127.0.0.1 - - [14/Jul/2025 00:50:09] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-14 00:50:10,334 - INFO - 127.0.0.1 - - [14/Jul/2025 00:50:10] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-14 01:11:22,693 - INFO - 127.0.0.1 - - [14/Jul/2025 01:11:22] "GET /loanbook HTTP/1.1" 200 -
2025-07-14 01:11:59,699 - INFO - 127.0.0.1 - - [14/Jul/2025 01:11:59] "GET /loan/136000030/statement HTTP/1.1" 200 -
2025-07-14 01:12:06,626 - INFO - 127.0.0.1 - - [14/Jul/2025 01:12:06] "GET /loanbook HTTP/1.1" 200 -
2025-07-14 01:12:28,525 - INFO - 127.0.0.1 - - [14/Jul/2025 01:12:28] "GET /loan/124000026/statement HTTP/1.1" 200 -
[2025-07-14 01:15:20,877] INFO in app: ==================================================
[2025-07-14 01:15:20,948] INFO in app: Application logging initialized successfully
[2025-07-14 01:15:20,950] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-14 01:15:20,951] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-14 01:15:20,953] INFO in app: System encoding: utf-8
[2025-07-14 01:15:20,955] INFO in app: ==================================================
[2025-07-14 01:46:22,634] INFO in app: ==================================================
[2025-07-14 01:46:22,641] INFO in app: Application logging initialized successfully
[2025-07-14 01:46:22,644] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-14 01:46:22,646] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-14 01:46:22,648] INFO in app: System encoding: utf-8
[2025-07-14 01:46:22,651] INFO in app: ==================================================
2025-07-14 01:46:22,872 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-14 01:46:22,872 - INFO - [33mPress CTRL+C to quit[0m
2025-07-14 01:46:27,688 - INFO - 127.0.0.1 - - [14/Jul/2025 01:46:27] "GET /loan/124000026/statement HTTP/1.1" 200 -
2025-07-14 01:46:28,932 - INFO - 127.0.0.1 - - [14/Jul/2025 01:46:28] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-14 01:46:32,419 - INFO - 127.0.0.1 - - [14/Jul/2025 01:46:32] "GET /loanbook HTTP/1.1" 200 -
[2025-07-14 01:46:34,237] INFO in app: Found 32 loans for customer 202506000001
2025-07-14 01:46:34,237 - INFO - Found 32 loans for customer 202506000001
[2025-07-14 01:46:34,239] INFO in app: Customer ID: 1
2025-07-14 01:46:34,239 - INFO - Customer ID: 1
[2025-07-14 01:46:34,241] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active'), ('112000031', 'Deleted'), ('112000032', 'Closed')]
2025-07-14 01:46:34,241 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active'), ('112000031', 'Deleted'), ('112000032', 'Closed')]
2025-07-14 01:46:34,324 - INFO - 127.0.0.1 - - [14/Jul/2025 01:46:34] "GET /customer/202506000001/account HTTP/1.1" 200 -
[2025-07-14 01:46:35,589] INFO in app: Found 32 loans for customer 202506000001
2025-07-14 01:46:35,589 - INFO - Found 32 loans for customer 202506000001
[2025-07-14 01:46:35,596] INFO in app: Customer ID: 1
2025-07-14 01:46:35,596 - INFO - Customer ID: 1
[2025-07-14 01:46:35,600] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active'), ('112000031', 'Deleted'), ('112000032', 'Closed')]
2025-07-14 01:46:35,600 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active'), ('112000031', 'Deleted'), ('112000032', 'Closed')]
2025-07-14 01:46:35,648 - INFO - 127.0.0.1 - - [14/Jul/2025 01:46:35] "GET /customer/202506000001/account?section=additional HTTP/1.1" 200 -
2025-07-14 01:47:10,620 - INFO - 127.0.0.1 - - [14/Jul/2025 01:47:10] "[32mPOST /apply_additional/1 HTTP/1.1[0m" 302 -
[2025-07-14 01:47:10,876] INFO in app: Found 33 loans for customer 202506000001
2025-07-14 01:47:10,876 - INFO - Found 33 loans for customer 202506000001
[2025-07-14 01:47:10,884] INFO in app: Customer ID: 1
2025-07-14 01:47:10,884 - INFO - Customer ID: 1
[2025-07-14 01:47:10,890] INFO in app: Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active'), ('112000031', 'Deleted'), ('112000032', 'Closed'), ('112000033', 'active')]
2025-07-14 01:47:10,890 - INFO - Found Loans: [('136000001', 'active'), ('103000002', 'active'), ('112000003', 'active'), ('103000004', 'active'), ('118000005', 'topped_up'), ('103000006', 'active'), ('103000007', 'active'), ('103000008', 'topped_up'), ('103000009', 'active'), ('136000010', 'topped_up'), ('103000011', 'topped_up'), ('124000012', 'topped_up'), ('124000013', 'topped_up'), ('124000014', 'topped_up'), ('124000015', 'active'), ('136000016', 'active'), ('124000017', 'active'), ('118000018', 'topped_up'), ('124000019', 'topped_up'), ('118000020', 'topped_up'), ('136000021', 'active'), ('112000022', 'topped_up'), ('124000023', 'topped_up'), ('112000024', 'topped_up'), ('112000025', 'active'), ('124000026', 'topped_up'), ('136000027', 'topped_up'), ('118000028', 'active'), ('118000029', 'active'), ('136000030', 'active'), ('112000031', 'Deleted'), ('112000032', 'Closed'), ('112000033', 'active')]
2025-07-14 01:47:10,967 - INFO - 127.0.0.1 - - [14/Jul/2025 01:47:10] "GET /customer/202506000001/account?section=statement HTTP/1.1" 200 -
2025-07-14 01:47:13,640 - INFO - 127.0.0.1 - - [14/Jul/2025 01:47:13] "GET /loans HTTP/1.1" 200 -
2025-07-14 01:47:25,202 - INFO - 127.0.0.1 - - [14/Jul/2025 01:47:25] "[32mPOST /process_loan/33/approve HTTP/1.1[0m" 302 -
2025-07-14 01:47:25,265 - INFO - 127.0.0.1 - - [14/Jul/2025 01:47:25] "GET /loans HTTP/1.1" 200 -
2025-07-14 01:47:34,282 - INFO - 127.0.0.1 - - [14/Jul/2025 01:47:34] "GET /loanbook HTTP/1.1" 200 -
2025-07-14 01:49:33,710 - INFO - 127.0.0.1 - - [14/Jul/2025 01:49:33] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-14 01:49:34,728 - INFO - 127.0.0.1 - - [14/Jul/2025 01:49:34] "GET /admin/batch_import_loans HTTP/1.1" 200 -
[2025-07-14 01:49:41,616] INFO in app: CSV headers: ['loan_number', 'created_at', 'loan_amount', 'term_months', 'application_status', 'loan_state', 'performance_status']
2025-07-14 01:49:41,616 - INFO - CSV headers: ['loan_number', 'created_at', 'loan_amount', 'term_months', 'application_status', 'loan_state', 'performance_status']
2025-07-14 01:49:41,647 - INFO - 127.0.0.1 - - [14/Jul/2025 01:49:41] "[32mPOST /admin/batch_import_loans HTTP/1.1[0m" 302 -
2025-07-14 01:49:41,659 - INFO - 127.0.0.1 - - [14/Jul/2025 01:49:41] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-14 01:49:48,946 - INFO - 127.0.0.1 - - [14/Jul/2025 01:49:48] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-14 01:49:54,344 - INFO - 127.0.0.1 - - [14/Jul/2025 01:49:54] "GET /income_report HTTP/1.1" 200 -
2025-07-14 01:50:08,007 - INFO - 127.0.0.1 - - [14/Jul/2025 01:50:08] "POST /income_report HTTP/1.1" 200 -
2025-07-14 01:50:22,777 - INFO - 127.0.0.1 - - [14/Jul/2025 01:50:22] "GET /loans HTTP/1.1" 200 -
2025-07-14 01:50:30,034 - INFO - 127.0.0.1 - - [14/Jul/2025 01:50:30] "[32mPOST /process_loan/33/approve HTTP/1.1[0m" 302 -
2025-07-14 01:50:30,397 - INFO - 127.0.0.1 - - [14/Jul/2025 01:50:30] "GET /loans HTTP/1.1" 200 -
2025-07-14 01:50:40,527 - INFO - 127.0.0.1 - - [14/Jul/2025 01:50:40] "GET /income_report HTTP/1.1" 200 -
2025-07-14 01:50:56,674 - INFO - 127.0.0.1 - - [14/Jul/2025 01:50:56] "POST /income_report HTTP/1.1" 200 -
2025-07-14 02:00:41,852 - INFO - 127.0.0.1 - - [14/Jul/2025 02:00:41] "POST /income_report HTTP/1.1" 200 -
2025-07-14 02:00:56,779 - INFO - 127.0.0.1 - - [14/Jul/2025 02:00:56] "POST /income_report HTTP/1.1" 200 -
2025-07-14 02:01:10,510 - INFO - 127.0.0.1 - - [14/Jul/2025 02:01:10] "POST /income_report HTTP/1.1" 200 -
2025-07-14 02:02:11,685 - INFO - 127.0.0.1 - - [14/Jul/2025 02:02:11] "GET /loanbook HTTP/1.1" 200 -
2025-07-14 02:02:20,079 - INFO - 127.0.0.1 - - [14/Jul/2025 02:02:20] "GET /loan/112000033/statement HTTP/1.1" 200 -
2025-07-14 02:02:51,279 - INFO - 127.0.0.1 - - [14/Jul/2025 02:02:51] "GET /payments HTTP/1.1" 200 -
2025-07-14 02:02:55,206 - INFO - 127.0.0.1 - - [14/Jul/2025 02:02:55] "GET /api/verify_loan/112000033 HTTP/1.1" 200 -
[2025-07-14 02:03:16,418] INFO in app: [112000033] Schedule 1147 → Paid: fees=12000.0, interest=40215.0, principal=78688.06
2025-07-14 02:03:16,418 - INFO - [112000033] Schedule 1147 → Paid: fees=12000.0, interest=40215.0, principal=78688.06
[2025-07-14 02:03:16,430] INFO in app: [112000033] Underpayment detected; arrears recorded.
2025-07-14 02:03:16,430 - INFO - [112000033] Underpayment detected; arrears recorded.
[2025-07-14 02:03:16,439] INFO in app: [112000033] Recalculated: capitalized=1149000.0, paid_principal=0, current_balance=1149000.0
2025-07-14 02:03:16,439 - INFO - [112000033] Recalculated: capitalized=1149000.0, paid_principal=0, current_balance=1149000.0
[2025-07-14 02:03:16,448] INFO in app: [112000033] Recalculated: capitalized=1149000.0, paid_principal=0, current_balance=1149000.0
2025-07-14 02:03:16,448 - INFO - [112000033] Recalculated: capitalized=1149000.0, paid_principal=0, current_balance=1149000.0
2025-07-14 02:03:16,459 - INFO - 127.0.0.1 - - [14/Jul/2025 02:03:16] "[32mPOST /payments HTTP/1.1[0m" 302 -
2025-07-14 02:03:16,468 - INFO - 127.0.0.1 - - [14/Jul/2025 02:03:16] "GET /payments HTTP/1.1" 200 -
2025-07-14 02:03:32,695 - INFO - 127.0.0.1 - - [14/Jul/2025 02:03:32] "GET /income_report HTTP/1.1" 200 -
2025-07-14 02:03:56,209 - INFO - 127.0.0.1 - - [14/Jul/2025 02:03:56] "POST /income_report HTTP/1.1" 200 -
2025-07-14 02:04:24,506 - INFO - 127.0.0.1 - - [14/Jul/2025 02:04:24] "GET /loanbook HTTP/1.1" 200 -
2025-07-14 02:04:37,100 - INFO - 127.0.0.1 - - [14/Jul/2025 02:04:37] "GET /loan/112000033/statement HTTP/1.1" 200 -
[2025-07-14 02:16:19,582] INFO in app: ==================================================
[2025-07-14 02:16:19,588] INFO in app: Application logging initialized successfully
[2025-07-14 02:16:19,592] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-14 02:16:19,597] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-14 02:16:19,603] INFO in app: System encoding: utf-8
[2025-07-14 02:16:19,605] INFO in app: ==================================================
2025-07-14 02:16:19,805 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-14 02:16:19,806 - INFO - [33mPress CTRL+C to quit[0m
2025-07-14 02:16:25,266 - INFO - 127.0.0.1 - - [14/Jul/2025 02:16:25] "GET /loan/112000033/statement HTTP/1.1" 200 -
2025-07-14 02:16:26,152 - INFO - 127.0.0.1 - - [14/Jul/2025 02:16:26] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-14 02:16:38,502] ERROR in app: Exception on /income_report [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5004, in income_report
    one_time, accrued, recurring = _compute_income_db(start_date, end_date)
                                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 4961, in _compute_income_db
    func.coalesce(func.sum(RepaymentSchedule.interest_portion), 0).label('interest')
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'RepaymentSchedule' has no attribute 'interest_portion'
2025-07-14 02:16:38,502 - ERROR - Exception on /income_report [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5004, in income_report
    one_time, accrued, recurring = _compute_income_db(start_date, end_date)
                                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 4961, in _compute_income_db
    func.coalesce(func.sum(RepaymentSchedule.interest_portion), 0).label('interest')
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'RepaymentSchedule' has no attribute 'interest_portion'
2025-07-14 02:16:38,524 - INFO - 127.0.0.1 - - [14/Jul/2025 02:16:38] "[35m[1mGET /income_report HTTP/1.1[0m" 500 -
[2025-07-14 02:18:23,470] INFO in app: ==================================================
[2025-07-14 02:18:23,477] INFO in app: Application logging initialized successfully
[2025-07-14 02:18:23,480] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-14 02:18:23,482] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-14 02:18:23,484] INFO in app: System encoding: utf-8
[2025-07-14 02:18:23,487] INFO in app: ==================================================
2025-07-14 02:18:23,846 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-14 02:18:23,846 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-14 02:18:28,436] ERROR in app: Exception on /income_report [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5018, in income_report
    one_time, accrued_interest, settlement_interest, collection_fees = _compute_income_db(start_date, end_date)
                                                                       ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 4961, in _compute_income_db
    func.coalesce(func.sum(RepaymentSchedule.interest), 0).label('accrued_interest')
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'RepaymentSchedule' has no attribute 'interest'
2025-07-14 02:18:28,436 - ERROR - Exception on /income_report [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5018, in income_report
    one_time, accrued_interest, settlement_interest, collection_fees = _compute_income_db(start_date, end_date)
                                                                       ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 4961, in _compute_income_db
    func.coalesce(func.sum(RepaymentSchedule.interest), 0).label('accrued_interest')
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'RepaymentSchedule' has no attribute 'interest'
2025-07-14 02:18:28,448 - INFO - 127.0.0.1 - - [14/Jul/2025 02:18:28] "[35m[1mGET /income_report HTTP/1.1[0m" 500 -
2025-07-14 02:18:28,500 - INFO - 127.0.0.1 - - [14/Jul/2025 02:18:28] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-14 02:18:35,996] ERROR in app: Exception on /income_report [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5018, in income_report
    one_time, accrued_interest, settlement_interest, collection_fees = _compute_income_db(start_date, end_date)
                                                                       ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 4961, in _compute_income_db
    func.coalesce(func.sum(RepaymentSchedule.interest), 0).label('accrued_interest')
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'RepaymentSchedule' has no attribute 'interest'
2025-07-14 02:18:35,996 - ERROR - Exception on /income_report [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5018, in income_report
    one_time, accrued_interest, settlement_interest, collection_fees = _compute_income_db(start_date, end_date)
                                                                       ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 4961, in _compute_income_db
    func.coalesce(func.sum(RepaymentSchedule.interest), 0).label('accrued_interest')
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'RepaymentSchedule' has no attribute 'interest'
2025-07-14 02:18:36,021 - INFO - 127.0.0.1 - - [14/Jul/2025 02:18:36] "[35m[1mGET /income_report HTTP/1.1[0m" 500 -
[2025-07-14 02:23:26,674] INFO in app: ==================================================
[2025-07-14 02:23:26,680] INFO in app: Application logging initialized successfully
[2025-07-14 02:23:26,682] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-14 02:23:26,686] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-14 02:23:26,688] INFO in app: System encoding: utf-8
[2025-07-14 02:23:26,692] INFO in app: ==================================================
2025-07-14 02:23:26,893 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-14 02:23:26,893 - INFO - [33mPress CTRL+C to quit[0m
2025-07-14 02:23:32,570 - INFO - 127.0.0.1 - - [14/Jul/2025 02:23:32] "GET /income_report HTTP/1.1" 200 -
2025-07-14 02:23:33,775 - INFO - 127.0.0.1 - - [14/Jul/2025 02:23:33] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-14 02:23:50,737 - INFO - 127.0.0.1 - - [14/Jul/2025 02:23:50] "POST /income_report HTTP/1.1" 200 -
2025-07-14 02:24:38,015 - INFO - 127.0.0.1 - - [14/Jul/2025 02:24:38] "POST /income_report HTTP/1.1" 200 -
[2025-07-14 02:29:44,261] INFO in app: ==================================================
[2025-07-14 02:29:44,267] INFO in app: Application logging initialized successfully
[2025-07-14 02:29:44,273] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-14 02:29:44,278] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-14 02:29:44,281] INFO in app: System encoding: utf-8
[2025-07-14 02:29:44,283] INFO in app: ==================================================
2025-07-14 02:29:44,481 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-14 02:29:44,481 - INFO - [33mPress CTRL+C to quit[0m
2025-07-14 02:29:52,269 - INFO - 127.0.0.1 - - [14/Jul/2025 02:29:52] "POST /income_report HTTP/1.1" 200 -
2025-07-14 02:29:53,167 - INFO - 127.0.0.1 - - [14/Jul/2025 02:29:53] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-14 02:30:23,382 - INFO - 127.0.0.1 - - [14/Jul/2025 02:30:23] "POST /income_report HTTP/1.1" 200 -
2025-07-14 02:30:44,617 - INFO - 127.0.0.1 - - [14/Jul/2025 02:30:44] "POST /income_report HTTP/1.1" 200 -
2025-07-14 02:30:46,082 - INFO - 127.0.0.1 - - [14/Jul/2025 02:30:46] "POST /income_report HTTP/1.1" 200 -
2025-07-14 02:30:47,748 - INFO - 127.0.0.1 - - [14/Jul/2025 02:30:47] "POST /income_report HTTP/1.1" 200 -
2025-07-14 02:30:59,822 - INFO - 127.0.0.1 - - [14/Jul/2025 02:30:59] "GET /loanbook HTTP/1.1" 200 -
2025-07-14 02:31:20,737 - INFO - 127.0.0.1 - - [14/Jul/2025 02:31:20] "GET /loan/136000030/statement HTTP/1.1" 200 -
2025-07-14 02:32:13,528 - INFO - 127.0.0.1 - - [14/Jul/2025 02:32:13] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-14 02:32:15,124 - INFO - 127.0.0.1 - - [14/Jul/2025 02:32:15] "GET /admin/batch_import_loans HTTP/1.1" 200 -
[2025-07-14 02:32:24,532] INFO in app: CSV headers: ['loan_number', 'created_at', 'loan_amount', 'term_months', 'application_status', 'loan_state', 'performance_status']
2025-07-14 02:32:24,532 - INFO - CSV headers: ['loan_number', 'created_at', 'loan_amount', 'term_months', 'application_status', 'loan_state', 'performance_status']
2025-07-14 02:32:24,573 - INFO - 127.0.0.1 - - [14/Jul/2025 02:32:24] "[32mPOST /admin/batch_import_loans HTTP/1.1[0m" 302 -
2025-07-14 02:32:24,814 - INFO - 127.0.0.1 - - [14/Jul/2025 02:32:24] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-14 02:32:28,105 - INFO - 127.0.0.1 - - [14/Jul/2025 02:32:28] "GET /income_report HTTP/1.1" 200 -
2025-07-14 02:32:34,781 - INFO - 127.0.0.1 - - [14/Jul/2025 02:32:34] "GET /income_report HTTP/1.1" 200 -
2025-07-14 02:33:01,584 - INFO - 127.0.0.1 - - [14/Jul/2025 02:33:01] "POST /income_report HTTP/1.1" 200 -
2025-07-14 02:33:31,431 - INFO - 127.0.0.1 - - [14/Jul/2025 02:33:31] "POST /income_report HTTP/1.1" 200 -
2025-07-14 02:33:51,343 - INFO - 127.0.0.1 - - [14/Jul/2025 02:33:51] "POST /income_report HTTP/1.1" 200 -
2025-07-14 02:34:17,446 - INFO - 127.0.0.1 - - [14/Jul/2025 02:34:17] "POST /income_report HTTP/1.1" 200 -
2025-07-14 02:35:10,690 - INFO - 127.0.0.1 - - [14/Jul/2025 02:35:10] "GET /loanbook HTTP/1.1" 200 -
2025-07-14 02:35:23,055 - INFO - 127.0.0.1 - - [14/Jul/2025 02:35:23] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-14 02:35:24,607 - INFO - 127.0.0.1 - - [14/Jul/2025 02:35:24] "GET /admin/batch_import_loans HTTP/1.1" 200 -
[2025-07-14 02:35:32,719] INFO in app: CSV headers: ['loan_number', 'created_at', 'loan_amount', 'term_months', 'application_status', 'loan_state', 'performance_status']
2025-07-14 02:35:32,719 - INFO - CSV headers: ['loan_number', 'created_at', 'loan_amount', 'term_months', 'application_status', 'loan_state', 'performance_status']
2025-07-14 02:35:32,749 - INFO - 127.0.0.1 - - [14/Jul/2025 02:35:32] "[32mPOST /admin/batch_import_loans HTTP/1.1[0m" 302 -
2025-07-14 02:35:33,034 - INFO - 127.0.0.1 - - [14/Jul/2025 02:35:33] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-14 02:35:40,911 - INFO - 127.0.0.1 - - [14/Jul/2025 02:35:40] "GET /loans HTTP/1.1" 200 -
2025-07-14 02:36:00,622 - INFO - 127.0.0.1 - - [14/Jul/2025 02:36:00] "[32mPOST /process_loan/30/approve HTTP/1.1[0m" 302 -
2025-07-14 02:36:00,684 - INFO - 127.0.0.1 - - [14/Jul/2025 02:36:00] "GET /loans HTTP/1.1" 200 -
2025-07-14 02:36:19,545 - INFO - 127.0.0.1 - - [14/Jul/2025 02:36:19] "GET /income_report HTTP/1.1" 200 -
2025-07-14 02:37:07,859 - INFO - 127.0.0.1 - - [14/Jul/2025 02:37:07] "POST /income_report HTTP/1.1" 200 -
2025-07-14 02:37:27,794 - INFO - 127.0.0.1 - - [14/Jul/2025 02:37:27] "POST /income_report HTTP/1.1" 200 -
2025-07-14 02:50:31,147 - INFO - 127.0.0.1 - - [14/Jul/2025 02:50:31] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-14 02:50:36,481 - INFO - 127.0.0.1 - - [14/Jul/2025 02:50:36] "GET / HTTP/1.1" 200 -
2025-07-14 02:50:39,679 - INFO - 127.0.0.1 - - [14/Jul/2025 02:50:39] "GET /approve_customers HTTP/1.1" 200 -
[2025-07-14 03:01:53,703] INFO in app: ==================================================
[2025-07-14 03:01:53,710] INFO in app: Application logging initialized successfully
[2025-07-14 03:01:53,712] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-14 03:01:53,715] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-14 03:01:53,717] INFO in app: System encoding: utf-8
[2025-07-14 03:01:53,722] INFO in app: ==================================================
[2025-07-14 03:02:09,586] INFO in app: ==================================================
[2025-07-14 03:02:09,592] INFO in app: Application logging initialized successfully
[2025-07-14 03:02:09,594] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-14 03:02:09,596] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-14 03:02:09,597] INFO in app: System encoding: utf-8
[2025-07-14 03:02:09,599] INFO in app: ==================================================
[2025-07-14 03:02:14,396] INFO in app: ==================================================
[2025-07-14 03:02:14,403] INFO in app: Application logging initialized successfully
[2025-07-14 03:02:14,405] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-14 03:02:14,406] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-14 03:02:14,407] INFO in app: System encoding: utf-8
[2025-07-14 03:02:14,409] INFO in app: ==================================================
2025-07-14 03:02:14,595 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-14 03:02:14,595 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-14 03:22:54,972] INFO in app: ==================================================
[2025-07-14 03:22:54,979] INFO in app: Application logging initialized successfully
[2025-07-14 03:22:54,981] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-14 03:22:54,983] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-14 03:22:54,987] INFO in app: System encoding: utf-8
[2025-07-14 03:22:54,990] INFO in app: ==================================================
2025-07-14 03:22:55,192 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-14 03:22:55,192 - INFO - [33mPress CTRL+C to quit[0m
