[2025-08-13 15:04:02,713] INFO in app: ==================================================
[2025-08-13 15:04:02,903] INFO in app: Application logging initialized successfully
[2025-08-13 15:04:02,911] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 15:04:02,916] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 15:04:02,934] INFO in app: System encoding: utf-8
[2025-08-13 15:04:02,946] INFO in app: ==================================================
[2025-08-13 15:11:36,298] INFO in app: ==================================================
[2025-08-13 15:11:36,337] INFO in app: Application logging initialized successfully
[2025-08-13 15:11:36,343] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 15:11:36,345] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 15:11:36,349] INFO in app: System encoding: utf-8
[2025-08-13 15:11:36,363] INFO in app: ==================================================
[2025-08-13 17:00:00,150] ERROR in app: Sales data error: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 8372, in get_sales_data
    today_sales = get_today_sales(today)
  File "C:\Users\pc\loan-app\app.py", line 8337, in get_today_sales
    return db.session.query(
           ~~~~~~~~~~~~~~~~^
        func.coalesce(func.sum(LoanApplication.loan_amount), 0.0)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).filter(
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 1681, in query
    return self._proxied.query(*entities, **kwargs)
           ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 197, in _proxied
    return self.registry()
           ~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 634, in __call__
    key = self.scopefunc()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_sqlalchemy\session.py", line 111, in _app_ctx_id
    return id(app_ctx._get_current_object())  # type: ignore[attr-defined]
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
[2025-08-13 17:18:20,661] INFO in app: ==================================================
[2025-08-13 17:18:20,669] INFO in app: Application logging initialized successfully
[2025-08-13 17:18:20,675] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 17:18:20,677] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 17:18:20,681] INFO in app: System encoding: utf-8
[2025-08-13 17:18:20,686] INFO in app: ==================================================
[2025-08-13 17:34:39,476] INFO in app: ==================================================
[2025-08-13 17:34:39,485] INFO in app: Application logging initialized successfully
[2025-08-13 17:34:39,492] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 17:34:39,497] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 17:34:39,499] INFO in app: System encoding: utf-8
[2025-08-13 17:34:39,501] INFO in app: ==================================================
[2025-08-13 17:34:58,524] ERROR in app: Exception on /dashboard/sales [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8098, in sales_dashboard
    return render_template(
        "dashboard/sales_dashboard.html",
    ...<5 lines>...
        notif=notif
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 177, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 17, in block 'content'
    {% include "dashboard/_tabs.html" with context %}
    ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\_tabs.html", line 22, in top-level template code
    href="{{ url_for('sales_by_gender') }}">
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'sales_by_gender'. Did you mean 'dashboard_gender_data' instead?
[2025-08-13 17:36:23,229] INFO in app: ==================================================
[2025-08-13 17:36:23,239] INFO in app: Application logging initialized successfully
[2025-08-13 17:36:23,242] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 17:36:23,243] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 17:36:23,245] INFO in app: System encoding: utf-8
[2025-08-13 17:36:23,249] INFO in app: ==================================================
[2025-08-13 17:36:34,511] ERROR in app: Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8376, in dashboard_gender_data
    case(
    ~~~~^
        [(((today.month, today.day) <
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        else_=0
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\_elements_constructors.py", line 853, in case
    return Case(*whens, value=value, else_=else_)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 3339, in __init__
    new_whens: Iterable[Any] = coercions._expression_collection_was_a_list(
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        "whens", "case", whens
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 151, in _expression_collection_was_a_list
    raise exc.ArgumentError(
    ...<4 lines>...
    )
sqlalchemy.exc.ArgumentError: The "whens" argument to case(), when referring to a sequence of items, is now passed as a series of positional elements, rather than as a list. 
[2025-08-13 17:39:49,692] INFO in app: ==================================================
[2025-08-13 17:39:49,704] INFO in app: Application logging initialized successfully
[2025-08-13 17:39:49,707] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 17:39:49,710] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 17:39:49,713] INFO in app: System encoding: utf-8
[2025-08-13 17:39:49,715] INFO in app: ==================================================
[2025-08-13 17:46:19,774] INFO in app: ==================================================
[2025-08-13 17:46:19,782] INFO in app: Application logging initialized successfully
[2025-08-13 17:46:19,790] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 17:46:19,795] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 17:46:19,797] INFO in app: System encoding: utf-8
[2025-08-13 17:46:19,799] INFO in app: ==================================================
[2025-08-13 17:48:13,304] INFO in app: ==================================================
[2025-08-13 17:48:13,327] INFO in app: Application logging initialized successfully
[2025-08-13 17:48:13,333] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 17:48:13,341] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 17:48:13,343] INFO in app: System encoding: utf-8
[2025-08-13 17:48:13,356] INFO in app: ==================================================
[2025-08-13 17:55:30,855] INFO in app: ==================================================
[2025-08-13 17:55:30,862] INFO in app: Application logging initialized successfully
[2025-08-13 17:55:30,868] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 17:55:30,873] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 17:55:30,877] INFO in app: System encoding: utf-8
[2025-08-13 17:55:30,879] INFO in app: ==================================================
[2025-08-13 17:56:25,837] ERROR in app: Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8380, in dashboard_gender_data
    age_expr = today.year - func.extract('year', Customer.dob) - case(
                                                                 ~~~~^
        ((today.month, today.day) < (func.extract('month', Customer.dob), func.extract('day', Customer.dob))),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        else_=0
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\_elements_constructors.py", line 853, in case
    return Case(*whens, value=value, else_=else_)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 3356, in __init__
    for (c, r) in new_whens
        ^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\operators.py", line 659, in __getitem__
    return self.operate(getitem, index)
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 1523, in operate
    return op(self.comparator, *other, **kwargs)  # type: ignore[no-any-return]  # noqa: E501
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\operators.py", line 659, in __getitem__
    return self.operate(getitem, index)
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\type_api.py", line 212, in operate
    return op_fn(self.expr, op, *other, **addtl_kw)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\default_comparator.py", line 243, in _getitem_impl
    _unsupported_impl(expr, op, other, **kw)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\default_comparator.py", line 249, in _unsupported_impl
    raise NotImplementedError(
        "Operator '%s' is not supported on this expression" % op.__name__
    )
NotImplementedError: Operator 'getitem' is not supported on this expression
[2025-08-13 17:58:40,285] INFO in app: ==================================================
[2025-08-13 17:58:40,295] INFO in app: Application logging initialized successfully
[2025-08-13 17:58:40,298] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 17:58:40,301] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 17:58:40,307] INFO in app: System encoding: utf-8
[2025-08-13 17:58:40,309] INFO in app: ==================================================
[2025-08-13 17:58:45,300] ERROR in app: Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8383, in dashboard_gender_data
    - case(
      ~~~~^
        [
        ^
    ...<11 lines>...
        else_=0
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\_elements_constructors.py", line 853, in case
    return Case(*whens, value=value, else_=else_)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 3339, in __init__
    new_whens: Iterable[Any] = coercions._expression_collection_was_a_list(
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        "whens", "case", whens
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 151, in _expression_collection_was_a_list
    raise exc.ArgumentError(
    ...<4 lines>...
    )
sqlalchemy.exc.ArgumentError: The "whens" argument to case(), when referring to a sequence of items, is now passed as a series of positional elements, rather than as a list. 
[2025-08-13 18:00:15,525] INFO in app: ==================================================
[2025-08-13 18:00:15,532] INFO in app: Application logging initialized successfully
[2025-08-13 18:00:15,543] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:00:15,545] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:00:15,547] INFO in app: System encoding: utf-8
[2025-08-13 18:00:15,549] INFO in app: ==================================================
[2025-08-13 18:02:59,361] INFO in app: ==================================================
[2025-08-13 18:02:59,371] INFO in app: Application logging initialized successfully
[2025-08-13 18:02:59,374] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:02:59,375] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:02:59,380] INFO in app: System encoding: utf-8
[2025-08-13 18:02:59,383] INFO in app: ==================================================
[2025-08-13 18:04:38,787] INFO in app: ==================================================
[2025-08-13 18:04:38,813] INFO in app: Application logging initialized successfully
[2025-08-13 18:04:38,820] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:04:38,838] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:04:38,853] INFO in app: System encoding: utf-8
[2025-08-13 18:04:38,882] INFO in app: ==================================================
[2025-08-13 18:04:48,353] INFO in app: ==================================================
[2025-08-13 18:04:48,359] INFO in app: Application logging initialized successfully
[2025-08-13 18:04:48,362] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:04:48,367] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:04:48,371] INFO in app: System encoding: utf-8
[2025-08-13 18:04:48,373] INFO in app: ==================================================
[2025-08-13 18:07:19,400] INFO in app: ==================================================
[2025-08-13 18:07:19,416] INFO in app: Application logging initialized successfully
[2025-08-13 18:07:19,420] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:07:19,425] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:07:19,428] INFO in app: System encoding: utf-8
[2025-08-13 18:07:19,431] INFO in app: ==================================================
[2025-08-13 18:07:55,429] INFO in app: ==================================================
[2025-08-13 18:07:55,439] INFO in app: Application logging initialized successfully
[2025-08-13 18:07:55,442] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:07:55,444] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:07:55,449] INFO in app: System encoding: utf-8
[2025-08-13 18:07:55,453] INFO in app: ==================================================
[2025-08-13 18:12:55,867] INFO in app: ==================================================
[2025-08-13 18:12:55,873] INFO in app: Application logging initialized successfully
[2025-08-13 18:12:55,876] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:12:55,878] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:12:55,881] INFO in app: System encoding: utf-8
[2025-08-13 18:12:55,887] INFO in app: ==================================================
[2025-08-13 18:18:38,694] INFO in app: ==================================================
[2025-08-13 18:18:38,704] INFO in app: Application logging initialized successfully
[2025-08-13 18:18:38,706] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:18:38,707] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:18:38,709] INFO in app: System encoding: utf-8
[2025-08-13 18:18:38,715] INFO in app: ==================================================
[2025-08-13 18:25:03,792] INFO in app: ==================================================
[2025-08-13 18:25:03,800] INFO in app: Application logging initialized successfully
[2025-08-13 18:25:03,802] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:25:03,807] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:25:03,809] INFO in app: System encoding: utf-8
[2025-08-13 18:25:03,813] INFO in app: ==================================================
[2025-08-13 18:36:35,489] INFO in app: ==================================================
[2025-08-13 18:36:35,495] INFO in app: Application logging initialized successfully
[2025-08-13 18:36:35,497] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:36:35,500] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:36:35,503] INFO in app: System encoding: utf-8
[2025-08-13 18:36:35,507] INFO in app: ==================================================
[2025-08-13 18:36:49,344] ERROR in app: Exception on /dashboard/sales [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8098, in sales_dashboard
    return render_template(
        "dashboard/sales_dashboard.html",
    ...<5 lines>...
        notif=notif
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 177, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 17, in block 'content'
    {% include "dashboard/_tabs.html" with context %}
    ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\_tabs.html", line 22, in top-level template code
    href="{{ url_for('gender_dashboard') }}">
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'gender_dashboard'. Did you mean 'team_leader_dashboard' instead?
[2025-08-13 18:37:31,194] INFO in app: ==================================================
[2025-08-13 18:37:31,200] INFO in app: Application logging initialized successfully
[2025-08-13 18:37:31,202] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:37:31,204] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:37:31,206] INFO in app: System encoding: utf-8
[2025-08-13 18:37:31,209] INFO in app: ==================================================
[2025-08-13 18:37:38,688] ERROR in app: Exception on /sales-by-gender [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8374, in gender_dashboard
    return render_template("sales_by_gender.html", active_tab='gender')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 65, in get_source
    return self._get_source_fast(environment, template)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 99, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: sales_by_gender.html
[2025-08-13 18:38:26,782] INFO in app: ==================================================
[2025-08-13 18:38:26,788] INFO in app: Application logging initialized successfully
[2025-08-13 18:38:26,790] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:38:26,792] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:38:26,794] INFO in app: System encoding: utf-8
[2025-08-13 18:38:26,798] INFO in app: ==================================================
[2025-08-13 18:40:05,639] INFO in app: ==================================================
[2025-08-13 18:40:05,646] INFO in app: Application logging initialized successfully
[2025-08-13 18:40:05,648] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:40:05,650] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:40:05,652] INFO in app: System encoding: utf-8
[2025-08-13 18:40:05,655] INFO in app: ==================================================
[2025-08-13 18:41:35,756] INFO in app: ==================================================
[2025-08-13 18:41:35,764] INFO in app: Application logging initialized successfully
[2025-08-13 18:41:35,767] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:41:35,769] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:41:35,772] INFO in app: System encoding: utf-8
[2025-08-13 18:41:35,776] INFO in app: ==================================================
[2025-08-13 18:48:56,236] INFO in app: ==================================================
[2025-08-13 18:48:56,244] INFO in app: Application logging initialized successfully
[2025-08-13 18:48:56,246] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:48:56,247] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:48:56,249] INFO in app: System encoding: utf-8
[2025-08-13 18:48:56,253] INFO in app: ==================================================
[2025-08-13 18:51:59,474] INFO in app: ==================================================
[2025-08-13 18:51:59,483] INFO in app: Application logging initialized successfully
[2025-08-13 18:51:59,486] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:51:59,489] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:51:59,497] INFO in app: System encoding: utf-8
[2025-08-13 18:51:59,499] INFO in app: ==================================================
[2025-08-13 18:55:06,829] INFO in app: ==================================================
[2025-08-13 18:55:06,836] INFO in app: Application logging initialized successfully
[2025-08-13 18:55:06,838] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:55:06,840] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:55:06,841] INFO in app: System encoding: utf-8
[2025-08-13 18:55:06,848] INFO in app: ==================================================
[2025-08-13 18:55:13,947] ERROR in app: Exception on /sales-by-gender [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8374, in gender_dashboard
    return render_template("sales_by_gender.html", active_tab='gender')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 65, in get_source
    return self._get_source_fast(environment, template)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 99, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: sales_by_gender.html
[2025-08-13 18:55:48,093] INFO in app: ==================================================
[2025-08-13 18:55:48,099] INFO in app: Application logging initialized successfully
[2025-08-13 18:55:48,103] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:55:48,105] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:55:48,107] INFO in app: System encoding: utf-8
[2025-08-13 18:55:48,111] INFO in app: ==================================================
[2025-08-13 18:58:12,524] INFO in app: ==================================================
[2025-08-13 18:58:12,530] INFO in app: Application logging initialized successfully
[2025-08-13 18:58:12,534] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 18:58:12,539] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 18:58:12,542] INFO in app: System encoding: utf-8
[2025-08-13 18:58:12,544] INFO in app: ==================================================
[2025-08-13 19:05:10,452] INFO in app: ==================================================
[2025-08-13 19:05:10,466] INFO in app: Application logging initialized successfully
[2025-08-13 19:05:10,469] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 19:05:10,470] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 19:05:10,472] INFO in app: System encoding: utf-8
[2025-08-13 19:05:10,481] INFO in app: ==================================================
[2025-08-13 19:13:16,746] INFO in app: ==================================================
[2025-08-13 19:13:16,758] INFO in app: Application logging initialized successfully
[2025-08-13 19:13:16,775] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 19:13:16,849] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 19:13:16,852] INFO in app: System encoding: utf-8
[2025-08-13 19:13:16,902] INFO in app: ==================================================
[2025-08-13 19:16:35,949] INFO in app: ==================================================
[2025-08-13 19:16:35,956] INFO in app: Application logging initialized successfully
[2025-08-13 19:16:35,958] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 19:16:35,969] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 19:16:35,971] INFO in app: System encoding: utf-8
[2025-08-13 19:16:35,972] INFO in app: ==================================================
[2025-08-13 19:16:53,879] ERROR in app: Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8387, in dashboard_gender_data
    case(
    ~~~~^
        [
        ^
    ...<9 lines>...
        else_=0
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\_elements_constructors.py", line 853, in case
    return Case(*whens, value=value, else_=else_)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 3339, in __init__
    new_whens: Iterable[Any] = coercions._expression_collection_was_a_list(
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        "whens", "case", whens
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 151, in _expression_collection_was_a_list
    raise exc.ArgumentError(
    ...<4 lines>...
    )
sqlalchemy.exc.ArgumentError: The "whens" argument to case(), when referring to a sequence of items, is now passed as a series of positional elements, rather than as a list. 
[2025-08-13 19:23:27,478] INFO in app: ==================================================
[2025-08-13 19:23:27,486] INFO in app: Application logging initialized successfully
[2025-08-13 19:23:27,490] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 19:23:27,495] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 19:23:27,501] INFO in app: System encoding: utf-8
[2025-08-13 19:23:27,506] INFO in app: ==================================================
[2025-08-13 19:28:14,215] INFO in app: ==================================================
[2025-08-13 19:28:14,221] INFO in app: Application logging initialized successfully
[2025-08-13 19:28:14,225] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 19:28:14,227] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 19:28:14,232] INFO in app: System encoding: utf-8
[2025-08-13 19:28:14,233] INFO in app: ==================================================
[2025-08-13 19:31:31,849] INFO in app: ==================================================
[2025-08-13 19:31:31,860] INFO in app: Application logging initialized successfully
[2025-08-13 19:31:31,863] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 19:31:31,865] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 19:31:31,868] INFO in app: System encoding: utf-8
[2025-08-13 19:31:31,869] INFO in app: ==================================================
[2025-08-13 19:40:34,850] INFO in app: ==================================================
[2025-08-13 19:40:34,863] INFO in app: Application logging initialized successfully
[2025-08-13 19:40:34,866] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 19:40:34,871] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 19:40:34,877] INFO in app: System encoding: utf-8
[2025-08-13 19:40:34,882] INFO in app: ==================================================
[2025-08-13 19:47:07,555] INFO in app: ==================================================
[2025-08-13 19:47:07,566] INFO in app: Application logging initialized successfully
[2025-08-13 19:47:07,568] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 19:47:07,570] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 19:47:07,576] INFO in app: System encoding: utf-8
[2025-08-13 19:47:07,582] INFO in app: ==================================================
[2025-08-13 19:50:06,416] INFO in app: ==================================================
[2025-08-13 19:50:06,426] INFO in app: Application logging initialized successfully
[2025-08-13 19:50:06,432] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 19:50:06,440] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 19:50:06,443] INFO in app: System encoding: utf-8
[2025-08-13 19:50:06,445] INFO in app: ==================================================
[2025-08-13 19:50:38,133] INFO in app: ==================================================
[2025-08-13 19:50:38,145] INFO in app: Application logging initialized successfully
[2025-08-13 19:50:38,147] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 19:50:38,149] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 19:50:38,151] INFO in app: System encoding: utf-8
[2025-08-13 19:50:38,160] INFO in app: ==================================================
[2025-08-13 21:18:30,548] INFO in app: ==================================================
[2025-08-13 21:18:30,741] INFO in app: Application logging initialized successfully
[2025-08-13 21:18:30,745] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 21:18:30,751] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 21:18:30,763] INFO in app: System encoding: utf-8
[2025-08-13 21:18:30,765] INFO in app: ==================================================
[2025-08-13 22:43:45,558] INFO in app: ==================================================
[2025-08-13 22:43:45,564] INFO in app: Application logging initialized successfully
[2025-08-13 22:43:45,566] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-13 22:43:45,570] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-13 22:43:45,572] INFO in app: System encoding: utf-8
[2025-08-13 22:43:45,575] INFO in app: ==================================================
[2025-08-14 17:04:24,697] INFO in app: ==================================================
[2025-08-14 17:04:24,784] INFO in app: Application logging initialized successfully
[2025-08-14 17:04:24,785] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 17:04:24,787] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 17:04:24,788] INFO in app: System encoding: utf-8
[2025-08-14 17:04:24,790] INFO in app: ==================================================
[2025-08-14 17:11:30,154] INFO in app: ==================================================
[2025-08-14 17:11:30,164] INFO in app: Application logging initialized successfully
[2025-08-14 17:11:30,165] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 17:11:30,167] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 17:11:30,172] INFO in app: System encoding: utf-8
[2025-08-14 17:11:30,175] INFO in app: ==================================================
[2025-08-14 17:20:25,168] INFO in app: ==================================================
[2025-08-14 17:20:25,177] INFO in app: Application logging initialized successfully
[2025-08-14 17:20:25,179] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 17:20:25,181] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 17:20:25,183] INFO in app: System encoding: utf-8
[2025-08-14 17:20:25,185] INFO in app: ==================================================
[2025-08-14 17:30:00,393] INFO in app: ==================================================
[2025-08-14 17:30:00,418] INFO in app: Application logging initialized successfully
[2025-08-14 17:30:00,421] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 17:30:00,424] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 17:30:00,438] INFO in app: System encoding: utf-8
[2025-08-14 17:30:00,441] INFO in app: ==================================================
[2025-08-14 17:40:17,548] INFO in app: ==================================================
[2025-08-14 17:40:17,555] INFO in app: Application logging initialized successfully
[2025-08-14 17:40:17,558] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 17:40:17,560] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 17:40:17,562] INFO in app: System encoding: utf-8
[2025-08-14 17:40:17,567] INFO in app: ==================================================
[2025-08-14 17:40:45,964] ERROR in app: Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such function: str_to_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8429, in dashboard_gender_data
    results = query.group_by(category).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such function: str_to_date
[SQL: SELECT CASE WHEN (lower(customers.gender) LIKE lower(?)) THEN ? WHEN (lower(customers.gender) LIKE lower(?)) THEN ? WHEN ((? - CAST(STRFTIME('%Y', str_to_date(customers.dob, ?)) AS INTEGER)) - CASE WHEN (CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) < ? OR CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) = ? AND CAST(STRFTIME('%d', str_to_date(customers.dob, ?)) AS INTEGER) <= ?) THEN ? ELSE ? END < ?) THEN ? ELSE ? END AS category, count(loan_applications.id) AS sales_count, coalesce(sum(loan_applications.loan_amount), ?) AS total_sales 
FROM loan_applications JOIN customers ON customers.id = loan_applications.customer_id GROUP BY CASE WHEN (lower(customers.gender) LIKE lower(?)) THEN ? WHEN (lower(customers.gender) LIKE lower(?)) THEN ? WHEN ((? - CAST(STRFTIME('%Y', str_to_date(customers.dob, ?)) AS INTEGER)) - CASE WHEN (CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) < ? OR CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) = ? AND CAST(STRFTIME('%d', str_to_date(customers.dob, ?)) AS INTEGER) <= ?) THEN ? ELSE ? END < ?) THEN ? ELSE ? END]
[parameters: ('male', 'Male', 'female', 'Female', 2025, '%Y-%m-%d', '%Y-%m-%d', 8, '%Y-%m-%d', 8, '%Y-%m-%d', 14, 1, 0, 35, 'Youth', 'Other', 0, 'male', 'Male', 'female', 'Female', 2025, '%Y-%m-%d', '%Y-%m-%d', 8, '%Y-%m-%d', 8, '%Y-%m-%d', 14, 1, 0, 35, 'Youth', 'Other')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2025-08-14 17:45:34,758] INFO in app: ==================================================
[2025-08-14 17:45:34,785] INFO in app: Application logging initialized successfully
[2025-08-14 17:45:34,789] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 17:45:34,791] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 17:45:34,803] INFO in app: System encoding: utf-8
[2025-08-14 17:45:34,806] INFO in app: ==================================================
[2025-08-14 17:45:41,802] ERROR in app: Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such function: str_to_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8437, in dashboard_gender_data
    results = query.group_by(category).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such function: str_to_date
[SQL: SELECT CASE WHEN ((? - CAST(STRFTIME('%Y', str_to_date(customers.dob, ?)) AS INTEGER)) - CASE WHEN (CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) < ? OR CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) = ? AND CAST(STRFTIME('%d', str_to_date(customers.dob, ?)) AS INTEGER) <= ?) THEN ? ELSE ? END < ?) THEN ? WHEN (lower(customers.gender) LIKE lower(?)) THEN ? WHEN (lower(customers.gender) LIKE lower(?)) THEN ? ELSE ? END AS category, count(loan_applications.id) AS sales_count, coalesce(sum(loan_applications.loan_amount), ?) AS total_sales 
FROM loan_applications JOIN customers ON customers.id = loan_applications.customer_id GROUP BY CASE WHEN ((? - CAST(STRFTIME('%Y', str_to_date(customers.dob, ?)) AS INTEGER)) - CASE WHEN (CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) < ? OR CAST(STRFTIME('%m', str_to_date(customers.dob, ?)) AS INTEGER) = ? AND CAST(STRFTIME('%d', str_to_date(customers.dob, ?)) AS INTEGER) <= ?) THEN ? ELSE ? END < ?) THEN ? WHEN (lower(customers.gender) LIKE lower(?)) THEN ? WHEN (lower(customers.gender) LIKE lower(?)) THEN ? ELSE ? END]
[parameters: (2025, '%Y-%m-%d', '%Y-%m-%d', 8, '%Y-%m-%d', 8, '%Y-%m-%d', 14, 1, 0, 35, 'Youth', 'male', 'Male', 'female', 'Female', 'Other', 0, 2025, '%Y-%m-%d', '%Y-%m-%d', 8, '%Y-%m-%d', 8, '%Y-%m-%d', 14, 1, 0, 35, 'Youth', 'male', 'Male', 'female', 'Female', 'Other')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2025-08-14 17:57:09,456] INFO in app: ==================================================
[2025-08-14 17:57:09,468] INFO in app: Application logging initialized successfully
[2025-08-14 17:57:09,472] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 17:57:09,476] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 17:57:09,485] INFO in app: System encoding: utf-8
[2025-08-14 17:57:09,487] INFO in app: ==================================================
[2025-08-14 17:57:15,790] ERROR in app: Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8409, in dashboard_gender_data
    ).else_(literal(0)))
      ^^^^^
AttributeError: 'tuple' object has no attribute 'else_'
[2025-08-14 17:59:58,037] INFO in app: ==================================================
[2025-08-14 17:59:58,046] INFO in app: Application logging initialized successfully
[2025-08-14 17:59:58,049] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 17:59:58,051] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 17:59:58,057] INFO in app: System encoding: utf-8
[2025-08-14 17:59:58,060] INFO in app: ==================================================
[2025-08-14 18:00:42,484] INFO in app: ==================================================
[2025-08-14 18:00:42,493] INFO in app: Application logging initialized successfully
[2025-08-14 18:00:42,496] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 18:00:42,501] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 18:00:42,503] INFO in app: System encoding: utf-8
[2025-08-14 18:00:42,508] INFO in app: ==================================================
[2025-08-14 18:00:54,080] ERROR in app: Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8405, in dashboard_gender_data
    birthday_passed = case(
        [
    ...<6 lines>...
        else_=literal(0)
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\_elements_constructors.py", line 853, in case
    return Case(*whens, value=value, else_=else_)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 3339, in __init__
    new_whens: Iterable[Any] = coercions._expression_collection_was_a_list(
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        "whens", "case", whens
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 151, in _expression_collection_was_a_list
    raise exc.ArgumentError(
    ...<4 lines>...
    )
sqlalchemy.exc.ArgumentError: The "whens" argument to case(), when referring to a sequence of items, is now passed as a series of positional elements, rather than as a list. 
[2025-08-14 18:08:37,494] INFO in app: ==================================================
[2025-08-14 18:08:37,501] INFO in app: Application logging initialized successfully
[2025-08-14 18:08:37,505] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 18:08:37,507] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 18:08:37,509] INFO in app: System encoding: utf-8
[2025-08-14 18:08:37,516] INFO in app: ==================================================
[2025-08-14 18:08:45,772] ERROR in app: Exception on /dashboard-gender-data [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8405, in dashboard_gender_data
    birthday_passed = case(
        [
    ...<6 lines>...
        else_=literal(0)
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\_elements_constructors.py", line 853, in case
    return Case(*whens, value=value, else_=else_)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 3339, in __init__
    new_whens: Iterable[Any] = coercions._expression_collection_was_a_list(
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        "whens", "case", whens
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 151, in _expression_collection_was_a_list
    raise exc.ArgumentError(
    ...<4 lines>...
    )
sqlalchemy.exc.ArgumentError: The "whens" argument to case(), when referring to a sequence of items, is now passed as a series of positional elements, rather than as a list. 
[2025-08-14 18:08:52,035] ERROR in app: Exception on /sales-by-gender [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8382, in gender_dashboard
    return render_template("sales_by_gender.html", active_tab='gender')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\sales_by_gender.html", line 42, in template
    <p class="card-text display-5">{{ total_sales_count|number_format }}</p>
    ^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'number_format'.
[2025-08-14 18:09:06,077] ERROR in app: Exception on /sales-by-gender [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8382, in gender_dashboard
    return render_template("sales_by_gender.html", active_tab='gender')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\sales_by_gender.html", line 42, in template
    <p class="card-text display-5">{{ total_sales_count|number_format }}</p>
    ^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'number_format'.
[2025-08-14 18:12:05,375] INFO in app: ==================================================
[2025-08-14 18:12:05,382] INFO in app: Application logging initialized successfully
[2025-08-14 18:12:05,386] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 18:12:05,390] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 18:12:05,395] INFO in app: System encoding: utf-8
[2025-08-14 18:12:05,398] INFO in app: ==================================================
[2025-08-14 18:13:29,085] INFO in app: ==================================================
[2025-08-14 18:13:29,102] INFO in app: Application logging initialized successfully
[2025-08-14 18:13:29,112] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 18:13:29,115] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 18:13:29,117] INFO in app: System encoding: utf-8
[2025-08-14 18:13:29,133] INFO in app: ==================================================
[2025-08-14 18:23:51,997] INFO in app: ==================================================
[2025-08-14 18:23:52,002] INFO in app: Application logging initialized successfully
[2025-08-14 18:23:52,004] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 18:23:52,006] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 18:23:52,010] INFO in app: System encoding: utf-8
[2025-08-14 18:23:52,012] INFO in app: ==================================================
[2025-08-14 18:42:59,783] INFO in app: ==================================================
[2025-08-14 18:42:59,790] INFO in app: Application logging initialized successfully
[2025-08-14 18:42:59,793] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-14 18:42:59,795] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-14 18:42:59,797] INFO in app: System encoding: utf-8
[2025-08-14 18:42:59,799] INFO in app: ==================================================
[2025-08-15 11:31:46,204] INFO in app: ==================================================
[2025-08-15 11:31:46,312] INFO in app: Application logging initialized successfully
[2025-08-15 11:31:46,314] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-15 11:31:46,316] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-15 11:31:46,317] INFO in app: System encoding: utf-8
[2025-08-15 11:31:46,322] INFO in app: ==================================================
[2025-08-15 17:07:15,910] INFO in app: ==================================================
[2025-08-15 17:07:15,995] INFO in app: Application logging initialized successfully
[2025-08-15 17:07:15,996] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-15 17:07:15,998] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-15 17:07:16,000] INFO in app: System encoding: utf-8
[2025-08-15 17:07:16,002] INFO in app: ==================================================
[2025-08-15 21:46:23,961] INFO in app: ==================================================
[2025-08-15 21:46:24,031] INFO in app: Application logging initialized successfully
[2025-08-15 21:46:24,033] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-15 21:46:24,035] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-15 21:46:24,038] INFO in app: System encoding: utf-8
[2025-08-15 21:46:24,040] INFO in app: ==================================================
[2025-08-16 05:31:14,525] INFO in app: ==================================================
[2025-08-16 05:31:14,621] INFO in app: Application logging initialized successfully
[2025-08-16 05:31:14,623] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 05:31:14,625] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 05:31:14,642] INFO in app: System encoding: utf-8
[2025-08-16 05:31:14,647] INFO in app: ==================================================
[2025-08-16 05:46:08,594] INFO in app: ==================================================
[2025-08-16 05:46:08,664] INFO in app: Application logging initialized successfully
[2025-08-16 05:46:08,666] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 05:46:08,667] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 05:46:08,669] INFO in app: System encoding: utf-8
[2025-08-16 05:46:08,673] INFO in app: ==================================================
[2025-08-16 07:38:01,058] INFO in app: ==================================================
[2025-08-16 07:38:01,067] INFO in app: Application logging initialized successfully
[2025-08-16 07:38:01,074] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 07:38:01,082] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 07:38:01,085] INFO in app: System encoding: utf-8
[2025-08-16 07:38:01,087] INFO in app: ==================================================
[2025-08-16 07:42:24,688] INFO in app: ==================================================
[2025-08-16 07:42:24,697] INFO in app: Application logging initialized successfully
[2025-08-16 07:42:24,707] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 07:42:24,711] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 07:42:24,715] INFO in app: System encoding: utf-8
[2025-08-16 07:42:24,717] INFO in app: ==================================================
[2025-08-16 07:51:44,788] INFO in app: ==================================================
[2025-08-16 07:51:44,797] INFO in app: Application logging initialized successfully
[2025-08-16 07:51:44,801] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 07:51:44,803] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 07:51:44,806] INFO in app: System encoding: utf-8
[2025-08-16 07:51:44,812] INFO in app: ==================================================
[2025-08-16 07:54:20,858] INFO in app: ==================================================
[2025-08-16 07:54:20,865] INFO in app: Application logging initialized successfully
[2025-08-16 07:54:20,866] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 07:54:20,867] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 07:54:20,868] INFO in app: System encoding: utf-8
[2025-08-16 07:54:20,871] INFO in app: ==================================================
[2025-08-16 08:02:44,431] INFO in app: Generating repayment schedule for loan 103000019 with disbursement_date=None
[2025-08-16 08:02:44,451] INFO in app: First due date: 2025-09-25
[2025-08-16 08:02:44,466] INFO in app: Instalment 1: Due 2025-09-25, Principal 746565.36, Interest 81165.00, Fees 5000.00
[2025-08-16 08:02:44,470] INFO in app: Instalment 2: Due 2025-10-25, Principal 772695.15, Interest 55035.21, Fees 5000.00
[2025-08-16 08:02:44,473] INFO in app: Instalment 3: Due 2025-11-25, Principal 799739.49, Interest 27990.87, Fees 5000.00
[2025-08-16 08:03:09,944] INFO in app: Sending email to: alfred@kwachafinancialservices.com, sales@yourcompany.mw
[2025-08-16 08:03:09,949] ERROR in app: Sales data error: module 'time' has no attribute 'min'
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\app.py", line 8608, in get_sales_data
    today_sales = get_today_sales(today, filters)
  File "C:\Users\pc\loan-app\app.py", line 8659, in get_today_sales
    start, end = _day_bounds(today)
                 ~~~~~~~~~~~^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8596, in _day_bounds
    start = datetime.combine(d, time.min)
                                ^^^^^^^^
AttributeError: module 'time' has no attribute 'min'
[2025-08-16 08:03:16,680] INFO in app: HTML email sent to ['alfred@kwachafinancialservices.com', 'sales@yourcompany.mw']
[2025-08-16 08:10:48,525] INFO in app: ==================================================
[2025-08-16 08:10:48,534] INFO in app: Application logging initialized successfully
[2025-08-16 08:10:48,542] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:10:48,545] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:10:48,549] INFO in app: System encoding: utf-8
[2025-08-16 08:10:48,551] INFO in app: ==================================================
[2025-08-16 08:14:41,727] INFO in app: ==================================================
[2025-08-16 08:14:41,734] INFO in app: Application logging initialized successfully
[2025-08-16 08:14:41,743] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:14:41,750] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:14:41,753] INFO in app: System encoding: utf-8
[2025-08-16 08:14:41,763] INFO in app: ==================================================
[2025-08-16 08:14:51,694] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8216, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time.min)
                                                         ^^^^^^^^
AttributeError: module 'time' has no attribute 'min'
[2025-08-16 08:14:54,722] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8216, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time.min)
                                                         ^^^^^^^^
AttributeError: module 'time' has no attribute 'min'
[2025-08-16 08:15:06,863] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8216, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time.min)
                                                         ^^^^^^^^
AttributeError: module 'time' has no attribute 'min'
[2025-08-16 08:17:33,511] INFO in app: ==================================================
[2025-08-16 08:17:33,523] INFO in app: Application logging initialized successfully
[2025-08-16 08:17:33,526] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:17:33,529] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:17:33,534] INFO in app: System encoding: utf-8
[2025-08-16 08:17:33,536] INFO in app: ==================================================
[2025-08-16 08:18:39,239] INFO in app: ==================================================
[2025-08-16 08:18:39,248] INFO in app: Application logging initialized successfully
[2025-08-16 08:18:39,258] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:18:39,261] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:18:39,263] INFO in app: System encoding: utf-8
[2025-08-16 08:18:39,266] INFO in app: ==================================================
[2025-08-16 08:18:46,604] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8218, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time.min)  # 00:00:00
                                                         ^^^^^^^^
AttributeError: module 'time' has no attribute 'min'
[2025-08-16 08:18:49,507] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8218, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time.min)  # 00:00:00
                                                         ^^^^^^^^
AttributeError: module 'time' has no attribute 'min'
[2025-08-16 08:19:03,461] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8218, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time.min)  # 00:00:00
                                                         ^^^^^^^^
AttributeError: module 'time' has no attribute 'min'
[2025-08-16 08:22:34,839] INFO in app: ==================================================
[2025-08-16 08:22:34,849] INFO in app: Application logging initialized successfully
[2025-08-16 08:22:34,863] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:22:34,866] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:22:34,868] INFO in app: System encoding: utf-8
[2025-08-16 08:22:34,871] INFO in app: ==================================================
[2025-08-16 08:22:45,427] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8218, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time(0, 0, 0))  # midnight
                                                         ~~~~^^^^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
[2025-08-16 08:22:47,811] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8218, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time(0, 0, 0))  # midnight
                                                         ~~~~^^^^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
[2025-08-16 08:22:56,819] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8218, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time(0, 0, 0))  # midnight
                                                         ~~~~^^^^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
[2025-08-16 08:24:15,645] INFO in app: ==================================================
[2025-08-16 08:24:15,659] INFO in app: Application logging initialized successfully
[2025-08-16 08:24:15,667] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:24:15,671] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:24:15,674] INFO in app: System encoding: utf-8
[2025-08-16 08:24:15,676] INFO in app: ==================================================
[2025-08-16 08:24:21,419] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8219, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time(0, 0, 0))  # midnight
                                                         ~~~~^^^^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
[2025-08-16 08:25:29,066] INFO in app: ==================================================
[2025-08-16 08:25:29,088] INFO in app: Application logging initialized successfully
[2025-08-16 08:25:29,099] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:25:29,113] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:25:29,115] INFO in app: System encoding: utf-8
[2025-08-16 08:25:29,117] INFO in app: ==================================================
[2025-08-16 08:25:33,805] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8218, in sales_summary_notification
    start_of_month_dt = datetime.combine(start_of_month, time(0, 0, 0))  # midnight
                                                         ~~~~^^^^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
[2025-08-16 08:26:24,873] INFO in app: ==================================================
[2025-08-16 08:26:24,880] INFO in app: Application logging initialized successfully
[2025-08-16 08:26:24,888] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:26:24,895] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:26:24,899] INFO in app: System encoding: utf-8
[2025-08-16 08:26:24,901] INFO in app: ==================================================
[2025-08-16 08:38:14,820] INFO in app: ==================================================
[2025-08-16 08:38:14,832] INFO in app: Application logging initialized successfully
[2025-08-16 08:38:14,840] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:38:14,847] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:38:14,850] INFO in app: System encoding: utf-8
[2025-08-16 08:38:14,853] INFO in app: ==================================================
[2025-08-16 08:40:58,259] INFO in app: ==================================================
[2025-08-16 08:40:58,266] INFO in app: Application logging initialized successfully
[2025-08-16 08:40:58,271] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:40:58,280] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:40:58,282] INFO in app: System encoding: utf-8
[2025-08-16 08:40:58,284] INFO in app: ==================================================
[2025-08-16 08:44:08,266] INFO in app: ==================================================
[2025-08-16 08:44:08,283] INFO in app: Application logging initialized successfully
[2025-08-16 08:44:08,286] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:44:08,288] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:44:08,292] INFO in app: System encoding: utf-8
[2025-08-16 08:44:08,302] INFO in app: ==================================================
[2025-08-16 08:46:55,589] INFO in app: ==================================================
[2025-08-16 08:46:55,597] INFO in app: Application logging initialized successfully
[2025-08-16 08:46:55,601] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:46:55,605] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:46:55,609] INFO in app: System encoding: utf-8
[2025-08-16 08:46:55,614] INFO in app: ==================================================
[2025-08-16 08:55:50,618] INFO in app: ==================================================
[2025-08-16 08:55:50,626] INFO in app: Application logging initialized successfully
[2025-08-16 08:55:50,633] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 08:55:50,636] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 08:55:50,639] INFO in app: System encoding: utf-8
[2025-08-16 08:55:50,642] INFO in app: ==================================================
[2025-08-16 09:01:23,478] ERROR in app: Error saving document: type object 'datetime.time' has no attribute 'time'
[2025-08-16 09:01:23,485] ERROR in app: Error saving document: type object 'datetime.time' has no attribute 'time'
[2025-08-16 09:01:23,492] ERROR in app: Error saving document: type object 'datetime.time' has no attribute 'time'
[2025-08-16 09:01:23,497] ERROR in app: Error saving document: type object 'datetime.time' has no attribute 'time'
[2025-08-16 09:01:23,510] ERROR in app: Error saving document: type object 'datetime.time' has no attribute 'time'
[2025-08-16 09:01:23,518] ERROR in app: Error saving document: type object 'datetime.time' has no attribute 'time'
[2025-08-16 09:03:03,702] INFO in app: Generating repayment schedule for loan 136000020 with disbursement_date=None
[2025-08-16 09:03:03,721] INFO in app: First due date: 2025-09-25
[2025-08-16 09:03:03,724] INFO in app: Instalment 1: Due 2025-09-25, Principal 28775.45, Interest 70507.50, Fees 16800.00
[2025-08-16 09:03:03,728] INFO in app: Instalment 2: Due 2025-10-25, Principal 29782.59, Interest 69500.36, Fees 16800.00
[2025-08-16 09:03:03,741] INFO in app: Instalment 3: Due 2025-11-25, Principal 30824.98, Interest 68457.97, Fees 16800.00
[2025-08-16 09:03:03,745] INFO in app: Instalment 4: Due 2025-12-25, Principal 31903.85, Interest 67379.09, Fees 16800.00
[2025-08-16 09:03:03,756] INFO in app: Instalment 5: Due 2026-01-25, Principal 33020.49, Interest 66262.46, Fees 16800.00
[2025-08-16 09:03:03,760] INFO in app: Instalment 6: Due 2026-02-25, Principal 34176.20, Interest 65106.74, Fees 16800.00
[2025-08-16 09:03:03,769] INFO in app: Instalment 7: Due 2026-03-25, Principal 35372.37, Interest 63910.58, Fees 16800.00
[2025-08-16 09:03:03,783] INFO in app: Instalment 8: Due 2026-04-25, Principal 36610.40, Interest 62672.54, Fees 16800.00
[2025-08-16 09:03:03,787] INFO in app: Instalment 9: Due 2026-05-25, Principal 37891.77, Interest 61391.18, Fees 16800.00
[2025-08-16 09:03:03,791] INFO in app: Instalment 10: Due 2026-06-25, Principal 39217.98, Interest 60064.97, Fees 16800.00
[2025-08-16 09:03:03,796] INFO in app: Instalment 11: Due 2026-07-25, Principal 40590.61, Interest 58692.34, Fees 16800.00
[2025-08-16 09:03:03,800] INFO in app: Instalment 12: Due 2026-08-25, Principal 42011.28, Interest 57271.67, Fees 16800.00
[2025-08-16 09:03:03,806] INFO in app: Instalment 13: Due 2026-09-25, Principal 43481.67, Interest 55801.27, Fees 16800.00
[2025-08-16 09:03:03,809] INFO in app: Instalment 14: Due 2026-10-25, Principal 45003.53, Interest 54279.41, Fees 16800.00
[2025-08-16 09:03:03,812] INFO in app: Instalment 15: Due 2026-11-25, Principal 46578.66, Interest 52704.29, Fees 16800.00
[2025-08-16 09:03:03,818] INFO in app: Instalment 16: Due 2026-12-25, Principal 48208.91, Interest 51074.04, Fees 16800.00
[2025-08-16 09:03:03,822] INFO in app: Instalment 17: Due 2027-01-25, Principal 49896.22, Interest 49386.72, Fees 16800.00
[2025-08-16 09:03:03,827] INFO in app: Instalment 18: Due 2027-02-25, Principal 51642.59, Interest 47640.36, Fees 16800.00
[2025-08-16 09:03:03,832] INFO in app: Instalment 19: Due 2027-03-25, Principal 53450.08, Interest 45832.87, Fees 16800.00
[2025-08-16 09:03:03,839] INFO in app: Instalment 20: Due 2027-04-25, Principal 55320.83, Interest 43962.11, Fees 16800.00
[2025-08-16 09:03:03,845] INFO in app: Instalment 21: Due 2027-05-25, Principal 57257.06, Interest 42025.88, Fees 16800.00
[2025-08-16 09:03:03,848] INFO in app: Instalment 22: Due 2027-06-25, Principal 59261.06, Interest 40021.89, Fees 16800.00
[2025-08-16 09:03:03,851] INFO in app: Instalment 23: Due 2027-07-25, Principal 61335.20, Interest 37947.75, Fees 16800.00
[2025-08-16 09:03:03,857] INFO in app: Instalment 24: Due 2027-08-25, Principal 63481.93, Interest 35801.02, Fees 16800.00
[2025-08-16 09:03:03,865] INFO in app: Instalment 25: Due 2027-09-25, Principal 65703.80, Interest 33579.15, Fees 16800.00
[2025-08-16 09:03:03,867] INFO in app: Instalment 26: Due 2027-10-25, Principal 68003.43, Interest 31279.52, Fees 16800.00
[2025-08-16 09:03:03,870] INFO in app: Instalment 27: Due 2027-11-25, Principal 70383.55, Interest 28899.40, Fees 16800.00
[2025-08-16 09:03:03,873] INFO in app: Instalment 28: Due 2027-12-25, Principal 72846.97, Interest 26435.97, Fees 16800.00
[2025-08-16 09:03:03,884] INFO in app: Instalment 29: Due 2028-01-25, Principal 75396.62, Interest 23886.33, Fees 16800.00
[2025-08-16 09:03:03,889] INFO in app: Instalment 30: Due 2028-02-25, Principal 78035.50, Interest 21247.45, Fees 16800.00
[2025-08-16 09:03:03,893] INFO in app: Instalment 31: Due 2028-03-25, Principal 80766.74, Interest 18516.20, Fees 16800.00
[2025-08-16 09:03:03,900] INFO in app: Instalment 32: Due 2028-04-25, Principal 83593.58, Interest 15689.37, Fees 16800.00
[2025-08-16 09:03:03,905] INFO in app: Instalment 33: Due 2028-05-25, Principal 86519.35, Interest 12763.59, Fees 16800.00
[2025-08-16 09:03:03,913] INFO in app: Instalment 34: Due 2028-06-25, Principal 89547.53, Interest 9735.42, Fees 16800.00
[2025-08-16 09:03:03,917] INFO in app: Instalment 35: Due 2028-07-25, Principal 92681.69, Interest 6601.25, Fees 16800.00
[2025-08-16 09:03:03,922] INFO in app: Instalment 36: Due 2028-08-25, Principal 95925.53, Interest 3357.42, Fees 16800.00
[2025-08-16 09:03:13,119] INFO in app: [DISBURSEMENT] Loan #112000001 | Top-up of: None | Cash to Client: 1000000.0
[2025-08-16 09:03:13,134] INFO in app: [DISBURSEMENT] Loan #136000002 | Top-up of: None | Cash to Client: 1500000.0
[2025-08-16 09:03:13,139] INFO in app: [DISBURSEMENT] Loan #124000003 | Top-up of: None | Cash to Client: 1200000.0
[2025-08-16 09:03:13,147] INFO in app: [DISBURSEMENT] Loan #118000004 | Top-up of: 1 | Cash to Client: 738713.64
[2025-08-16 09:03:13,267] INFO in app: [DISBURSEMENT] Loan #136000005 | Top-up of: 4 | Cash to Client: 1276296.29
[2025-08-16 09:03:13,379] INFO in app: [DISBURSEMENT] Loan #136000006 | Top-up of: 2 | Cash to Client: 777034.17
[2025-08-16 09:03:13,402] INFO in app: [DISBURSEMENT] Loan #124000007 | Top-up of: 6 | Cash to Client: 3557378.79
[2025-08-16 09:03:13,405] INFO in app: [DISBURSEMENT] Loan #124000008 | Top-up of: 3 | Cash to Client: 2360732.08
[2025-08-16 09:03:13,433] INFO in app: [DISBURSEMENT] Loan #103000009 | Top-up of: None | Cash to Client: 1200000.0
[2025-08-16 09:03:13,436] INFO in app: [DISBURSEMENT] Loan #124000012 | Top-up of: 7 | Cash to Client: 4090282.96
[2025-08-16 09:03:13,446] INFO in app: [DISBURSEMENT] Loan #103000019 | Top-up of: None | Cash to Client: 2000000.0
[2025-08-16 09:03:13,448] INFO in app: [DISBURSEMENT] Loan #136000020 | Top-up of: None | Cash to Client: 1500000.0
[2025-08-16 09:03:25,028] ERROR in app: [DISBURSE] Error for loan 112000001: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:25,037] ERROR in app: [DISBURSE] Error for loan 136000002: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:25,051] ERROR in app: [DISBURSE] Error for loan 124000003: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:25,061] ERROR in app: [DISBURSE] Error for loan 118000004: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:25,078] ERROR in app: [DISBURSE] Error for loan 136000005: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:25,099] ERROR in app: [DISBURSE] Error for loan 136000006: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:25,111] ERROR in app: [DISBURSE] Error for loan 124000007: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:25,120] ERROR in app: [DISBURSE] Error for loan 124000008: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:25,139] ERROR in app: [DISBURSE] Error for loan 103000009: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:25,155] ERROR in app: [DISBURSE] Error for loan 124000012: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:25,161] ERROR in app: [DISBURSE] Error for loan 103000019: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:25,166] ERROR in app: [DISBURSE] Error for loan 136000020: 'LoanApplication' object has no attribute 'repayment_schedule'
[2025-08-16 09:03:27,348] INFO in app: [DISBURSEMENT] Loan #112000001 | Top-up of: None | Cash to Client: 1000000.0
[2025-08-16 09:03:27,353] INFO in app: [DISBURSEMENT] Loan #136000002 | Top-up of: None | Cash to Client: 1500000.0
[2025-08-16 09:03:27,360] INFO in app: [DISBURSEMENT] Loan #124000003 | Top-up of: None | Cash to Client: 1200000.0
[2025-08-16 09:03:27,367] INFO in app: [DISBURSEMENT] Loan #118000004 | Top-up of: 1 | Cash to Client: 738713.64
[2025-08-16 09:03:27,373] INFO in app: [DISBURSEMENT] Loan #136000005 | Top-up of: 4 | Cash to Client: 1276296.29
[2025-08-16 09:03:27,382] INFO in app: [DISBURSEMENT] Loan #136000006 | Top-up of: 2 | Cash to Client: 777034.17
[2025-08-16 09:03:27,384] INFO in app: [DISBURSEMENT] Loan #124000007 | Top-up of: 6 | Cash to Client: 3557378.79
[2025-08-16 09:03:27,388] INFO in app: [DISBURSEMENT] Loan #124000008 | Top-up of: 3 | Cash to Client: 2360732.08
[2025-08-16 09:03:27,391] INFO in app: [DISBURSEMENT] Loan #103000009 | Top-up of: None | Cash to Client: 1200000.0
[2025-08-16 09:03:27,406] INFO in app: [DISBURSEMENT] Loan #124000012 | Top-up of: 7 | Cash to Client: 4090282.96
[2025-08-16 09:03:27,411] INFO in app: [DISBURSEMENT] Loan #103000019 | Top-up of: None | Cash to Client: 2000000.0
[2025-08-16 09:03:27,416] INFO in app: [DISBURSEMENT] Loan #136000020 | Top-up of: None | Cash to Client: 1500000.0
[2025-08-16 09:08:54,078] INFO in app: ==================================================
[2025-08-16 09:08:54,087] INFO in app: Application logging initialized successfully
[2025-08-16 09:08:54,095] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 09:08:54,117] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 09:08:54,119] INFO in app: System encoding: utf-8
[2025-08-16 09:08:54,121] INFO in app: ==================================================
[2025-08-16 09:09:00,419] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8253, in sales_summary_notification
    func.coalesce(func.sum(func.case([(LoanApplication.created_at >= datetime.combine(today, datetime.min.time()),
                           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                                       LoanApplication.loan_amount)], else_=0)), 0).label("todays_sales")
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\functions.py", line 977, in __call__
    return Function(
        self.__names[-1], packagenames=tuple(self.__names[0:-1]), *c, **o
    )
TypeError: Function.__init__() got an unexpected keyword argument 'else_'
[2025-08-16 09:09:13,103] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8253, in sales_summary_notification
    func.coalesce(func.sum(func.case([(LoanApplication.created_at >= datetime.combine(today, datetime.min.time()),
                           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                                       LoanApplication.loan_amount)], else_=0)), 0).label("todays_sales")
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\functions.py", line 977, in __call__
    return Function(
        self.__names[-1], packagenames=tuple(self.__names[0:-1]), *c, **o
    )
TypeError: Function.__init__() got an unexpected keyword argument 'else_'
[2025-08-16 09:15:54,465] INFO in app: ==================================================
[2025-08-16 09:15:54,475] INFO in app: Application logging initialized successfully
[2025-08-16 09:15:54,478] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 09:15:54,482] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 09:15:54,487] INFO in app: System encoding: utf-8
[2025-08-16 09:15:54,492] INFO in app: ==================================================
[2025-08-16 09:16:00,158] ERROR in app: Exception on /notifications/sales-summary [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8257, in sales_summary_notification
    case(
    ~~~~^
        [
        ^
    ...<6 lines>...
        else_=0
        ^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\_elements_constructors.py", line 853, in case
    return Case(*whens, value=value, else_=else_)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 3339, in __init__
    new_whens: Iterable[Any] = coercions._expression_collection_was_a_list(
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        "whens", "case", whens
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 151, in _expression_collection_was_a_list
    raise exc.ArgumentError(
    ...<4 lines>...
    )
sqlalchemy.exc.ArgumentError: The "whens" argument to case(), when referring to a sequence of items, is now passed as a series of positional elements, rather than as a list. 
[2025-08-16 09:18:35,740] INFO in app: ==================================================
[2025-08-16 09:18:35,748] INFO in app: Application logging initialized successfully
[2025-08-16 09:18:35,753] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 09:18:35,756] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 09:18:35,764] INFO in app: System encoding: utf-8
[2025-08-16 09:18:35,766] INFO in app: ==================================================
[2025-08-16 09:25:01,080] INFO in app: Sending email to: alfred@kwachafinancialservices.com, sales@yourcompany.mw
[2025-08-16 09:25:07,040] INFO in app: HTML email sent to ['alfred@kwachafinancialservices.com', 'sales@yourcompany.mw']
[2025-08-16 16:10:27,782] INFO in app: ==================================================
[2025-08-16 16:10:27,853] INFO in app: Application logging initialized successfully
[2025-08-16 16:10:27,854] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-16 16:10:27,856] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-16 16:10:27,858] INFO in app: System encoding: utf-8
[2025-08-16 16:10:27,860] INFO in app: ==================================================
[2025-08-17 08:56:26,838] INFO in app: ==================================================
[2025-08-17 08:56:26,957] INFO in app: Application logging initialized successfully
[2025-08-17 08:56:26,964] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 08:56:26,970] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 08:56:26,985] INFO in app: System encoding: utf-8
[2025-08-17 08:56:26,989] INFO in app: ==================================================
[2025-08-17 09:25:16,430] INFO in app: ==================================================
[2025-08-17 09:25:16,440] INFO in app: Application logging initialized successfully
[2025-08-17 09:25:16,444] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 09:25:16,453] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 09:25:16,459] INFO in app: System encoding: utf-8
[2025-08-17 09:25:16,463] INFO in app: ==================================================
[2025-08-17 15:09:32,299] INFO in app: ==================================================
[2025-08-17 15:09:32,390] INFO in app: Application logging initialized successfully
[2025-08-17 15:09:32,392] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 15:09:32,393] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 15:09:32,395] INFO in app: System encoding: utf-8
[2025-08-17 15:09:32,399] INFO in app: ==================================================
[2025-08-17 15:48:11,780] INFO in app: ==================================================
[2025-08-17 15:48:11,791] INFO in app: Application logging initialized successfully
[2025-08-17 15:48:11,793] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 15:48:11,797] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 15:48:11,804] INFO in app: System encoding: utf-8
[2025-08-17 15:48:11,807] INFO in app: ==================================================
[2025-08-17 15:55:32,669] INFO in app: ==================================================
[2025-08-17 15:55:32,675] INFO in app: Application logging initialized successfully
[2025-08-17 15:55:32,678] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 15:55:32,679] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 15:55:32,685] INFO in app: System encoding: utf-8
[2025-08-17 15:55:32,687] INFO in app: ==================================================
[2025-08-17 15:58:05,623] INFO in app: ==================================================
[2025-08-17 15:58:05,632] INFO in app: Application logging initialized successfully
[2025-08-17 15:58:05,634] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 15:58:05,636] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 15:58:05,640] INFO in app: System encoding: utf-8
[2025-08-17 15:58:05,644] INFO in app: ==================================================
[2025-08-17 16:55:17,798] INFO in app: ==================================================
[2025-08-17 16:55:17,808] INFO in app: Application logging initialized successfully
[2025-08-17 16:55:17,819] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 16:55:17,823] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 16:55:17,827] INFO in app: System encoding: utf-8
[2025-08-17 16:55:17,853] INFO in app: ==================================================
[2025-08-17 17:05:18,284] INFO in app: ==================================================
[2025-08-17 17:05:18,293] INFO in app: Application logging initialized successfully
[2025-08-17 17:05:18,296] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 17:05:18,299] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 17:05:18,305] INFO in app: System encoding: utf-8
[2025-08-17 17:05:18,310] INFO in app: ==================================================
[2025-08-17 17:09:16,761] INFO in app: ==================================================
[2025-08-17 17:09:16,770] INFO in app: Application logging initialized successfully
[2025-08-17 17:09:16,774] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 17:09:16,781] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 17:09:16,785] INFO in app: System encoding: utf-8
[2025-08-17 17:09:16,786] INFO in app: ==================================================
[2025-08-17 17:09:30,153] INFO in app: Generating repayment schedule for loan 103000019 with disbursement_date=None
[2025-08-17 17:09:30,167] INFO in app: First due date: 2025-09-25
[2025-08-17 17:09:30,169] INFO in app: Instalment 1: Due 2025-09-25, Principal 373765.58, Interest 40635.00, Fees 2500.00
[2025-08-17 17:09:30,171] INFO in app: Instalment 2: Due 2025-10-25, Principal 386847.38, Interest 27553.20, Fees 2500.00
[2025-08-17 17:09:30,180] INFO in app: Instalment 3: Due 2025-11-25, Principal 400387.04, Interest 14013.54, Fees 2500.00
[2025-08-17 17:10:06,898] INFO in app: Generating repayment schedule for loan 136000020 with disbursement_date=None
[2025-08-17 17:10:06,904] INFO in app: First due date: 2025-09-25
[2025-08-17 17:10:06,906] INFO in app: Instalment 1: Due 2025-09-25, Principal 19197.91, Interest 47040.00, Fees 11200.00
[2025-08-17 17:10:06,911] INFO in app: Instalment 2: Due 2025-10-25, Principal 19869.84, Interest 46368.07, Fees 11200.00
[2025-08-17 17:10:06,924] INFO in app: Instalment 3: Due 2025-11-25, Principal 20565.29, Interest 45672.63, Fees 11200.00
[2025-08-17 17:10:06,934] INFO in app: Instalment 4: Due 2025-12-25, Principal 21285.07, Interest 44952.84, Fees 11200.00
[2025-08-17 17:10:06,937] INFO in app: Instalment 5: Due 2026-01-25, Principal 22030.05, Interest 44207.87, Fees 11200.00
[2025-08-17 17:10:06,939] INFO in app: Instalment 6: Due 2026-02-25, Principal 22801.10, Interest 43436.81, Fees 11200.00
[2025-08-17 17:10:06,940] INFO in app: Instalment 7: Due 2026-03-25, Principal 23599.14, Interest 42638.78, Fees 11200.00
[2025-08-17 17:10:06,951] INFO in app: Instalment 8: Due 2026-04-25, Principal 24425.11, Interest 41812.81, Fees 11200.00
[2025-08-17 17:10:06,954] INFO in app: Instalment 9: Due 2026-05-25, Principal 25279.99, Interest 40957.93, Fees 11200.00
[2025-08-17 17:10:06,955] INFO in app: Instalment 10: Due 2026-06-25, Principal 26164.79, Interest 40073.13, Fees 11200.00
[2025-08-17 17:10:06,957] INFO in app: Instalment 11: Due 2026-07-25, Principal 27080.55, Interest 39157.36, Fees 11200.00
[2025-08-17 17:10:06,966] INFO in app: Instalment 12: Due 2026-08-25, Principal 28028.37, Interest 38209.54, Fees 11200.00
[2025-08-17 17:10:06,969] INFO in app: Instalment 13: Due 2026-09-25, Principal 29009.37, Interest 37228.55, Fees 11200.00
[2025-08-17 17:10:06,971] INFO in app: Instalment 14: Due 2026-10-25, Principal 30024.70, Interest 36213.22, Fees 11200.00
[2025-08-17 17:10:06,973] INFO in app: Instalment 15: Due 2026-11-25, Principal 31075.56, Interest 35162.36, Fees 11200.00
[2025-08-17 17:10:06,978] INFO in app: Instalment 16: Due 2026-12-25, Principal 32163.20, Interest 34074.71, Fees 11200.00
[2025-08-17 17:10:06,985] INFO in app: Instalment 17: Due 2027-01-25, Principal 33288.92, Interest 32949.00, Fees 11200.00
[2025-08-17 17:10:06,987] INFO in app: Instalment 18: Due 2027-02-25, Principal 34454.03, Interest 31783.89, Fees 11200.00
[2025-08-17 17:10:06,989] INFO in app: Instalment 19: Due 2027-03-25, Principal 35659.92, Interest 30578.00, Fees 11200.00
[2025-08-17 17:10:06,991] INFO in app: Instalment 20: Due 2027-04-25, Principal 36908.02, Interest 29329.90, Fees 11200.00
[2025-08-17 17:10:07,000] INFO in app: Instalment 21: Due 2027-05-25, Principal 38199.80, Interest 28038.12, Fees 11200.00
[2025-08-17 17:10:07,003] INFO in app: Instalment 22: Due 2027-06-25, Principal 39536.79, Interest 26701.12, Fees 11200.00
[2025-08-17 17:10:07,004] INFO in app: Instalment 23: Due 2027-07-25, Principal 40920.58, Interest 25317.34, Fees 11200.00
[2025-08-17 17:10:07,007] INFO in app: Instalment 24: Due 2027-08-25, Principal 42352.80, Interest 23885.12, Fees 11200.00
[2025-08-17 17:10:07,008] INFO in app: Instalment 25: Due 2027-09-25, Principal 43835.15, Interest 22402.77, Fees 11200.00
[2025-08-17 17:10:07,017] INFO in app: Instalment 26: Due 2027-10-25, Principal 45369.38, Interest 20868.54, Fees 11200.00
[2025-08-17 17:10:07,019] INFO in app: Instalment 27: Due 2027-11-25, Principal 46957.30, Interest 19280.61, Fees 11200.00
[2025-08-17 17:10:07,021] INFO in app: Instalment 28: Due 2027-12-25, Principal 48600.81, Interest 17637.10, Fees 11200.00
[2025-08-17 17:10:07,023] INFO in app: Instalment 29: Due 2028-01-25, Principal 50301.84, Interest 15936.08, Fees 11200.00
[2025-08-17 17:10:07,025] INFO in app: Instalment 30: Due 2028-02-25, Principal 52062.40, Interest 14175.51, Fees 11200.00
[2025-08-17 17:10:07,035] INFO in app: Instalment 31: Due 2028-03-25, Principal 53884.59, Interest 12353.33, Fees 11200.00
[2025-08-17 17:10:07,037] INFO in app: Instalment 32: Due 2028-04-25, Principal 55770.55, Interest 10467.37, Fees 11200.00
[2025-08-17 17:10:07,039] INFO in app: Instalment 33: Due 2028-05-25, Principal 57722.52, Interest 8515.40, Fees 11200.00
[2025-08-17 17:10:07,040] INFO in app: Instalment 34: Due 2028-06-25, Principal 59742.81, Interest 6495.11, Fees 11200.00
[2025-08-17 17:10:07,049] INFO in app: Instalment 35: Due 2028-07-25, Principal 61833.80, Interest 4404.11, Fees 11200.00
[2025-08-17 17:10:07,051] INFO in app: Instalment 36: Due 2028-08-25, Principal 63997.95, Interest 2239.96, Fees 11200.00
[2025-08-17 18:40:24,363] INFO in app: ==================================================
[2025-08-17 18:40:24,372] INFO in app: Application logging initialized successfully
[2025-08-17 18:40:24,374] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 18:40:24,376] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 18:40:24,379] INFO in app: System encoding: utf-8
[2025-08-17 18:40:24,382] INFO in app: ==================================================
[2025-08-17 19:03:33,488] INFO in app: ==================================================
[2025-08-17 19:03:33,494] INFO in app: Application logging initialized successfully
[2025-08-17 19:03:33,499] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 19:03:33,500] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 19:03:33,504] INFO in app: System encoding: utf-8
[2025-08-17 19:03:33,506] INFO in app: ==================================================
[2025-08-17 19:25:25,273] INFO in app: ==================================================
[2025-08-17 19:25:25,279] INFO in app: Application logging initialized successfully
[2025-08-17 19:25:25,281] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 19:25:25,288] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 19:25:25,295] INFO in app: System encoding: utf-8
[2025-08-17 19:25:25,298] INFO in app: ==================================================
[2025-08-17 19:26:24,611] INFO in app: ==================================================
[2025-08-17 19:26:24,628] INFO in app: Application logging initialized successfully
[2025-08-17 19:26:24,635] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 19:26:24,637] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 19:26:24,640] INFO in app: System encoding: utf-8
[2025-08-17 19:26:24,642] INFO in app: ==================================================
[2025-08-17 20:27:34,028] INFO in app: ==================================================
[2025-08-17 20:27:34,036] INFO in app: Application logging initialized successfully
[2025-08-17 20:27:34,039] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 20:27:34,041] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 20:27:34,044] INFO in app: System encoding: utf-8
[2025-08-17 20:27:34,049] INFO in app: ==================================================
[2025-08-17 20:28:07,714] ERROR in app: Exception on /reports [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5721, in generate_report
    "CRB Fee": loan.crb_fee,
               ^^^^^^^^^^^^
AttributeError: 'LoanApplication' object has no attribute 'crb_fee'. Did you mean: 'crb_fees'?
[2025-08-17 20:30:48,503] INFO in app: ==================================================
[2025-08-17 20:30:48,510] INFO in app: Application logging initialized successfully
[2025-08-17 20:30:48,515] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 20:30:48,517] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 20:30:48,521] INFO in app: System encoding: utf-8
[2025-08-17 20:30:48,523] INFO in app: ==================================================
[2025-08-17 20:31:06,069] ERROR in app: Exception on /reports [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5736, in generate_report
    with pd.ExcelWriter(output, engine="xlsxwriter") as writer:
         ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\pandas\io\excel\_xlsxwriter.py", line 197, in __init__
    from xlsxwriter import Workbook
ModuleNotFoundError: No module named 'xlsxwriter'
[2025-08-17 20:32:28,480] INFO in app: ==================================================
[2025-08-17 20:32:28,488] INFO in app: Application logging initialized successfully
[2025-08-17 20:32:28,493] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 20:32:28,495] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 20:32:28,500] INFO in app: System encoding: utf-8
[2025-08-17 20:32:28,502] INFO in app: ==================================================
[2025-08-17 20:37:24,975] INFO in app: ==================================================
[2025-08-17 20:37:24,983] INFO in app: Application logging initialized successfully
[2025-08-17 20:37:24,985] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-17 20:37:24,987] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-17 20:37:24,990] INFO in app: System encoding: utf-8
[2025-08-17 20:37:24,997] INFO in app: ==================================================
[2025-08-17 20:38:56,821] INFO in app: Generating repayment schedule for loan 103000021 with disbursement_date=None
[2025-08-17 20:38:56,849] INFO in app: First due date: 2025-09-25
[2025-08-17 20:38:56,854] INFO in app: Instalment 1: Due 2025-09-25, Principal 373765.58, Interest 40635.00, Fees 2500.00
[2025-08-17 20:38:56,860] INFO in app: Instalment 2: Due 2025-10-25, Principal 386847.38, Interest 27553.20, Fees 2500.00
[2025-08-17 20:38:56,875] INFO in app: Instalment 3: Due 2025-11-25, Principal 400387.04, Interest 14013.54, Fees 2500.00
[2025-08-17 20:39:42,595] INFO in app: Generating repayment schedule for loan 103000022 with disbursement_date=None
[2025-08-17 20:39:42,613] INFO in app: First due date: 2025-09-25
[2025-08-17 20:39:42,627] INFO in app: Instalment 1: Due 2025-09-25, Principal 746565.36, Interest 81165.00, Fees 5000.00
[2025-08-17 20:39:42,632] INFO in app: Instalment 2: Due 2025-10-25, Principal 772695.15, Interest 55035.21, Fees 5000.00
[2025-08-17 20:39:42,645] INFO in app: Instalment 3: Due 2025-11-25, Principal 799739.49, Interest 27990.87, Fees 5000.00
[2025-08-17 20:41:01,814] INFO in app: [TOPUP] Submit route hit for loan 1
[2025-08-17 20:41:49,276] INFO in app: [TOPUP] Submit route hit for loan 15
[2025-08-17 20:41:49,458] INFO in app: Generating repayment schedule for loan 103000023 with disbursement_date=None
[2025-08-17 20:41:49,477] INFO in app: First due date: 2025-09-25
[2025-08-17 20:41:49,481] INFO in app: Instalment 1: Due 2025-09-25, Principal 373765.58, Interest 40635.00, Fees 2500.00
[2025-08-17 20:41:49,484] INFO in app: Instalment 2: Due 2025-10-25, Principal 386847.38, Interest 27553.20, Fees 2500.00
[2025-08-17 20:41:49,487] INFO in app: Instalment 3: Due 2025-11-25, Principal 400387.04, Interest 14013.54, Fees 2500.00
[2025-08-17 20:41:49,497] INFO in app: [124000015] Top-up payment  principal: 0.0, top-up interest: 0.0
[2025-08-17 20:41:49,529] INFO in app: [124000015] Loan closed after top-up payment.
[2025-08-18 05:22:35,032] INFO in app: ==================================================
[2025-08-18 05:22:35,181] INFO in app: Application logging initialized successfully
[2025-08-18 05:22:35,184] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-18 05:22:35,187] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-18 05:22:35,190] INFO in app: System encoding: utf-8
[2025-08-18 05:22:35,202] INFO in app: ==================================================
[2025-08-18 05:27:38,329] INFO in app: CSV headers: ['loan_number', 'created_at', ' loan_amount ', 'term_months', 'interest_rate', 'application_status', 'loan_state', 'performance_status', 'client_name', 'national_id', 'phone_number', 'email', 'business_name', 'business_sector', 'business_address']
[2025-08-19 14:26:57,878] INFO in app: ==================================================
[2025-08-19 14:26:57,975] INFO in app: Application logging initialized successfully
[2025-08-19 14:26:57,976] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 14:26:57,978] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 14:26:57,982] INFO in app: System encoding: utf-8
[2025-08-19 14:26:57,989] INFO in app: ==================================================
[2025-08-19 15:06:05,048] INFO in app: ==================================================
[2025-08-19 15:06:05,058] INFO in app: Application logging initialized successfully
[2025-08-19 15:06:05,060] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 15:06:05,062] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 15:06:05,064] INFO in app: System encoding: utf-8
[2025-08-19 15:06:05,066] INFO in app: ==================================================
[2025-08-19 15:06:26,600] INFO in app: ==================================================
[2025-08-19 15:06:26,608] INFO in app: Application logging initialized successfully
[2025-08-19 15:06:26,610] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 15:06:26,617] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 15:06:26,620] INFO in app: System encoding: utf-8
[2025-08-19 15:06:26,621] INFO in app: ==================================================
[2025-08-19 15:11:38,543] INFO in app: ==================================================
[2025-08-19 15:11:38,551] INFO in app: Application logging initialized successfully
[2025-08-19 15:11:38,554] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 15:11:38,560] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 15:11:38,567] INFO in app: System encoding: utf-8
[2025-08-19 15:11:38,569] INFO in app: ==================================================
[2025-08-19 15:14:56,888] INFO in app: ==================================================
[2025-08-19 15:14:56,898] INFO in app: Application logging initialized successfully
[2025-08-19 15:14:56,902] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 15:14:56,906] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 15:14:56,913] INFO in app: System encoding: utf-8
[2025-08-19 15:14:56,915] INFO in app: ==================================================
[2025-08-19 15:20:25,306] INFO in app: ==================================================
[2025-08-19 15:20:25,315] INFO in app: Application logging initialized successfully
[2025-08-19 15:20:25,318] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 15:20:25,320] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 15:20:25,328] INFO in app: System encoding: utf-8
[2025-08-19 15:20:25,332] INFO in app: ==================================================
[2025-08-19 15:24:26,178] INFO in app: ==================================================
[2025-08-19 15:24:26,190] INFO in app: Application logging initialized successfully
[2025-08-19 15:24:26,192] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 15:24:26,195] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 15:24:26,204] INFO in app: System encoding: utf-8
[2025-08-19 15:24:26,206] INFO in app: ==================================================
[2025-08-19 15:29:11,775] INFO in app: ==================================================
[2025-08-19 15:29:11,781] INFO in app: Application logging initialized successfully
[2025-08-19 15:29:11,786] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 15:29:11,789] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 15:29:11,793] INFO in app: System encoding: utf-8
[2025-08-19 15:29:11,795] INFO in app: ==================================================
[2025-08-19 15:30:42,220] INFO in app: ==================================================
[2025-08-19 15:30:42,229] INFO in app: Application logging initialized successfully
[2025-08-19 15:30:42,246] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 15:30:42,248] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 15:30:42,250] INFO in app: System encoding: utf-8
[2025-08-19 15:30:42,259] INFO in app: ==================================================
[2025-08-19 15:40:50,275] INFO in app: ==================================================
[2025-08-19 15:40:50,283] INFO in app: Application logging initialized successfully
[2025-08-19 15:40:50,287] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 15:40:50,289] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 15:40:50,291] INFO in app: System encoding: utf-8
[2025-08-19 15:40:50,296] INFO in app: ==================================================
[2025-08-19 15:55:06,348] INFO in app: ==================================================
[2025-08-19 15:55:06,355] INFO in app: Application logging initialized successfully
[2025-08-19 15:55:06,358] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 15:55:06,362] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 15:55:06,367] INFO in app: System encoding: utf-8
[2025-08-19 15:55:06,370] INFO in app: ==================================================
[2025-08-19 15:55:18,191] ERROR in app: Exception on /dashboard/sales [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8304, in sales_dashboard
    return render_template(
        "dashboard/sales_dashboard.html",
    ...<5 lines>...
        notif=notif
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 177, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 159, in block 'content'
    <td>{{ totals_row.month }}</td>
    ^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'totals_row' is undefined
[2025-08-19 16:00:20,584] INFO in app: ==================================================
[2025-08-19 16:00:20,592] INFO in app: Application logging initialized successfully
[2025-08-19 16:00:20,594] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 16:00:20,596] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 16:00:20,599] INFO in app: System encoding: utf-8
[2025-08-19 16:00:20,607] INFO in app: ==================================================
[2025-08-19 16:00:29,993] ERROR in app: Exception on /dashboard/sales [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8304, in sales_dashboard
    return render_template(
        "dashboard/sales_dashboard.html",
    ...<5 lines>...
        notif=notif
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 177, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 159, in block 'content'
    <td>{{ totals_row.month }}</td>
    ^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'totals_row' is undefined
[2025-08-19 16:01:52,902] INFO in app: ==================================================
[2025-08-19 16:01:52,912] INFO in app: Application logging initialized successfully
[2025-08-19 16:01:52,913] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 16:01:52,915] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 16:01:52,918] INFO in app: System encoding: utf-8
[2025-08-19 16:01:52,921] INFO in app: ==================================================
[2025-08-19 16:01:59,422] ERROR in app: Exception on /dashboard/sales [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8304, in sales_dashboard
    return render_template(
        "dashboard/sales_dashboard.html",
    ...<5 lines>...
        notif=notif
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 177, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 159, in block 'content'
    <td>{{ totals_row.month }}</td>
    ^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'totals_row' is undefined
[2025-08-19 16:02:03,506] ERROR in app: Exception on /dashboard/sales [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 8304, in sales_dashboard
    return render_template(
        "dashboard/sales_dashboard.html",
    ...<5 lines>...
        notif=notif
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 177, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\dashboard\sales_dashboard.html", line 159, in block 'content'
    <td>{{ totals_row.month }}</td>
    ^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'totals_row' is undefined
[2025-08-19 16:02:59,314] INFO in app: ==================================================
[2025-08-19 16:02:59,322] INFO in app: Application logging initialized successfully
[2025-08-19 16:02:59,324] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 16:02:59,326] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 16:02:59,329] INFO in app: System encoding: utf-8
[2025-08-19 16:02:59,337] INFO in app: ==================================================
[2025-08-19 16:07:55,377] INFO in app: ==================================================
[2025-08-19 16:07:55,386] INFO in app: Application logging initialized successfully
[2025-08-19 16:07:55,388] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 16:07:55,390] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 16:07:55,392] INFO in app: System encoding: utf-8
[2025-08-19 16:07:55,394] INFO in app: ==================================================
[2025-08-19 16:12:46,538] INFO in app: ==================================================
[2025-08-19 16:12:46,545] INFO in app: Application logging initialized successfully
[2025-08-19 16:12:46,548] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 16:12:46,556] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 16:12:46,564] INFO in app: System encoding: utf-8
[2025-08-19 16:12:46,571] INFO in app: ==================================================
[2025-08-19 16:21:11,958] INFO in app: ==================================================
[2025-08-19 16:21:11,965] INFO in app: Application logging initialized successfully
[2025-08-19 16:21:11,969] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 16:21:11,971] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 16:21:11,973] INFO in app: System encoding: utf-8
[2025-08-19 16:21:11,974] INFO in app: ==================================================
[2025-08-19 17:12:19,104] INFO in app: ==================================================
[2025-08-19 17:12:19,111] INFO in app: Application logging initialized successfully
[2025-08-19 17:12:19,113] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 17:12:19,116] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 17:12:19,118] INFO in app: System encoding: utf-8
[2025-08-19 17:12:19,124] INFO in app: ==================================================
[2025-08-19 17:49:57,883] INFO in app: ==================================================
[2025-08-19 17:49:57,897] INFO in app: Application logging initialized successfully
[2025-08-19 17:49:57,902] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 17:49:57,905] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 17:49:57,908] INFO in app: System encoding: utf-8
[2025-08-19 17:49:57,911] INFO in app: ==================================================
[2025-08-19 17:54:05,075] INFO in app: ==================================================
[2025-08-19 17:54:05,092] INFO in app: Application logging initialized successfully
[2025-08-19 17:54:05,094] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 17:54:05,099] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 17:54:05,102] INFO in app: System encoding: utf-8
[2025-08-19 17:54:05,110] INFO in app: ==================================================
[2025-08-19 17:56:43,510] INFO in app: ==================================================
[2025-08-19 17:56:43,530] INFO in app: Application logging initialized successfully
[2025-08-19 17:56:43,534] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 17:56:43,536] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 17:56:43,538] INFO in app: System encoding: utf-8
[2025-08-19 17:56:43,540] INFO in app: ==================================================
[2025-08-19 18:09:51,479] INFO in app: ==================================================
[2025-08-19 18:09:51,492] INFO in app: Application logging initialized successfully
[2025-08-19 18:09:51,502] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-08-19 18:09:51,512] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-08-19 18:09:51,514] INFO in app: System encoding: utf-8
[2025-08-19 18:09:51,518] INFO in app: ==================================================
