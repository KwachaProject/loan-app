[2025-07-15 07:59:42,050] INFO in app: ==================================================
[2025-07-15 07:59:42,079] INFO in app: Application logging initialized successfully
[2025-07-15 07:59:42,085] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 07:59:42,151] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 07:59:42,251] INFO in app: System encoding: utf-8
[2025-07-15 07:59:42,317] INFO in app: ==================================================
2025-07-15 07:59:43,734 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 07:59:43,795 - INFO - [33mPress CTRL+C to quit[0m
2025-07-15 08:00:02,455 - INFO - 127.0.0.1 - - [15/Jul/2025 08:00:02] "[32mGET /admin/dashboard HTTP/1.1[0m" 302 -
2025-07-15 08:00:02,593 - INFO - 127.0.0.1 - - [15/Jul/2025 08:00:02] "GET /login?next=/admin/dashboard HTTP/1.1" 200 -
2025-07-15 08:00:02,838 - INFO - 127.0.0.1 - - [15/Jul/2025 08:00:02] "GET /static/img/logo.png HTTP/1.1" 200 -
2025-07-15 08:00:03,447 - INFO - 127.0.0.1 - - [15/Jul/2025 08:00:03] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-15 08:00:08,885 - INFO - 127.0.0.1 - - [15/Jul/2025 08:00:08] "[32mPOST /login?next=/admin/dashboard HTTP/1.1[0m" 302 -
2025-07-15 08:00:08,914 - INFO - 127.0.0.1 - - [15/Jul/2025 08:00:08] "GET / HTTP/1.1" 200 -
2025-07-15 08:00:10,616 - INFO - 127.0.0.1 - - [15/Jul/2025 08:00:10] "GET /income_report HTTP/1.1" 200 -
2025-07-15 08:00:12,804 - INFO - 127.0.0.1 - - [15/Jul/2025 08:00:12] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-15 08:00:14,852 - INFO - 127.0.0.1 - - [15/Jul/2025 08:00:14] "GET /arrears HTTP/1.1" 200 -
[2025-07-15 08:07:00,232] INFO in app: ==================================================
[2025-07-15 08:07:00,314] INFO in app: Application logging initialized successfully
[2025-07-15 08:07:00,316] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 08:07:00,318] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 08:07:00,319] INFO in app: System encoding: utf-8
[2025-07-15 08:07:00,325] INFO in app: ==================================================
2025-07-15 08:07:00,612 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 08:07:00,612 - INFO - [33mPress CTRL+C to quit[0m
2025-07-15 08:07:05,121 - INFO - 127.0.0.1 - - [15/Jul/2025 08:07:05] "GET /arrears HTTP/1.1" 200 -
2025-07-15 08:07:05,169 - INFO - 127.0.0.1 - - [15/Jul/2025 08:07:05] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-15 08:07:09,036 - INFO - 127.0.0.1 - - [15/Jul/2025 08:07:09] "GET /arrears HTTP/1.1" 200 -
[2025-07-15 08:07:22,020] INFO in app: ==================================================
[2025-07-15 08:07:22,025] INFO in app: Application logging initialized successfully
[2025-07-15 08:07:22,027] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 08:07:22,029] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 08:07:22,031] INFO in app: System encoding: utf-8
[2025-07-15 08:07:22,035] INFO in app: ==================================================
2025-07-15 08:07:22,226 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 08:07:22,226 - INFO - [33mPress CTRL+C to quit[0m
2025-07-15 08:07:26,477 - INFO - 127.0.0.1 - - [15/Jul/2025 08:07:26] "GET /arrears HTTP/1.1" 200 -
2025-07-15 08:07:26,539 - INFO - 127.0.0.1 - - [15/Jul/2025 08:07:26] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-15 08:07:31,608 - INFO - 127.0.0.1 - - [15/Jul/2025 08:07:31] "GET /arrears HTTP/1.1" 200 -
2025-07-15 08:07:35,129 - INFO - 127.0.0.1 - - [15/Jul/2025 08:07:35] "GET /arrears HTTP/1.1" 200 -
[2025-07-15 08:10:06,549] INFO in app: ==================================================
[2025-07-15 08:10:06,563] INFO in app: Application logging initialized successfully
[2025-07-15 08:10:06,579] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 08:10:06,581] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 08:10:06,586] INFO in app: System encoding: utf-8
[2025-07-15 08:10:06,591] INFO in app: ==================================================
2025-07-15 08:10:06,796 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 08:10:06,796 - INFO - [33mPress CTRL+C to quit[0m
2025-07-15 08:10:13,032 - INFO - 127.0.0.1 - - [15/Jul/2025 08:10:13] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-15 08:10:14,099 - INFO - 127.0.0.1 - - [15/Jul/2025 08:10:14] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-15 08:10:18,917 - INFO - 127.0.0.1 - - [15/Jul/2025 08:10:18] "GET /payments HTTP/1.1" 200 -
[2025-07-15 08:10:20,518] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.resolution_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5533, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.resolution_date
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 08:10:20,518 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.resolution_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5533, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.resolution_date
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 08:10:20,716 - INFO - 127.0.0.1 - - [15/Jul/2025 08:10:20] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
2025-07-15 08:10:27,149 - INFO - 127.0.0.1 - - [15/Jul/2025 08:10:27] "GET /income_report HTTP/1.1" 200 -
2025-07-15 08:10:28,705 - INFO - 127.0.0.1 - - [15/Jul/2025 08:10:28] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-15 08:10:30,853 - INFO - 127.0.0.1 - - [15/Jul/2025 08:10:30] "GET /admin/batch_import_loans HTTP/1.1" 200 -
2025-07-15 08:10:32,429 - INFO - 127.0.0.1 - - [15/Jul/2025 08:10:32] "GET /admin/permissions HTTP/1.1" 200 -
2025-07-15 08:10:33,576 - INFO - 127.0.0.1 - - [15/Jul/2025 08:10:33] "GET /admin/notifications HTTP/1.1" 200 -
2025-07-15 08:10:35,186 - INFO - 127.0.0.1 - - [15/Jul/2025 08:10:35] "GET /admin/dashboard?section=cutoff_dates HTTP/1.1" 200 -
2025-07-15 08:10:37,159 - INFO - 127.0.0.1 - - [15/Jul/2025 08:10:37] "GET /admin/reports HTTP/1.1" 200 -
2025-07-15 08:10:38,307 - INFO - 127.0.0.1 - - [15/Jul/2025 08:10:38] "GET /admin/dashboard/votes HTTP/1.1" 200 -
2025-07-15 08:10:39,739 - INFO - 127.0.0.1 - - [15/Jul/2025 08:10:39] "GET /admin/pricing HTTP/1.1" 200 -
2025-07-15 08:10:59,331 - INFO - 127.0.0.1 - - [15/Jul/2025 08:10:59] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-15 08:11:00,876 - INFO - 127.0.0.1 - - [15/Jul/2025 08:11:00] "GET /income_report HTTP/1.1" 200 -
2025-07-15 08:11:02,206 - INFO - 127.0.0.1 - - [15/Jul/2025 08:11:02] "GET /loanbook HTTP/1.1" 200 -
2025-07-15 08:11:03,546 - INFO - 127.0.0.1 - - [15/Jul/2025 08:11:03] "GET /payments HTTP/1.1" 200 -
[2025-07-15 08:11:04,798] INFO in app: [DISBURSEMENT] Loan #112000033 | Top-up of: None | Cash to Client: 1000000.0
2025-07-15 08:11:04,798 - INFO - [DISBURSEMENT] Loan #112000033 | Top-up of: None | Cash to Client: 1000000.0
2025-07-15 08:11:04,841 - INFO - 127.0.0.1 - - [15/Jul/2025 08:11:04] "GET /disbursements HTTP/1.1" 200 -
2025-07-15 08:11:05,679 - INFO - 127.0.0.1 - - [15/Jul/2025 08:11:05] "GET /loans HTTP/1.1" 200 -
2025-07-15 08:11:06,812 - INFO - 127.0.0.1 - - [15/Jul/2025 08:11:06] "GET /customers HTTP/1.1" 200 -
2025-07-15 08:11:07,691 - INFO - 127.0.0.1 - - [15/Jul/2025 08:11:07] "GET /approve_customers HTTP/1.1" 200 -
2025-07-15 08:11:08,634 - INFO - 127.0.0.1 - - [15/Jul/2025 08:11:08] "GET /register HTTP/1.1" 200 -
2025-07-15 08:11:09,629 - INFO - 127.0.0.1 - - [15/Jul/2025 08:11:09] "GET / HTTP/1.1" 200 -
2025-07-15 08:11:11,180 - INFO - 127.0.0.1 - - [15/Jul/2025 08:11:11] "GET / HTTP/1.1" 200 -
2025-07-15 08:11:12,076 - INFO - 127.0.0.1 - - [15/Jul/2025 08:11:12] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-15 08:11:13,467] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.resolution_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5533, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.resolution_date
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 08:11:13,467 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.resolution_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5533, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.resolution_date
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 08:11:13,524 - INFO - 127.0.0.1 - - [15/Jul/2025 08:11:13] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
[2025-07-15 08:18:30,290] INFO in app: ==================================================
[2025-07-15 08:18:30,296] INFO in app: Application logging initialized successfully
[2025-07-15 08:18:30,298] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 08:18:30,300] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 08:18:30,302] INFO in app: System encoding: utf-8
[2025-07-15 08:18:30,307] INFO in app: ==================================================
[2025-07-15 08:18:47,881] INFO in app: ==================================================
[2025-07-15 08:18:47,888] INFO in app: Application logging initialized successfully
[2025-07-15 08:18:47,890] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 08:18:47,891] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 08:18:47,893] INFO in app: System encoding: utf-8
[2025-07-15 08:18:47,895] INFO in app: ==================================================
[2025-07-15 08:43:24,073] INFO in app: ==================================================
[2025-07-15 08:43:24,078] INFO in app: Application logging initialized successfully
[2025-07-15 08:43:24,081] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 08:43:24,085] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 08:43:24,088] INFO in app: System encoding: utf-8
[2025-07-15 08:43:24,089] INFO in app: ==================================================
[2025-07-15 08:44:37,688] INFO in app: ==================================================
[2025-07-15 08:44:37,695] INFO in app: Application logging initialized successfully
[2025-07-15 08:44:37,697] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 08:44:37,699] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 08:44:37,701] INFO in app: System encoding: utf-8
[2025-07-15 08:44:37,704] INFO in app: ==================================================
[2025-07-15 08:51:23,105] INFO in app: ==================================================
[2025-07-15 08:51:23,112] INFO in app: Application logging initialized successfully
[2025-07-15 08:51:23,114] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 08:51:23,116] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 08:51:23,123] INFO in app: System encoding: utf-8
[2025-07-15 08:51:23,125] INFO in app: ==================================================
[2025-07-15 08:51:34,887] INFO in app: ==================================================
[2025-07-15 08:51:34,892] INFO in app: Application logging initialized successfully
[2025-07-15 08:51:34,894] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 08:51:34,896] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 08:51:34,899] INFO in app: System encoding: utf-8
[2025-07-15 08:51:34,903] INFO in app: ==================================================
[2025-07-15 08:52:16,547] INFO in app: ==================================================
[2025-07-15 08:52:16,553] INFO in app: Application logging initialized successfully
[2025-07-15 08:52:16,555] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 08:52:16,557] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 08:52:16,559] INFO in app: System encoding: utf-8
[2025-07-15 08:52:16,561] INFO in app: ==================================================
[2025-07-15 08:54:49,767] INFO in app: ==================================================
[2025-07-15 08:54:49,772] INFO in app: Application logging initialized successfully
[2025-07-15 08:54:49,774] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 08:54:49,776] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 08:54:49,778] INFO in app: System encoding: utf-8
[2025-07-15 08:54:49,779] INFO in app: ==================================================
[2025-07-15 08:55:25,139] INFO in app: ==================================================
[2025-07-15 08:55:25,145] INFO in app: Application logging initialized successfully
[2025-07-15 08:55:25,147] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 08:55:25,149] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 08:55:25,156] INFO in app: System encoding: utf-8
[2025-07-15 08:55:25,158] INFO in app: ==================================================
2025-07-15 08:55:25,411 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 08:55:25,411 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-15 08:55:28,018] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.resolution_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5533, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.resolution_date
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 08:55:28,018 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.resolution_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5533, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.resolution_date
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 08:55:28,083 - INFO - 127.0.0.1 - - [15/Jul/2025 08:55:28] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
2025-07-15 08:55:28,297 - INFO - 127.0.0.1 - - [15/Jul/2025 08:55:28] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-15 10:46:57,451] INFO in app: ==================================================
[2025-07-15 10:46:57,537] INFO in app: Application logging initialized successfully
[2025-07-15 10:46:57,538] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 10:46:57,540] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 10:46:57,541] INFO in app: System encoding: utf-8
[2025-07-15 10:46:57,544] INFO in app: ==================================================
[2025-07-15 10:48:27,681] INFO in app: ==================================================
[2025-07-15 10:48:27,687] INFO in app: Application logging initialized successfully
[2025-07-15 10:48:27,690] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 10:48:27,692] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 10:48:27,694] INFO in app: System encoding: utf-8
[2025-07-15 10:48:27,697] INFO in app: ==================================================
[2025-07-15 10:51:44,973] INFO in app: ==================================================
[2025-07-15 10:51:44,980] INFO in app: Application logging initialized successfully
[2025-07-15 10:51:44,982] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 10:51:44,984] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 10:51:44,986] INFO in app: System encoding: utf-8
[2025-07-15 10:51:44,989] INFO in app: ==================================================
[2025-07-15 10:52:23,078] INFO in app: ==================================================
[2025-07-15 10:52:23,086] INFO in app: Application logging initialized successfully
[2025-07-15 10:52:23,088] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 10:52:23,090] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 10:52:23,092] INFO in app: System encoding: utf-8
[2025-07-15 10:52:23,096] INFO in app: ==================================================
[2025-07-15 10:52:33,183] INFO in app: ==================================================
[2025-07-15 10:52:33,189] INFO in app: Application logging initialized successfully
[2025-07-15 10:52:33,191] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 10:52:33,192] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 10:52:33,194] INFO in app: System encoding: utf-8
[2025-07-15 10:52:33,276] INFO in app: ==================================================
2025-07-15 10:52:33,517 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 10:52:33,517 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-15 10:52:36,826] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.resolution_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5533, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.resolution_date
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 10:52:36,826 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.resolution_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5533, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.resolution_date
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 10:52:36,939 - INFO - 127.0.0.1 - - [15/Jul/2025 10:52:36] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
2025-07-15 10:52:37,049 - INFO - 127.0.0.1 - - [15/Jul/2025 10:52:37] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-15 10:52:38,506] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.resolution_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5533, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.resolution_date
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 10:52:38,506 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.resolution_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5533, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.resolution_date
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 10:52:38,549 - INFO - 127.0.0.1 - - [15/Jul/2025 10:52:38] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
2025-07-15 10:52:38,825 - INFO - 127.0.0.1 - - [15/Jul/2025 10:52:38] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-15 10:52:40,940] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.resolution_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5533, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.resolution_date
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 10:52:40,940 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.resolution_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5533, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.resolution_date
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 10:52:41,008 - INFO - 127.0.0.1 - - [15/Jul/2025 10:52:41] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
[2025-07-15 10:52:41,180] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.resolution_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5533, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.resolution_date
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 10:52:41,180 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.resolution_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5533, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.resolution_date
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 10:52:41,240 - INFO - 127.0.0.1 - - [15/Jul/2025 10:52:41] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
2025-07-15 10:52:42,342 - INFO - 127.0.0.1 - - [15/Jul/2025 10:52:42] "GET / HTTP/1.1" 200 -
[2025-07-15 10:52:45,347] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.resolution_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5533, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.resolution_date
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 10:52:45,347 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.resolution_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5533, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.resolution_date
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 10:52:45,383 - INFO - 127.0.0.1 - - [15/Jul/2025 10:52:45] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
[2025-07-15 10:54:15,449] INFO in app: ==================================================
[2025-07-15 10:54:15,456] INFO in app: Application logging initialized successfully
[2025-07-15 10:54:15,458] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 10:54:15,459] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 10:54:15,461] INFO in app: System encoding: utf-8
[2025-07-15 10:54:15,468] INFO in app: ==================================================
2025-07-15 10:54:15,708 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 10:54:15,708 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-15 10:54:21,823] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.resolution_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5533, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.resolution_date
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 10:54:21,823 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.resolution_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5533, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.resolution_date
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 10:54:21,867 - INFO - 127.0.0.1 - - [15/Jul/2025 10:54:21] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
2025-07-15 10:54:21,924 - INFO - 127.0.0.1 - - [15/Jul/2025 10:54:21] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-15 10:56:59,787] INFO in app: ==================================================
[2025-07-15 10:56:59,794] INFO in app: Application logging initialized successfully
[2025-07-15 10:56:59,796] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 10:56:59,798] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 10:56:59,799] INFO in app: System encoding: utf-8
[2025-07-15 10:56:59,801] INFO in app: ==================================================
[2025-07-15 10:58:02,833] INFO in app: ==================================================
[2025-07-15 10:58:02,840] INFO in app: Application logging initialized successfully
[2025-07-15 10:58:02,842] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 10:58:02,844] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 10:58:02,847] INFO in app: System encoding: utf-8
[2025-07-15 10:58:02,849] INFO in app: ==================================================
[2025-07-15 11:00:05,356] INFO in app: ==================================================
[2025-07-15 11:00:05,364] INFO in app: Application logging initialized successfully
[2025-07-15 11:00:05,366] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 11:00:05,368] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 11:00:05,370] INFO in app: System encoding: utf-8
[2025-07-15 11:00:05,373] INFO in app: ==================================================
[2025-07-15 11:03:25,796] INFO in app: ==================================================
[2025-07-15 11:03:25,802] INFO in app: Application logging initialized successfully
[2025-07-15 11:03:25,804] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 11:03:25,805] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 11:03:25,807] INFO in app: System encoding: utf-8
[2025-07-15 11:03:25,811] INFO in app: ==================================================
[2025-07-15 11:03:41,940] INFO in app: ==================================================
[2025-07-15 11:03:41,946] INFO in app: Application logging initialized successfully
[2025-07-15 11:03:41,948] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 11:03:41,950] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 11:03:41,951] INFO in app: System encoding: utf-8
[2025-07-15 11:03:41,953] INFO in app: ==================================================
2025-07-15 11:03:42,169 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 11:03:42,169 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-15 11:03:51,649] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.resolution_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5533, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.resolution_date
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 11:03:51,649 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.resolution_date

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5533, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.resolution_date
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 11:03:51,710 - INFO - 127.0.0.1 - - [15/Jul/2025 11:03:51] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
2025-07-15 11:03:51,769 - INFO - 127.0.0.1 - - [15/Jul/2025 11:03:51] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-15 11:05:30,542] INFO in app: ==================================================
[2025-07-15 11:05:30,548] INFO in app: Application logging initialized successfully
[2025-07-15 11:05:30,560] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 11:05:30,562] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 11:05:30,563] INFO in app: System encoding: utf-8
[2025-07-15 11:05:30,565] INFO in app: ==================================================
[2025-07-15 11:10:01,639] INFO in app: ==================================================
[2025-07-15 11:10:01,644] INFO in app: Application logging initialized successfully
[2025-07-15 11:10:01,647] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 11:10:01,649] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 11:10:01,651] INFO in app: System encoding: utf-8
[2025-07-15 11:10:01,653] INFO in app: ==================================================
2025-07-15 11:10:01,849 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 11:10:01,849 - INFO - [33mPress CTRL+C to quit[0m
2025-07-15 11:10:05,483 - INFO - 127.0.0.1 - - [15/Jul/2025 11:10:05] "GET /arrears HTTP/1.1" 200 -
2025-07-15 11:10:05,539 - INFO - 127.0.0.1 - - [15/Jul/2025 11:10:05] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-15 11:10:16,101 - INFO - 127.0.0.1 - - [15/Jul/2025 11:10:16] "GET /arrears HTTP/1.1" 200 -
[2025-07-15 11:11:26,400] INFO in app: ==================================================
[2025-07-15 11:11:26,407] INFO in app: Application logging initialized successfully
[2025-07-15 11:11:26,408] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 11:11:26,409] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 11:11:26,411] INFO in app: System encoding: utf-8
[2025-07-15 11:11:26,412] INFO in app: ==================================================
[2025-07-15 11:12:37,022] INFO in app: ==================================================
[2025-07-15 11:12:37,029] INFO in app: Application logging initialized successfully
[2025-07-15 11:12:37,031] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 11:12:37,033] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 11:12:37,035] INFO in app: System encoding: utf-8
[2025-07-15 11:12:37,037] INFO in app: ==================================================
2025-07-15 11:12:37,227 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 11:12:37,227 - INFO - [33mPress CTRL+C to quit[0m
2025-07-15 11:13:35,912 - INFO - 127.0.0.1 - - [15/Jul/2025 11:13:35] "GET /arrears HTTP/1.1" 200 -
2025-07-15 11:13:40,530 - INFO - 127.0.0.1 - - [15/Jul/2025 11:13:40] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-15 11:15:15,058] INFO in app: ==================================================
[2025-07-15 11:15:15,064] INFO in app: Application logging initialized successfully
[2025-07-15 11:15:15,066] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 11:15:15,068] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 11:15:15,069] INFO in app: System encoding: utf-8
[2025-07-15 11:15:15,071] INFO in app: ==================================================
2025-07-15 11:15:15,263 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 11:15:15,263 - INFO - [33mPress CTRL+C to quit[0m
2025-07-15 11:15:19,381 - INFO - 127.0.0.1 - - [15/Jul/2025 11:15:19] "GET /arrears HTTP/1.1" 200 -
2025-07-15 11:15:32,850 - INFO - 127.0.0.1 - - [15/Jul/2025 11:15:32] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-15 11:15:58,746 - INFO - 127.0.0.1 - - [15/Jul/2025 11:15:58] "GET /arrears?status=resolved&aging= HTTP/1.1" 200 -
2025-07-15 11:16:03,773 - INFO - 127.0.0.1 - - [15/Jul/2025 11:16:03] "GET /arrears?status=resolved&aging=30- HTTP/1.1" 200 -
2025-07-15 11:16:08,361 - INFO - 127.0.0.1 - - [15/Jul/2025 11:16:08] "GET /arrears?status=unresolved&aging=30- HTTP/1.1" 200 -
2025-07-15 11:16:12,163 - INFO - 127.0.0.1 - - [15/Jul/2025 11:16:12] "GET /arrears?status=unresolved&aging=60- HTTP/1.1" 200 -
2025-07-15 11:16:16,833 - INFO - 127.0.0.1 - - [15/Jul/2025 11:16:16] "GET /arrears?status=unresolved&aging= HTTP/1.1" 200 -
2025-07-15 11:30:38,569 - INFO - 127.0.0.1 - - [15/Jul/2025 11:30:38] "GET /arrears HTTP/1.1" 200 -
[2025-07-15 14:11:33,086] INFO in app: ==================================================
[2025-07-15 14:11:33,096] INFO in app: Application logging initialized successfully
[2025-07-15 14:11:33,099] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 14:11:33,100] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 14:11:33,104] INFO in app: System encoding: utf-8
[2025-07-15 14:11:33,110] INFO in app: ==================================================
2025-07-15 14:11:33,360 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 14:11:33,360 - INFO - [33mPress CTRL+C to quit[0m
2025-07-15 14:11:49,878 - INFO - 127.0.0.1 - - [15/Jul/2025 14:11:49] "GET /arrears?status=unresolved&aging= HTTP/1.1" 200 -
2025-07-15 14:11:50,776 - INFO - 127.0.0.1 - - [15/Jul/2025 14:11:50] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-15 14:28:10,772] INFO in app: ==================================================
[2025-07-15 14:28:10,781] INFO in app: Application logging initialized successfully
[2025-07-15 14:28:10,783] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 14:28:10,787] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 14:28:10,792] INFO in app: System encoding: utf-8
[2025-07-15 14:28:10,797] INFO in app: ==================================================
[2025-07-15 14:28:22,625] INFO in app: ==================================================
[2025-07-15 14:28:22,637] INFO in app: Application logging initialized successfully
[2025-07-15 14:28:22,639] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 14:28:22,641] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 14:28:22,642] INFO in app: System encoding: utf-8
[2025-07-15 14:28:22,646] INFO in app: ==================================================
[2025-07-15 15:36:18,070] INFO in app: ==================================================
[2025-07-15 15:36:18,089] INFO in app: Application logging initialized successfully
[2025-07-15 15:36:18,092] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 15:36:18,100] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 15:36:18,104] INFO in app: System encoding: utf-8
[2025-07-15 15:36:18,111] INFO in app: ==================================================
[2025-07-15 15:36:29,411] INFO in app: ==================================================
[2025-07-15 15:36:29,421] INFO in app: Application logging initialized successfully
[2025-07-15 15:36:29,424] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 15:36:29,426] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 15:36:29,429] INFO in app: System encoding: utf-8
[2025-07-15 15:36:29,435] INFO in app: ==================================================
[2025-07-15 15:38:11,307] INFO in app: ==================================================
[2025-07-15 15:38:11,321] INFO in app: Application logging initialized successfully
[2025-07-15 15:38:11,331] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 15:38:11,337] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 15:38:11,341] INFO in app: System encoding: utf-8
[2025-07-15 15:38:11,343] INFO in app: ==================================================
[2025-07-15 15:38:17,383] INFO in app: ==================================================
[2025-07-15 15:38:17,398] INFO in app: Application logging initialized successfully
[2025-07-15 15:38:17,400] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 15:38:17,402] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 15:38:17,405] INFO in app: System encoding: utf-8
[2025-07-15 15:38:17,408] INFO in app: ==================================================
[2025-07-15 15:39:06,722] INFO in app: ==================================================
[2025-07-15 15:39:06,734] INFO in app: Application logging initialized successfully
[2025-07-15 15:39:06,736] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 15:39:06,738] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 15:39:06,745] INFO in app: System encoding: utf-8
[2025-07-15 15:39:06,752] INFO in app: ==================================================
[2025-07-15 15:42:44,447] INFO in app: ==================================================
[2025-07-15 15:42:44,477] INFO in app: Application logging initialized successfully
[2025-07-15 15:42:44,484] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 15:42:44,492] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 15:42:44,502] INFO in app: System encoding: utf-8
[2025-07-15 15:42:44,508] INFO in app: ==================================================
[2025-07-15 15:42:53,602] INFO in app: ==================================================
[2025-07-15 15:42:53,611] INFO in app: Application logging initialized successfully
[2025-07-15 15:42:53,613] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 15:42:53,615] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 15:42:53,617] INFO in app: System encoding: utf-8
[2025-07-15 15:42:53,623] INFO in app: ==================================================
[2025-07-15 15:48:25,659] INFO in app: ==================================================
[2025-07-15 15:48:25,680] INFO in app: Application logging initialized successfully
[2025-07-15 15:48:25,687] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 15:48:25,690] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 15:48:25,693] INFO in app: System encoding: utf-8
[2025-07-15 15:48:25,719] INFO in app: ==================================================
[2025-07-15 16:38:30,464] INFO in app: ==================================================
[2025-07-15 16:38:30,470] INFO in app: Application logging initialized successfully
[2025-07-15 16:38:30,472] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 16:38:30,475] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 16:38:30,482] INFO in app: System encoding: utf-8
[2025-07-15 16:38:30,484] INFO in app: ==================================================
[2025-07-15 16:38:39,313] INFO in app: ==================================================
[2025-07-15 16:38:39,322] INFO in app: Application logging initialized successfully
[2025-07-15 16:38:39,325] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 16:38:39,326] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 16:38:39,328] INFO in app: System encoding: utf-8
[2025-07-15 16:38:39,331] INFO in app: ==================================================
2025-07-15 16:38:39,580 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 16:38:39,580 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-15 16:38:51,931] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.category

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5582, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.category
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes, arrears.category AS arrears_category, arrears.tenure AS arrears_tenure, arrears.probability_of_default AS arrears_probability_of_default, arrears.loss_given_default AS arrears_loss_given_default, arrears.provision_amount AS arrears_provision_amount 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 16:38:51,931 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.category

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5582, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.category
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes, arrears.category AS arrears_category, arrears.tenure AS arrears_tenure, arrears.probability_of_default AS arrears_probability_of_default, arrears.loss_given_default AS arrears_loss_given_default, arrears.provision_amount AS arrears_provision_amount 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 16:38:51,993 - INFO - 127.0.0.1 - - [15/Jul/2025 16:38:51] "[35m[1mGET /arrears?status=unresolved&aging= HTTP/1.1[0m" 500 -
2025-07-15 16:38:52,059 - INFO - 127.0.0.1 - - [15/Jul/2025 16:38:52] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-15 22:40:32,543] INFO in app: ==================================================
[2025-07-15 22:40:32,634] INFO in app: Application logging initialized successfully
[2025-07-15 22:40:32,635] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 22:40:32,636] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 22:40:32,640] INFO in app: System encoding: utf-8
[2025-07-15 22:40:32,648] INFO in app: ==================================================
2025-07-15 22:40:32,995 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 22:40:32,995 - INFO - [33mPress CTRL+C to quit[0m
2025-07-15 22:40:37,473 - INFO - 127.0.0.1 - - [15/Jul/2025 22:40:37] "[32mGET /arrears?status=unresolved&aging= HTTP/1.1[0m" 302 -
2025-07-15 22:40:37,543 - INFO - 127.0.0.1 - - [15/Jul/2025 22:40:37] "GET /login?next=/arrears?status%3Dunresolved%26aging%3D HTTP/1.1" 200 -
2025-07-15 22:40:38,191 - INFO - 127.0.0.1 - - [15/Jul/2025 22:40:38] "GET /static/img/logo.png HTTP/1.1" 200 -
2025-07-15 22:40:39,297 - INFO - 127.0.0.1 - - [15/Jul/2025 22:40:39] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-15 22:40:41,282 - INFO - 127.0.0.1 - - [15/Jul/2025 22:40:41] "[32mPOST /login?next=/arrears?status%3Dunresolved%26aging%3D HTTP/1.1[0m" 302 -
2025-07-15 22:40:41,429 - INFO - 127.0.0.1 - - [15/Jul/2025 22:40:41] "GET / HTTP/1.1" 200 -
[2025-07-15 22:40:47,752] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.category

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5582, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.category
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes, arrears.category AS arrears_category, arrears.tenure AS arrears_tenure, arrears.probability_of_default AS arrears_probability_of_default, arrears.loss_given_default AS arrears_loss_given_default, arrears.provision_amount AS arrears_provision_amount 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 22:40:47,752 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.category

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5582, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.category
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes, arrears.category AS arrears_category, arrears.tenure AS arrears_tenure, arrears.probability_of_default AS arrears_probability_of_default, arrears.loss_given_default AS arrears_loss_given_default, arrears.provision_amount AS arrears_provision_amount 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 22:40:48,030 - INFO - 127.0.0.1 - - [15/Jul/2025 22:40:48] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
[2025-07-15 22:43:26,004] INFO in app: ==================================================
[2025-07-15 22:43:26,010] INFO in app: Application logging initialized successfully
[2025-07-15 22:43:26,014] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 22:43:26,018] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 22:43:26,026] INFO in app: System encoding: utf-8
[2025-07-15 22:43:26,037] INFO in app: ==================================================
2025-07-15 22:43:26,458 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 22:43:26,458 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-15 22:43:30,917] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.tenure

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5581, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.tenure
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes, arrears.tenure AS arrears_tenure, arrears.probability_of_default AS arrears_probability_of_default, arrears.loss_given_default AS arrears_loss_given_default, arrears.provision_amount AS arrears_provision_amount 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 22:43:30,917 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: arrears.tenure

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5581, in view_arrears
    arrears = query.order_by(Arrear.due_date.asc()).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: arrears.tenure
[SQL: SELECT arrears.id AS arrears_id, arrears.loan_id AS arrears_loan_id, arrears.schedule_id AS arrears_schedule_id, arrears.due_date AS arrears_due_date, arrears.recorded_at AS arrears_recorded_at, arrears.expected_principal AS arrears_expected_principal, arrears.expected_interest AS arrears_expected_interest, arrears.expected_fees AS arrears_expected_fees, arrears.paid_principal AS arrears_paid_principal, arrears.paid_interest AS arrears_paid_interest, arrears.paid_fees AS arrears_paid_fees, arrears.payment_status AS arrears_payment_status, arrears.status AS arrears_status, arrears.resolution_date AS arrears_resolution_date, arrears.resolution_type AS arrears_resolution_type, arrears.resolved_by AS arrears_resolved_by, arrears.resolution_notes AS arrears_resolution_notes, arrears.tenure AS arrears_tenure, arrears.probability_of_default AS arrears_probability_of_default, arrears.loss_given_default AS arrears_loss_given_default, arrears.provision_amount AS arrears_provision_amount 
FROM arrears JOIN loan_applications ON loan_applications.id = arrears.loan_id JOIN customers ON customers.id = loan_applications.customer_id 
WHERE arrears.status = ? ORDER BY arrears.due_date ASC]
[parameters: ('unresolved',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 22:43:30,982 - INFO - 127.0.0.1 - - [15/Jul/2025 22:43:30] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
2025-07-15 22:43:31,049 - INFO - 127.0.0.1 - - [15/Jul/2025 22:43:31] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-15 22:46:55,427] INFO in app: ==================================================
[2025-07-15 22:46:55,434] INFO in app: Application logging initialized successfully
[2025-07-15 22:46:55,435] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 22:46:55,436] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 22:46:55,438] INFO in app: System encoding: utf-8
[2025-07-15 22:46:55,439] INFO in app: ==================================================
[2025-07-15 22:51:48,660] INFO in app: ==================================================
[2025-07-15 22:51:48,665] INFO in app: Application logging initialized successfully
[2025-07-15 22:51:48,668] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 22:51:48,669] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 22:51:48,672] INFO in app: System encoding: utf-8
[2025-07-15 22:51:48,680] INFO in app: ==================================================
2025-07-15 22:51:48,906 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 22:51:48,907 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-15 22:51:54,793] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5592, in view_arrears
    loans = [a for a in arrears if get_bracket(a.aging) == bracket]
                                               ^^^^^^^
AttributeError: 'Arrear' object has no attribute 'aging'
2025-07-15 22:51:54,793 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5592, in view_arrears
    loans = [a for a in arrears if get_bracket(a.aging) == bracket]
                                               ^^^^^^^
AttributeError: 'Arrear' object has no attribute 'aging'
2025-07-15 22:51:54,810 - INFO - 127.0.0.1 - - [15/Jul/2025 22:51:54] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
2025-07-15 22:51:54,869 - INFO - 127.0.0.1 - - [15/Jul/2025 22:51:54] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-15 22:51:58,450] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5592, in view_arrears
    loans = [a for a in arrears if get_bracket(a.aging) == bracket]
                                               ^^^^^^^
AttributeError: 'Arrear' object has no attribute 'aging'
2025-07-15 22:51:58,450 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5592, in view_arrears
    loans = [a for a in arrears if get_bracket(a.aging) == bracket]
                                               ^^^^^^^
AttributeError: 'Arrear' object has no attribute 'aging'
2025-07-15 22:51:58,470 - INFO - 127.0.0.1 - - [15/Jul/2025 22:51:58] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
[2025-07-15 22:54:53,850] INFO in app: ==================================================
[2025-07-15 22:54:53,859] INFO in app: Application logging initialized successfully
[2025-07-15 22:54:53,862] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 22:54:53,863] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 22:54:53,865] INFO in app: System encoding: utf-8
[2025-07-15 22:54:53,871] INFO in app: ==================================================
2025-07-15 22:54:54,115 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 22:54:54,115 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-15 22:55:00,722] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5592, in view_arrears
    loans = [a for a in arrears if get_bracket(a.aging) == bracket]
                                               ^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1521, in aging
    days = self.days_past_due
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'Arrear' object has no attribute 'days_past_due'
2025-07-15 22:55:00,722 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5592, in view_arrears
    loans = [a for a in arrears if get_bracket(a.aging) == bracket]
                                               ^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1521, in aging
    days = self.days_past_due
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'Arrear' object has no attribute 'days_past_due'
2025-07-15 22:55:00,736 - INFO - 127.0.0.1 - - [15/Jul/2025 22:55:00] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
2025-07-15 22:55:00,799 - INFO - 127.0.0.1 - - [15/Jul/2025 22:55:00] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-15 22:55:04,089] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5592, in view_arrears
    loans = [a for a in arrears if get_bracket(a.aging) == bracket]
                                               ^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1521, in aging
    days = self.days_past_due
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'Arrear' object has no attribute 'days_past_due'
2025-07-15 22:55:04,089 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5592, in view_arrears
    loans = [a for a in arrears if get_bracket(a.aging) == bracket]
                                               ^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1521, in aging
    days = self.days_past_due
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'Arrear' object has no attribute 'days_past_due'
2025-07-15 22:55:04,106 - INFO - 127.0.0.1 - - [15/Jul/2025 22:55:04] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
[2025-07-15 22:56:23,175] INFO in app: ==================================================
[2025-07-15 22:56:23,185] INFO in app: Application logging initialized successfully
[2025-07-15 22:56:23,187] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 22:56:23,189] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 22:56:23,192] INFO in app: System encoding: utf-8
[2025-07-15 22:56:23,194] INFO in app: ==================================================
2025-07-15 22:56:23,445 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 22:56:23,446 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-15 22:56:27,455] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5592, in view_arrears
    loans = [a for a in arrears if get_bracket(a.aging) == bracket]
                                               ^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1521, in aging
    days = self.days_past_due
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'Arrear' object has no attribute 'days_past_due'
2025-07-15 22:56:27,455 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5592, in view_arrears
    loans = [a for a in arrears if get_bracket(a.aging) == bracket]
                                               ^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1521, in aging
    days = self.days_past_due
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'Arrear' object has no attribute 'days_past_due'
2025-07-15 22:56:27,472 - INFO - 127.0.0.1 - - [15/Jul/2025 22:56:27] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
2025-07-15 22:56:27,535 - INFO - 127.0.0.1 - - [15/Jul/2025 22:56:27] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-15 22:56:30,863] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5592, in view_arrears
    loans = [a for a in arrears if get_bracket(a.aging) == bracket]
                                               ^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1521, in aging
    days = self.days_past_due
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'Arrear' object has no attribute 'days_past_due'
2025-07-15 22:56:30,863 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5592, in view_arrears
    loans = [a for a in arrears if get_bracket(a.aging) == bracket]
                                               ^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1521, in aging
    days = self.days_past_due
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'Arrear' object has no attribute 'days_past_due'
2025-07-15 22:56:30,881 - INFO - 127.0.0.1 - - [15/Jul/2025 22:56:30] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
[2025-07-15 22:57:20,094] INFO in app: ==================================================
[2025-07-15 22:57:20,102] INFO in app: Application logging initialized successfully
[2025-07-15 22:57:20,103] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 22:57:20,105] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 22:57:20,106] INFO in app: System encoding: utf-8
[2025-07-15 22:57:20,108] INFO in app: ==================================================
2025-07-15 22:57:20,347 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 22:57:20,348 - INFO - [33mPress CTRL+C to quit[0m
2025-07-15 22:57:27,766 - INFO - 127.0.0.1 - - [15/Jul/2025 22:57:27] "GET / HTTP/1.1" 200 -
2025-07-15 22:57:29,895 - INFO - 127.0.0.1 - - [15/Jul/2025 22:57:29] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-15 22:57:29,970] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5598, in view_arrears
    loans = [a for a in arrears if get_bracket(a.aging) == bracket]
                                   ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5633, in get_bracket
    if age <= 30:
       ^^^^^^^^^
TypeError: '<=' not supported between instances of 'str' and 'int'
2025-07-15 22:57:29,970 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 487, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5598, in view_arrears
    loans = [a for a in arrears if get_bracket(a.aging) == bracket]
                                   ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5633, in get_bracket
    if age <= 30:
       ^^^^^^^^^
TypeError: '<=' not supported between instances of 'str' and 'int'
2025-07-15 22:57:29,994 - INFO - 127.0.0.1 - - [15/Jul/2025 22:57:29] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
[2025-07-15 22:59:17,923] INFO in app: ==================================================
[2025-07-15 22:59:17,932] INFO in app: Application logging initialized successfully
[2025-07-15 22:59:17,934] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 22:59:17,936] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 22:59:17,938] INFO in app: System encoding: utf-8
[2025-07-15 22:59:17,947] INFO in app: ==================================================
2025-07-15 22:59:18,177 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 22:59:18,177 - INFO - [33mPress CTRL+C to quit[0m
2025-07-15 22:59:22,853 - INFO - 127.0.0.1 - - [15/Jul/2025 22:59:22] "GET / HTTP/1.1" 200 -
2025-07-15 22:59:24,483 - INFO - 127.0.0.1 - - [15/Jul/2025 22:59:24] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-15 22:59:24,878 - INFO - 127.0.0.1 - - [15/Jul/2025 22:59:24] "GET /arrears HTTP/1.1" 200 -
[2025-07-15 23:00:55,126] ERROR in app: Exception on /provision-rule [POST]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such table: provision_settings

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5682, in save_provision_rule
    rule = ProvisionSetting.query.filter_by(category=category, tenure=tenure).first()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: provision_settings
[SQL: SELECT provision_settings.id AS provision_settings_id, provision_settings.category AS provision_settings_category, provision_settings.tenure AS provision_settings_tenure, provision_settings.probability_of_default AS provision_settings_probability_of_default, provision_settings.loss_given_default AS provision_settings_loss_given_default, provision_settings.created_at AS provision_settings_created_at, provision_settings.updated_at AS provision_settings_updated_at 
FROM provision_settings 
WHERE provision_settings.category = ? AND provision_settings.tenure = ?
 LIMIT ? OFFSET ?]
[parameters: ('civil_servant', 1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 23:00:55,126 - ERROR - Exception on /provision-rule [POST]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such table: provision_settings

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5682, in save_provision_rule
    rule = ProvisionSetting.query.filter_by(category=category, tenure=tenure).first()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: provision_settings
[SQL: SELECT provision_settings.id AS provision_settings_id, provision_settings.category AS provision_settings_category, provision_settings.tenure AS provision_settings_tenure, provision_settings.probability_of_default AS provision_settings_probability_of_default, provision_settings.loss_given_default AS provision_settings_loss_given_default, provision_settings.created_at AS provision_settings_created_at, provision_settings.updated_at AS provision_settings_updated_at 
FROM provision_settings 
WHERE provision_settings.category = ? AND provision_settings.tenure = ?
 LIMIT ? OFFSET ?]
[parameters: ('civil_servant', 1, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-15 23:00:55,214 - INFO - 127.0.0.1 - - [15/Jul/2025 23:00:55] "[35m[1mPOST /provision-rule HTTP/1.1[0m" 500 -
[2025-07-15 23:03:50,932] INFO in app: ==================================================
[2025-07-15 23:03:50,941] INFO in app: Application logging initialized successfully
[2025-07-15 23:03:50,942] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 23:03:50,943] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 23:03:50,945] INFO in app: System encoding: utf-8
[2025-07-15 23:03:50,947] INFO in app: ==================================================
[2025-07-15 23:04:26,900] INFO in app: ==================================================
[2025-07-15 23:04:26,909] INFO in app: Application logging initialized successfully
[2025-07-15 23:04:26,911] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 23:04:26,912] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 23:04:26,914] INFO in app: System encoding: utf-8
[2025-07-15 23:04:26,922] INFO in app: ==================================================
2025-07-15 23:04:27,160 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 23:04:27,160 - INFO - [33mPress CTRL+C to quit[0m
2025-07-15 23:04:34,150 - INFO - 127.0.0.1 - - [15/Jul/2025 23:04:34] "[32mPOST /provision-rule HTTP/1.1[0m" 302 -
2025-07-15 23:04:34,221 - INFO - 127.0.0.1 - - [15/Jul/2025 23:04:34] "GET /arrears HTTP/1.1" 200 -
2025-07-15 23:05:19,120 - INFO - 127.0.0.1 - - [15/Jul/2025 23:05:19] "[32mPOST /provision-rule HTTP/1.1[0m" 302 -
2025-07-15 23:05:19,404 - INFO - 127.0.0.1 - - [15/Jul/2025 23:05:19] "GET /arrears HTTP/1.1" 200 -
2025-07-15 23:05:59,368 - INFO - 127.0.0.1 - - [15/Jul/2025 23:05:59] "[32mPOST /provision-rule HTTP/1.1[0m" 302 -
2025-07-15 23:05:59,380 - INFO - 127.0.0.1 - - [15/Jul/2025 23:05:59] "GET /arrears HTTP/1.1" 200 -
2025-07-15 23:06:17,235 - INFO - 127.0.0.1 - - [15/Jul/2025 23:06:17] "[32mPOST /provision-rule HTTP/1.1[0m" 302 -
2025-07-15 23:06:17,571 - INFO - 127.0.0.1 - - [15/Jul/2025 23:06:17] "GET /arrears HTTP/1.1" 200 -
[2025-07-15 23:06:32,338] ERROR in app: Exception on /provision-rule [POST]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5678, in save_provision_rule
    tenure = int(request.form['tenure_group'].split('-')[0])  # or parse tenure_group appropriately
ValueError: invalid literal for int() with base 10: '180+'
2025-07-15 23:06:32,338 - ERROR - Exception on /provision-rule [POST]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5678, in save_provision_rule
    tenure = int(request.form['tenure_group'].split('-')[0])  # or parse tenure_group appropriately
ValueError: invalid literal for int() with base 10: '180+'
2025-07-15 23:06:32,384 - INFO - 127.0.0.1 - - [15/Jul/2025 23:06:32] "[35m[1mPOST /provision-rule HTTP/1.1[0m" 500 -
[2025-07-15 23:07:54,577] ERROR in app: Exception on /provision-rule [POST]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5678, in save_provision_rule
    tenure = int(request.form['tenure_group'].split('-')[0])  # or parse tenure_group appropriately
ValueError: invalid literal for int() with base 10: '180+'
2025-07-15 23:07:54,577 - ERROR - Exception on /provision-rule [POST]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5678, in save_provision_rule
    tenure = int(request.form['tenure_group'].split('-')[0])  # or parse tenure_group appropriately
ValueError: invalid literal for int() with base 10: '180+'
2025-07-15 23:07:54,584 - INFO - 127.0.0.1 - - [15/Jul/2025 23:07:54] "[35m[1mPOST /provision-rule HTTP/1.1[0m" 500 -
[2025-07-15 23:31:46,332] INFO in app: ==================================================
[2025-07-15 23:31:46,338] INFO in app: Application logging initialized successfully
[2025-07-15 23:31:46,340] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 23:31:46,344] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 23:31:46,349] INFO in app: System encoding: utf-8
[2025-07-15 23:31:46,351] INFO in app: ==================================================
2025-07-15 23:31:46,583 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 23:31:46,583 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-15 23:38:09,921] INFO in app: ==================================================
[2025-07-15 23:38:09,928] INFO in app: Application logging initialized successfully
[2025-07-15 23:38:09,930] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 23:38:09,932] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 23:38:09,933] INFO in app: System encoding: utf-8
[2025-07-15 23:38:09,941] INFO in app: ==================================================
2025-07-15 23:38:10,205 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 23:38:10,205 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-15 23:38:38,995] ERROR in app: Exception on /provision-rule [POST]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5678, in save_provision_rule
    tenure = int(request.form['tenure_group'].split('-')[0])  # or parse tenure_group appropriately
ValueError: invalid literal for int() with base 10: '180+'
2025-07-15 23:38:38,995 - ERROR - Exception on /provision-rule [POST]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5678, in save_provision_rule
    tenure = int(request.form['tenure_group'].split('-')[0])  # or parse tenure_group appropriately
ValueError: invalid literal for int() with base 10: '180+'
2025-07-15 23:38:39,011 - INFO - 127.0.0.1 - - [15/Jul/2025 23:38:39] "[35m[1mPOST /provision-rule HTTP/1.1[0m" 500 -
[2025-07-15 23:39:33,357] INFO in app: ==================================================
[2025-07-15 23:39:33,365] INFO in app: Application logging initialized successfully
[2025-07-15 23:39:33,367] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-15 23:39:33,369] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-15 23:39:33,371] INFO in app: System encoding: utf-8
[2025-07-15 23:39:33,377] INFO in app: ==================================================
2025-07-15 23:39:33,598 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-15 23:39:33,598 - INFO - [33mPress CTRL+C to quit[0m
2025-07-15 23:39:45,278 - INFO - 127.0.0.1 - - [15/Jul/2025 23:39:45] "GET /arrears HTTP/1.1" 200 -
2025-07-15 23:40:00,744 - INFO - 127.0.0.1 - - [15/Jul/2025 23:40:00] "[32mPOST /provision-rule HTTP/1.1[0m" 302 -
2025-07-15 23:40:00,758 - INFO - 127.0.0.1 - - [15/Jul/2025 23:40:00] "GET /arrears HTTP/1.1" 200 -
[2025-07-16 00:08:35,579] INFO in app: ==================================================
[2025-07-16 00:08:35,592] INFO in app: Application logging initialized successfully
[2025-07-16 00:08:35,595] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 00:08:35,601] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 00:08:35,603] INFO in app: System encoding: utf-8
[2025-07-16 00:08:35,604] INFO in app: ==================================================
[2025-07-16 01:14:54,656] INFO in app: ==================================================
[2025-07-16 01:14:54,664] INFO in app: Application logging initialized successfully
[2025-07-16 01:14:54,665] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:14:54,667] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:14:54,669] INFO in app: System encoding: utf-8
[2025-07-16 01:14:54,670] INFO in app: ==================================================
2025-07-16 01:14:54,942 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:14:54,945 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:14:54,945 - INFO - Scheduler started
[2025-07-16 01:17:50,386] INFO in app: ==================================================
[2025-07-16 01:17:50,404] INFO in app: Application logging initialized successfully
[2025-07-16 01:17:50,406] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:17:50,410] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:17:50,421] INFO in app: System encoding: utf-8
[2025-07-16 01:17:50,423] INFO in app: ==================================================
2025-07-16 01:17:50,805 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:17:50,807 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:17:50,807 - INFO - Scheduler started
[2025-07-16 01:18:07,054] INFO in app: ==================================================
[2025-07-16 01:18:07,064] INFO in app: Application logging initialized successfully
[2025-07-16 01:18:07,066] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:18:07,068] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:18:07,070] INFO in app: System encoding: utf-8
[2025-07-16 01:18:07,077] INFO in app: ==================================================
2025-07-16 01:18:07,362 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:18:07,364 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:18:07,364 - INFO - Scheduler started
[2025-07-16 01:23:30,785] INFO in app: ==================================================
[2025-07-16 01:23:30,792] INFO in app: Application logging initialized successfully
[2025-07-16 01:23:30,794] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:23:30,795] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:23:30,804] INFO in app: System encoding: utf-8
[2025-07-16 01:23:30,806] INFO in app: ==================================================
2025-07-16 01:23:31,042 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:23:31,043 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:23:31,043 - INFO - Scheduler started
[2025-07-16 01:25:12,601] INFO in app: ==================================================
[2025-07-16 01:25:12,607] INFO in app: Application logging initialized successfully
[2025-07-16 01:25:12,609] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:25:12,611] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:25:12,620] INFO in app: System encoding: utf-8
[2025-07-16 01:25:12,622] INFO in app: ==================================================
2025-07-16 01:25:12,865 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:25:12,867 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:25:12,867 - INFO - Scheduler started
[2025-07-16 01:25:15,042] INFO in app: ==================================================
[2025-07-16 01:25:15,051] INFO in app: Application logging initialized successfully
[2025-07-16 01:25:15,053] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:25:15,055] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:25:15,058] INFO in app: System encoding: utf-8
[2025-07-16 01:25:15,060] INFO in app: ==================================================
2025-07-16 01:25:15,306 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:25:15,308 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:25:15,308 - INFO - Scheduler started
[2025-07-16 01:25:22,915] INFO in app: ==================================================
[2025-07-16 01:25:22,923] INFO in app: Application logging initialized successfully
[2025-07-16 01:25:22,925] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:25:22,933] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:25:22,935] INFO in app: System encoding: utf-8
[2025-07-16 01:25:22,937] INFO in app: ==================================================
2025-07-16 01:25:23,195 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:25:23,197 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:25:23,197 - INFO - Scheduler started
2025-07-16 01:25:23,208 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 01:25:23,208 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 01:29:18,025] INFO in app: ==================================================
[2025-07-16 01:29:18,034] INFO in app: Application logging initialized successfully
[2025-07-16 01:29:18,037] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:29:18,039] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:29:18,043] INFO in app: System encoding: utf-8
[2025-07-16 01:29:18,044] INFO in app: ==================================================
2025-07-16 01:29:18,292 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:29:18,293 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:29:18,293 - INFO - Scheduler started
[2025-07-16 01:31:38,537] INFO in app: ==================================================
[2025-07-16 01:31:38,544] INFO in app: Application logging initialized successfully
[2025-07-16 01:31:38,546] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:31:38,547] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:31:38,556] INFO in app: System encoding: utf-8
[2025-07-16 01:31:38,559] INFO in app: ==================================================
2025-07-16 01:31:38,810 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:31:38,812 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:31:38,812 - INFO - Scheduler started
[2025-07-16 01:31:55,689] INFO in app: ==================================================
[2025-07-16 01:31:55,698] INFO in app: Application logging initialized successfully
[2025-07-16 01:31:55,701] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:31:55,703] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:31:55,705] INFO in app: System encoding: utf-8
[2025-07-16 01:31:55,709] INFO in app: ==================================================
2025-07-16 01:31:55,963 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:31:55,966 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:31:55,966 - INFO - Scheduler started
[2025-07-16 01:35:40,757] INFO in app: ==================================================
[2025-07-16 01:35:40,764] INFO in app: Application logging initialized successfully
[2025-07-16 01:35:40,766] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:35:40,768] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:35:40,779] INFO in app: System encoding: utf-8
[2025-07-16 01:35:40,781] INFO in app: ==================================================
2025-07-16 01:35:41,028 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:35:41,029 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:35:41,030 - INFO - Scheduler started
[2025-07-16 01:36:14,920] INFO in app: ==================================================
[2025-07-16 01:36:14,930] INFO in app: Application logging initialized successfully
[2025-07-16 01:36:14,933] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:36:14,935] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:36:14,937] INFO in app: System encoding: utf-8
[2025-07-16 01:36:14,944] INFO in app: ==================================================
2025-07-16 01:36:15,220 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:36:15,222 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:36:15,222 - INFO - Scheduler started
[2025-07-16 01:40:25,645] INFO in app: ==================================================
[2025-07-16 01:40:25,651] INFO in app: Application logging initialized successfully
[2025-07-16 01:40:25,653] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:40:25,662] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:40:25,666] INFO in app: System encoding: utf-8
[2025-07-16 01:40:25,668] INFO in app: ==================================================
2025-07-16 01:40:25,928 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:40:25,930 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:40:25,930 - INFO - Scheduler started
[2025-07-16 01:43:44,893] INFO in app: ==================================================
[2025-07-16 01:43:44,900] INFO in app: Application logging initialized successfully
[2025-07-16 01:43:44,902] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:43:44,904] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:43:44,912] INFO in app: System encoding: utf-8
[2025-07-16 01:43:44,914] INFO in app: ==================================================
2025-07-16 01:43:45,138 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:43:45,142 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:43:45,142 - INFO - Scheduler started
[2025-07-16 01:43:54,959] INFO in app: ==================================================
[2025-07-16 01:43:54,967] INFO in app: Application logging initialized successfully
[2025-07-16 01:43:54,977] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:43:54,980] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:43:54,982] INFO in app: System encoding: utf-8
[2025-07-16 01:43:54,984] INFO in app: ==================================================
2025-07-16 01:43:55,314 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:43:55,316 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:43:55,316 - INFO - Scheduler started
2025-07-16 01:43:55,336 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 01:43:55,336 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 01:45:21,204] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such table: users

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 284, in decorated_view
    elif not current_user.is_authenticated:
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\local.py", line 318, in __get__
    obj = instance._get_current_object()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\local.py", line 526, in _get_current_object
    return get_name(local())
                    ~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 25, in <lambda>
    current_user = LocalProxy(lambda: _get_user())
                                      ~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 370, in _get_user
    current_app.login_manager._load_user()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\login_manager.py", line 364, in _load_user
    user = self._user_callback(user_id)
  File "C:\Users\pc\loan-app\app.py", line 499, in load_user
    return User.query.get(int(user_id))
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "<string>", line 2, in get
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\deprecations.py", line 386, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 1126, in get
    return self._get_impl(ident, loading.load_on_pk_identity)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 1135, in _get_impl
    return self.session._get_impl(
           ~~~~~~~~~~~~~~~~~~~~~~^
        mapper,
        ^^^^^^^
    ...<6 lines>...
        execution_options=self._execution_options,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 3874, in _get_impl
    return db_load_fn(
        self,
    ...<5 lines>...
        bind_arguments=bind_arguments,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\loading.py", line 694, in load_on_pk_identity
    session.execute(
    ~~~~~~~~~~~~~~~^
        q,
        ^^
    ...<2 lines>...
        bind_arguments=bind_arguments,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.password_hash AS users_password_hash, users.email AS users_email, users.active AS users_active, users.role_id AS users_role_id 
FROM users 
WHERE users.id = ?]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 01:45:21,204 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such table: users

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 284, in decorated_view
    elif not current_user.is_authenticated:
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\local.py", line 318, in __get__
    obj = instance._get_current_object()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\local.py", line 526, in _get_current_object
    return get_name(local())
                    ~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 25, in <lambda>
    current_user = LocalProxy(lambda: _get_user())
                                      ~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 370, in _get_user
    current_app.login_manager._load_user()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\login_manager.py", line 364, in _load_user
    user = self._user_callback(user_id)
  File "C:\Users\pc\loan-app\app.py", line 499, in load_user
    return User.query.get(int(user_id))
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "<string>", line 2, in get
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\util\deprecations.py", line 386, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 1126, in get
    return self._get_impl(ident, loading.load_on_pk_identity)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 1135, in _get_impl
    return self.session._get_impl(
           ~~~~~~~~~~~~~~~~~~~~~~^
        mapper,
        ^^^^^^^
    ...<6 lines>...
        execution_options=self._execution_options,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 3874, in _get_impl
    return db_load_fn(
        self,
    ...<5 lines>...
        bind_arguments=bind_arguments,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\loading.py", line 694, in load_on_pk_identity
    session.execute(
    ~~~~~~~~~~~~~~~^
        q,
        ^^
    ...<2 lines>...
        bind_arguments=bind_arguments,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.username AS users_username, users.password_hash AS users_password_hash, users.email AS users_email, users.active AS users_active, users.role_id AS users_role_id 
FROM users 
WHERE users.id = ?]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-16 01:45:21,296 - INFO - 127.0.0.1 - - [16/Jul/2025 01:45:21] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
2025-07-16 01:45:21,391 - INFO - 127.0.0.1 - - [16/Jul/2025 01:45:21] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-16 01:46:23,676] INFO in app: ==================================================
[2025-07-16 01:46:23,682] INFO in app: Application logging initialized successfully
[2025-07-16 01:46:23,685] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:46:23,694] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:46:23,695] INFO in app: System encoding: utf-8
[2025-07-16 01:46:23,697] INFO in app: ==================================================
2025-07-16 01:46:23,928 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:46:23,930 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:46:23,930 - INFO - Scheduler started
[2025-07-16 01:46:41,705] INFO in app: ==================================================
[2025-07-16 01:46:41,710] INFO in app: Application logging initialized successfully
[2025-07-16 01:46:41,716] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:46:41,721] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:46:41,723] INFO in app: System encoding: utf-8
[2025-07-16 01:46:41,725] INFO in app: ==================================================
2025-07-16 01:46:41,944 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:46:41,945 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:46:41,945 - INFO - Scheduler started
[2025-07-16 01:47:23,039] INFO in app: ==================================================
[2025-07-16 01:47:23,045] INFO in app: Application logging initialized successfully
[2025-07-16 01:47:23,047] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:47:23,055] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:47:23,059] INFO in app: System encoding: utf-8
[2025-07-16 01:47:23,061] INFO in app: ==================================================
2025-07-16 01:47:23,286 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:47:23,288 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:47:23,288 - INFO - Scheduler started
2025-07-16 01:47:23,290 - ERROR - Error: Directory migrations already exists and is not empty
[2025-07-16 01:47:32,101] INFO in app: ==================================================
[2025-07-16 01:47:32,108] INFO in app: Application logging initialized successfully
[2025-07-16 01:47:32,110] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:47:32,111] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:47:32,119] INFO in app: System encoding: utf-8
[2025-07-16 01:47:32,121] INFO in app: ==================================================
2025-07-16 01:47:32,349 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:47:32,351 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:47:32,351 - INFO - Scheduler started
[2025-07-16 01:47:45,119] INFO in app: ==================================================
[2025-07-16 01:47:45,127] INFO in app: Application logging initialized successfully
[2025-07-16 01:47:45,130] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:47:45,132] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:47:45,135] INFO in app: System encoding: utf-8
[2025-07-16 01:47:45,137] INFO in app: ==================================================
2025-07-16 01:47:45,361 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:47:45,364 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:47:45,364 - INFO - Scheduler started
[2025-07-16 01:47:53,783] INFO in app: ==================================================
[2025-07-16 01:47:53,791] INFO in app: Application logging initialized successfully
[2025-07-16 01:47:53,794] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:47:53,801] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:47:53,803] INFO in app: System encoding: utf-8
[2025-07-16 01:47:53,813] INFO in app: ==================================================
2025-07-16 01:47:54,099 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:47:54,101 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:47:54,101 - INFO - Scheduler started
[2025-07-16 01:48:02,846] INFO in app: ==================================================
[2025-07-16 01:48:02,857] INFO in app: Application logging initialized successfully
[2025-07-16 01:48:02,859] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:48:02,862] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:48:02,864] INFO in app: System encoding: utf-8
[2025-07-16 01:48:02,865] INFO in app: ==================================================
2025-07-16 01:48:03,094 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:48:03,096 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:48:03,096 - INFO - Scheduler started
[2025-07-16 01:48:56,018] INFO in app: ==================================================
[2025-07-16 01:48:56,026] INFO in app: Application logging initialized successfully
[2025-07-16 01:48:56,028] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:48:56,030] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:48:56,032] INFO in app: System encoding: utf-8
[2025-07-16 01:48:56,042] INFO in app: ==================================================
2025-07-16 01:48:56,280 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:48:56,281 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:48:56,281 - INFO - Scheduler started
[2025-07-16 01:49:53,491] INFO in app: ==================================================
[2025-07-16 01:49:53,497] INFO in app: Application logging initialized successfully
[2025-07-16 01:49:53,504] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:49:53,507] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:49:53,510] INFO in app: System encoding: utf-8
[2025-07-16 01:49:53,513] INFO in app: ==================================================
2025-07-16 01:49:53,755 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:49:53,756 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:49:53,756 - INFO - Scheduler started
[2025-07-16 01:55:50,452] INFO in app: ==================================================
[2025-07-16 01:55:50,460] INFO in app: Application logging initialized successfully
[2025-07-16 01:55:50,467] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:55:50,471] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:55:50,474] INFO in app: System encoding: utf-8
[2025-07-16 01:55:50,477] INFO in app: ==================================================
2025-07-16 01:55:50,798 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:55:50,800 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:55:50,800 - INFO - Scheduler started
[2025-07-16 01:56:17,077] INFO in app: ==================================================
[2025-07-16 01:56:17,083] INFO in app: Application logging initialized successfully
[2025-07-16 01:56:17,091] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:56:17,093] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:56:17,095] INFO in app: System encoding: utf-8
[2025-07-16 01:56:17,096] INFO in app: ==================================================
2025-07-16 01:56:17,330 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:56:17,331 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:56:17,331 - INFO - Scheduler started
[2025-07-16 01:56:54,122] INFO in app: ==================================================
[2025-07-16 01:56:54,133] INFO in app: Application logging initialized successfully
[2025-07-16 01:56:54,135] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:56:54,137] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:56:54,149] INFO in app: System encoding: utf-8
[2025-07-16 01:56:54,152] INFO in app: ==================================================
2025-07-16 01:56:54,411 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:56:54,413 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:56:54,413 - INFO - Scheduler started
[2025-07-16 01:57:02,877] INFO in app: ==================================================
[2025-07-16 01:57:02,884] INFO in app: Application logging initialized successfully
[2025-07-16 01:57:02,886] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:57:02,887] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:57:02,894] INFO in app: System encoding: utf-8
[2025-07-16 01:57:02,896] INFO in app: ==================================================
2025-07-16 01:57:03,144 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:57:03,146 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:57:03,146 - INFO - Scheduler started
[2025-07-16 01:57:48,062] INFO in app: ==================================================
[2025-07-16 01:57:48,082] INFO in app: Application logging initialized successfully
[2025-07-16 01:57:48,084] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 01:57:48,086] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 01:57:48,093] INFO in app: System encoding: utf-8
[2025-07-16 01:57:48,096] INFO in app: ==================================================
2025-07-16 01:57:48,493 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 01:57:48,494 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 01:57:48,495 - INFO - Scheduler started
[2025-07-16 06:42:43,613] INFO in app: ==================================================
[2025-07-16 06:42:43,701] INFO in app: Application logging initialized successfully
[2025-07-16 06:42:43,703] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 06:42:43,704] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 06:42:43,706] INFO in app: System encoding: utf-8
[2025-07-16 06:42:43,708] INFO in app: ==================================================
2025-07-16 06:42:44,075 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 06:42:44,077 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 06:42:44,077 - INFO - Scheduler started
[2025-07-16 06:47:29,297] INFO in app: ==================================================
[2025-07-16 06:47:29,304] INFO in app: Application logging initialized successfully
[2025-07-16 06:47:29,305] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 06:47:29,307] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 06:47:29,308] INFO in app: System encoding: utf-8
[2025-07-16 06:47:29,311] INFO in app: ==================================================
2025-07-16 06:47:29,505 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 06:47:29,507 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 06:47:29,507 - INFO - Scheduler started
[2025-07-16 06:50:32,119] INFO in app: ==================================================
[2025-07-16 06:50:32,125] INFO in app: Application logging initialized successfully
[2025-07-16 06:50:32,127] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 06:50:32,129] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 06:50:32,131] INFO in app: System encoding: utf-8
[2025-07-16 06:50:32,133] INFO in app: ==================================================
2025-07-16 06:50:32,332 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 06:50:32,334 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 06:50:32,334 - INFO - Scheduler started
[2025-07-16 06:50:47,206] INFO in app: ==================================================
[2025-07-16 06:50:47,212] INFO in app: Application logging initialized successfully
[2025-07-16 06:50:47,214] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 06:50:47,217] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 06:50:47,220] INFO in app: System encoding: utf-8
[2025-07-16 06:50:47,224] INFO in app: ==================================================
2025-07-16 06:50:47,421 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 06:50:47,423 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 06:50:47,423 - INFO - Scheduler started
[2025-07-16 06:50:56,774] INFO in app: ==================================================
[2025-07-16 06:50:56,781] INFO in app: Application logging initialized successfully
[2025-07-16 06:50:56,783] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 06:50:56,785] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 06:50:56,787] INFO in app: System encoding: utf-8
[2025-07-16 06:50:56,788] INFO in app: ==================================================
2025-07-16 06:50:56,987 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 06:50:56,989 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 06:50:56,989 - INFO - Scheduler started
[2025-07-16 06:57:33,001] INFO in app: ==================================================
[2025-07-16 06:57:33,006] INFO in app: Application logging initialized successfully
[2025-07-16 06:57:33,008] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 06:57:33,011] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 06:57:33,014] INFO in app: System encoding: utf-8
[2025-07-16 06:57:33,018] INFO in app: ==================================================
2025-07-16 06:57:33,212 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 06:57:33,213 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 06:57:33,213 - INFO - Scheduler started
2025-07-16 06:57:33,251 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 06:57:33,251 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 06:58:55,107] INFO in app: ==================================================
[2025-07-16 06:58:55,113] INFO in app: Application logging initialized successfully
[2025-07-16 06:58:55,115] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 06:58:55,117] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 06:58:55,120] INFO in app: System encoding: utf-8
[2025-07-16 06:58:55,124] INFO in app: ==================================================
2025-07-16 06:58:55,334 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 06:58:55,336 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 06:58:55,336 - INFO - Scheduler started
[2025-07-16 06:59:36,984] INFO in app: ==================================================
[2025-07-16 06:59:36,990] INFO in app: Application logging initialized successfully
[2025-07-16 06:59:36,992] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 06:59:36,994] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 06:59:36,999] INFO in app: System encoding: utf-8
[2025-07-16 06:59:37,000] INFO in app: ==================================================
2025-07-16 06:59:37,198 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 06:59:37,199 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 06:59:37,199 - INFO - Scheduler started
[2025-07-16 07:00:17,494] INFO in app: ==================================================
[2025-07-16 07:00:17,501] INFO in app: Application logging initialized successfully
[2025-07-16 07:00:17,503] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 07:00:17,504] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 07:00:17,506] INFO in app: System encoding: utf-8
[2025-07-16 07:00:17,513] INFO in app: ==================================================
2025-07-16 07:00:17,722 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 07:00:17,723 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 07:00:17,724 - INFO - Scheduler started
[2025-07-16 07:00:35,059] INFO in app: ==================================================
[2025-07-16 07:00:35,064] INFO in app: Application logging initialized successfully
[2025-07-16 07:00:35,066] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 07:00:35,067] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 07:00:35,071] INFO in app: System encoding: utf-8
[2025-07-16 07:00:35,073] INFO in app: ==================================================
2025-07-16 07:00:35,372 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 07:00:35,373 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 07:00:35,373 - INFO - Scheduler started
[2025-07-16 07:00:46,380] INFO in app: ==================================================
[2025-07-16 07:00:46,385] INFO in app: Application logging initialized successfully
[2025-07-16 07:00:46,389] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 07:00:46,390] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 07:00:46,394] INFO in app: System encoding: utf-8
[2025-07-16 07:00:46,395] INFO in app: ==================================================
2025-07-16 07:00:46,607 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 07:00:46,617 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 07:00:46,617 - INFO - Scheduler started
[2025-07-16 07:00:53,780] INFO in app: ==================================================
[2025-07-16 07:00:53,785] INFO in app: Application logging initialized successfully
[2025-07-16 07:00:53,787] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 07:00:53,788] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 07:00:53,791] INFO in app: System encoding: utf-8
[2025-07-16 07:00:53,792] INFO in app: ==================================================
2025-07-16 07:00:54,001 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 07:00:54,002 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 07:00:54,003 - INFO - Scheduler started
2025-07-16 07:00:54,016 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 07:00:54,016 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 07:00:59,287] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 488, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5635, in view_arrears
    return render_template(
        'arrears_report.html',
    ...<8 lines>...
        aging_summary=aging_summary
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\arrears_report.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'par_trend' %}active{% endif %}" href="{{ url_for('par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'par_trend'. Did you mean 'update_user_role' instead?
2025-07-16 07:00:59,287 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 488, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5635, in view_arrears
    return render_template(
        'arrears_report.html',
    ...<8 lines>...
        aging_summary=aging_summary
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\arrears_report.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'par_trend' %}active{% endif %}" href="{{ url_for('par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'par_trend'. Did you mean 'update_user_role' instead?
2025-07-16 07:00:59,399 - INFO - 127.0.0.1 - - [16/Jul/2025 07:00:59] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
2025-07-16 07:00:59,527 - INFO - 127.0.0.1 - - [16/Jul/2025 07:00:59] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-16 07:00:59,621] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 488, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5635, in view_arrears
    return render_template(
        'arrears_report.html',
    ...<8 lines>...
        aging_summary=aging_summary
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\arrears_report.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'par_trend' %}active{% endif %}" href="{{ url_for('par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'par_trend'. Did you mean 'update_user_role' instead?
2025-07-16 07:00:59,621 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 488, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5635, in view_arrears
    return render_template(
        'arrears_report.html',
    ...<8 lines>...
        aging_summary=aging_summary
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\arrears_report.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'par_trend' %}active{% endif %}" href="{{ url_for('par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'par_trend'. Did you mean 'update_user_role' instead?
2025-07-16 07:00:59,653 - INFO - 127.0.0.1 - - [16/Jul/2025 07:00:59] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
2025-07-16 07:00:59,918 - INFO - 127.0.0.1 - - [16/Jul/2025 07:00:59] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-16 07:01:03,687] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'par_trend' %}active{% endif %}" href="{{ url_for('par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'par_trend'. Did you mean 'update_user_role' instead?
2025-07-16 07:01:03,687 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'par_trend' %}active{% endif %}" href="{{ url_for('par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'par_trend'. Did you mean 'update_user_role' instead?
2025-07-16 07:01:03,705 - INFO - 127.0.0.1 - - [16/Jul/2025 07:01:03] "[35m[1mGET / HTTP/1.1[0m" 500 -
[2025-07-16 07:01:05,497] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'par_trend' %}active{% endif %}" href="{{ url_for('par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'par_trend'. Did you mean 'update_user_role' instead?
2025-07-16 07:01:05,497 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'par_trend' %}active{% endif %}" href="{{ url_for('par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'par_trend'. Did you mean 'update_user_role' instead?
2025-07-16 07:01:05,556 - INFO - 127.0.0.1 - - [16/Jul/2025 07:01:05] "[35m[1mGET / HTTP/1.1[0m" 500 -
[2025-07-16 07:13:51,357] INFO in app: ==================================================
[2025-07-16 07:13:51,363] INFO in app: Application logging initialized successfully
[2025-07-16 07:13:51,364] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 07:13:51,365] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 07:13:51,369] INFO in app: System encoding: utf-8
[2025-07-16 07:13:51,371] INFO in app: ==================================================
2025-07-16 07:13:51,583 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 07:13:51,584 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 07:13:51,584 - INFO - Scheduler started
2025-07-16 07:13:51,594 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 07:13:51,594 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 07:13:56,192] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'main.par_trend' %}active{% endif %}" href="{{ url_for('main.par_trend') }}">
    ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main.par_trend'. Did you mean 'admin_votes' instead?
2025-07-16 07:13:56,192 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'main.par_trend' %}active{% endif %}" href="{{ url_for('main.par_trend') }}">
    ^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main.par_trend'. Did you mean 'admin_votes' instead?
2025-07-16 07:13:56,221 - INFO - 127.0.0.1 - - [16/Jul/2025 07:13:56] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 07:13:56,322 - INFO - 127.0.0.1 - - [16/Jul/2025 07:13:56] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 07:13:58,371 - INFO - 127.0.0.1 - - [16/Jul/2025 07:13:58] "[32mGET /login?next=/arrears?status%3Dunresolved%26aging%3D HTTP/1.1[0m" 302 -
[2025-07-16 07:20:30,985] INFO in app: ==================================================
[2025-07-16 07:20:30,993] INFO in app: Application logging initialized successfully
[2025-07-16 07:20:30,995] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 07:20:30,997] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 07:20:31,004] INFO in app: System encoding: utf-8
[2025-07-16 07:20:31,005] INFO in app: ==================================================
2025-07-16 07:20:31,229 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 07:20:31,230 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 07:20:31,230 - INFO - Scheduler started
2025-07-16 07:20:31,240 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 07:20:31,240 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 07:20:35,708] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'main.par_trend' %}active{% endif %}" href="{{ url_for('main.par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main.par_trend'. Did you mean 'admin_votes' instead?
2025-07-16 07:20:35,708 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'main.par_trend' %}active{% endif %}" href="{{ url_for('main.par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main.par_trend'. Did you mean 'admin_votes' instead?
2025-07-16 07:20:35,735 - INFO - 127.0.0.1 - - [16/Jul/2025 07:20:35] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 07:20:35,787 - INFO - 127.0.0.1 - - [16/Jul/2025 07:20:35] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-16 07:20:38,837] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'main.par_trend' %}active{% endif %}" href="{{ url_for('main.par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main.par_trend'. Did you mean 'admin_votes' instead?
2025-07-16 07:20:38,837 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'main.par_trend' %}active{% endif %}" href="{{ url_for('main.par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main.par_trend'. Did you mean 'admin_votes' instead?
2025-07-16 07:20:38,877 - INFO - 127.0.0.1 - - [16/Jul/2025 07:20:38] "[35m[1mGET / HTTP/1.1[0m" 500 -
[2025-07-16 07:21:09,363] INFO in app: ==================================================
[2025-07-16 07:21:09,370] INFO in app: Application logging initialized successfully
[2025-07-16 07:21:09,372] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 07:21:09,373] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 07:21:09,375] INFO in app: System encoding: utf-8
[2025-07-16 07:21:09,380] INFO in app: ==================================================
2025-07-16 07:21:09,591 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 07:21:09,592 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 07:21:09,592 - INFO - Scheduler started
2025-07-16 07:21:09,601 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 07:21:09,601 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 07:21:13,320] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'main.par_trend' %}active{% endif %}" href="{{ url_for('main.par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main.par_trend'. Did you mean 'admin_votes' instead?
2025-07-16 07:21:13,320 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'main.par_trend' %}active{% endif %}" href="{{ url_for('main.par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main.par_trend'. Did you mean 'admin_votes' instead?
2025-07-16 07:21:13,342 - INFO - 127.0.0.1 - - [16/Jul/2025 07:21:13] "[35m[1mGET / HTTP/1.1[0m" 500 -
[2025-07-16 07:30:55,060] INFO in app: ==================================================
[2025-07-16 07:30:55,068] INFO in app: Application logging initialized successfully
[2025-07-16 07:30:55,072] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 07:30:55,076] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 07:30:55,078] INFO in app: System encoding: utf-8
[2025-07-16 07:30:55,080] INFO in app: ==================================================
2025-07-16 07:30:55,305 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 07:30:55,306 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 07:30:55,306 - INFO - Scheduler started
2025-07-16 07:30:55,319 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 07:30:55,319 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 07:30:59,683] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'main.par_trend' %}active{% endif %}" href="{{ url_for('main.par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main.par_trend'. Did you mean 'admin_votes' instead?
2025-07-16 07:30:59,683 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'main.par_trend' %}active{% endif %}" href="{{ url_for('main.par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main.par_trend'. Did you mean 'admin_votes' instead?
2025-07-16 07:30:59,711 - INFO - 127.0.0.1 - - [16/Jul/2025 07:30:59] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 07:30:59,851 - INFO - 127.0.0.1 - - [16/Jul/2025 07:30:59] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-16 07:31:01,503] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'main.par_trend' %}active{% endif %}" href="{{ url_for('main.par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main.par_trend'. Did you mean 'admin_votes' instead?
2025-07-16 07:31:01,503 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'main.par_trend' %}active{% endif %}" href="{{ url_for('main.par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main.par_trend'. Did you mean 'admin_votes' instead?
2025-07-16 07:31:01,533 - INFO - 127.0.0.1 - - [16/Jul/2025 07:31:01] "[35m[1mGET / HTTP/1.1[0m" 500 -
[2025-07-16 07:31:01,990] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'main.par_trend' %}active{% endif %}" href="{{ url_for('main.par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main.par_trend'. Did you mean 'admin_votes' instead?
2025-07-16 07:31:01,990 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'main.par_trend' %}active{% endif %}" href="{{ url_for('main.par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main.par_trend'. Did you mean 'admin_votes' instead?
2025-07-16 07:31:02,026 - INFO - 127.0.0.1 - - [16/Jul/2025 07:31:02] "[35m[1mGET / HTTP/1.1[0m" 500 -
[2025-07-16 07:31:02,376] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'main.par_trend' %}active{% endif %}" href="{{ url_for('main.par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main.par_trend'. Did you mean 'admin_votes' instead?
2025-07-16 07:31:02,376 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'main.par_trend' %}active{% endif %}" href="{{ url_for('main.par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main.par_trend'. Did you mean 'admin_votes' instead?
2025-07-16 07:31:02,410 - INFO - 127.0.0.1 - - [16/Jul/2025 07:31:02] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 07:53:09,336 - INFO - 127.0.0.1 - - [16/Jul/2025 07:53:09] "[33mGET /debug HTTP/1.1[0m" 404 -
[2025-07-16 07:53:27,730] INFO in app: ==================================================
[2025-07-16 07:53:27,737] INFO in app: Application logging initialized successfully
[2025-07-16 07:53:27,739] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 07:53:27,741] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 07:53:27,743] INFO in app: System encoding: utf-8
[2025-07-16 07:53:27,745] INFO in app: ==================================================
2025-07-16 07:53:28,034 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 07:53:28,035 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 07:53:28,035 - INFO - Scheduler started
2025-07-16 07:53:28,046 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 07:53:28,047 - INFO - [33mPress CTRL+C to quit[0m
2025-07-16 07:53:31,177 - INFO - 127.0.0.1 - - [16/Jul/2025 07:53:31] "[33mGET /debug HTTP/1.1[0m" 404 -
2025-07-16 07:53:33,557 - INFO - 127.0.0.1 - - [16/Jul/2025 07:53:33] "[33mGET /debug HTTP/1.1[0m" 404 -
[2025-07-16 08:01:22,333] INFO in app: ==================================================
[2025-07-16 08:01:22,340] INFO in app: Application logging initialized successfully
[2025-07-16 08:01:22,342] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 08:01:22,343] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 08:01:22,345] INFO in app: System encoding: utf-8
[2025-07-16 08:01:22,348] INFO in app: ==================================================
2025-07-16 08:01:22,547 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 08:01:22,548 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 08:01:22,549 - INFO - Scheduler started
2025-07-16 08:01:22,563 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 08:01:22,563 - INFO - [33mPress CTRL+C to quit[0m
2025-07-16 08:01:27,361 - INFO - 127.0.0.1 - - [16/Jul/2025 08:01:27] "[33mGET /debug HTTP/1.1[0m" 404 -
2025-07-16 08:01:27,410 - INFO - 127.0.0.1 - - [16/Jul/2025 08:01:27] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-16 08:01:31,689] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'par_trend' %}active{% endif %}" href="{{ url_for('par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'par_trend'. Did you mean 'update_user_role' instead?
2025-07-16 08:01:31,689 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'par_trend' %}active{% endif %}" href="{{ url_for('par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'par_trend'. Did you mean 'update_user_role' instead?
2025-07-16 08:01:31,728 - INFO - 127.0.0.1 - - [16/Jul/2025 08:01:31] "[35m[1mGET / HTTP/1.1[0m" 500 -
[2025-07-16 08:52:31,160] INFO in app: ==================================================
[2025-07-16 08:52:31,167] INFO in app: Application logging initialized successfully
[2025-07-16 08:52:31,169] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 08:52:31,172] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 08:52:31,174] INFO in app: System encoding: utf-8
[2025-07-16 08:52:31,177] INFO in app: ==================================================
2025-07-16 08:52:31,384 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 08:52:31,387 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 08:52:31,387 - INFO - Scheduler started
2025-07-16 08:52:31,398 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 08:52:31,398 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 08:52:35,632] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'par_trend' %}active{% endif %}" href="{{ url_for('par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'par_trend'. Did you mean 'update_user_role' instead?
2025-07-16 08:52:35,632 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'par_trend' %}active{% endif %}" href="{{ url_for('par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'par_trend'. Did you mean 'update_user_role' instead?
2025-07-16 08:52:35,661 - INFO - 127.0.0.1 - - [16/Jul/2025 08:52:35] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 08:52:35,726 - INFO - 127.0.0.1 - - [16/Jul/2025 08:52:35] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-16 08:52:37,340] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'par_trend' %}active{% endif %}" href="{{ url_for('par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'par_trend'. Did you mean 'update_user_role' instead?
2025-07-16 08:52:37,340 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'par_trend' %}active{% endif %}" href="{{ url_for('par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'par_trend'. Did you mean 'update_user_role' instead?
2025-07-16 08:52:37,375 - INFO - 127.0.0.1 - - [16/Jul/2025 08:52:37] "[35m[1mGET / HTTP/1.1[0m" 500 -
[2025-07-16 08:53:31,106] INFO in app: ==================================================
[2025-07-16 08:53:31,112] INFO in app: Application logging initialized successfully
[2025-07-16 08:53:31,114] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 08:53:31,117] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 08:53:31,120] INFO in app: System encoding: utf-8
[2025-07-16 08:53:31,124] INFO in app: ==================================================
2025-07-16 08:53:31,326 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 08:53:31,328 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 08:53:31,328 - INFO - Scheduler started
2025-07-16 08:53:31,338 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 08:53:31,339 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 08:53:36,705] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'main.par_trend' %}active{% endif %}" href="{{ url_for('main.par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main.par_trend'. Did you mean 'admin_votes' instead?
2025-07-16 08:53:36,705 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'main.par_trend' %}active{% endif %}" href="{{ url_for('main.par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main.par_trend'. Did you mean 'admin_votes' instead?
2025-07-16 08:53:36,726 - INFO - 127.0.0.1 - - [16/Jul/2025 08:53:36] "[35m[1mGET / HTTP/1.1[0m" 500 -
[2025-07-16 09:11:00,028] INFO in app: ==================================================
[2025-07-16 09:11:00,049] INFO in app: Application logging initialized successfully
[2025-07-16 09:11:00,065] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 09:11:00,068] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 09:11:00,072] INFO in app: System encoding: utf-8
[2025-07-16 09:11:00,075] INFO in app: ==================================================
[2025-07-16 09:13:20,811] INFO in app: ==================================================
[2025-07-16 09:13:20,819] INFO in app: Application logging initialized successfully
[2025-07-16 09:13:20,821] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 09:13:20,823] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 09:13:20,825] INFO in app: System encoding: utf-8
[2025-07-16 09:13:20,828] INFO in app: ==================================================
2025-07-16 09:13:21,044 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 09:13:21,046 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 09:13:21,046 - INFO - Scheduler started
2025-07-16 09:13:21,057 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 09:13:21,057 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 09:13:25,697] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'main.par_trend' %}active{% endif %}" href="{{ url_for('main.par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main.par_trend'. Did you mean 'par_trend' instead?
2025-07-16 09:13:25,697 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 3269, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 117, in top-level template code
    <a class="nav-link {% if request.endpoint == 'main.par_trend' %}active{% endif %}" href="{{ url_for('main.par_trend') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main.par_trend'. Did you mean 'par_trend' instead?
2025-07-16 09:13:25,746 - INFO - 127.0.0.1 - - [16/Jul/2025 09:13:25] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 09:13:25,806 - INFO - 127.0.0.1 - - [16/Jul/2025 09:13:25] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-16 09:15:39,635] INFO in app: ==================================================
[2025-07-16 09:15:39,641] INFO in app: Application logging initialized successfully
[2025-07-16 09:15:39,642] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 09:15:39,643] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 09:15:39,648] INFO in app: System encoding: utf-8
[2025-07-16 09:15:39,651] INFO in app: ==================================================
2025-07-16 09:15:39,894 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 09:15:39,896 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 09:15:39,896 - INFO - Scheduler started
2025-07-16 09:15:39,908 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 09:15:39,908 - INFO - [33mPress CTRL+C to quit[0m
2025-07-16 09:15:44,054 - INFO - 127.0.0.1 - - [16/Jul/2025 09:15:44] "GET / HTTP/1.1" 200 -
2025-07-16 09:15:47,544 - INFO - 127.0.0.1 - - [16/Jul/2025 09:15:47] "GET /par-trend HTTP/1.1" 200 -
2025-07-16 09:16:12,739 - INFO - 127.0.0.1 - - [16/Jul/2025 09:16:12] "GET /arrears HTTP/1.1" 200 -
[2025-07-16 09:22:28,433] INFO in app: ==================================================
[2025-07-16 09:22:28,442] INFO in app: Application logging initialized successfully
[2025-07-16 09:22:28,444] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 09:22:28,446] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 09:22:28,447] INFO in app: System encoding: utf-8
[2025-07-16 09:22:28,448] INFO in app: ==================================================
2025-07-16 09:22:28,671 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 09:22:28,673 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 09:22:28,673 - INFO - Scheduler started
2025-07-16 09:24:07,840 - INFO - Scheduler has been shut down
2025-07-16 09:24:15,174 - INFO - 127.0.0.1 - - [16/Jul/2025 09:24:15] "GET /par-trend HTTP/1.1" 200 -
[2025-07-16 09:25:50,583] INFO in app: ==================================================
[2025-07-16 09:25:50,593] INFO in app: Application logging initialized successfully
[2025-07-16 09:25:50,595] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 09:25:50,596] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 09:25:50,597] INFO in app: System encoding: utf-8
[2025-07-16 09:25:50,599] INFO in app: ==================================================
2025-07-16 09:25:50,830 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 09:25:50,831 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 09:25:50,831 - INFO - Scheduler started
2025-07-16 09:28:09,431 - INFO - 127.0.0.1 - - [16/Jul/2025 09:28:09] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-07-16 09:31:29,032 - INFO - Scheduler has been shut down
[2025-07-16 09:31:33,540] INFO in app: ==================================================
[2025-07-16 09:31:33,547] INFO in app: Application logging initialized successfully
[2025-07-16 09:31:33,549] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 09:31:33,551] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 09:31:33,554] INFO in app: System encoding: utf-8
[2025-07-16 09:31:33,556] INFO in app: ==================================================
2025-07-16 09:31:33,783 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 09:31:33,785 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 09:31:33,785 - INFO - Scheduler started
2025-07-16 09:31:33,800 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 09:31:33,800 - INFO - [33mPress CTRL+C to quit[0m
2025-07-16 09:31:40,271 - INFO - 127.0.0.1 - - [16/Jul/2025 09:31:40] "GET /par-trend HTTP/1.1" 200 -
2025-07-16 09:31:40,338 - INFO - 127.0.0.1 - - [16/Jul/2025 09:31:40] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-07-16 09:31:42,793 - INFO - 127.0.0.1 - - [16/Jul/2025 09:31:42] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 09:31:58,800 - INFO - 127.0.0.1 - - [16/Jul/2025 09:31:58] "GET /par-trend HTTP/1.1" 200 -
2025-07-16 09:32:02,320 - INFO - 127.0.0.1 - - [16/Jul/2025 09:32:02] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 09:32:09,169 - INFO - 127.0.0.1 - - [16/Jul/2025 09:32:09] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-07-16 09:36:01,949 - INFO - 127.0.0.1 - - [16/Jul/2025 09:36:01] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-07-16 09:41:25,663 - INFO - Scheduler has been shut down
[2025-07-16 09:41:29,767] INFO in app: ==================================================
[2025-07-16 09:41:29,773] INFO in app: Application logging initialized successfully
[2025-07-16 09:41:29,776] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 09:41:29,779] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 09:41:29,781] INFO in app: System encoding: utf-8
[2025-07-16 09:41:29,783] INFO in app: ==================================================
2025-07-16 09:41:30,013 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 09:41:30,015 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 09:41:30,015 - INFO - Scheduler started
2025-07-16 09:41:30,025 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 09:41:30,025 - INFO - [33mPress CTRL+C to quit[0m
2025-07-16 09:41:34,399 - INFO - 127.0.0.1 - - [16/Jul/2025 09:41:34] "GET /par-trend HTTP/1.1" 200 -
2025-07-16 09:41:35,461 - INFO - 127.0.0.1 - - [16/Jul/2025 09:41:35] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 09:55:31,072 - INFO - Scheduler has been shut down
[2025-07-16 09:55:34,993] INFO in app: ==================================================
[2025-07-16 09:55:34,999] INFO in app: Application logging initialized successfully
[2025-07-16 09:55:35,002] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 09:55:35,004] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 09:55:35,008] INFO in app: System encoding: utf-8
[2025-07-16 09:55:35,012] INFO in app: ==================================================
2025-07-16 09:55:35,240 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 09:55:35,242 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 09:55:35,242 - INFO - Scheduler started
2025-07-16 09:55:35,252 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 09:55:35,252 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 09:55:40,257] ERROR in app: Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5732, in par_trend
    return render_template('par_trend.html', dates=dates, par_30=par_30, par_60=par_60, par_90=par_90)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 42, in template
    {% for d, p30, p60, p90 in dates|zip(par_30, par_60, par_90) %}
    ^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'zip'.
2025-07-16 09:55:40,257 - ERROR - Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5732, in par_trend
    return render_template('par_trend.html', dates=dates, par_30=par_30, par_60=par_60, par_90=par_90)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 42, in template
    {% for d, p30, p60, p90 in dates|zip(par_30, par_60, par_90) %}
    ^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'zip'.
2025-07-16 09:55:40,316 - INFO - 127.0.0.1 - - [16/Jul/2025 09:55:40] "[35m[1mGET /par-trend HTTP/1.1[0m" 500 -
2025-07-16 09:55:40,385 - INFO - 127.0.0.1 - - [16/Jul/2025 09:55:40] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 09:58:51,096 - INFO - Scheduler has been shut down
[2025-07-16 09:58:55,612] INFO in app: ==================================================
[2025-07-16 09:58:55,620] INFO in app: Application logging initialized successfully
[2025-07-16 09:58:55,623] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 09:58:55,626] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 09:58:55,629] INFO in app: System encoding: utf-8
[2025-07-16 09:58:55,631] INFO in app: ==================================================
2025-07-16 09:58:55,873 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 09:58:55,874 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 09:58:55,874 - INFO - Scheduler started
2025-07-16 09:58:55,892 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 09:58:55,892 - INFO - [33mPress CTRL+C to quit[0m
2025-07-16 09:58:59,410 - INFO - 127.0.0.1 - - [16/Jul/2025 09:58:59] "GET /par-trend HTTP/1.1" 200 -
2025-07-16 09:59:14,852 - INFO - 127.0.0.1 - - [16/Jul/2025 09:59:14] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 09:59:33,327 - INFO - 127.0.0.1 - - [16/Jul/2025 09:59:33] "GET /par-trend?period=1y HTTP/1.1" 200 -
2025-07-16 09:59:43,396 - INFO - 127.0.0.1 - - [16/Jul/2025 09:59:43] "GET /par-trend?period=12w HTTP/1.1" 200 -
2025-07-16 10:24:58,922 - INFO - Scheduler has been shut down
[2025-07-16 10:25:03,907] INFO in app: ==================================================
[2025-07-16 10:25:03,915] INFO in app: Application logging initialized successfully
[2025-07-16 10:25:03,917] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 10:25:03,919] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 10:25:03,921] INFO in app: System encoding: utf-8
[2025-07-16 10:25:03,924] INFO in app: ==================================================
2025-07-16 10:25:04,165 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 10:25:04,167 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 10:25:04,167 - INFO - Scheduler started
2025-07-16 10:25:04,176 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 10:25:04,176 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 10:25:09,515] ERROR in app: Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5772, in par_trend
        return render_template(
               ~~~~~~~~~~~~~~~^
        'par_trend.html',
        ^^^^^^^^^^^^^^^^^
    ...<5 lines>...
        par_data=zip(dates, par_30, par_60, par_90)  # <-- NEW
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 171, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 35, in block 'content'
    data-dates1="{{ dates1 | tojson | safe }}"
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-16 10:25:09,515 - ERROR - Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5772, in par_trend
        return render_template(
               ~~~~~~~~~~~~~~~^
        'par_trend.html',
        ^^^^^^^^^^^^^^^^^
    ...<5 lines>...
        par_data=zip(dates, par_30, par_60, par_90)  # <-- NEW
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 171, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 35, in block 'content'
    data-dates1="{{ dates1 | tojson | safe }}"
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-16 10:25:09,612 - INFO - 127.0.0.1 - - [16/Jul/2025 10:25:09] "[35m[1mGET /par-trend?period=12w HTTP/1.1[0m" 500 -
2025-07-16 10:25:09,673 - INFO - 127.0.0.1 - - [16/Jul/2025 10:25:09] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-16 10:25:15,688] ERROR in app: Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5772, in par_trend
        return render_template(
               ~~~~~~~~~~~~~~~^
        'par_trend.html',
        ^^^^^^^^^^^^^^^^^
    ...<5 lines>...
        par_data=zip(dates, par_30, par_60, par_90)  # <-- NEW
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 171, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 35, in block 'content'
    data-dates1="{{ dates1 | tojson | safe }}"
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-16 10:25:15,688 - ERROR - Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5772, in par_trend
        return render_template(
               ~~~~~~~~~~~~~~~^
        'par_trend.html',
        ^^^^^^^^^^^^^^^^^
    ...<5 lines>...
        par_data=zip(dates, par_30, par_60, par_90)  # <-- NEW
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 171, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 35, in block 'content'
    data-dates1="{{ dates1 | tojson | safe }}"
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-16 10:25:15,736 - INFO - 127.0.0.1 - - [16/Jul/2025 10:25:15] "[35m[1mGET /par-trend?period=12w HTTP/1.1[0m" 500 -
[2025-07-16 10:25:22,011] ERROR in app: Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5772, in par_trend
        return render_template(
               ~~~~~~~~~~~~~~~^
        'par_trend.html',
        ^^^^^^^^^^^^^^^^^
    ...<5 lines>...
        par_data=zip(dates, par_30, par_60, par_90)  # <-- NEW
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 171, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 35, in block 'content'
    data-dates1="{{ dates1 | tojson | safe }}"
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-16 10:25:22,011 - ERROR - Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5772, in par_trend
        return render_template(
               ~~~~~~~~~~~~~~~^
        'par_trend.html',
        ^^^^^^^^^^^^^^^^^
    ...<5 lines>...
        par_data=zip(dates, par_30, par_60, par_90)  # <-- NEW
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 171, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 35, in block 'content'
    data-dates1="{{ dates1 | tojson | safe }}"
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-16 10:25:22,056 - INFO - 127.0.0.1 - - [16/Jul/2025 10:25:22] "[35m[1mGET /par-trend?period=6m HTTP/1.1[0m" 500 -
2025-07-16 10:25:31,025 - INFO - 127.0.0.1 - - [16/Jul/2025 10:25:31] "GET /arrears HTTP/1.1" 200 -
[2025-07-16 10:25:32,196] ERROR in app: Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5772, in par_trend
        return render_template(
               ~~~~~~~~~~~~~~~^
        'par_trend.html',
        ^^^^^^^^^^^^^^^^^
    ...<5 lines>...
        par_data=zip(dates, par_30, par_60, par_90)  # <-- NEW
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 171, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 35, in block 'content'
    data-dates1="{{ dates1 | tojson | safe }}"
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-16 10:25:32,196 - ERROR - Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5772, in par_trend
        return render_template(
               ~~~~~~~~~~~~~~~^
        'par_trend.html',
        ^^^^^^^^^^^^^^^^^
    ...<5 lines>...
        par_data=zip(dates, par_30, par_60, par_90)  # <-- NEW
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 171, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 35, in block 'content'
    data-dates1="{{ dates1 | tojson | safe }}"
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-16 10:25:32,227 - INFO - 127.0.0.1 - - [16/Jul/2025 10:25:32] "[35m[1mGET /par-trend HTTP/1.1[0m" 500 -
2025-07-16 10:32:17,405 - INFO - Scheduler has been shut down
[2025-07-16 10:32:21,251] INFO in app: ==================================================
[2025-07-16 10:32:21,259] INFO in app: Application logging initialized successfully
[2025-07-16 10:32:21,263] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 10:32:21,265] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 10:32:21,273] INFO in app: System encoding: utf-8
[2025-07-16 10:32:21,274] INFO in app: ==================================================
2025-07-16 10:32:21,477 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 10:32:21,478 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 10:32:21,478 - INFO - Scheduler started
2025-07-16 10:32:21,489 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 10:32:21,489 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 10:32:25,289] ERROR in app: Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5773, in par_trend
    return render_template(
        'par_trend.html',
        data1=data1, data2=data2,
        period1=p1, period2=p2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 171, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 35, in block 'content'
    data-dates1="{{ dates1 | tojson | safe }}"
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-16 10:32:25,289 - ERROR - Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5773, in par_trend
    return render_template(
        'par_trend.html',
        data1=data1, data2=data2,
        period1=p1, period2=p2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 171, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 35, in block 'content'
    data-dates1="{{ dates1 | tojson | safe }}"
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-16 10:32:25,309 - INFO - 127.0.0.1 - - [16/Jul/2025 10:32:25] "[35m[1mGET /par-trend HTTP/1.1[0m" 500 -
2025-07-16 10:32:25,365 - INFO - 127.0.0.1 - - [16/Jul/2025 10:32:25] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 10:32:29,573 - INFO - 127.0.0.1 - - [16/Jul/2025 10:32:29] "GET /payments HTTP/1.1" 200 -
2025-07-16 10:32:30,725 - INFO - 127.0.0.1 - - [16/Jul/2025 10:32:30] "GET /arrears HTTP/1.1" 200 -
[2025-07-16 10:32:32,773] ERROR in app: Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5773, in par_trend
    return render_template(
        'par_trend.html',
        data1=data1, data2=data2,
        period1=p1, period2=p2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 171, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 35, in block 'content'
    data-dates1="{{ dates1 | tojson | safe }}"
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-16 10:32:32,773 - ERROR - Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5773, in par_trend
    return render_template(
        'par_trend.html',
        data1=data1, data2=data2,
        period1=p1, period2=p2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 171, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 35, in block 'content'
    data-dates1="{{ dates1 | tojson | safe }}"
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-16 10:32:32,807 - INFO - 127.0.0.1 - - [16/Jul/2025 10:32:32] "[35m[1mGET /par-trend HTTP/1.1[0m" 500 -
[2025-07-16 10:48:48,392] INFO in app: ==================================================
[2025-07-16 10:48:48,398] INFO in app: Application logging initialized successfully
[2025-07-16 10:48:48,399] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 10:48:48,401] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 10:48:48,403] INFO in app: System encoding: utf-8
[2025-07-16 10:48:48,406] INFO in app: ==================================================
2025-07-16 10:48:48,627 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 10:48:48,629 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 10:48:48,629 - INFO - Scheduler started
2025-07-16 10:48:48,638 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 10:48:48,639 - INFO - [33mPress CTRL+C to quit[0m
2025-07-16 10:48:51,181 - INFO - Scheduler has been shut down
[2025-07-16 10:48:54,472] INFO in app: ==================================================
[2025-07-16 10:48:54,478] INFO in app: Application logging initialized successfully
[2025-07-16 10:48:54,480] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 10:48:54,482] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 10:48:54,484] INFO in app: System encoding: utf-8
[2025-07-16 10:48:54,485] INFO in app: ==================================================
2025-07-16 10:48:54,734 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 10:48:54,736 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 10:48:54,736 - INFO - Scheduler started
2025-07-16 10:48:54,750 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 10:48:54,750 - INFO - [33mPress CTRL+C to quit[0m
2025-07-16 10:49:00,669 - INFO - 127.0.0.1 - - [16/Jul/2025 10:49:00] "GET /par-trend HTTP/1.1" 200 -
2025-07-16 10:49:03,404 - INFO - 127.0.0.1 - - [16/Jul/2025 10:49:03] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 10:51:50,453 - INFO - Scheduler has been shut down
[2025-07-16 10:51:54,095] INFO in app: ==================================================
[2025-07-16 10:51:54,101] INFO in app: Application logging initialized successfully
[2025-07-16 10:51:54,103] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 10:51:54,104] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 10:51:54,107] INFO in app: System encoding: utf-8
[2025-07-16 10:51:54,109] INFO in app: ==================================================
2025-07-16 10:51:54,426 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 10:51:54,428 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 10:51:54,428 - INFO - Scheduler started
2025-07-16 10:51:54,446 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 10:51:54,446 - INFO - [33mPress CTRL+C to quit[0m
2025-07-16 10:52:32,254 - INFO - 127.0.0.1 - - [16/Jul/2025 10:52:32] "GET /par-trend HTTP/1.1" 200 -
2025-07-16 10:52:43,667 - INFO - 127.0.0.1 - - [16/Jul/2025 10:52:43] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 11:06:25,564 - INFO - Scheduler has been shut down
[2025-07-16 11:06:29,454] INFO in app: ==================================================
[2025-07-16 11:06:29,463] INFO in app: Application logging initialized successfully
[2025-07-16 11:06:29,466] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 11:06:29,471] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 11:06:29,492] INFO in app: System encoding: utf-8
[2025-07-16 11:06:29,504] INFO in app: ==================================================
2025-07-16 11:06:29,759 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 11:06:29,761 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 11:06:29,761 - INFO - Scheduler started
2025-07-16 11:06:29,772 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 11:06:29,772 - INFO - [33mPress CTRL+C to quit[0m
2025-07-16 11:06:33,598 - INFO - 127.0.0.1 - - [16/Jul/2025 11:06:33] "GET /par-trend HTTP/1.1" 200 -
2025-07-16 11:06:34,382 - INFO - 127.0.0.1 - - [16/Jul/2025 11:06:34] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 11:06:42,094 - INFO - 127.0.0.1 - - [16/Jul/2025 11:06:42] "GET /par-trend/download?period1=this_quarter&period2=last_quarter&category=&tenure= HTTP/1.1" 200 -
2025-07-16 11:18:34,521 - INFO - Scheduler has been shut down
[2025-07-16 11:18:37,749] INFO in app: ==================================================
[2025-07-16 11:18:37,755] INFO in app: Application logging initialized successfully
[2025-07-16 11:18:37,758] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 11:18:37,759] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 11:18:37,762] INFO in app: System encoding: utf-8
[2025-07-16 11:18:37,766] INFO in app: ==================================================
2025-07-16 11:18:37,979 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 11:18:37,980 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 11:18:37,980 - INFO - Scheduler started
2025-07-16 11:18:37,991 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 11:18:37,991 - INFO - [33mPress CTRL+C to quit[0m
2025-07-16 11:18:45,439 - INFO - 127.0.0.1 - - [16/Jul/2025 11:18:45] "GET /par-trend HTTP/1.1" 200 -
2025-07-16 11:18:49,104 - INFO - 127.0.0.1 - - [16/Jul/2025 11:18:49] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 11:19:02,807 - INFO - 127.0.0.1 - - [16/Jul/2025 11:19:02] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-07-16 11:20:46,258 - INFO - Scheduler has been shut down
[2025-07-16 11:20:49,673] INFO in app: ==================================================
[2025-07-16 11:20:49,681] INFO in app: Application logging initialized successfully
[2025-07-16 11:20:49,685] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 11:20:49,688] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 11:20:49,693] INFO in app: System encoding: utf-8
[2025-07-16 11:20:49,695] INFO in app: ==================================================
2025-07-16 11:20:49,924 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 11:20:49,925 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 11:20:49,925 - INFO - Scheduler started
2025-07-16 11:20:49,934 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 11:20:49,935 - INFO - [33mPress CTRL+C to quit[0m
2025-07-16 11:21:29,684 - INFO - Scheduler has been shut down
[2025-07-16 11:21:34,663] INFO in app: ==================================================
[2025-07-16 11:21:34,674] INFO in app: Application logging initialized successfully
[2025-07-16 11:21:34,676] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 11:21:34,679] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 11:21:34,696] INFO in app: System encoding: utf-8
[2025-07-16 11:21:34,699] INFO in app: ==================================================
2025-07-16 11:21:35,152 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 11:21:35,154 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 11:21:35,154 - INFO - Scheduler started
2025-07-16 11:21:35,169 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 11:21:35,169 - INFO - [33mPress CTRL+C to quit[0m
2025-07-16 11:21:39,451 - INFO - 127.0.0.1 - - [16/Jul/2025 11:21:39] "GET /par-trend HTTP/1.1" 200 -
2025-07-16 11:21:39,531 - INFO - 127.0.0.1 - - [16/Jul/2025 11:21:39] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-07-16 11:22:10,291 - INFO - 127.0.0.1 - - [16/Jul/2025 11:22:10] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 11:22:29,326 - INFO - 127.0.0.1 - - [16/Jul/2025 11:22:29] "GET /par-trend HTTP/1.1" 200 -
2025-07-16 11:26:16,734 - INFO - 127.0.0.1 - - [16/Jul/2025 11:26:16] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-07-16 11:28:05,594 - INFO - Scheduler has been shut down
[2025-07-16 11:28:09,147] INFO in app: ==================================================
[2025-07-16 11:28:09,157] INFO in app: Application logging initialized successfully
[2025-07-16 11:28:09,160] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 11:28:09,162] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 11:28:09,164] INFO in app: System encoding: utf-8
[2025-07-16 11:28:09,168] INFO in app: ==================================================
2025-07-16 11:28:09,387 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 11:28:09,389 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 11:28:09,389 - INFO - Scheduler started
2025-07-16 11:28:09,399 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 11:28:09,399 - INFO - [33mPress CTRL+C to quit[0m
2025-07-16 11:28:17,748 - INFO - 127.0.0.1 - - [16/Jul/2025 11:28:17] "GET /par-trend HTTP/1.1" 200 -
2025-07-16 11:28:17,815 - INFO - 127.0.0.1 - - [16/Jul/2025 11:28:17] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-07-16 11:28:19,315 - INFO - 127.0.0.1 - - [16/Jul/2025 11:28:19] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 11:28:23,531 - INFO - 127.0.0.1 - - [16/Jul/2025 11:28:23] "GET /par-trend HTTP/1.1" 200 -
2025-07-16 11:28:23,992 - INFO - 127.0.0.1 - - [16/Jul/2025 11:28:23] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 11:29:07,290 - INFO - 127.0.0.1 - - [16/Jul/2025 11:29:07] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-07-16 11:33:08,825 - INFO - Scheduler has been shut down
[2025-07-16 11:33:12,652] INFO in app: ==================================================
[2025-07-16 11:33:12,662] INFO in app: Application logging initialized successfully
[2025-07-16 11:33:12,664] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 11:33:12,666] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 11:33:12,668] INFO in app: System encoding: utf-8
[2025-07-16 11:33:12,675] INFO in app: ==================================================
2025-07-16 11:33:13,103 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 11:33:13,107 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 11:33:13,107 - INFO - Scheduler started
2025-07-16 11:33:13,128 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 11:33:13,128 - INFO - [33mPress CTRL+C to quit[0m
2025-07-16 11:33:21,888 - INFO - 127.0.0.1 - - [16/Jul/2025 11:33:21] "GET /par-trend HTTP/1.1" 200 -
2025-07-16 11:33:22,708 - INFO - 127.0.0.1 - - [16/Jul/2025 11:33:22] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 11:33:26,969 - INFO - 127.0.0.1 - - [16/Jul/2025 11:33:26] "GET /par-trend HTTP/1.1" 200 -
2025-07-16 11:33:40,395 - INFO - 127.0.0.1 - - [16/Jul/2025 11:33:40] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-07-16 11:39:19,379 - INFO - Scheduler has been shut down
[2025-07-16 11:39:22,625] INFO in app: ==================================================
[2025-07-16 11:39:22,632] INFO in app: Application logging initialized successfully
[2025-07-16 11:39:22,634] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 11:39:22,636] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 11:39:22,638] INFO in app: System encoding: utf-8
[2025-07-16 11:39:22,640] INFO in app: ==================================================
2025-07-16 11:39:22,864 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 11:39:22,865 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 11:39:22,865 - INFO - Scheduler started
2025-07-16 11:39:22,875 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 11:39:22,875 - INFO - [33mPress CTRL+C to quit[0m
2025-07-16 11:39:29,517 - INFO - 127.0.0.1 - - [16/Jul/2025 11:39:29] "GET /par-trend HTTP/1.1" 200 -
2025-07-16 11:39:30,473 - INFO - 127.0.0.1 - - [16/Jul/2025 11:39:30] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 11:40:23,575 - INFO - Scheduler has been shut down
[2025-07-16 11:40:26,961] INFO in app: ==================================================
[2025-07-16 11:40:26,967] INFO in app: Application logging initialized successfully
[2025-07-16 11:40:26,968] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 11:40:26,970] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 11:40:26,971] INFO in app: System encoding: utf-8
[2025-07-16 11:40:26,977] INFO in app: ==================================================
2025-07-16 11:40:27,334 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 11:40:27,335 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 11:40:27,336 - INFO - Scheduler started
2025-07-16 11:40:27,349 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 11:40:27,349 - INFO - [33mPress CTRL+C to quit[0m
2025-07-16 11:40:30,946 - INFO - 127.0.0.1 - - [16/Jul/2025 11:40:30] "GET /par-trend HTTP/1.1" 200 -
2025-07-16 11:40:32,056 - INFO - 127.0.0.1 - - [16/Jul/2025 11:40:32] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 11:40:58,378 - INFO - 127.0.0.1 - - [16/Jul/2025 11:40:58] "GET /par-trend?period1=this_quarter&period2=this_quarter&category=&tenure= HTTP/1.1" 200 -
2025-07-16 11:59:13,788 - INFO - Scheduler has been shut down
[2025-07-16 11:59:17,980] INFO in app: ==================================================
[2025-07-16 11:59:17,985] INFO in app: Application logging initialized successfully
[2025-07-16 11:59:17,987] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 11:59:17,989] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 11:59:17,991] INFO in app: System encoding: utf-8
[2025-07-16 11:59:17,997] INFO in app: ==================================================
2025-07-16 11:59:18,220 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 11:59:18,221 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 11:59:18,222 - INFO - Scheduler started
2025-07-16 11:59:18,232 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 11:59:18,232 - INFO - [33mPress CTRL+C to quit[0m
2025-07-16 11:59:25,427 - INFO - 127.0.0.1 - - [16/Jul/2025 11:59:25] "GET /par-trend?period1=this_quarter&period2=this_quarter&category=&tenure= HTTP/1.1" 200 -
2025-07-16 11:59:28,618 - INFO - 127.0.0.1 - - [16/Jul/2025 11:59:28] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-16 13:39:43,900] INFO in app: ==================================================
[2025-07-16 13:39:43,985] INFO in app: Application logging initialized successfully
[2025-07-16 13:39:43,987] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 13:39:43,989] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 13:39:43,990] INFO in app: System encoding: utf-8
[2025-07-16 13:39:43,992] INFO in app: ==================================================
2025-07-16 13:39:44,325 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 13:39:44,327 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 13:39:44,327 - INFO - Scheduler started
2025-07-16 13:39:44,362 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 13:39:44,362 - INFO - [33mPress CTRL+C to quit[0m
2025-07-16 13:39:49,218 - INFO - 127.0.0.1 - - [16/Jul/2025 13:39:49] "[33mGET /par-trend?period1=this_quarter&period2=this_quarter&category=&tenure= HTTP/1.1[0m" 404 -
2025-07-16 13:39:49,303 - INFO - 127.0.0.1 - - [16/Jul/2025 13:39:49] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 13:39:49,718 - INFO - 127.0.0.1 - - [16/Jul/2025 13:39:49] "[33mGET /par-trend?period1=this_quarter&period2=this_quarter&category=&tenure= HTTP/1.1[0m" 404 -
2025-07-16 13:39:50,036 - INFO - 127.0.0.1 - - [16/Jul/2025 13:39:50] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-16 13:40:33,531] ERROR in app: Exception on /arrears-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5884, in arrears_trend
    return render_template(
        'arrears_trend.html',
    ...<11 lines>...
        zipped2=zipped2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\arrears_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 77, in top-level template code
    <a class="nav-link {% if request.endpoint == 'home' %}active{% endif %}" href="{{ url_for('home') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'home'. Did you mean 'db_check' instead?
2025-07-16 13:40:33,531 - ERROR - Exception on /arrears-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5884, in arrears_trend
    return render_template(
        'arrears_trend.html',
    ...<11 lines>...
        zipped2=zipped2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\arrears_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 77, in top-level template code
    <a class="nav-link {% if request.endpoint == 'home' %}active{% endif %}" href="{{ url_for('home') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'home'. Did you mean 'db_check' instead?
2025-07-16 13:40:33,570 - INFO - 127.0.0.1 - - [16/Jul/2025 13:40:33] "[35m[1mGET /arrears-trend HTTP/1.1[0m" 500 -
2025-07-16 13:40:57,806 - INFO - 127.0.0.1 - - [16/Jul/2025 13:40:57] "[33mGET /par-trend HTTP/1.1[0m" 404 -
2025-07-16 13:41:15,549 - INFO - 127.0.0.1 - - [16/Jul/2025 13:41:15] "[33mGET / HTTP/1.1[0m" 404 -
2025-07-16 13:41:18,919 - INFO - 127.0.0.1 - - [16/Jul/2025 13:41:18] "[33mGET / HTTP/1.1[0m" 404 -
2025-07-16 13:41:19,633 - INFO - 127.0.0.1 - - [16/Jul/2025 13:41:19] "[33mGET / HTTP/1.1[0m" 404 -
2025-07-16 13:41:23,160 - INFO - 127.0.0.1 - - [16/Jul/2025 13:41:23] "[33mGET /par-trend HTTP/1.1[0m" 404 -
2025-07-16 13:41:49,514 - INFO - 127.0.0.1 - - [16/Jul/2025 13:41:49] "[33mGET /login?next=/ HTTP/1.1[0m" 404 -
2025-07-16 13:41:55,830 - INFO - 127.0.0.1 - - [16/Jul/2025 13:41:55] "[33mGET / HTTP/1.1[0m" 404 -
2025-07-16 13:41:56,891 - INFO - 127.0.0.1 - - [16/Jul/2025 13:41:56] "[33mGET / HTTP/1.1[0m" 404 -
2025-07-16 13:42:03,724 - INFO - Scheduler has been shut down
[2025-07-16 13:42:08,979] INFO in app: ==================================================
[2025-07-16 13:42:08,984] INFO in app: Application logging initialized successfully
[2025-07-16 13:42:08,986] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 13:42:08,990] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 13:42:08,994] INFO in app: System encoding: utf-8
[2025-07-16 13:42:08,998] INFO in app: ==================================================
2025-07-16 13:42:09,258 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 13:42:09,259 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 13:42:09,259 - INFO - Scheduler started
2025-07-16 13:42:09,274 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 13:42:09,274 - INFO - [33mPress CTRL+C to quit[0m
2025-07-16 13:42:14,133 - INFO - 127.0.0.1 - - [16/Jul/2025 13:42:14] "[33mGET / HTTP/1.1[0m" 404 -
2025-07-16 13:42:14,178 - INFO - 127.0.0.1 - - [16/Jul/2025 13:42:14] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 13:43:05,630 - INFO - Scheduler has been shut down
[2025-07-16 13:43:08,858] INFO in app: ==================================================
[2025-07-16 13:43:08,863] INFO in app: Application logging initialized successfully
[2025-07-16 13:43:08,865] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 13:43:08,868] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 13:43:08,870] INFO in app: System encoding: utf-8
[2025-07-16 13:43:08,874] INFO in app: ==================================================
2025-07-16 13:43:09,071 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 13:43:09,073 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 13:43:09,073 - INFO - Scheduler started
2025-07-16 13:43:09,088 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 13:43:09,088 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 13:43:14,116] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5962, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 13:43:14,116 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5962, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 13:43:14,128 - INFO - 127.0.0.1 - - [16/Jul/2025 13:43:14] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 13:43:14,181 - INFO - 127.0.0.1 - - [16/Jul/2025 13:43:14] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 13:46:47,459 - INFO - Scheduler has been shut down
[2025-07-16 13:46:50,915] INFO in app: ==================================================
[2025-07-16 13:46:50,920] INFO in app: Application logging initialized successfully
[2025-07-16 13:46:50,922] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 13:46:50,925] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 13:46:50,931] INFO in app: System encoding: utf-8
[2025-07-16 13:46:50,932] INFO in app: ==================================================
2025-07-16 13:46:51,127 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 13:46:51,128 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 13:46:51,128 - INFO - Scheduler started
2025-07-16 13:46:51,139 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 13:46:51,139 - INFO - [33mPress CTRL+C to quit[0m
2025-07-16 13:47:43,507 - INFO - Scheduler has been shut down
[2025-07-16 13:47:46,602] INFO in app: ==================================================
[2025-07-16 13:47:46,609] INFO in app: Application logging initialized successfully
[2025-07-16 13:47:46,612] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 13:47:46,614] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 13:47:46,616] INFO in app: System encoding: utf-8
[2025-07-16 13:47:46,621] INFO in app: ==================================================
2025-07-16 13:47:46,810 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 13:47:46,811 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 13:47:46,811 - INFO - Scheduler started
2025-07-16 13:47:46,829 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 13:47:46,829 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 13:47:51,820] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5962, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 13:47:51,820 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5962, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 13:47:51,841 - INFO - 127.0.0.1 - - [16/Jul/2025 13:47:51] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 13:47:51,896 - INFO - 127.0.0.1 - - [16/Jul/2025 13:47:51] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 13:52:55,650 - INFO - Scheduler has been shut down
[2025-07-16 13:52:58,947] INFO in app: ==================================================
[2025-07-16 13:52:58,954] INFO in app: Application logging initialized successfully
[2025-07-16 13:52:58,956] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 13:52:58,958] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 13:52:58,960] INFO in app: System encoding: utf-8
[2025-07-16 13:52:58,964] INFO in app: ==================================================
2025-07-16 13:52:59,271 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 13:52:59,272 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 13:52:59,273 - INFO - Scheduler started
2025-07-16 13:52:59,283 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 13:52:59,283 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 13:53:20,766] INFO in app: ==================================================
[2025-07-16 13:53:20,773] INFO in app: Application logging initialized successfully
[2025-07-16 13:53:20,775] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 13:53:20,778] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 13:53:20,780] INFO in app: System encoding: utf-8
[2025-07-16 13:53:20,785] INFO in app: ==================================================
2025-07-16 13:53:20,995 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 13:53:20,996 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 13:53:20,996 - INFO - Scheduler started
2025-07-16 13:53:21,011 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 13:53:21,011 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 13:53:28,638] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5962, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 13:53:28,638 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5962, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 13:53:28,660 - INFO - 127.0.0.1 - - [16/Jul/2025 13:53:28] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 14:06:04,192 - INFO - 127.0.0.1 - - [16/Jul/2025 14:06:04] "[33mGET /arrears HTTP/1.1[0m" 404 -
[2025-07-16 19:51:06,064] INFO in app: ==================================================
[2025-07-16 19:51:06,139] INFO in app: Application logging initialized successfully
[2025-07-16 19:51:06,141] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 19:51:06,142] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 19:51:06,144] INFO in app: System encoding: utf-8
[2025-07-16 19:51:06,146] INFO in app: ==================================================
2025-07-16 19:51:06,553 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 19:51:06,555 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 19:51:06,555 - INFO - Scheduler started
2025-07-16 19:51:06,595 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 19:51:06,595 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 19:51:14,567] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5962, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 19:51:14,567 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5962, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 19:51:14,646 - INFO - 127.0.0.1 - - [16/Jul/2025 19:51:14] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 19:51:14,776 - INFO - 127.0.0.1 - - [16/Jul/2025 19:51:14] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-16 19:51:16,444] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5962, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 19:51:16,444 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5962, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 19:51:16,456 - INFO - 127.0.0.1 - - [16/Jul/2025 19:51:16] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 19:57:13,905 - INFO - Scheduler has been shut down
[2025-07-16 19:57:17,475] INFO in app: ==================================================
[2025-07-16 19:57:17,480] INFO in app: Application logging initialized successfully
[2025-07-16 19:57:17,482] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 19:57:17,484] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 19:57:17,486] INFO in app: System encoding: utf-8
[2025-07-16 19:57:17,490] INFO in app: ==================================================
2025-07-16 19:57:17,696 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 19:57:17,697 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 19:57:17,698 - INFO - Scheduler started
2025-07-16 19:57:17,709 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 19:57:17,709 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 19:57:26,329] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5962, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 19:57:26,329 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5962, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 19:57:26,342 - INFO - 127.0.0.1 - - [16/Jul/2025 19:57:26] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 19:57:26,399 - INFO - 127.0.0.1 - - [16/Jul/2025 19:57:26] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-16 19:57:28,490] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5962, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 19:57:28,490 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5962, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 19:57:28,515 - INFO - 127.0.0.1 - - [16/Jul/2025 19:57:28] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 20:08:52,857 - INFO - 127.0.0.1 - - [16/Jul/2025 20:08:52] "[33mGET /arrears HTTP/1.1[0m" 404 -
2025-07-16 20:12:46,381 - INFO - Scheduler has been shut down
[2025-07-16 20:12:51,107] INFO in app: ==================================================
[2025-07-16 20:12:51,116] INFO in app: Application logging initialized successfully
[2025-07-16 20:12:51,120] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 20:12:51,124] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 20:12:51,128] INFO in app: System encoding: utf-8
[2025-07-16 20:12:51,130] INFO in app: ==================================================
2025-07-16 20:12:51,373 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 20:12:51,374 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 20:12:51,374 - INFO - Scheduler started
2025-07-16 20:12:51,386 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 20:12:51,386 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 20:15:07,417] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5962, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 20:15:07,417 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5962, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 20:15:07,434 - INFO - 127.0.0.1 - - [16/Jul/2025 20:15:07] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 20:15:07,486 - INFO - 127.0.0.1 - - [16/Jul/2025 20:15:07] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 20:20:27,719 - INFO - Scheduler has been shut down
[2025-07-16 20:20:31,292] INFO in app: ==================================================
[2025-07-16 20:20:31,298] INFO in app: Application logging initialized successfully
[2025-07-16 20:20:31,302] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 20:20:31,304] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 20:20:31,306] INFO in app: System encoding: utf-8
[2025-07-16 20:20:31,309] INFO in app: ==================================================
2025-07-16 20:20:31,496 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 20:20:31,497 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 20:20:31,497 - INFO - Scheduler started
2025-07-16 20:20:31,508 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 20:20:31,508 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 20:20:37,567] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 20:20:37,567 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 20:20:37,596 - INFO - 127.0.0.1 - - [16/Jul/2025 20:20:37] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 20:22:53,399 - INFO - Scheduler has been shut down
[2025-07-16 20:22:57,049] INFO in app: ==================================================
[2025-07-16 20:22:57,055] INFO in app: Application logging initialized successfully
[2025-07-16 20:22:57,057] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 20:22:57,058] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 20:22:57,060] INFO in app: System encoding: utf-8
[2025-07-16 20:22:57,061] INFO in app: ==================================================
2025-07-16 20:22:57,248 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 20:22:57,250 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 20:22:57,250 - INFO - Scheduler started
2025-07-16 20:22:57,261 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 20:22:57,261 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 20:25:59,865] INFO in app: ==================================================
[2025-07-16 20:25:59,870] INFO in app: Application logging initialized successfully
[2025-07-16 20:25:59,871] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 20:25:59,872] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 20:25:59,873] INFO in app: System encoding: utf-8
[2025-07-16 20:25:59,874] INFO in app: ==================================================
2025-07-16 20:26:00,058 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 20:26:00,059 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 20:26:00,060 - INFO - Scheduler started
2025-07-16 20:32:49,652 - INFO - Scheduler has been shut down
[2025-07-16 20:32:53,025] INFO in app: ==================================================
[2025-07-16 20:32:53,031] INFO in app: Application logging initialized successfully
[2025-07-16 20:32:53,033] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 20:32:53,035] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 20:32:53,036] INFO in app: System encoding: utf-8
[2025-07-16 20:32:53,038] INFO in app: ==================================================
2025-07-16 20:32:53,231 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 20:32:53,232 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 20:32:53,232 - INFO - Scheduler started
2025-07-16 20:32:53,243 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 20:32:53,243 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 20:33:04,793] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 20:33:04,793 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 20:33:04,805 - INFO - 127.0.0.1 - - [16/Jul/2025 20:33:04] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 20:33:04,859 - INFO - 127.0.0.1 - - [16/Jul/2025 20:33:04] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 20:43:04,605 - INFO - Scheduler has been shut down
[2025-07-16 20:43:08,037] INFO in app: ==================================================
[2025-07-16 20:43:08,042] INFO in app: Application logging initialized successfully
[2025-07-16 20:43:08,044] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 20:43:08,046] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 20:43:08,049] INFO in app: System encoding: utf-8
[2025-07-16 20:43:08,052] INFO in app: ==================================================
2025-07-16 20:43:08,262 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 20:43:08,264 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 20:43:08,264 - INFO - Scheduler started
2025-07-16 20:43:08,275 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 20:43:08,275 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 20:43:19,940] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 20:43:19,940 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 20:43:19,958 - INFO - 127.0.0.1 - - [16/Jul/2025 20:43:19] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 20:43:20,009 - INFO - 127.0.0.1 - - [16/Jul/2025 20:43:20] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-16 20:43:22,034] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 20:43:22,034 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 20:43:22,064 - INFO - 127.0.0.1 - - [16/Jul/2025 20:43:22] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 20:43:23,030 - INFO - 127.0.0.1 - - [16/Jul/2025 20:43:23] "[33mGET /login?next=/ HTTP/1.1[0m" 404 -
2025-07-16 20:43:24,919 - INFO - 127.0.0.1 - - [16/Jul/2025 20:43:24] "[33mGET /login?next=/ HTTP/1.1[0m" 404 -
2025-07-16 20:50:36,796 - INFO - Scheduler has been shut down
[2025-07-16 20:50:40,249] INFO in app: ==================================================
[2025-07-16 20:50:40,254] INFO in app: Application logging initialized successfully
[2025-07-16 20:50:40,256] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 20:50:40,258] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 20:50:40,260] INFO in app: System encoding: utf-8
[2025-07-16 20:50:40,262] INFO in app: ==================================================
2025-07-16 20:50:40,447 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 20:50:40,448 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 20:50:40,448 - INFO - Scheduler started
2025-07-16 20:50:40,460 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 20:50:40,460 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 20:50:45,670] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 20:50:45,670 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 20:50:45,685 - INFO - 127.0.0.1 - - [16/Jul/2025 20:50:45] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 20:50:45,736 - INFO - 127.0.0.1 - - [16/Jul/2025 20:50:45] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 20:50:55,047 - INFO - Scheduler has been shut down
[2025-07-16 20:50:58,436] INFO in app: ==================================================
[2025-07-16 20:50:58,442] INFO in app: Application logging initialized successfully
[2025-07-16 20:50:58,444] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 20:50:58,446] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 20:50:58,448] INFO in app: System encoding: utf-8
[2025-07-16 20:50:58,450] INFO in app: ==================================================
2025-07-16 20:50:58,645 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 20:50:58,647 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 20:50:58,647 - INFO - Scheduler started
2025-07-16 20:50:58,657 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 20:50:58,657 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 20:51:02,511] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 20:51:02,511 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 20:51:02,525 - INFO - 127.0.0.1 - - [16/Jul/2025 20:51:02] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 20:51:02,562 - INFO - 127.0.0.1 - - [16/Jul/2025 20:51:02] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-16 20:51:19,883] INFO in app: ==================================================
[2025-07-16 20:51:19,889] INFO in app: Application logging initialized successfully
[2025-07-16 20:51:19,891] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 20:51:19,892] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 20:51:19,895] INFO in app: System encoding: utf-8
[2025-07-16 20:51:19,897] INFO in app: ==================================================
2025-07-16 20:51:20,189 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 20:51:20,190 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 20:51:20,190 - INFO - Scheduler started
2025-07-16 20:51:20,202 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 20:51:20,202 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 20:51:24,736] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 20:51:24,736 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 20:51:24,750 - INFO - 127.0.0.1 - - [16/Jul/2025 20:51:24] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 20:51:24,791 - INFO - 127.0.0.1 - - [16/Jul/2025 20:51:24] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 21:11:02,479 - INFO - Scheduler has been shut down
[2025-07-16 21:17:32,801] INFO in app: ==================================================
[2025-07-16 21:17:32,807] INFO in app: Application logging initialized successfully
[2025-07-16 21:17:32,809] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 21:17:32,812] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 21:17:32,813] INFO in app: System encoding: utf-8
[2025-07-16 21:17:32,818] INFO in app: ==================================================
2025-07-16 21:17:33,007 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 21:17:33,008 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 21:17:33,008 - INFO - Scheduler started
2025-07-16 21:17:33,020 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 21:17:33,020 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 21:17:39,726] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 21:17:39,726 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 21:17:39,742 - INFO - 127.0.0.1 - - [16/Jul/2025 21:17:39] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 21:17:39,798 - INFO - 127.0.0.1 - - [16/Jul/2025 21:17:39] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-16 21:17:42,443] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 21:17:42,443 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 21:17:42,462 - INFO - 127.0.0.1 - - [16/Jul/2025 21:17:42] "[35m[1mGET / HTTP/1.1[0m" 500 -
[2025-07-16 21:17:42,960] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 21:17:42,960 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 21:17:43,008 - INFO - 127.0.0.1 - - [16/Jul/2025 21:17:43] "[35m[1mGET / HTTP/1.1[0m" 500 -
[2025-07-16 21:17:47,187] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 21:17:47,187 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 82, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register_customer_debug'. Did you mean 'arrears_trend' instead?
2025-07-16 21:17:47,212 - INFO - 127.0.0.1 - - [16/Jul/2025 21:17:47] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 21:20:06,380 - INFO - Scheduler has been shut down
[2025-07-16 21:20:10,006] INFO in app: ==================================================
[2025-07-16 21:20:10,012] INFO in app: Application logging initialized successfully
[2025-07-16 21:20:10,014] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 21:20:10,016] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 21:20:10,017] INFO in app: System encoding: utf-8
[2025-07-16 21:20:10,019] INFO in app: ==================================================
2025-07-16 21:20:10,205 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 21:20:10,207 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 21:20:10,207 - INFO - Scheduler started
2025-07-16 21:20:10,221 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 21:20:10,221 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 21:20:21,331] INFO in app: ==================================================
[2025-07-16 21:20:21,337] INFO in app: Application logging initialized successfully
[2025-07-16 21:20:21,338] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 21:20:21,339] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 21:20:21,341] INFO in app: System encoding: utf-8
[2025-07-16 21:20:21,343] INFO in app: ==================================================
2025-07-16 21:20:21,540 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 21:20:21,542 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 21:20:21,542 - INFO - Scheduler started
2025-07-16 21:20:21,553 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 21:20:21,553 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 21:20:27,319] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 88, in top-level template code
    <a class="nav-link {% if request.endpoint == 'approve_customers' %}active{% endif %}" href="{{ url_for('approve_customers') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'approve_customers'. Did you mean 'arrears_trend' instead?
2025-07-16 21:20:27,319 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 88, in top-level template code
    <a class="nav-link {% if request.endpoint == 'approve_customers' %}active{% endif %}" href="{{ url_for('approve_customers') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'approve_customers'. Did you mean 'arrears_trend' instead?
2025-07-16 21:20:27,333 - INFO - 127.0.0.1 - - [16/Jul/2025 21:20:27] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 21:20:27,384 - INFO - 127.0.0.1 - - [16/Jul/2025 21:20:27] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-16 21:22:01,654 - INFO - Scheduler has been shut down
[2025-07-16 21:22:05,674] INFO in app: ==================================================
[2025-07-16 21:22:05,680] INFO in app: Application logging initialized successfully
[2025-07-16 21:22:05,682] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-16 21:22:05,684] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-16 21:22:05,687] INFO in app: System encoding: utf-8
[2025-07-16 21:22:05,690] INFO in app: ==================================================
2025-07-16 21:22:05,884 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-16 21:22:05,886 - INFO - Added job "snapshot_par" to job store "default"
2025-07-16 21:22:05,886 - INFO - Scheduler started
2025-07-16 21:22:05,898 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-16 21:22:05,898 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-16 21:22:11,690] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 96, in top-level template code
    <a class="nav-link {% if request.endpoint == 'customers' %}active{% endif %}" href="{{ url_for('customers') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'customers'. Did you mean 'home' instead?
2025-07-16 21:22:11,690 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 96, in top-level template code
    <a class="nav-link {% if request.endpoint == 'customers' %}active{% endif %}" href="{{ url_for('customers') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'customers'. Did you mean 'home' instead?
2025-07-16 21:22:11,709 - INFO - 127.0.0.1 - - [16/Jul/2025 21:22:11] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-16 21:22:11,760 - INFO - 127.0.0.1 - - [16/Jul/2025 21:22:11] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-17 02:40:40,157] INFO in app: ==================================================
[2025-07-17 02:40:40,346] INFO in app: Application logging initialized successfully
[2025-07-17 02:40:40,351] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 02:40:40,357] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 02:40:40,369] INFO in app: System encoding: utf-8
[2025-07-17 02:40:40,379] INFO in app: ==================================================
2025-07-17 02:40:41,259 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 02:40:41,263 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 02:40:41,263 - INFO - Scheduler started
2025-07-17 02:40:41,789 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 02:40:41,789 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-17 02:40:44,962] ERROR in app: Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 96, in top-level template code
    <a class="nav-link {% if request.endpoint == 'customers' %}active{% endif %}" href="{{ url_for('customers') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'customers'. Did you mean 'home' instead?
2025-07-17 02:40:44,962 - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5952, in home
    return render_template('home.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\home.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 96, in top-level template code
    <a class="nav-link {% if request.endpoint == 'customers' %}active{% endif %}" href="{{ url_for('customers') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'customers'. Did you mean 'home' instead?
2025-07-17 02:40:45,607 - INFO - 127.0.0.1 - - [17/Jul/2025 02:40:45] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-07-17 02:40:45,966 - INFO - 127.0.0.1 - - [17/Jul/2025 02:40:45] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 02:48:59,575 - INFO - Scheduler has been shut down
[2025-07-17 02:49:03,120] INFO in app: ==================================================
[2025-07-17 02:49:03,129] INFO in app: Application logging initialized successfully
[2025-07-17 02:49:03,131] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 02:49:03,134] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 02:49:03,137] INFO in app: System encoding: utf-8
[2025-07-17 02:49:03,142] INFO in app: ==================================================
2025-07-17 02:49:03,333 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 02:49:03,334 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 02:49:03,334 - INFO - Scheduler started
[2025-07-17 02:50:03,644] INFO in app: ==================================================
[2025-07-17 02:50:03,650] INFO in app: Application logging initialized successfully
[2025-07-17 02:50:03,654] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 02:50:03,656] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 02:50:03,658] INFO in app: System encoding: utf-8
[2025-07-17 02:50:03,660] INFO in app: ==================================================
2025-07-17 02:50:03,852 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 02:50:03,854 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 02:50:03,854 - INFO - Scheduler started
2025-07-17 02:50:03,863 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 02:50:03,863 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 02:50:09,806 - INFO - 127.0.0.1 - - [17/Jul/2025 02:50:09] "GET / HTTP/1.1" 200 -
2025-07-17 02:50:11,449 - INFO - 127.0.0.1 - - [17/Jul/2025 02:50:11] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 02:50:17,705 - INFO - 127.0.0.1 - - [17/Jul/2025 02:50:17] "GET /par-trend HTTP/1.1" 200 -
[2025-07-17 02:50:40,332] ERROR in app: Exception on /arrears-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5867, in arrears_trend
    return render_template('portfolio/arrears_trend.html',  # 👈 updated path
        period1=p1, period2=p2, category=cat, tenure=ten,
    ...<2 lines>...
        zipped1=zipped1, zipped2=zipped2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 65, in get_source
    return self._get_source_fast(environment, template)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 99, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: portfolio/arrears_trend.html
2025-07-17 02:50:40,332 - ERROR - Exception on /arrears-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5867, in arrears_trend
    return render_template('portfolio/arrears_trend.html',  # 👈 updated path
        period1=p1, period2=p2, category=cat, tenure=ten,
    ...<2 lines>...
        zipped1=zipped1, zipped2=zipped2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 65, in get_source
    return self._get_source_fast(environment, template)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 99, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: portfolio/arrears_trend.html
2025-07-17 02:50:40,371 - INFO - 127.0.0.1 - - [17/Jul/2025 02:50:40] "[35m[1mGET /arrears-trend HTTP/1.1[0m" 500 -
2025-07-17 02:53:39,322 - INFO - Scheduler has been shut down
[2025-07-17 02:53:43,391] INFO in app: ==================================================
[2025-07-17 02:53:43,398] INFO in app: Application logging initialized successfully
[2025-07-17 02:53:43,400] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 02:53:43,401] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 02:53:43,403] INFO in app: System encoding: utf-8
[2025-07-17 02:53:43,406] INFO in app: ==================================================
2025-07-17 02:53:43,596 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 02:53:43,597 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 02:53:43,597 - INFO - Scheduler started
2025-07-17 02:53:43,610 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 02:53:43,610 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 02:53:50,158 - INFO - 127.0.0.1 - - [17/Jul/2025 02:53:50] "GET /loanbook HTTP/1.1" 200 -
2025-07-17 02:55:27,152 - INFO - Scheduler has been shut down
[2025-07-17 02:55:30,327] INFO in app: ==================================================
[2025-07-17 02:55:30,343] INFO in app: Application logging initialized successfully
[2025-07-17 02:55:30,357] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 02:55:30,376] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 02:55:30,385] INFO in app: System encoding: utf-8
[2025-07-17 02:55:30,390] INFO in app: ==================================================
2025-07-17 02:55:30,606 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 02:55:30,607 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 02:55:30,607 - INFO - Scheduler started
2025-07-17 02:55:30,619 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 02:55:30,619 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 02:55:33,964 - INFO - 127.0.0.1 - - [17/Jul/2025 02:55:33] "GET /loanbook HTTP/1.1" 200 -
2025-07-17 02:55:35,140 - INFO - 127.0.0.1 - - [17/Jul/2025 02:55:35] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 02:56:42,680 - INFO - Scheduler has been shut down
[2025-07-17 02:56:45,942] INFO in app: ==================================================
[2025-07-17 02:56:45,947] INFO in app: Application logging initialized successfully
[2025-07-17 02:56:45,950] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 02:56:45,952] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 02:56:45,954] INFO in app: System encoding: utf-8
[2025-07-17 02:56:45,956] INFO in app: ==================================================
2025-07-17 02:56:46,155 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 02:56:46,156 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 02:56:46,156 - INFO - Scheduler started
2025-07-17 02:56:46,170 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 02:56:46,170 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 02:56:48,954 - INFO - 127.0.0.1 - - [17/Jul/2025 02:56:48] "GET /loanbook HTTP/1.1" 200 -
2025-07-17 02:56:51,456 - INFO - 127.0.0.1 - - [17/Jul/2025 02:56:51] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 02:57:48,480 - INFO - Scheduler has been shut down
[2025-07-17 02:57:51,791] INFO in app: ==================================================
[2025-07-17 02:57:51,799] INFO in app: Application logging initialized successfully
[2025-07-17 02:57:51,801] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 02:57:51,802] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 02:57:51,804] INFO in app: System encoding: utf-8
[2025-07-17 02:57:51,807] INFO in app: ==================================================
2025-07-17 02:57:51,994 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 02:57:51,995 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 02:57:51,995 - INFO - Scheduler started
2025-07-17 02:57:52,008 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 02:57:52,008 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 02:57:55,464 - INFO - 127.0.0.1 - - [17/Jul/2025 02:57:55] "GET /loanbook HTTP/1.1" 200 -
2025-07-17 02:57:56,397 - INFO - 127.0.0.1 - - [17/Jul/2025 02:57:56] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 02:57:59,715 - INFO - 127.0.0.1 - - [17/Jul/2025 02:57:59] "GET / HTTP/1.1" 200 -
2025-07-17 02:58:03,555 - INFO - 127.0.0.1 - - [17/Jul/2025 02:58:03] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-17 02:58:08,696 - INFO - 127.0.0.1 - - [17/Jul/2025 02:58:08] "GET /income_report HTTP/1.1" 200 -
2025-07-17 02:58:11,878 - INFO - 127.0.0.1 - - [17/Jul/2025 02:58:11] "GET /loanbook HTTP/1.1" 200 -
[2025-07-17 02:58:18,021] ERROR in app: Exception on /arrears-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5867, in arrears_trend
    return render_template('portfolio/arrears_trend.html',  # 👈 updated path
        period1=p1, period2=p2, category=cat, tenure=ten,
    ...<2 lines>...
        zipped1=zipped1, zipped2=zipped2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 65, in get_source
    return self._get_source_fast(environment, template)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 99, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: portfolio/arrears_trend.html
2025-07-17 02:58:18,021 - ERROR - Exception on /arrears-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5867, in arrears_trend
    return render_template('portfolio/arrears_trend.html',  # 👈 updated path
        period1=p1, period2=p2, category=cat, tenure=ten,
    ...<2 lines>...
        zipped1=zipped1, zipped2=zipped2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 65, in get_source
    return self._get_source_fast(environment, template)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 99, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: portfolio/arrears_trend.html
2025-07-17 02:58:18,067 - INFO - 127.0.0.1 - - [17/Jul/2025 02:58:18] "[35m[1mGET /arrears-trend HTTP/1.1[0m" 500 -
2025-07-17 03:03:12,377 - INFO - Scheduler has been shut down
[2025-07-17 03:03:15,918] INFO in app: ==================================================
[2025-07-17 03:03:15,924] INFO in app: Application logging initialized successfully
[2025-07-17 03:03:15,926] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 03:03:15,928] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 03:03:15,930] INFO in app: System encoding: utf-8
[2025-07-17 03:03:15,933] INFO in app: ==================================================
2025-07-17 03:03:16,124 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 03:03:16,125 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 03:03:16,125 - INFO - Scheduler started
2025-07-17 03:03:16,136 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 03:03:16,136 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 03:03:21,007 - INFO - 127.0.0.1 - - [17/Jul/2025 03:03:21] "GET /arrears-trend HTTP/1.1" 200 -
2025-07-17 03:03:22,128 - INFO - 127.0.0.1 - - [17/Jul/2025 03:03:22] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 03:03:29,673 - INFO - 127.0.0.1 - - [17/Jul/2025 03:03:29] "GET /par-trend HTTP/1.1" 200 -
2025-07-17 03:03:40,733 - INFO - 127.0.0.1 - - [17/Jul/2025 03:03:40] "GET /arrears-trend HTTP/1.1" 200 -
2025-07-17 03:10:16,925 - INFO - Scheduler has been shut down
[2025-07-17 03:10:20,220] INFO in app: ==================================================
[2025-07-17 03:10:20,226] INFO in app: Application logging initialized successfully
[2025-07-17 03:10:20,228] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 03:10:20,230] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 03:10:20,232] INFO in app: System encoding: utf-8
[2025-07-17 03:10:20,234] INFO in app: ==================================================
2025-07-17 03:10:20,433 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 03:10:20,434 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 03:10:20,435 - INFO - Scheduler started
2025-07-17 03:10:20,447 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 03:10:20,447 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 03:10:25,712 - INFO - 127.0.0.1 - - [17/Jul/2025 03:10:25] "GET /arrears-trend HTTP/1.1" 200 -
2025-07-17 03:10:26,231 - INFO - 127.0.0.1 - - [17/Jul/2025 03:10:26] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 03:14:50,461 - INFO - Scheduler has been shut down
[2025-07-17 03:14:53,784] INFO in app: ==================================================
[2025-07-17 03:14:53,790] INFO in app: Application logging initialized successfully
[2025-07-17 03:14:53,791] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 03:14:53,793] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 03:14:53,794] INFO in app: System encoding: utf-8
[2025-07-17 03:14:53,796] INFO in app: ==================================================
2025-07-17 03:14:53,979 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 03:14:53,981 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 03:14:53,981 - INFO - Scheduler started
2025-07-17 03:14:53,991 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 03:14:53,991 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 03:15:01,367 - INFO - 127.0.0.1 - - [17/Jul/2025 03:15:01] "GET /arrears-trend HTTP/1.1" 200 -
2025-07-17 03:15:01,931 - INFO - 127.0.0.1 - - [17/Jul/2025 03:15:01] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 03:18:38,146 - INFO - Scheduler has been shut down
[2025-07-17 03:18:41,413] INFO in app: ==================================================
[2025-07-17 03:18:41,419] INFO in app: Application logging initialized successfully
[2025-07-17 03:18:41,422] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 03:18:41,424] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 03:18:41,425] INFO in app: System encoding: utf-8
[2025-07-17 03:18:41,428] INFO in app: ==================================================
2025-07-17 03:18:41,616 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 03:18:41,617 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 03:18:41,617 - INFO - Scheduler started
2025-07-17 03:18:41,630 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 03:18:41,630 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 03:18:56,741 - INFO - 127.0.0.1 - - [17/Jul/2025 03:18:56] "GET /arrears-trend HTTP/1.1" 200 -
2025-07-17 03:18:57,863 - INFO - 127.0.0.1 - - [17/Jul/2025 03:18:57] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 03:21:37,196 - INFO - Scheduler has been shut down
[2025-07-17 03:21:40,726] INFO in app: ==================================================
[2025-07-17 03:21:40,732] INFO in app: Application logging initialized successfully
[2025-07-17 03:21:40,734] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 03:21:40,736] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 03:21:40,738] INFO in app: System encoding: utf-8
[2025-07-17 03:21:40,740] INFO in app: ==================================================
2025-07-17 03:21:40,930 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 03:21:40,932 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 03:21:40,932 - INFO - Scheduler started
2025-07-17 03:21:40,945 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 03:21:40,945 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 03:21:55,684 - INFO - 127.0.0.1 - - [17/Jul/2025 03:21:55] "GET /arrears-trend HTTP/1.1" 200 -
2025-07-17 03:21:56,816 - INFO - 127.0.0.1 - - [17/Jul/2025 03:21:56] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 03:23:05,793 - INFO - 127.0.0.1 - - [17/Jul/2025 03:23:05] "GET /par-trend HTTP/1.1" 200 -
2025-07-17 03:23:29,575 - INFO - 127.0.0.1 - - [17/Jul/2025 03:23:29] "GET /par-trend?period1=this_quarter&period2=same_quarter_last_year&category=&tenure= HTTP/1.1" 200 -
2025-07-17 03:42:07,170 - INFO - Scheduler has been shut down
[2025-07-17 03:42:10,751] INFO in app: ==================================================
[2025-07-17 03:42:10,757] INFO in app: Application logging initialized successfully
[2025-07-17 03:42:10,761] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 03:42:10,763] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 03:42:10,768] INFO in app: System encoding: utf-8
[2025-07-17 03:42:10,771] INFO in app: ==================================================
2025-07-17 03:42:10,966 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 03:42:10,968 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 03:42:10,968 - INFO - Scheduler started
2025-07-17 03:42:10,982 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 03:42:10,982 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 03:42:15,510 - INFO - 127.0.0.1 - - [17/Jul/2025 03:42:15] "GET /par-trend?period1=this_quarter&period2=same_quarter_last_year&category=&tenure= HTTP/1.1" 200 -
2025-07-17 03:42:16,018 - INFO - 127.0.0.1 - - [17/Jul/2025 03:42:16] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 03:43:30,265 - INFO - 127.0.0.1 - - [17/Jul/2025 03:43:30] "GET /arrears-trend HTTP/1.1" 200 -
2025-07-17 03:51:02,221 - INFO - Scheduler has been shut down
[2025-07-17 03:51:04,654] INFO in app: ==================================================
[2025-07-17 03:51:04,659] INFO in app: Application logging initialized successfully
[2025-07-17 03:51:04,661] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 03:51:04,664] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 03:51:04,668] INFO in app: System encoding: utf-8
[2025-07-17 03:51:04,669] INFO in app: ==================================================
2025-07-17 03:51:04,861 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 03:51:04,862 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 03:51:04,863 - INFO - Scheduler started
2025-07-17 03:51:04,872 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 03:51:04,873 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 03:51:13,381 - INFO - 127.0.0.1 - - [17/Jul/2025 03:51:13] "GET /arrears-trend HTTP/1.1" 200 -
2025-07-17 03:51:14,609 - INFO - 127.0.0.1 - - [17/Jul/2025 03:51:14] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-17 03:51:19,216] ERROR in app: Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5765, in par_trend
    return render_template(
        'par_trend.html',
    ...<13 lines>...
        zipped2=zipped2,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 178, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 64, in block 'content'
    data-wks='{{ weeks | tojson | safe }}'
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-17 03:51:19,216 - ERROR - Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5765, in par_trend
    return render_template(
        'par_trend.html',
    ...<13 lines>...
        zipped2=zipped2,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 178, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 64, in block 'content'
    data-wks='{{ weeks | tojson | safe }}'
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-17 03:51:19,273 - INFO - 127.0.0.1 - - [17/Jul/2025 03:51:19] "[35m[1mGET /par-trend HTTP/1.1[0m" 500 -
2025-07-17 03:55:28,888 - INFO - Scheduler has been shut down
[2025-07-17 03:55:32,011] INFO in app: ==================================================
[2025-07-17 03:55:32,016] INFO in app: Application logging initialized successfully
[2025-07-17 03:55:32,018] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 03:55:32,020] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 03:55:32,023] INFO in app: System encoding: utf-8
[2025-07-17 03:55:32,025] INFO in app: ==================================================
2025-07-17 03:55:32,226 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 03:55:32,228 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 03:55:32,228 - INFO - Scheduler started
2025-07-17 03:55:32,237 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 03:55:32,237 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-17 03:55:38,544] ERROR in app: Exception on /arrears-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5861, in arrears_trend
    dates1, weeks1, count1, amt1 = get_arrears_data(p1, cat, ten)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: not enough values to unpack (expected 4, got 3)
2025-07-17 03:55:38,544 - ERROR - Exception on /arrears-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5861, in arrears_trend
    dates1, weeks1, count1, amt1 = get_arrears_data(p1, cat, ten)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: not enough values to unpack (expected 4, got 3)
2025-07-17 03:55:38,566 - INFO - 127.0.0.1 - - [17/Jul/2025 03:55:38] "[35m[1mGET /arrears-trend HTTP/1.1[0m" 500 -
2025-07-17 03:55:38,619 - INFO - 127.0.0.1 - - [17/Jul/2025 03:55:38] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-17 03:55:49,563] ERROR in app: Exception on /arrears-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5861, in arrears_trend
    dates1, weeks1, count1, amt1 = get_arrears_data(p1, cat, ten)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: not enough values to unpack (expected 4, got 3)
2025-07-17 03:55:49,563 - ERROR - Exception on /arrears-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5861, in arrears_trend
    dates1, weeks1, count1, amt1 = get_arrears_data(p1, cat, ten)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: not enough values to unpack (expected 4, got 3)
2025-07-17 03:55:49,576 - INFO - 127.0.0.1 - - [17/Jul/2025 03:55:49] "[35m[1mGET /arrears-trend HTTP/1.1[0m" 500 -
[2025-07-17 03:56:12,254] ERROR in app: Exception on /arrears-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5861, in arrears_trend
    dates1, weeks1, count1, amt1 = get_arrears_data(p1, cat, ten)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: not enough values to unpack (expected 4, got 3)
2025-07-17 03:56:12,254 - ERROR - Exception on /arrears-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5861, in arrears_trend
    dates1, weeks1, count1, amt1 = get_arrears_data(p1, cat, ten)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: not enough values to unpack (expected 4, got 3)
2025-07-17 03:56:12,288 - INFO - 127.0.0.1 - - [17/Jul/2025 03:56:12] "[35m[1mGET /arrears-trend HTTP/1.1[0m" 500 -
2025-07-17 03:59:01,576 - INFO - Scheduler has been shut down
[2025-07-17 03:59:04,926] INFO in app: ==================================================
[2025-07-17 03:59:04,932] INFO in app: Application logging initialized successfully
[2025-07-17 03:59:04,935] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 03:59:04,937] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 03:59:04,939] INFO in app: System encoding: utf-8
[2025-07-17 03:59:04,940] INFO in app: ==================================================
2025-07-17 03:59:05,129 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 03:59:05,131 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 03:59:05,131 - INFO - Scheduler started
2025-07-17 03:59:05,141 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 03:59:05,141 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-17 03:59:11,268] ERROR in app: Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5759, in par_trend
    dates1, weeks1, par30_1, par60_1, par90_1 = get_par_data_for_period(period1, category, tenure)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: not enough values to unpack (expected 5, got 4)
2025-07-17 03:59:11,268 - ERROR - Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5759, in par_trend
    dates1, weeks1, par30_1, par60_1, par90_1 = get_par_data_for_period(period1, category, tenure)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: not enough values to unpack (expected 5, got 4)
2025-07-17 03:59:11,276 - INFO - 127.0.0.1 - - [17/Jul/2025 03:59:11] "[35m[1mGET /par-trend?period1=this_quarter&period2=same_quarter_last_year&category=&tenure= HTTP/1.1[0m" 500 -
2025-07-17 03:59:11,328 - INFO - 127.0.0.1 - - [17/Jul/2025 03:59:11] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 03:59:21,518 - INFO - 127.0.0.1 - - [17/Jul/2025 03:59:21] "GET /loanbook HTTP/1.1" 200 -
[2025-07-17 03:59:24,124] ERROR in app: Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5759, in par_trend
    dates1, weeks1, par30_1, par60_1, par90_1 = get_par_data_for_period(period1, category, tenure)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: not enough values to unpack (expected 5, got 4)
2025-07-17 03:59:24,124 - ERROR - Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5759, in par_trend
    dates1, weeks1, par30_1, par60_1, par90_1 = get_par_data_for_period(period1, category, tenure)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: not enough values to unpack (expected 5, got 4)
2025-07-17 03:59:24,150 - INFO - 127.0.0.1 - - [17/Jul/2025 03:59:24] "[35m[1mGET /par-trend HTTP/1.1[0m" 500 -
[2025-07-17 03:59:28,543] ERROR in app: Exception on /arrears-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5865, in arrears_trend
    return render_template(
        'portfolio/arrears_trend.html',
    ...<4 lines>...
        count2=count2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 178, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_trend.html", line 66, in block 'content'
    data-amount1='{{ amount1 | tojson | safe }}'
    ^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-17 03:59:28,543 - ERROR - Exception on /arrears-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5865, in arrears_trend
    return render_template(
        'portfolio/arrears_trend.html',
    ...<4 lines>...
        count2=count2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 178, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_trend.html", line 66, in block 'content'
    data-amount1='{{ amount1 | tojson | safe }}'
    ^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-17 03:59:28,568 - INFO - 127.0.0.1 - - [17/Jul/2025 03:59:28] "[35m[1mGET /arrears-trend HTTP/1.1[0m" 500 -
[2025-07-17 04:01:52,124] INFO in app: ==================================================
[2025-07-17 04:01:52,130] INFO in app: Application logging initialized successfully
[2025-07-17 04:01:52,132] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 04:01:52,133] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 04:01:52,135] INFO in app: System encoding: utf-8
[2025-07-17 04:01:52,138] INFO in app: ==================================================
2025-07-17 04:01:52,351 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 04:01:52,352 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 04:01:52,352 - INFO - Scheduler started
2025-07-17 04:01:52,365 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 04:01:52,365 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 04:02:01,129 - INFO - 127.0.0.1 - - [17/Jul/2025 04:02:01] "GET /loanbook HTTP/1.1" 200 -
2025-07-17 04:02:02,071 - INFO - 127.0.0.1 - - [17/Jul/2025 04:02:02] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-17 04:02:03,616] ERROR in app: Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5759, in par_trend
    dates1, weeks1, par30_1, par60_1, par90_1 = get_par_data_for_period(period1, category, tenure)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: not enough values to unpack (expected 5, got 4)
2025-07-17 04:02:03,616 - ERROR - Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5759, in par_trend
    dates1, weeks1, par30_1, par60_1, par90_1 = get_par_data_for_period(period1, category, tenure)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: not enough values to unpack (expected 5, got 4)
2025-07-17 04:02:03,646 - INFO - 127.0.0.1 - - [17/Jul/2025 04:02:03] "[35m[1mGET /par-trend HTTP/1.1[0m" 500 -
[2025-07-17 04:02:07,752] ERROR in app: Exception on /arrears-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5865, in arrears_trend
    return render_template(
        'portfolio/arrears_trend.html',
    ...<4 lines>...
        count2=count2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 178, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_trend.html", line 66, in block 'content'
    data-amount1='{{ amount1 | tojson | safe }}'
    ^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-17 04:02:07,752 - ERROR - Exception on /arrears-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5865, in arrears_trend
    return render_template(
        'portfolio/arrears_trend.html',
    ...<4 lines>...
        count2=count2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 178, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_trend.html", line 66, in block 'content'
    data-amount1='{{ amount1 | tojson | safe }}'
    ^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-17 04:02:07,769 - INFO - 127.0.0.1 - - [17/Jul/2025 04:02:07] "[35m[1mGET /arrears-trend HTTP/1.1[0m" 500 -
2025-07-17 04:07:07,005 - INFO - Scheduler has been shut down
[2025-07-17 04:07:10,597] INFO in app: ==================================================
[2025-07-17 04:07:10,603] INFO in app: Application logging initialized successfully
[2025-07-17 04:07:10,605] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 04:07:10,607] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 04:07:10,610] INFO in app: System encoding: utf-8
[2025-07-17 04:07:10,612] INFO in app: ==================================================
2025-07-17 04:07:10,846 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 04:07:10,848 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 04:07:10,848 - INFO - Scheduler started
2025-07-17 04:07:10,872 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 04:07:10,872 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 04:07:18,016 - INFO - 127.0.0.1 - - [17/Jul/2025 04:07:18] "GET /loanbook HTTP/1.1" 200 -
2025-07-17 04:07:19,030 - INFO - 127.0.0.1 - - [17/Jul/2025 04:07:19] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-17 04:07:21,156] ERROR in app: Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5766, in par_trend
    return render_template(
        'par_trend.html',
    ...<10 lines>...
        zipped2=zipped2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 178, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 65, in block 'content'
    data-parPercent_1='{{ parPercent_1 | tojson | safe }}'
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-17 04:07:21,156 - ERROR - Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5766, in par_trend
    return render_template(
        'par_trend.html',
    ...<10 lines>...
        zipped2=zipped2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 178, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 65, in block 'content'
    data-parPercent_1='{{ parPercent_1 | tojson | safe }}'
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-17 04:07:21,178 - INFO - 127.0.0.1 - - [17/Jul/2025 04:07:21] "[35m[1mGET /par-trend HTTP/1.1[0m" 500 -
2025-07-17 04:07:24,843 - INFO - 127.0.0.1 - - [17/Jul/2025 04:07:24] "GET /arrears-trend HTTP/1.1" 200 -
2025-07-17 04:15:14,956 - INFO - Scheduler has been shut down
[2025-07-17 04:15:18,244] INFO in app: ==================================================
[2025-07-17 04:15:18,250] INFO in app: Application logging initialized successfully
[2025-07-17 04:15:18,252] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 04:15:18,255] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 04:15:18,257] INFO in app: System encoding: utf-8
[2025-07-17 04:15:18,260] INFO in app: ==================================================
2025-07-17 04:15:18,562 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 04:15:18,563 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 04:15:18,563 - INFO - Scheduler started
2025-07-17 04:15:18,576 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 04:15:18,576 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 04:15:24,026 - INFO - 127.0.0.1 - - [17/Jul/2025 04:15:24] "GET /arrears-trend HTTP/1.1" 200 -
2025-07-17 04:15:25,425 - INFO - 127.0.0.1 - - [17/Jul/2025 04:15:25] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-17 04:15:45,957] ERROR in app: Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5766, in par_trend
    return render_template(
        'par_trend.html',
    ...<10 lines>...
        zipped2=zipped2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 178, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 65, in block 'content'
    data-parPercent_1='{{ parPercent_1 | tojson | safe }}'
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-17 04:15:45,957 - ERROR - Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5766, in par_trend
    return render_template(
        'par_trend.html',
    ...<10 lines>...
        zipped2=zipped2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 178, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 65, in block 'content'
    data-parPercent_1='{{ parPercent_1 | tojson | safe }}'
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-17 04:15:45,976 - INFO - 127.0.0.1 - - [17/Jul/2025 04:15:45] "[35m[1mGET /par-trend HTTP/1.1[0m" 500 -
2025-07-17 04:20:45,507 - INFO - Scheduler has been shut down
[2025-07-17 04:20:49,172] INFO in app: ==================================================
[2025-07-17 04:20:49,179] INFO in app: Application logging initialized successfully
[2025-07-17 04:20:49,181] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 04:20:49,183] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 04:20:49,185] INFO in app: System encoding: utf-8
[2025-07-17 04:20:49,187] INFO in app: ==================================================
2025-07-17 04:20:49,394 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 04:20:49,395 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 04:20:49,395 - INFO - Scheduler started
2025-07-17 04:20:49,406 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 04:20:49,406 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 04:20:56,460 - INFO - 127.0.0.1 - - [17/Jul/2025 04:20:56] "GET /arrears-trend HTTP/1.1" 200 -
2025-07-17 04:20:58,046 - INFO - 127.0.0.1 - - [17/Jul/2025 04:20:58] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 04:21:00,727 - INFO - 127.0.0.1 - - [17/Jul/2025 04:21:00] "GET /par-trend HTTP/1.1" 200 -
2025-07-17 04:36:19,959 - INFO - Scheduler has been shut down
[2025-07-17 04:36:24,119] INFO in app: ==================================================
[2025-07-17 04:36:24,126] INFO in app: Application logging initialized successfully
[2025-07-17 04:36:24,129] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 04:36:24,131] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 04:36:24,135] INFO in app: System encoding: utf-8
[2025-07-17 04:36:24,137] INFO in app: ==================================================
2025-07-17 04:36:24,321 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 04:36:24,323 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 04:36:24,323 - INFO - Scheduler started
2025-07-17 04:36:24,335 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 04:36:24,335 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-17 04:36:29,811] ERROR in app: Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5810, in par_trend
    return render_template(
        'par_trend.html',
    ...<11 lines>...
        zipped2=zipped2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 178, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 55, in block 'content'
    <a href="{{ url_for('download_par_csv', period1=period1, period2=period2, category=category, tenure=tenure, bucket=bucket) }}" class="btn btn-success">
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'download_par_csv' with values ['bucket', 'period1', 'period2']. Did you mean 'download_par_trend_csv' instead?
2025-07-17 04:36:29,811 - ERROR - Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5810, in par_trend
    return render_template(
        'par_trend.html',
    ...<11 lines>...
        zipped2=zipped2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 178, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 55, in block 'content'
    <a href="{{ url_for('download_par_csv', period1=period1, period2=period2, category=category, tenure=tenure, bucket=bucket) }}" class="btn btn-success">
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'download_par_csv' with values ['bucket', 'period1', 'period2']. Did you mean 'download_par_trend_csv' instead?
2025-07-17 04:36:29,828 - INFO - 127.0.0.1 - - [17/Jul/2025 04:36:29] "[35m[1mGET /par-trend HTTP/1.1[0m" 500 -
2025-07-17 04:36:29,886 - INFO - 127.0.0.1 - - [17/Jul/2025 04:36:29] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 04:38:51,148 - INFO - Scheduler has been shut down
[2025-07-17 04:38:54,886] INFO in app: ==================================================
[2025-07-17 04:38:54,893] INFO in app: Application logging initialized successfully
[2025-07-17 04:38:54,895] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 04:38:54,897] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 04:38:54,900] INFO in app: System encoding: utf-8
[2025-07-17 04:38:54,904] INFO in app: ==================================================
2025-07-17 04:38:55,098 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 04:38:55,099 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 04:38:55,099 - INFO - Scheduler started
2025-07-17 04:38:55,110 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 04:38:55,110 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 04:39:02,052 - INFO - 127.0.0.1 - - [17/Jul/2025 04:39:02] "GET /arrears-trend HTTP/1.1" 200 -
2025-07-17 04:39:03,993 - INFO - 127.0.0.1 - - [17/Jul/2025 04:39:03] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 04:39:07,743 - INFO - 127.0.0.1 - - [17/Jul/2025 04:39:07] "GET /arrears HTTP/1.1" 200 -
[2025-07-17 04:39:13,398] ERROR in app: Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5810, in par_trend
    return render_template(
        'par_trend.html',
    ...<11 lines>...
        zipped2=zipped2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 178, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 63, in block 'content'
    data-wks='{{ week_labels | tojson | safe }}'
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-17 04:39:13,398 - ERROR - Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5810, in par_trend
    return render_template(
        'par_trend.html',
    ...<11 lines>...
        zipped2=zipped2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 178, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 63, in block 'content'
    data-wks='{{ week_labels | tojson | safe }}'
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-17 04:39:13,420 - INFO - 127.0.0.1 - - [17/Jul/2025 04:39:13] "[35m[1mGET /par-trend HTTP/1.1[0m" 500 -
2025-07-17 04:40:31,790 - INFO - Scheduler has been shut down
[2025-07-17 04:40:39,116] INFO in app: ==================================================
[2025-07-17 04:40:39,124] INFO in app: Application logging initialized successfully
[2025-07-17 04:40:39,127] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 04:40:39,128] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 04:40:39,130] INFO in app: System encoding: utf-8
[2025-07-17 04:40:39,133] INFO in app: ==================================================
2025-07-17 04:40:39,340 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 04:40:39,342 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 04:40:39,342 - INFO - Scheduler started
2025-07-17 04:40:39,351 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 04:40:39,351 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 04:40:46,213 - INFO - 127.0.0.1 - - [17/Jul/2025 04:40:46] "GET /arrears HTTP/1.1" 200 -
2025-07-17 04:40:47,402 - INFO - 127.0.0.1 - - [17/Jul/2025 04:40:47] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 04:40:50,712 - INFO - 127.0.0.1 - - [17/Jul/2025 04:40:50] "GET /arrears-trend HTTP/1.1" 200 -
[2025-07-17 04:40:54,060] ERROR in app: Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5810, in par_trend
    return render_template(
        'par_trend.html',
    ...<12 lines>...
        zipped2=zipped2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 178, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 64, in block 'content'
    data-parpercent1='{{ par_percent1 | tojson | safe }}'
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-17 04:40:54,060 - ERROR - Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5810, in par_trend
    return render_template(
        'par_trend.html',
    ...<12 lines>...
        zipped2=zipped2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 178, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 64, in block 'content'
    data-parpercent1='{{ par_percent1 | tojson | safe }}'
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-17 04:40:54,087 - INFO - 127.0.0.1 - - [17/Jul/2025 04:40:54] "[35m[1mGET /par-trend HTTP/1.1[0m" 500 -
2025-07-17 04:42:39,953 - INFO - Scheduler has been shut down
[2025-07-17 04:42:43,167] INFO in app: ==================================================
[2025-07-17 04:42:43,174] INFO in app: Application logging initialized successfully
[2025-07-17 04:42:43,176] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 04:42:43,178] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 04:42:43,181] INFO in app: System encoding: utf-8
[2025-07-17 04:42:43,185] INFO in app: ==================================================
2025-07-17 04:42:43,488 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 04:42:43,490 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 04:42:43,490 - INFO - Scheduler started
2025-07-17 04:42:43,505 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 04:42:43,505 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-17 04:42:46,644] ERROR in app: Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5810, in par_trend
    return render_template(
        'par_trend.html',
    ...<12 lines>...
        zipped2=zipped2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 178, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 65, in block 'content'
    data-paramount1='{{ par_amount1 | tojson | safe }}'
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-17 04:42:46,644 - ERROR - Exception on /par-trend [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 5810, in par_trend
    return render_template(
        'par_trend.html',
    ...<12 lines>...
        zipped2=zipped2
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 178, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\par_trend.html", line 65, in block 'content'
    data-paramount1='{{ par_amount1 | tojson | safe }}'
    ^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-17 04:42:46,664 - INFO - 127.0.0.1 - - [17/Jul/2025 04:42:46] "[35m[1mGET /par-trend HTTP/1.1[0m" 500 -
2025-07-17 04:42:46,711 - INFO - 127.0.0.1 - - [17/Jul/2025 04:42:46] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 04:46:36,336 - INFO - Scheduler has been shut down
[2025-07-17 04:46:39,705] INFO in app: ==================================================
[2025-07-17 04:46:39,711] INFO in app: Application logging initialized successfully
[2025-07-17 04:46:39,713] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 04:46:39,715] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 04:46:39,720] INFO in app: System encoding: utf-8
[2025-07-17 04:46:39,723] INFO in app: ==================================================
2025-07-17 04:46:39,916 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 04:46:39,918 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 04:46:39,918 - INFO - Scheduler started
2025-07-17 04:46:39,928 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 04:46:39,929 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-17 04:46:51,414] INFO in app: ==================================================
[2025-07-17 04:46:51,420] INFO in app: Application logging initialized successfully
[2025-07-17 04:46:51,421] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 04:46:51,423] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 04:46:51,425] INFO in app: System encoding: utf-8
[2025-07-17 04:46:51,430] INFO in app: ==================================================
2025-07-17 04:46:51,635 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 04:46:51,637 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 04:46:51,637 - INFO - Scheduler started
2025-07-17 04:46:51,650 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 04:46:51,651 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 04:46:56,209 - INFO - 127.0.0.1 - - [17/Jul/2025 04:46:56] "GET /par-trend HTTP/1.1" 200 -
2025-07-17 04:47:26,449 - INFO - 127.0.0.1 - - [17/Jul/2025 04:47:26] "GET /arrears-trend HTTP/1.1" 200 -
2025-07-17 04:52:05,604 - INFO - Scheduler has been shut down
[2025-07-17 04:52:08,945] INFO in app: ==================================================
[2025-07-17 04:52:08,951] INFO in app: Application logging initialized successfully
[2025-07-17 04:52:08,953] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 04:52:08,955] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 04:52:08,958] INFO in app: System encoding: utf-8
[2025-07-17 04:52:08,959] INFO in app: ==================================================
2025-07-17 04:52:09,218 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 04:52:09,219 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 04:52:09,219 - INFO - Scheduler started
2025-07-17 04:52:09,233 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 04:52:09,233 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 04:53:03,263 - INFO - 127.0.0.1 - - [17/Jul/2025 04:53:03] "[33mGET /register_customer_debug HTTP/1.1[0m" 404 -
2025-07-17 04:53:16,909 - INFO - 127.0.0.1 - - [17/Jul/2025 04:53:16] "[33mGET /register_customer_debug HTTP/1.1[0m" 404 -
2025-07-17 04:53:19,042 - INFO - 127.0.0.1 - - [17/Jul/2025 04:53:19] "[33mGET /register_customer_debug HTTP/1.1[0m" 404 -
[2025-07-17 04:54:59,213] INFO in app: ==================================================
[2025-07-17 04:54:59,220] INFO in app: Application logging initialized successfully
[2025-07-17 04:54:59,221] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 04:54:59,223] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 04:54:59,224] INFO in app: System encoding: utf-8
[2025-07-17 04:54:59,225] INFO in app: ==================================================
2025-07-17 04:54:59,406 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 04:54:59,407 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 04:54:59,407 - INFO - Scheduler started
2025-07-17 04:56:11,572 - INFO - 127.0.0.1 - - [17/Jul/2025 04:56:11] "GET /register HTTP/1.1" 200 -
2025-07-17 05:01:03,431 - INFO - 127.0.0.1 - - [17/Jul/2025 05:01:03] "GET /register HTTP/1.1" 200 -
2025-07-17 05:01:07,241 - INFO - 127.0.0.1 - - [17/Jul/2025 05:01:07] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-07-17 05:05:14,486 - INFO - Scheduler has been shut down
[2025-07-17 05:07:07,664] INFO in app: ==================================================
[2025-07-17 05:07:07,673] INFO in app: Application logging initialized successfully
[2025-07-17 05:07:07,675] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 05:07:07,676] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 05:07:07,678] INFO in app: System encoding: utf-8
[2025-07-17 05:07:07,680] INFO in app: ==================================================
2025-07-17 05:07:07,893 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 05:07:07,894 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 05:07:07,894 - INFO - Scheduler started
2025-07-17 05:07:07,905 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 05:07:07,905 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-17 05:07:15,993] ERROR in app: Exception on /register [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 3306, in register_customer_debug
    return render_template('register_customer_debug.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\register_customer_debug.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 83, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register' %}active{% endif %}" href="{{ url_for('register') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register'. Did you mean 'edit_customer' instead?
2025-07-17 05:07:15,993 - ERROR - Exception on /register [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 3306, in register_customer_debug
    return render_template('register_customer_debug.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\register_customer_debug.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 83, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register' %}active{% endif %}" href="{{ url_for('register') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register'. Did you mean 'edit_customer' instead?
2025-07-17 05:07:16,011 - INFO - 127.0.0.1 - - [17/Jul/2025 05:07:16] "[35m[1mGET /register HTTP/1.1[0m" 500 -
2025-07-17 05:07:16,099 - INFO - 127.0.0.1 - - [17/Jul/2025 05:07:16] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 05:07:16,167 - INFO - 127.0.0.1 - - [17/Jul/2025 05:07:16] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
[2025-07-17 05:08:00,214] ERROR in app: Exception on /register [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 3306, in register_customer_debug
    return render_template('register_customer_debug.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\register_customer_debug.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 83, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register'. Did you mean 'edit_customer' instead?
2025-07-17 05:08:00,214 - ERROR - Exception on /register [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 3306, in register_customer_debug
    return render_template('register_customer_debug.html')
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\register_customer_debug.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 83, in top-level template code
    <a class="nav-link {% if request.endpoint == 'register_customer_debug' %}active{% endif %}" href="{{ url_for('register_customer_debug') }}">
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'register'. Did you mean 'edit_customer' instead?
2025-07-17 05:08:00,275 - INFO - 127.0.0.1 - - [17/Jul/2025 05:08:00] "[35m[1mGET /register HTTP/1.1[0m" 500 -
2025-07-17 05:08:00,306 - INFO - 127.0.0.1 - - [17/Jul/2025 05:08:00] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-07-17 05:08:02,986 - INFO - 127.0.0.1 - - [17/Jul/2025 05:08:02] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-07-17 05:08:16,971 - INFO - Scheduler has been shut down
[2025-07-17 05:08:21,513] INFO in app: ==================================================
[2025-07-17 05:08:21,518] INFO in app: Application logging initialized successfully
[2025-07-17 05:08:21,520] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 05:08:21,522] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 05:08:21,524] INFO in app: System encoding: utf-8
[2025-07-17 05:08:21,528] INFO in app: ==================================================
2025-07-17 05:08:21,718 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 05:08:21,719 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 05:08:21,719 - INFO - Scheduler started
2025-07-17 05:08:21,730 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 05:08:21,730 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 05:09:21,630 - INFO - 127.0.0.1 - - [17/Jul/2025 05:09:21] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-07-17 05:14:43,765 - INFO - Scheduler has been shut down
[2025-07-17 05:14:49,426] INFO in app: ==================================================
[2025-07-17 05:14:49,436] INFO in app: Application logging initialized successfully
[2025-07-17 05:14:49,438] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 05:14:49,440] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 05:14:49,441] INFO in app: System encoding: utf-8
[2025-07-17 05:14:49,443] INFO in app: ==================================================
2025-07-17 05:14:49,664 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 05:14:49,666 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 05:14:49,666 - INFO - Scheduler started
2025-07-17 05:14:49,682 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 05:14:49,682 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 05:15:02,927 - INFO - 127.0.0.1 - - [17/Jul/2025 05:15:02] "GET /arrears-trend HTTP/1.1" 200 -
2025-07-17 05:15:04,183 - INFO - 127.0.0.1 - - [17/Jul/2025 05:15:04] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 05:15:07,039 - INFO - 127.0.0.1 - - [17/Jul/2025 05:15:07] "GET /register HTTP/1.1" 200 -
2025-07-17 05:18:17,439 - INFO - Scheduler has been shut down
[2025-07-17 05:18:21,222] INFO in app: ==================================================
[2025-07-17 05:18:21,228] INFO in app: Application logging initialized successfully
[2025-07-17 05:18:21,230] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 05:18:21,232] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 05:18:21,233] INFO in app: System encoding: utf-8
[2025-07-17 05:18:21,235] INFO in app: ==================================================
2025-07-17 05:18:21,423 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 05:18:21,425 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 05:18:21,425 - INFO - Scheduler started
2025-07-17 05:18:21,440 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 05:18:21,440 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 05:18:27,131 - INFO - 127.0.0.1 - - [17/Jul/2025 05:18:27] "GET /register HTTP/1.1" 200 -
2025-07-17 05:18:27,736 - INFO - 127.0.0.1 - - [17/Jul/2025 05:18:27] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 05:18:40,328 - INFO - 127.0.0.1 - - [17/Jul/2025 05:18:40] "GET /loanbook HTTP/1.1" 200 -
2025-07-17 05:18:42,664 - INFO - 127.0.0.1 - - [17/Jul/2025 05:18:42] "GET /income_report HTTP/1.1" 200 -
2025-07-17 05:18:47,460 - INFO - 127.0.0.1 - - [17/Jul/2025 05:18:47] "GET /loans HTTP/1.1" 200 -
2025-07-17 05:18:48,725 - INFO - 127.0.0.1 - - [17/Jul/2025 05:18:48] "GET /customers HTTP/1.1" 200 -
2025-07-17 05:18:49,969 - INFO - 127.0.0.1 - - [17/Jul/2025 05:18:49] "GET /approve_customers HTTP/1.1" 200 -
2025-07-17 05:18:51,106 - INFO - 127.0.0.1 - - [17/Jul/2025 05:18:51] "GET / HTTP/1.1" 200 -
2025-07-17 05:18:52,620 - INFO - 127.0.0.1 - - [17/Jul/2025 05:18:52] "GET /register HTTP/1.1" 200 -
2025-07-17 05:19:01,746 - INFO - 127.0.0.1 - - [17/Jul/2025 05:19:01] "GET / HTTP/1.1" 200 -
2025-07-17 05:19:11,898 - INFO - 127.0.0.1 - - [17/Jul/2025 05:19:11] "GET /arrears HTTP/1.1" 200 -
2025-07-17 05:23:35,143 - INFO - Scheduler has been shut down
[2025-07-17 05:23:38,578] INFO in app: ==================================================
[2025-07-17 05:23:38,584] INFO in app: Application logging initialized successfully
[2025-07-17 05:23:38,586] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 05:23:38,588] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 05:23:38,590] INFO in app: System encoding: utf-8
[2025-07-17 05:23:38,592] INFO in app: ==================================================
2025-07-17 05:23:38,777 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 05:23:38,778 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 05:23:38,778 - INFO - Scheduler started
2025-07-17 05:23:38,792 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 05:23:38,792 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-17 05:23:42,674] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5636, in view_arrears
    return render_template(
        'arrears_report.html',
    ...<8 lines>...
        aging_summary=aging_summary
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 65, in get_source
    return self._get_source_fast(environment, template)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 99, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: arrears_report.html
2025-07-17 05:23:42,674 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5636, in view_arrears
    return render_template(
        'arrears_report.html',
    ...<8 lines>...
        aging_summary=aging_summary
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 65, in get_source
    return self._get_source_fast(environment, template)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 99, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: arrears_report.html
2025-07-17 05:23:42,695 - INFO - 127.0.0.1 - - [17/Jul/2025 05:23:42] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
2025-07-17 05:23:42,757 - INFO - 127.0.0.1 - - [17/Jul/2025 05:23:42] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 05:26:18,368 - INFO - Scheduler has been shut down
[2025-07-17 05:26:26,544] INFO in app: ==================================================
[2025-07-17 05:26:26,550] INFO in app: Application logging initialized successfully
[2025-07-17 05:26:26,552] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 05:26:26,555] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 05:26:26,560] INFO in app: System encoding: utf-8
[2025-07-17 05:26:26,562] INFO in app: ==================================================
2025-07-17 05:26:26,861 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 05:26:26,862 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 05:26:26,862 - INFO - Scheduler started
2025-07-17 05:26:26,875 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 05:26:26,875 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 05:26:30,519 - INFO - 127.0.0.1 - - [17/Jul/2025 05:26:30] "GET /arrears HTTP/1.1" 200 -
2025-07-17 05:26:31,704 - INFO - 127.0.0.1 - - [17/Jul/2025 05:26:31] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 05:28:14,169 - INFO - Scheduler has been shut down
[2025-07-17 05:28:17,481] INFO in app: ==================================================
[2025-07-17 05:28:17,488] INFO in app: Application logging initialized successfully
[2025-07-17 05:28:17,491] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 05:28:17,493] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 05:28:17,495] INFO in app: System encoding: utf-8
[2025-07-17 05:28:17,497] INFO in app: ==================================================
2025-07-17 05:28:17,680 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 05:28:17,682 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 05:28:17,682 - INFO - Scheduler started
2025-07-17 05:28:17,698 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 05:28:17,698 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 05:28:22,506 - INFO - 127.0.0.1 - - [17/Jul/2025 05:28:22] "GET /arrears HTTP/1.1" 200 -
2025-07-17 05:28:23,763 - INFO - 127.0.0.1 - - [17/Jul/2025 05:28:23] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 05:28:33,594 - INFO - 127.0.0.1 - - [17/Jul/2025 05:28:33] "GET /par-trend HTTP/1.1" 200 -
2025-07-17 05:28:37,109 - INFO - 127.0.0.1 - - [17/Jul/2025 05:28:37] "GET /arrears-trend HTTP/1.1" 200 -
2025-07-17 05:46:59,585 - INFO - 127.0.0.1 - - [17/Jul/2025 05:46:59] "GET /arrears HTTP/1.1" 200 -
2025-07-17 06:00:15,099 - INFO - Scheduler has been shut down
[2025-07-17 06:00:19,623] INFO in app: ==================================================
[2025-07-17 06:00:19,629] INFO in app: Application logging initialized successfully
[2025-07-17 06:00:19,631] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 06:00:19,633] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 06:00:19,635] INFO in app: System encoding: utf-8
[2025-07-17 06:00:19,640] INFO in app: ==================================================
2025-07-17 06:00:19,826 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 06:00:19,828 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 06:00:19,828 - INFO - Scheduler started
[2025-07-17 06:00:30,608] INFO in app: ==================================================
[2025-07-17 06:00:30,614] INFO in app: Application logging initialized successfully
[2025-07-17 06:00:30,618] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 06:00:30,620] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 06:00:30,623] INFO in app: System encoding: utf-8
[2025-07-17 06:00:30,624] INFO in app: ==================================================
2025-07-17 06:00:30,804 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 06:00:30,805 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 06:00:30,805 - INFO - Scheduler started
[2025-07-17 06:00:38,145] INFO in app: ==================================================
[2025-07-17 06:00:38,151] INFO in app: Application logging initialized successfully
[2025-07-17 06:00:38,153] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 06:00:38,155] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 06:00:38,156] INFO in app: System encoding: utf-8
[2025-07-17 06:00:38,160] INFO in app: ==================================================
2025-07-17 06:00:38,344 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 06:00:38,345 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 06:00:38,345 - INFO - Scheduler started
2025-07-17 06:00:38,359 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 06:00:38,359 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 06:44:46,757 - INFO - Scheduler has been shut down
[2025-07-17 06:44:50,705] INFO in app: ==================================================
[2025-07-17 06:44:50,711] INFO in app: Application logging initialized successfully
[2025-07-17 06:44:50,713] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 06:44:50,714] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 06:44:50,718] INFO in app: System encoding: utf-8
[2025-07-17 06:44:50,719] INFO in app: ==================================================
2025-07-17 06:44:50,919 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 06:44:50,921 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 06:44:50,921 - INFO - Scheduler started
2025-07-17 06:44:50,933 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 06:44:50,933 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-17 06:45:03,773] ERROR in app: Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5638, in view_arrears
    return render_template(
        'portfolio/arrears_report.html',
    ...<8 lines>...
        aging_summary=aging_summary
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_report.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 121, in top-level template code
    <li><a class="dropdown-item {% if request.endpoint == 'arrears_waterfall' %}active{% endif %}" href="{{ url_for('arrears_waterfall') }}">Arrears Waterfall</a></li>
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'arrears_waterfall'. Did you mean 'arrears_trend' instead?
2025-07-17 06:45:03,773 - ERROR - Exception on /arrears [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5638, in view_arrears
    return render_template(
        'portfolio/arrears_report.html',
    ...<8 lines>...
        aging_summary=aging_summary
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_report.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 121, in top-level template code
    <li><a class="dropdown-item {% if request.endpoint == 'arrears_waterfall' %}active{% endif %}" href="{{ url_for('arrears_waterfall') }}">Arrears Waterfall</a></li>
    ^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'arrears_waterfall'. Did you mean 'arrears_trend' instead?
2025-07-17 06:45:03,792 - INFO - 127.0.0.1 - - [17/Jul/2025 06:45:03] "[35m[1mGET /arrears HTTP/1.1[0m" 500 -
2025-07-17 06:45:03,841 - INFO - 127.0.0.1 - - [17/Jul/2025 06:45:03] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 06:46:10,985 - INFO - Scheduler has been shut down
[2025-07-17 06:46:14,554] INFO in app: ==================================================
[2025-07-17 06:46:14,560] INFO in app: Application logging initialized successfully
[2025-07-17 06:46:14,562] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 06:46:14,564] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 06:46:14,566] INFO in app: System encoding: utf-8
[2025-07-17 06:46:14,568] INFO in app: ==================================================
2025-07-17 06:46:14,771 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 06:46:14,772 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 06:46:14,772 - INFO - Scheduler started
2025-07-17 06:46:14,786 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 06:46:14,786 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 06:46:17,518 - INFO - 127.0.0.1 - - [17/Jul/2025 06:46:17] "GET /arrears HTTP/1.1" 200 -
2025-07-17 06:46:18,784 - INFO - 127.0.0.1 - - [17/Jul/2025 06:46:18] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-17 06:46:21,860] ERROR in app: Exception on /arrears-waterfall [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 6065, in arrears_waterfall
    return render_template('portfolio/arrears_waterfall.html',
                           arrears=arrears,
    ...<4 lines>...
                           tenures=tenures,
                           categories=categories)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_waterfall.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_waterfall.html", line 80, in block 'content'
    data-count1='{{ count1 | tojson | safe }}'
    ^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-17 06:46:21,860 - ERROR - Exception on /arrears-waterfall [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 6065, in arrears_waterfall
    return render_template('portfolio/arrears_waterfall.html',
                           arrears=arrears,
    ...<4 lines>...
                           tenures=tenures,
                           categories=categories)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_waterfall.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_waterfall.html", line 80, in block 'content'
    data-count1='{{ count1 | tojson | safe }}'
    ^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-17 06:46:21,888 - INFO - 127.0.0.1 - - [17/Jul/2025 06:46:21] "[35m[1mGET /arrears-waterfall HTTP/1.1[0m" 500 -
2025-07-17 07:19:20,361 - INFO - Scheduler has been shut down
[2025-07-17 07:19:26,333] INFO in app: ==================================================
[2025-07-17 07:19:26,339] INFO in app: Application logging initialized successfully
[2025-07-17 07:19:26,341] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 07:19:26,342] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 07:19:26,344] INFO in app: System encoding: utf-8
[2025-07-17 07:19:26,346] INFO in app: ==================================================
2025-07-17 07:19:26,553 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 07:19:26,554 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 07:19:26,554 - INFO - Scheduler started
2025-07-17 07:19:26,565 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 07:19:26,565 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 07:19:34,320 - INFO - 127.0.0.1 - - [17/Jul/2025 07:19:34] "GET /arrears HTTP/1.1" 200 -
[2025-07-17 07:19:38,189] ERROR in app: Exception on /arrears-waterfall [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 6075, in arrears_waterfall
    return render_template('portfolio/arrears_waterfall.html',
                           arrears=arrears,
    ...<6 lines>...
                           reasons=reasons,
                           counts=counts)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_waterfall.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_waterfall.html", line 80, in block 'content'
    data-count1='{{ count1 | tojson | safe }}'
    ^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-17 07:19:38,189 - ERROR - Exception on /arrears-waterfall [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 6075, in arrears_waterfall
    return render_template('portfolio/arrears_waterfall.html',
                           arrears=arrears,
    ...<6 lines>...
                           reasons=reasons,
                           counts=counts)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_waterfall.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_waterfall.html", line 80, in block 'content'
    data-count1='{{ count1 | tojson | safe }}'
    ^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
    ~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Program Files\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Program Files\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable
2025-07-17 07:19:38,213 - INFO - 127.0.0.1 - - [17/Jul/2025 07:19:38] "[35m[1mGET /arrears-waterfall HTTP/1.1[0m" 500 -
2025-07-17 07:20:14,451 - INFO - Scheduler has been shut down
[2025-07-17 07:20:17,430] INFO in app: ==================================================
[2025-07-17 07:20:17,435] INFO in app: Application logging initialized successfully
[2025-07-17 07:20:17,437] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 07:20:17,438] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 07:20:17,440] INFO in app: System encoding: utf-8
[2025-07-17 07:20:17,442] INFO in app: ==================================================
2025-07-17 07:20:17,635 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 07:20:17,636 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 07:20:17,637 - INFO - Scheduler started
2025-07-17 07:20:17,649 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 07:20:17,649 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 07:20:22,781 - INFO - 127.0.0.1 - - [17/Jul/2025 07:20:22] "GET /arrears-waterfall HTTP/1.1" 200 -
2025-07-17 07:20:24,179 - INFO - 127.0.0.1 - - [17/Jul/2025 07:20:24] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 07:20:50,198 - INFO - 127.0.0.1 - - [17/Jul/2025 07:20:50] "GET /arrears-waterfall HTTP/1.1" 200 -
2025-07-17 07:20:52,249 - INFO - 127.0.0.1 - - [17/Jul/2025 07:20:52] "GET /arrears-waterfall HTTP/1.1" 200 -
2025-07-17 07:20:53,315 - INFO - 127.0.0.1 - - [17/Jul/2025 07:20:53] "GET /arrears-waterfall HTTP/1.1" 200 -
2025-07-17 07:23:23,796 - INFO - 127.0.0.1 - - [17/Jul/2025 07:23:23] "GET /arrears-waterfall HTTP/1.1" 200 -
2025-07-17 07:23:25,176 - INFO - 127.0.0.1 - - [17/Jul/2025 07:23:25] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 07:23:29,081 - INFO - Scheduler has been shut down
[2025-07-17 07:23:32,076] INFO in app: ==================================================
[2025-07-17 07:23:32,082] INFO in app: Application logging initialized successfully
[2025-07-17 07:23:32,084] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 07:23:32,085] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 07:23:32,087] INFO in app: System encoding: utf-8
[2025-07-17 07:23:32,089] INFO in app: ==================================================
2025-07-17 07:23:32,280 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 07:23:32,282 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 07:23:32,282 - INFO - Scheduler started
2025-07-17 07:23:32,292 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 07:23:32,292 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 07:23:34,890 - INFO - 127.0.0.1 - - [17/Jul/2025 07:23:34] "GET /arrears-waterfall HTTP/1.1" 200 -
2025-07-17 07:23:36,236 - INFO - 127.0.0.1 - - [17/Jul/2025 07:23:36] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 07:24:12,963 - INFO - 127.0.0.1 - - [17/Jul/2025 07:24:12] "GET / HTTP/1.1" 200 -
2025-07-17 07:24:14,121 - INFO - 127.0.0.1 - - [17/Jul/2025 07:24:14] "GET /register HTTP/1.1" 200 -
2025-07-17 07:24:15,351 - INFO - 127.0.0.1 - - [17/Jul/2025 07:24:15] "GET /approve_customers HTTP/1.1" 200 -
2025-07-17 07:24:16,429 - INFO - 127.0.0.1 - - [17/Jul/2025 07:24:16] "GET /customers HTTP/1.1" 200 -
2025-07-17 07:24:17,491 - INFO - 127.0.0.1 - - [17/Jul/2025 07:24:17] "GET /loans HTTP/1.1" 200 -
2025-07-17 07:24:18,624 - INFO - 127.0.0.1 - - [17/Jul/2025 07:24:18] "GET /disbursements HTTP/1.1" 200 -
2025-07-17 07:24:19,587 - INFO - 127.0.0.1 - - [17/Jul/2025 07:24:19] "GET /payments HTTP/1.1" 200 -
2025-07-17 07:24:22,858 - INFO - 127.0.0.1 - - [17/Jul/2025 07:24:22] "GET /arrears HTTP/1.1" 200 -
2025-07-17 07:24:27,669 - INFO - 127.0.0.1 - - [17/Jul/2025 07:24:27] "GET /par-trend HTTP/1.1" 200 -
2025-07-17 07:24:31,552 - INFO - 127.0.0.1 - - [17/Jul/2025 07:24:31] "GET /arrears-trend HTTP/1.1" 200 -
2025-07-17 07:24:34,891 - INFO - 127.0.0.1 - - [17/Jul/2025 07:24:34] "GET /arrears-waterfall HTTP/1.1" 200 -
2025-07-17 07:25:24,900 - INFO - 127.0.0.1 - - [17/Jul/2025 07:25:24] "[32mGET /credit_officer/dashboard HTTP/1.1[0m" 302 -
2025-07-17 07:25:25,210 - INFO - 127.0.0.1 - - [17/Jul/2025 07:25:25] "GET / HTTP/1.1" 200 -
2025-07-17 07:26:02,786 - INFO - 127.0.0.1 - - [17/Jul/2025 07:26:02] "[32mGET /credit_officer/dashboard HTTP/1.1[0m" 302 -
2025-07-17 07:26:02,797 - INFO - 127.0.0.1 - - [17/Jul/2025 07:26:02] "GET / HTTP/1.1" 200 -
2025-07-17 07:26:06,537 - INFO - 127.0.0.1 - - [17/Jul/2025 07:26:06] "GET / HTTP/1.1" 200 -
2025-07-17 07:26:10,843 - INFO - Scheduler has been shut down
[2025-07-17 07:26:14,135] INFO in app: ==================================================
[2025-07-17 07:26:14,141] INFO in app: Application logging initialized successfully
[2025-07-17 07:26:14,144] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 07:26:14,146] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 07:26:14,147] INFO in app: System encoding: utf-8
[2025-07-17 07:26:14,150] INFO in app: ==================================================
2025-07-17 07:26:14,430 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 07:26:14,431 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 07:26:14,431 - INFO - Scheduler started
2025-07-17 07:26:14,446 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 07:26:14,446 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-17 07:26:20,904] ERROR in app: Exception on /credit_officer/dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5732, in credit_officer_dashboard
    {'name': 'View Loan Applications', 'url': url_for('view_loan_applications')},
                                              ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\helpers.py", line 232, in url_for
    return current_app.url_for(
           ~~~~~~~~~~~~~~~~~~~^
        endpoint,
        ^^^^^^^^^
    ...<4 lines>...
        **values,
        ^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'view_loan_applications'. Did you mean 'view_loans' instead?
2025-07-17 07:26:20,904 - ERROR - Exception on /credit_officer/dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5732, in credit_officer_dashboard
    {'name': 'View Loan Applications', 'url': url_for('view_loan_applications')},
                                              ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\helpers.py", line 232, in url_for
    return current_app.url_for(
           ~~~~~~~~~~~~~~~~~~~^
        endpoint,
        ^^^^^^^^^
    ...<4 lines>...
        **values,
        ^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'view_loan_applications'. Did you mean 'view_loans' instead?
2025-07-17 07:26:20,928 - INFO - 127.0.0.1 - - [17/Jul/2025 07:26:20] "[35m[1mGET /credit_officer/dashboard HTTP/1.1[0m" 500 -
2025-07-17 07:26:56,574 - INFO - Scheduler has been shut down
[2025-07-17 07:26:59,713] INFO in app: ==================================================
[2025-07-17 07:26:59,719] INFO in app: Application logging initialized successfully
[2025-07-17 07:26:59,721] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 07:26:59,723] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 07:26:59,725] INFO in app: System encoding: utf-8
[2025-07-17 07:26:59,727] INFO in app: ==================================================
2025-07-17 07:26:59,910 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 07:26:59,912 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 07:26:59,912 - INFO - Scheduler started
2025-07-17 07:26:59,926 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 07:26:59,926 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-17 07:27:03,666] ERROR in app: Exception on /credit_officer/dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5732, in credit_officer_dashboard
    {'name': 'View Loan Applications', 'url': url_for('view_loan_applications')},
                                              ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\helpers.py", line 232, in url_for
    return current_app.url_for(
           ~~~~~~~~~~~~~~~~~~~^
        endpoint,
        ^^^^^^^^^
    ...<4 lines>...
        **values,
        ^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'view_loan_applications'. Did you mean 'view_loans' instead?
2025-07-17 07:27:03,666 - ERROR - Exception on /credit_officer/dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5732, in credit_officer_dashboard
    {'name': 'View Loan Applications', 'url': url_for('view_loan_applications')},
                                              ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\helpers.py", line 232, in url_for
    return current_app.url_for(
           ~~~~~~~~~~~~~~~~~~~^
        endpoint,
        ^^^^^^^^^
    ...<4 lines>...
        **values,
        ^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'view_loan_applications'. Did you mean 'view_loans' instead?
2025-07-17 07:27:03,692 - INFO - 127.0.0.1 - - [17/Jul/2025 07:27:03] "[35m[1mGET /credit_officer/dashboard HTTP/1.1[0m" 500 -
2025-07-17 07:27:03,745 - INFO - 127.0.0.1 - - [17/Jul/2025 07:27:03] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 07:27:34,278 - INFO - Scheduler has been shut down
[2025-07-17 07:27:37,336] INFO in app: ==================================================
[2025-07-17 07:27:37,341] INFO in app: Application logging initialized successfully
[2025-07-17 07:27:37,343] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 07:27:37,345] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 07:27:37,347] INFO in app: System encoding: utf-8
[2025-07-17 07:27:37,349] INFO in app: ==================================================
2025-07-17 07:27:37,540 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 07:27:37,541 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 07:27:37,542 - INFO - Scheduler started
2025-07-17 07:27:37,555 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 07:27:37,555 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-17 07:27:41,084] ERROR in app: Exception on /credit_officer/dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5732, in credit_officer_dashboard
    {'name': 'View Loan Applications', 'url': url_for('view_loan_applications')},
                                              ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\helpers.py", line 232, in url_for
    return current_app.url_for(
           ~~~~~~~~~~~~~~~~~~~^
        endpoint,
        ^^^^^^^^^
    ...<4 lines>...
        **values,
        ^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'view_loan_applications'. Did you mean 'view_loans' instead?
2025-07-17 07:27:41,084 - ERROR - Exception on /credit_officer/dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5732, in credit_officer_dashboard
    {'name': 'View Loan Applications', 'url': url_for('view_loan_applications')},
                                              ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\helpers.py", line 232, in url_for
    return current_app.url_for(
           ~~~~~~~~~~~~~~~~~~~^
        endpoint,
        ^^^^^^^^^
    ...<4 lines>...
        **values,
        ^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'view_loan_applications'. Did you mean 'view_loans' instead?
2025-07-17 07:27:41,106 - INFO - 127.0.0.1 - - [17/Jul/2025 07:27:41] "[35m[1mGET /credit_officer/dashboard HTTP/1.1[0m" 500 -
2025-07-17 07:27:41,157 - INFO - 127.0.0.1 - - [17/Jul/2025 07:27:41] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 07:28:21,370 - INFO - Scheduler has been shut down
[2025-07-17 07:28:24,785] INFO in app: ==================================================
[2025-07-17 07:28:24,790] INFO in app: Application logging initialized successfully
[2025-07-17 07:28:24,794] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 07:28:24,795] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 07:28:24,802] INFO in app: System encoding: utf-8
[2025-07-17 07:28:24,804] INFO in app: ==================================================
2025-07-17 07:28:24,982 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 07:28:24,983 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 07:28:24,983 - INFO - Scheduler started
2025-07-17 07:28:24,993 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 07:28:24,994 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-17 07:28:27,598] ERROR in app: Exception on /credit_officer/dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5738, in credit_officer_dashboard
    return render_template('credit_officer/dashboard.html',
                           unread_notifications=unread_notifications,
                           tasks=tasks)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 65, in get_source
    return self._get_source_fast(environment, template)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 99, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: credit_officer/dashboard.html
2025-07-17 07:28:27,598 - ERROR - Exception on /credit_officer/dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5738, in credit_officer_dashboard
    return render_template('credit_officer/dashboard.html',
                           unread_notifications=unread_notifications,
                           tasks=tasks)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 65, in get_source
    return self._get_source_fast(environment, template)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 99, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: credit_officer/dashboard.html
2025-07-17 07:28:27,622 - INFO - 127.0.0.1 - - [17/Jul/2025 07:28:27] "[35m[1mGET /credit_officer/dashboard HTTP/1.1[0m" 500 -
2025-07-17 07:28:27,677 - INFO - 127.0.0.1 - - [17/Jul/2025 07:28:27] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 07:30:48,007 - INFO - Scheduler has been shut down
[2025-07-17 07:30:51,078] INFO in app: ==================================================
[2025-07-17 07:30:51,084] INFO in app: Application logging initialized successfully
[2025-07-17 07:30:51,086] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 07:30:51,087] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 07:30:51,089] INFO in app: System encoding: utf-8
[2025-07-17 07:30:51,091] INFO in app: ==================================================
2025-07-17 07:30:51,274 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 07:30:51,275 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 07:30:51,275 - INFO - Scheduler started
2025-07-17 07:30:51,289 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 07:30:51,289 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 07:30:55,841 - INFO - Scheduler has been shut down
[2025-07-17 07:30:58,708] INFO in app: ==================================================
[2025-07-17 07:30:58,714] INFO in app: Application logging initialized successfully
[2025-07-17 07:30:58,716] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 07:30:58,717] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 07:30:58,719] INFO in app: System encoding: utf-8
[2025-07-17 07:30:58,721] INFO in app: ==================================================
2025-07-17 07:30:58,906 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 07:30:58,908 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 07:30:58,908 - INFO - Scheduler started
2025-07-17 07:30:58,919 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 07:30:58,919 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 07:31:01,915 - INFO - 127.0.0.1 - - [17/Jul/2025 07:31:01] "GET /credit_officer/dashboard HTTP/1.1" 200 -
2025-07-17 07:31:03,452 - INFO - 127.0.0.1 - - [17/Jul/2025 07:31:03] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 07:34:57,039 - INFO - 127.0.0.1 - - [17/Jul/2025 07:34:57] "GET /credit_officer/dashboard HTTP/1.1" 200 -
2025-07-17 07:34:58,265 - INFO - 127.0.0.1 - - [17/Jul/2025 07:34:58] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 12:15:26,327 - INFO - Scheduler has been shut down
[2025-07-17 12:15:31,743] INFO in app: ==================================================
[2025-07-17 12:15:31,819] INFO in app: Application logging initialized successfully
[2025-07-17 12:15:31,821] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 12:15:31,823] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 12:15:31,824] INFO in app: System encoding: utf-8
[2025-07-17 12:15:31,826] INFO in app: ==================================================
2025-07-17 12:15:32,117 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 12:15:32,119 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 12:15:32,119 - INFO - Scheduler started
2025-07-17 12:15:32,171 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 12:15:32,171 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-17 12:15:45,345] ERROR in app: Exception on /credit_officer/dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5738, in credit_officer_dashboard
    return render_template('credit_officer/dashboard.html',
                           unread_notifications=unread_notifications,
                           tasks=tasks)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 65, in get_source
    return self._get_source_fast(environment, template)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 99, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: credit_officer/dashboard.html
2025-07-17 12:15:45,345 - ERROR - Exception on /credit_officer/dashboard [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 5738, in credit_officer_dashboard
    return render_template('credit_officer/dashboard.html',
                           unread_notifications=unread_notifications,
                           tasks=tasks)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 65, in get_source
    return self._get_source_fast(environment, template)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 99, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: credit_officer/dashboard.html
2025-07-17 12:15:45,473 - INFO - 127.0.0.1 - - [17/Jul/2025 12:15:45] "[35m[1mGET /credit_officer/dashboard HTTP/1.1[0m" 500 -
2025-07-17 12:15:45,549 - INFO - 127.0.0.1 - - [17/Jul/2025 12:15:45] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 12:16:01,804 - INFO - 127.0.0.1 - - [17/Jul/2025 12:16:01] "[33mGET /dashboard/credit_officer HTTP/1.1[0m" 404 -
2025-07-17 12:16:04,334 - INFO - 127.0.0.1 - - [17/Jul/2025 12:16:04] "[33mGET /dashboard/credit_officer HTTP/1.1[0m" 404 -
2025-07-17 12:16:04,379 - INFO - 127.0.0.1 - - [17/Jul/2025 12:16:04] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 12:16:08,509 - INFO - 127.0.0.1 - - [17/Jul/2025 12:16:08] "GET / HTTP/1.1" 200 -
2025-07-17 12:16:13,804 - INFO - 127.0.0.1 - - [17/Jul/2025 12:16:13] "GET /arrears-waterfall HTTP/1.1" 200 -
[2025-07-17 12:20:54,168] INFO in app: ==================================================
[2025-07-17 12:20:54,174] INFO in app: Application logging initialized successfully
[2025-07-17 12:20:54,175] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 12:20:54,176] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 12:20:54,178] INFO in app: System encoding: utf-8
[2025-07-17 12:20:54,182] INFO in app: ==================================================
[2025-07-17 12:21:28,247] INFO in app: ==================================================
[2025-07-17 12:21:28,252] INFO in app: Application logging initialized successfully
[2025-07-17 12:21:28,254] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 12:21:28,255] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 12:21:28,257] INFO in app: System encoding: utf-8
[2025-07-17 12:21:28,260] INFO in app: ==================================================
2025-07-17 12:21:28,495 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 12:21:28,497 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 12:21:28,497 - INFO - Scheduler started
2025-07-17 12:21:28,508 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 12:21:28,508 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 12:23:23,859 - INFO - 127.0.0.1 - - [17/Jul/2025 12:23:23] "GET /dashboard/credit_officer HTTP/1.1" 200 -
2025-07-17 13:48:14,018 - INFO - 127.0.0.1 - - [17/Jul/2025 13:48:14] "GET /arrears-waterfall HTTP/1.1" 200 -
2025-07-17 13:51:04,744 - INFO - Scheduler has been shut down
[2025-07-17 13:51:08,127] INFO in app: ==================================================
[2025-07-17 13:51:08,134] INFO in app: Application logging initialized successfully
[2025-07-17 13:51:08,136] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 13:51:08,139] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 13:51:08,141] INFO in app: System encoding: utf-8
[2025-07-17 13:51:08,143] INFO in app: ==================================================
2025-07-17 13:51:08,380 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 13:51:08,381 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 13:51:08,381 - INFO - Scheduler started
2025-07-17 13:51:08,394 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 13:51:08,394 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 13:51:31,976 - INFO - 127.0.0.1 - - [17/Jul/2025 13:51:31] "GET /arrears-waterfall HTTP/1.1" 200 -
2025-07-17 13:51:33,377 - INFO - 127.0.0.1 - - [17/Jul/2025 13:51:33] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 13:52:00,953 - INFO - 127.0.0.1 - - [17/Jul/2025 13:52:00] "[32mPOST /arrears-waterfall HTTP/1.1[0m" 302 -
2025-07-17 13:52:01,283 - INFO - 127.0.0.1 - - [17/Jul/2025 13:52:01] "GET /arrears-waterfall HTTP/1.1" 200 -
2025-07-17 14:00:48,238 - INFO - Scheduler has been shut down
[2025-07-17 14:00:51,278] INFO in app: ==================================================
[2025-07-17 14:00:51,283] INFO in app: Application logging initialized successfully
[2025-07-17 14:00:51,285] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 14:00:51,288] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 14:00:51,290] INFO in app: System encoding: utf-8
[2025-07-17 14:00:51,292] INFO in app: ==================================================
2025-07-17 14:00:51,498 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 14:00:51,499 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 14:00:51,499 - INFO - Scheduler started
2025-07-17 14:00:51,513 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 14:00:51,513 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 14:00:56,657 - INFO - 127.0.0.1 - - [17/Jul/2025 14:00:56] "GET /arrears-waterfall HTTP/1.1" 200 -
2025-07-17 14:00:57,229 - INFO - 127.0.0.1 - - [17/Jul/2025 14:00:57] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 14:03:29,636 - INFO - Scheduler has been shut down
[2025-07-17 14:03:33,296] INFO in app: ==================================================
[2025-07-17 14:03:33,302] INFO in app: Application logging initialized successfully
[2025-07-17 14:03:33,305] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 14:03:33,307] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 14:03:33,311] INFO in app: System encoding: utf-8
[2025-07-17 14:03:33,313] INFO in app: ==================================================
2025-07-17 14:03:33,559 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 14:03:33,561 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 14:03:33,561 - INFO - Scheduler started
2025-07-17 14:03:33,577 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 14:03:33,578 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 14:03:38,685 - INFO - 127.0.0.1 - - [17/Jul/2025 14:03:38] "GET /arrears-waterfall HTTP/1.1" 200 -
2025-07-17 14:03:39,256 - INFO - 127.0.0.1 - - [17/Jul/2025 14:03:39] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 14:03:41,457 - INFO - 127.0.0.1 - - [17/Jul/2025 14:03:41] "GET /arrears-waterfall HTTP/1.1" 200 -
2025-07-17 14:03:41,807 - INFO - 127.0.0.1 - - [17/Jul/2025 14:03:41] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 14:05:38,810 - INFO - 127.0.0.1 - - [17/Jul/2025 14:05:38] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-07-17 14:19:47,789 - INFO - Scheduler has been shut down
[2025-07-17 14:19:51,184] INFO in app: ==================================================
[2025-07-17 14:19:51,190] INFO in app: Application logging initialized successfully
[2025-07-17 14:19:51,192] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 14:19:51,194] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 14:19:51,196] INFO in app: System encoding: utf-8
[2025-07-17 14:19:51,198] INFO in app: ==================================================
2025-07-17 14:19:51,399 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 14:19:51,400 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 14:19:51,400 - INFO - Scheduler started
2025-07-17 14:19:51,411 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 14:19:51,411 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 14:20:02,078 - INFO - 127.0.0.1 - - [17/Jul/2025 14:20:02] "GET /arrears-waterfall HTTP/1.1" 200 -
2025-07-17 14:20:02,597 - INFO - 127.0.0.1 - - [17/Jul/2025 14:20:02] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 16:21:11,211 - INFO - Scheduler has been shut down
[2025-07-17 16:21:15,645] INFO in app: ==================================================
[2025-07-17 16:21:15,724] INFO in app: Application logging initialized successfully
[2025-07-17 16:21:15,725] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 16:21:15,726] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 16:21:15,728] INFO in app: System encoding: utf-8
[2025-07-17 16:21:15,730] INFO in app: ==================================================
2025-07-17 16:21:16,009 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 16:21:16,011 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 16:21:16,011 - INFO - Scheduler started
2025-07-17 16:21:16,026 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 16:21:16,026 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 16:21:25,945 - INFO - 127.0.0.1 - - [17/Jul/2025 16:21:25] "GET /arrears-waterfall HTTP/1.1" 200 -
2025-07-17 16:21:26,622 - INFO - 127.0.0.1 - - [17/Jul/2025 16:21:26] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 16:23:59,019 - INFO - Scheduler has been shut down
[2025-07-17 16:24:06,307] INFO in app: ==================================================
[2025-07-17 16:24:06,317] INFO in app: Application logging initialized successfully
[2025-07-17 16:24:06,319] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 16:24:06,321] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 16:24:06,326] INFO in app: System encoding: utf-8
[2025-07-17 16:24:06,334] INFO in app: ==================================================
2025-07-17 16:24:06,666 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 16:24:06,668 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 16:24:06,668 - INFO - Scheduler started
2025-07-17 16:24:06,685 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 16:24:06,685 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 16:24:13,191 - INFO - 127.0.0.1 - - [17/Jul/2025 16:24:13] "GET /arrears-waterfall HTTP/1.1" 200 -
2025-07-17 16:24:14,417 - INFO - 127.0.0.1 - - [17/Jul/2025 16:24:14] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 16:26:50,775 - INFO - Scheduler has been shut down
[2025-07-17 16:26:56,904] INFO in app: ==================================================
[2025-07-17 16:26:56,924] INFO in app: Application logging initialized successfully
[2025-07-17 16:26:56,930] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 16:26:56,934] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 16:26:56,946] INFO in app: System encoding: utf-8
[2025-07-17 16:26:56,949] INFO in app: ==================================================
2025-07-17 16:26:57,367 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 16:26:57,369 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 16:26:57,370 - INFO - Scheduler started
2025-07-17 16:26:57,387 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 16:26:57,387 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-17 16:27:08,030] ERROR in app: Exception on /arrears-waterfall [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 6089, in arrears_waterfall
    return render_template('portfolio/arrears_waterfall.html',
                           arrears=arrears,
    ...<5 lines>...
                           categories=categories,
                           summary_data=summary_data)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_waterfall.html", line 77, in template
    <td class="text-end">{{ arrear.total_arrears | format_currency }}</td>
    ^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'format_currency'.
2025-07-17 16:27:08,030 - ERROR - Exception on /arrears-waterfall [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 6089, in arrears_waterfall
    return render_template('portfolio/arrears_waterfall.html',
                           arrears=arrears,
    ...<5 lines>...
                           categories=categories,
                           summary_data=summary_data)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_waterfall.html", line 77, in template
    <td class="text-end">{{ arrear.total_arrears | format_currency }}</td>
    ^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'format_currency'.
2025-07-17 16:27:08,114 - INFO - 127.0.0.1 - - [17/Jul/2025 16:27:08] "[35m[1mGET /arrears-waterfall HTTP/1.1[0m" 500 -
2025-07-17 16:27:08,164 - INFO - 127.0.0.1 - - [17/Jul/2025 16:27:08] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-17 16:27:16,220 - INFO - 127.0.0.1 - - [17/Jul/2025 16:27:16] "GET /dashboard/credit_officer HTTP/1.1" 200 -
[2025-07-17 16:27:20,262] ERROR in app: Exception on /arrears-waterfall [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 6089, in arrears_waterfall
    return render_template('portfolio/arrears_waterfall.html',
                           arrears=arrears,
    ...<5 lines>...
                           categories=categories,
                           summary_data=summary_data)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_waterfall.html", line 77, in template
    <td class="text-end">{{ arrear.total_arrears | format_currency }}</td>
    ^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'format_currency'.
2025-07-17 16:27:20,262 - ERROR - Exception on /arrears-waterfall [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 489, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 6089, in arrears_waterfall
    return render_template('portfolio/arrears_waterfall.html',
                           arrears=arrears,
    ...<5 lines>...
                           categories=categories,
                           summary_data=summary_data)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_waterfall.html", line 77, in template
    <td class="text-end">{{ arrear.total_arrears | format_currency }}</td>
    ^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'format_currency'.
2025-07-17 16:27:20,283 - INFO - 127.0.0.1 - - [17/Jul/2025 16:27:20] "[35m[1mGET /arrears-waterfall HTTP/1.1[0m" 500 -
2025-07-17 16:35:48,659 - INFO - Scheduler has been shut down
[2025-07-17 16:35:53,541] INFO in app: ==================================================
[2025-07-17 16:35:53,555] INFO in app: Application logging initialized successfully
[2025-07-17 16:35:53,562] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 16:35:53,565] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 16:35:53,573] INFO in app: System encoding: utf-8
[2025-07-17 16:35:53,578] INFO in app: ==================================================
2025-07-17 16:35:53,945 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 16:35:53,947 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 16:35:53,947 - INFO - Scheduler started
2025-07-17 16:35:53,964 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 16:35:53,964 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-17 16:35:58,825] ERROR in app: Exception on /arrears-waterfall [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 499, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 6089, in arrears_waterfall
    return render_template('portfolio/arrears_waterfall.html',
                           arrears=arrears,
    ...<4 lines>...
                           categories=categories,
                           summary_data=summary_data)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_waterfall.html", line 77, in template
    <td class="text-end">{{ arrear.total_arrears | format_currency }}</td>
    ^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'format_currency'.
2025-07-17 16:35:58,825 - ERROR - Exception on /arrears-waterfall [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 499, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 6089, in arrears_waterfall
    return render_template('portfolio/arrears_waterfall.html',
                           arrears=arrears,
    ...<4 lines>...
                           categories=categories,
                           summary_data=summary_data)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_waterfall.html", line 77, in template
    <td class="text-end">{{ arrear.total_arrears | format_currency }}</td>
    ^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'format_currency'.
2025-07-17 16:35:58,850 - INFO - 127.0.0.1 - - [17/Jul/2025 16:35:58] "[35m[1mGET /arrears-waterfall HTTP/1.1[0m" 500 -
2025-07-17 16:35:58,902 - INFO - 127.0.0.1 - - [17/Jul/2025 16:35:58] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-17 16:36:04,991] ERROR in app: Exception on /arrears-waterfall [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 499, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 6089, in arrears_waterfall
    return render_template('portfolio/arrears_waterfall.html',
                           arrears=arrears,
    ...<4 lines>...
                           categories=categories,
                           summary_data=summary_data)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_waterfall.html", line 77, in template
    <td class="text-end">{{ arrear.total_arrears | format_currency }}</td>
    ^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'format_currency'.
2025-07-17 16:36:04,991 - ERROR - Exception on /arrears-waterfall [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 499, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 6089, in arrears_waterfall
    return render_template('portfolio/arrears_waterfall.html',
                           arrears=arrears,
    ...<4 lines>...
                           categories=categories,
                           summary_data=summary_data)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_waterfall.html", line 77, in template
    <td class="text-end">{{ arrear.total_arrears | format_currency }}</td>
    ^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'format_currency'.
2025-07-17 16:36:05,016 - INFO - 127.0.0.1 - - [17/Jul/2025 16:36:05] "[35m[1mGET /arrears-waterfall HTTP/1.1[0m" 500 -
[2025-07-17 16:36:37,764] INFO in app: ==================================================
[2025-07-17 16:36:37,770] INFO in app: Application logging initialized successfully
[2025-07-17 16:36:37,773] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 16:36:37,776] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 16:36:37,778] INFO in app: System encoding: utf-8
[2025-07-17 16:36:37,783] INFO in app: ==================================================
2025-07-17 16:36:37,989 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 16:36:37,991 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 16:36:37,991 - INFO - Scheduler started
2025-07-17 16:36:38,001 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 16:36:38,001 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-17 16:36:42,066] ERROR in app: Exception on /arrears-waterfall [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 499, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 6089, in arrears_waterfall
    return render_template('portfolio/arrears_waterfall.html',
                           arrears=arrears,
    ...<4 lines>...
                           categories=categories,
                           summary_data=summary_data)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_waterfall.html", line 77, in template
    <td class="text-end">{{ arrear.total_arrears | format_currency }}</td>
    ^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'format_currency'.
2025-07-17 16:36:42,066 - ERROR - Exception on /arrears-waterfall [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 499, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 6089, in arrears_waterfall
    return render_template('portfolio/arrears_waterfall.html',
                           arrears=arrears,
    ...<4 lines>...
                           categories=categories,
                           summary_data=summary_data)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_waterfall.html", line 77, in template
    <td class="text-end">{{ arrear.total_arrears | format_currency }}</td>
    ^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'format_currency'.
2025-07-17 16:36:42,086 - INFO - 127.0.0.1 - - [17/Jul/2025 16:36:42] "[35m[1mGET /arrears-waterfall HTTP/1.1[0m" 500 -
2025-07-17 16:37:40,590 - INFO - Scheduler has been shut down
[2025-07-17 16:37:43,845] INFO in app: ==================================================
[2025-07-17 16:37:43,851] INFO in app: Application logging initialized successfully
[2025-07-17 16:37:43,854] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 16:37:43,855] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 16:37:43,857] INFO in app: System encoding: utf-8
[2025-07-17 16:37:43,860] INFO in app: ==================================================
2025-07-17 16:37:44,054 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 16:37:44,056 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 16:37:44,056 - INFO - Scheduler started
2025-07-17 16:37:44,066 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 16:37:44,067 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-17 16:37:48,070] ERROR in app: Exception on /arrears-waterfall [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 499, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 6089, in arrears_waterfall
    return render_template('portfolio/arrears_waterfall.html',
                           arrears=arrears,
    ...<4 lines>...
                           categories=categories,
                           summary_data=summary_data)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_waterfall.html", line 77, in template
    <td class="text-end">{{ arrear.total_arrears | format_currency }}</td>
    ^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'format_currency'.
2025-07-17 16:37:48,070 - ERROR - Exception on /arrears-waterfall [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 499, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 6089, in arrears_waterfall
    return render_template('portfolio/arrears_waterfall.html',
                           arrears=arrears,
    ...<4 lines>...
                           categories=categories,
                           summary_data=summary_data)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_waterfall.html", line 77, in template
    <td class="text-end">{{ arrear.total_arrears | format_currency }}</td>
    ^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'format_currency'.
2025-07-17 16:37:48,089 - INFO - 127.0.0.1 - - [17/Jul/2025 16:37:48] "[35m[1mGET /arrears-waterfall HTTP/1.1[0m" 500 -
2025-07-17 16:37:48,137 - INFO - 127.0.0.1 - - [17/Jul/2025 16:37:48] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-17 16:37:51,071] ERROR in app: Exception on /arrears-waterfall [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 499, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 6089, in arrears_waterfall
    return render_template('portfolio/arrears_waterfall.html',
                           arrears=arrears,
    ...<4 lines>...
                           categories=categories,
                           summary_data=summary_data)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_waterfall.html", line 77, in template
    <td class="text-end">{{ arrear.total_arrears | format_currency }}</td>
    ^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'format_currency'.
2025-07-17 16:37:51,071 - ERROR - Exception on /arrears-waterfall [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 499, in wrapper
    return f(*args, **kwargs)
  File "C:\Users\pc\loan-app\app.py", line 6089, in arrears_waterfall
    return render_template('portfolio/arrears_waterfall.html',
                           arrears=arrears,
    ...<4 lines>...
                           categories=categories,
                           summary_data=summary_data)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\portfolio\arrears_waterfall.html", line 77, in template
    <td class="text-end">{{ arrear.total_arrears | format_currency }}</td>
    ^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'format_currency'.
2025-07-17 16:37:51,083 - INFO - 127.0.0.1 - - [17/Jul/2025 16:37:51] "[35m[1mGET /arrears-waterfall HTTP/1.1[0m" 500 -
2025-07-17 16:38:19,794 - INFO - Scheduler has been shut down
[2025-07-17 16:38:22,977] INFO in app: ==================================================
[2025-07-17 16:38:22,983] INFO in app: Application logging initialized successfully
[2025-07-17 16:38:22,985] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-17 16:38:22,987] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-17 16:38:22,989] INFO in app: System encoding: utf-8
[2025-07-17 16:38:22,993] INFO in app: ==================================================
2025-07-17 16:38:23,187 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-17 16:38:23,188 - INFO - Added job "snapshot_par" to job store "default"
2025-07-17 16:38:23,188 - INFO - Scheduler started
2025-07-17 16:38:23,198 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-17 16:38:23,199 - INFO - [33mPress CTRL+C to quit[0m
2025-07-17 16:38:26,072 - INFO - 127.0.0.1 - - [17/Jul/2025 16:38:26] "GET /arrears-waterfall HTTP/1.1" 200 -
2025-07-17 16:38:33,448 - INFO - 127.0.0.1 - - [17/Jul/2025 16:38:33] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-18 14:26:40,486] INFO in app: ==================================================
[2025-07-18 14:26:40,584] INFO in app: Application logging initialized successfully
[2025-07-18 14:26:40,588] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-18 14:26:40,590] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-18 14:26:40,592] INFO in app: System encoding: utf-8
[2025-07-18 14:26:40,593] INFO in app: ==================================================
2025-07-18 14:26:40,960 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-18 14:26:40,962 - INFO - Added job "snapshot_par" to job store "default"
2025-07-18 14:26:40,962 - INFO - Scheduler started
[2025-07-18 14:27:20,254] INFO in app: ==================================================
[2025-07-18 14:27:20,263] INFO in app: Application logging initialized successfully
[2025-07-18 14:27:20,264] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-18 14:27:20,265] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-18 14:27:20,267] INFO in app: System encoding: utf-8
[2025-07-18 14:27:20,283] INFO in app: ==================================================
2025-07-18 14:27:20,564 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-18 14:27:20,565 - INFO - Added job "snapshot_par" to job store "default"
2025-07-18 14:27:20,565 - INFO - Scheduler started
2025-07-18 14:27:20,637 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-18 14:27:20,637 - INFO - [33mPress CTRL+C to quit[0m
2025-07-18 14:27:27,417 - INFO - 127.0.0.1 - - [18/Jul/2025 14:27:27] "GET /arrears-waterfall HTTP/1.1" 200 -
2025-07-18 14:27:29,666 - INFO - 127.0.0.1 - - [18/Jul/2025 14:27:29] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-18 14:27:51,490 - INFO - 127.0.0.1 - - [18/Jul/2025 14:27:51] "[33mGET /loan-placement-report HTTP/1.1[0m" 404 -
2025-07-18 14:33:32,688 - INFO - Scheduler has been shut down
2025-07-18 14:49:11,913 - INFO - Scheduler has been shut down
[2025-07-18 14:49:16,094] INFO in app: ==================================================
[2025-07-18 14:49:16,100] INFO in app: Application logging initialized successfully
[2025-07-18 14:49:16,107] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-18 14:49:16,114] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-18 14:49:16,117] INFO in app: System encoding: utf-8
[2025-07-18 14:49:16,120] INFO in app: ==================================================
2025-07-18 14:49:16,371 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-18 14:49:16,372 - INFO - Added job "snapshot_par" to job store "default"
2025-07-18 14:49:16,372 - INFO - Scheduler started
[2025-07-18 14:49:27,133] INFO in app: ==================================================
[2025-07-18 14:49:27,140] INFO in app: Application logging initialized successfully
[2025-07-18 14:49:27,143] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-18 14:49:27,161] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-18 14:49:27,166] INFO in app: System encoding: utf-8
[2025-07-18 14:49:27,168] INFO in app: ==================================================
2025-07-18 14:49:27,398 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-18 14:49:27,400 - INFO - Added job "snapshot_par" to job store "default"
2025-07-18 14:49:27,400 - INFO - Scheduler started
[2025-07-18 14:49:32,105] INFO in app: ==================================================
[2025-07-18 14:49:32,113] INFO in app: Application logging initialized successfully
[2025-07-18 14:49:32,115] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-18 14:49:32,117] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-18 14:49:32,120] INFO in app: System encoding: utf-8
[2025-07-18 14:49:32,127] INFO in app: ==================================================
2025-07-18 14:49:32,412 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-18 14:49:32,415 - INFO - Added job "snapshot_par" to job store "default"
2025-07-18 14:49:32,415 - INFO - Scheduler started
2025-07-18 14:49:32,436 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-18 14:49:32,436 - INFO - [33mPress CTRL+C to quit[0m
2025-07-18 14:50:42,410 - INFO - 127.0.0.1 - - [18/Jul/2025 14:50:42] "[33mGET /loan_placement HTTP/1.1[0m" 404 -
2025-07-18 14:51:12,860 - INFO - 127.0.0.1 - - [18/Jul/2025 14:51:12] "[33mGET /loan/placement_list.html HTTP/1.1[0m" 404 -
2025-07-18 14:51:15,368 - INFO - 127.0.0.1 - - [18/Jul/2025 14:51:15] "[33mGET /loan/placement_list.html HTTP/1.1[0m" 404 -
2025-07-18 14:51:30,968 - INFO - 127.0.0.1 - - [18/Jul/2025 14:51:30] "[33mGET /loan/placement_list.html HTTP/1.1[0m" 404 -
2025-07-18 14:51:43,348 - INFO - 127.0.0.1 - - [18/Jul/2025 14:51:43] "[33mGET /loan/placement_form.html HTTP/1.1[0m" 404 -
2025-07-18 15:35:00,546 - INFO - 127.0.0.1 - - [18/Jul/2025 15:35:00] "GET /arrears HTTP/1.1" 200 -
2025-07-18 15:37:36,564 - INFO - 127.0.0.1 - - [18/Jul/2025 15:37:36] "GET / HTTP/1.1" 200 -
[2025-07-19 15:08:34,982] INFO in app: ==================================================
[2025-07-19 15:08:35,161] INFO in app: Application logging initialized successfully
[2025-07-19 15:08:35,163] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-19 15:08:35,166] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-19 15:08:35,169] INFO in app: System encoding: utf-8
[2025-07-19 15:08:35,171] INFO in app: ==================================================
2025-07-19 15:08:35,622 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-19 15:08:35,624 - INFO - Added job "snapshot_par" to job store "default"
2025-07-19 15:08:35,625 - INFO - Scheduler started
2025-07-19 15:08:35,664 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-19 15:08:35,664 - INFO - [33mPress CTRL+C to quit[0m
2025-07-19 15:08:42,961 - INFO - 127.0.0.1 - - [19/Jul/2025 15:08:42] "GET /loanbook HTTP/1.1" 200 -
2025-07-19 15:08:46,039 - INFO - 127.0.0.1 - - [19/Jul/2025 15:08:46] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-19 15:08:51,802 - INFO - 127.0.0.1 - - [19/Jul/2025 15:08:51] "GET /register HTTP/1.1" 200 -
2025-07-19 15:11:03,377 - INFO - 127.0.0.1 - - [19/Jul/2025 15:11:03] "[32mPOST /register HTTP/1.1[0m" 302 -
2025-07-19 15:11:03,392 - INFO - 127.0.0.1 - - [19/Jul/2025 15:11:03] "GET /register HTTP/1.1" 200 -
2025-07-19 15:11:09,417 - INFO - 127.0.0.1 - - [19/Jul/2025 15:11:09] "GET /approve_customers HTTP/1.1" 200 -
2025-07-19 15:11:15,973 - INFO - 127.0.0.1 - - [19/Jul/2025 15:11:15] "GET /admin/dashboard HTTP/1.1" 200 -
2025-07-19 15:11:19,089 - INFO - 127.0.0.1 - - [19/Jul/2025 15:11:19] "GET /admin/dashboard/votes HTTP/1.1" 200 -
2025-07-19 15:11:30,901 - INFO - 127.0.0.1 - - [19/Jul/2025 15:11:30] "[32mPOST /admin/dashboard/votes HTTP/1.1[0m" 302 -
2025-07-19 15:11:31,219 - INFO - 127.0.0.1 - - [19/Jul/2025 15:11:31] "GET /admin/dashboard/votes HTTP/1.1" 200 -
2025-07-19 15:11:35,745 - INFO - 127.0.0.1 - - [19/Jul/2025 15:11:35] "GET /customers HTTP/1.1" 200 -
2025-07-19 15:11:38,011 - INFO - 127.0.0.1 - - [19/Jul/2025 15:11:38] "GET /approve_customers HTTP/1.1" 200 -
2025-07-19 15:11:42,595 - INFO - 127.0.0.1 - - [19/Jul/2025 15:11:42] "[32mPOST /approve_customers HTTP/1.1[0m" 302 -
2025-07-19 15:11:42,928 - INFO - 127.0.0.1 - - [19/Jul/2025 15:11:42] "GET /approve_customers HTTP/1.1" 200 -
2025-07-19 15:11:51,527 - INFO - 127.0.0.1 - - [19/Jul/2025 15:11:51] "[32mPOST /approve_customers HTTP/1.1[0m" 302 -
2025-07-19 15:11:51,542 - INFO - 127.0.0.1 - - [19/Jul/2025 15:11:51] "GET /approve_customers HTTP/1.1" 200 -
2025-07-19 15:11:58,710 - INFO - 127.0.0.1 - - [19/Jul/2025 15:11:58] "GET /customers HTTP/1.1" 200 -
2025-07-19 15:12:01,368 - INFO - 127.0.0.1 - - [19/Jul/2025 15:12:01] "GET /loans HTTP/1.1" 200 -
2025-07-19 15:12:05,764 - INFO - 127.0.0.1 - - [19/Jul/2025 15:12:05] "[32mPOST /process_loan/1/approve HTTP/1.1[0m" 302 -
2025-07-19 15:12:06,032 - INFO - 127.0.0.1 - - [19/Jul/2025 15:12:06] "GET /loans HTTP/1.1" 200 -
[2025-07-19 15:12:08,543] INFO in app: [DISBURSEMENT] Loan #124000001 | Top-up of: None | Cash to Client: 1000000.0
2025-07-19 15:12:08,543 - INFO - [DISBURSEMENT] Loan #124000001 | Top-up of: None | Cash to Client: 1000000.0
2025-07-19 15:12:08,593 - INFO - 127.0.0.1 - - [19/Jul/2025 15:12:08] "GET /disbursements HTTP/1.1" 200 -
[2025-07-19 15:12:15,227] ERROR in app: [DISBURSE] Error for loan 124000001: Instance '<RepaymentSchedule at 0x24be949bcf0>' has been deleted.  Use the make_transient() function to send this object back to the transient state.
2025-07-19 15:12:15,227 - ERROR - [DISBURSE] Error for loan 124000001: Instance '<RepaymentSchedule at 0x24be949bcf0>' has been deleted.  Use the make_transient() function to send this object back to the transient state.
2025-07-19 15:12:16,829 - INFO - 127.0.0.1 - - [19/Jul/2025 15:12:16] "[32mPOST /disbursements HTTP/1.1[0m" 302 -
[2025-07-19 15:12:16,846] INFO in app: [DISBURSEMENT] Loan #124000001 | Top-up of: None | Cash to Client: 1000000.0
2025-07-19 15:12:16,846 - INFO - [DISBURSEMENT] Loan #124000001 | Top-up of: None | Cash to Client: 1000000.0
2025-07-19 15:12:16,855 - INFO - 127.0.0.1 - - [19/Jul/2025 15:12:16] "GET /disbursements HTTP/1.1" 200 -
2025-07-19 15:12:36,078 - INFO - 127.0.0.1 - - [19/Jul/2025 15:12:36] "GET /loanbook HTTP/1.1" 200 -
2025-07-19 15:12:39,452 - INFO - 127.0.0.1 - - [19/Jul/2025 15:12:39] "GET /income_report HTTP/1.1" 200 -
2025-07-19 15:32:23,739 - INFO - 127.0.0.1 - - [19/Jul/2025 15:32:23] "GET /loanbook HTTP/1.1" 200 -
2025-07-19 15:32:27,383 - INFO - 127.0.0.1 - - [19/Jul/2025 15:32:27] "GET /loan/124000001/statement HTTP/1.1" 200 -
2025-07-19 16:44:35,320 - INFO - Scheduler has been shut down
[2025-07-19 16:45:10,459] INFO in app: ==================================================
[2025-07-19 16:45:10,540] INFO in app: Application logging initialized successfully
[2025-07-19 16:45:10,541] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-19 16:45:10,544] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-19 16:45:10,549] INFO in app: System encoding: utf-8
[2025-07-19 16:45:10,551] INFO in app: ==================================================
2025-07-19 16:45:10,827 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-19 16:45:10,828 - INFO - Added job "snapshot_par" to job store "default"
2025-07-19 16:45:10,828 - INFO - Scheduler started
[2025-07-19 16:45:20,308] INFO in app: ==================================================
[2025-07-19 16:45:20,315] INFO in app: Application logging initialized successfully
[2025-07-19 16:45:20,319] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-19 16:45:20,321] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-19 16:45:20,323] INFO in app: System encoding: utf-8
[2025-07-19 16:45:20,331] INFO in app: ==================================================
2025-07-19 16:45:20,618 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-19 16:45:20,620 - INFO - Added job "snapshot_par" to job store "default"
2025-07-19 16:45:20,620 - INFO - Scheduler started
[2025-07-19 16:45:25,771] INFO in app: ==================================================
[2025-07-19 16:45:25,778] INFO in app: Application logging initialized successfully
[2025-07-19 16:45:25,780] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-19 16:45:25,783] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-19 16:45:25,787] INFO in app: System encoding: utf-8
[2025-07-19 16:45:25,792] INFO in app: ==================================================
2025-07-19 16:45:26,057 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-19 16:45:26,059 - INFO - Added job "snapshot_par" to job store "default"
2025-07-19 16:45:26,059 - INFO - Scheduler started
2025-07-19 16:45:26,076 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-19 16:45:26,076 - INFO - [33mPress CTRL+C to quit[0m
2025-07-19 16:46:24,723 - INFO - 127.0.0.1 - - [19/Jul/2025 16:46:24] "[33mGET /loan/placement_form HTTP/1.1[0m" 404 -
2025-07-19 16:51:13,100 - INFO - Scheduler has been shut down
[2025-07-19 16:51:18,459] INFO in app: ==================================================
[2025-07-19 16:51:18,469] INFO in app: Application logging initialized successfully
[2025-07-19 16:51:18,479] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-19 16:51:18,481] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-19 16:51:18,483] INFO in app: System encoding: utf-8
[2025-07-19 16:51:18,486] INFO in app: ==================================================
2025-07-19 16:51:18,752 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-19 16:51:18,753 - INFO - Added job "snapshot_par" to job store "default"
2025-07-19 16:51:18,754 - INFO - Scheduler started
2025-07-19 16:51:18,774 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-19 16:51:18,774 - INFO - [33mPress CTRL+C to quit[0m
2025-07-19 16:51:35,883 - INFO - 127.0.0.1 - - [19/Jul/2025 16:51:35] "[33mGET /placement/placement_list HTTP/1.1[0m" 404 -
2025-07-19 17:03:54,359 - INFO - 127.0.0.1 - - [19/Jul/2025 17:03:54] "[33mGET /placements HTTP/1.1[0m" 404 -
2025-07-19 17:04:12,729 - INFO - 127.0.0.1 - - [19/Jul/2025 17:04:12] "[33mGET /form HTTP/1.1[0m" 404 -
2025-07-19 17:04:18,886 - INFO - 127.0.0.1 - - [19/Jul/2025 17:04:18] "[33mGET /form HTTP/1.1[0m" 404 -
2025-07-19 17:42:11,223 - INFO - 127.0.0.1 - - [19/Jul/2025 17:42:11] "[33mGET /placement HTTP/1.1[0m" 404 -
[2025-07-19 17:43:02,461] INFO in app: ==================================================
[2025-07-19 17:43:02,529] INFO in app: Application logging initialized successfully
[2025-07-19 17:43:02,531] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-19 17:43:02,532] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-19 17:43:02,534] INFO in app: System encoding: utf-8
[2025-07-19 17:43:02,535] INFO in app: ==================================================
2025-07-19 17:43:02,789 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-19 17:43:02,790 - INFO - Added job "snapshot_par" to job store "default"
2025-07-19 17:43:02,790 - INFO - Scheduler started
2025-07-19 17:44:54,012 - INFO - Scheduler has been shut down
[2025-07-19 17:46:02,344] INFO in app: ==================================================
[2025-07-19 17:46:02,351] INFO in app: Application logging initialized successfully
[2025-07-19 17:46:02,352] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-19 17:46:02,354] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-19 17:46:02,356] INFO in app: System encoding: utf-8
[2025-07-19 17:46:02,364] INFO in app: ==================================================
2025-07-19 17:46:02,585 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-19 17:46:02,587 - INFO - Added job "snapshot_par" to job store "default"
2025-07-19 17:46:02,587 - INFO - Scheduler started
[2025-07-19 17:46:09,600] INFO in app: ==================================================
[2025-07-19 17:46:09,613] INFO in app: Application logging initialized successfully
[2025-07-19 17:46:09,615] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-19 17:46:09,617] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-19 17:46:09,619] INFO in app: System encoding: utf-8
[2025-07-19 17:46:09,621] INFO in app: ==================================================
2025-07-19 17:46:09,939 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-19 17:46:09,940 - INFO - Added job "snapshot_par" to job store "default"
2025-07-19 17:46:09,941 - INFO - Scheduler started
[2025-07-19 17:46:14,256] INFO in app: ==================================================
[2025-07-19 17:46:14,264] INFO in app: Application logging initialized successfully
[2025-07-19 17:46:14,267] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-19 17:46:14,269] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-19 17:46:14,271] INFO in app: System encoding: utf-8
[2025-07-19 17:46:14,274] INFO in app: ==================================================
2025-07-19 17:46:14,476 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-19 17:46:14,477 - INFO - Added job "snapshot_par" to job store "default"
2025-07-19 17:46:14,477 - INFO - Scheduler started
2025-07-19 17:46:14,498 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-19 17:46:14,498 - INFO - [33mPress CTRL+C to quit[0m
2025-07-19 17:46:31,849 - INFO - Scheduler has been shut down
2025-07-19 17:46:40,336 - INFO - 127.0.0.1 - - [19/Jul/2025 17:46:40] "[33mGET /placement HTTP/1.1[0m" 404 -
2025-07-19 17:46:40,384 - INFO - 127.0.0.1 - - [19/Jul/2025 17:46:40] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-19 17:46:45,969 - INFO - 127.0.0.1 - - [19/Jul/2025 17:46:45] "[33mGET /placements HTTP/1.1[0m" 404 -
2025-07-19 17:46:54,349 - INFO - 127.0.0.1 - - [19/Jul/2025 17:46:54] "[33mGET /placement/list HTTP/1.1[0m" 404 -
2025-07-19 17:47:03,004 - INFO - 127.0.0.1 - - [19/Jul/2025 17:47:03] "[33mGET /placement/form HTTP/1.1[0m" 404 -
2025-07-19 17:47:09,297 - INFO - 127.0.0.1 - - [19/Jul/2025 17:47:09] "[33mGET /form HTTP/1.1[0m" 404 -
[2025-07-19 17:47:45,860] INFO in app: ==================================================
[2025-07-19 17:47:45,867] INFO in app: Application logging initialized successfully
[2025-07-19 17:47:45,868] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-19 17:47:45,869] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-19 17:47:45,870] INFO in app: System encoding: utf-8
[2025-07-19 17:47:45,871] INFO in app: ==================================================
2025-07-19 17:47:46,049 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-19 17:47:46,050 - INFO - Added job "snapshot_par" to job store "default"
2025-07-19 17:47:46,050 - INFO - Scheduler started
2025-07-19 17:52:53,800 - INFO - Scheduler has been shut down
[2025-07-19 17:53:00,106] INFO in app: ==================================================
[2025-07-19 17:53:00,114] INFO in app: Application logging initialized successfully
[2025-07-19 17:53:00,115] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-19 17:53:00,116] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-19 17:53:00,117] INFO in app: System encoding: utf-8
[2025-07-19 17:53:00,119] INFO in app: ==================================================
2025-07-19 17:53:00,315 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-19 17:53:00,316 - INFO - Added job "snapshot_par" to job store "default"
2025-07-19 17:53:00,316 - INFO - Scheduler started
2025-07-19 17:54:45,527 - INFO - Scheduler has been shut down
[2025-07-19 17:54:51,064] INFO in app: ==================================================
[2025-07-19 17:54:51,072] INFO in app: Application logging initialized successfully
[2025-07-19 17:54:51,074] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-19 17:54:51,075] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-19 17:54:51,076] INFO in app: System encoding: utf-8
[2025-07-19 17:54:51,077] INFO in app: ==================================================
2025-07-19 17:54:51,263 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-19 17:54:51,264 - INFO - Added job "snapshot_par" to job store "default"
2025-07-19 17:54:51,265 - INFO - Scheduler started
2025-07-19 17:58:20,667 - INFO - 127.0.0.1 - - [19/Jul/2025 17:58:20] "[33mGET /placements HTTP/1.1[0m" 404 -
2025-07-19 17:59:18,437 - INFO - 127.0.0.1 - - [19/Jul/2025 17:59:18] "[33mGET /placement HTTP/1.1[0m" 404 -
2025-07-19 18:46:26,046 - INFO - 127.0.0.1 - - [19/Jul/2025 18:46:26] "GET / HTTP/1.1" 200 -
2025-07-19 18:46:26,270 - INFO - 127.0.0.1 - - [19/Jul/2025 18:46:26] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-19 18:46:32,000 - INFO - 127.0.0.1 - - [19/Jul/2025 18:46:32] "GET / HTTP/1.1" 200 -
2025-07-19 18:46:32,758 - INFO - 127.0.0.1 - - [19/Jul/2025 18:46:32] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-19 18:46:38,092 - INFO - 127.0.0.1 - - [19/Jul/2025 18:46:38] "[33mGET /placement HTTP/1.1[0m" 404 -
2025-07-19 18:46:38,410 - INFO - 127.0.0.1 - - [19/Jul/2025 18:46:38] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-19 18:46:40,708 - INFO - 127.0.0.1 - - [19/Jul/2025 18:46:40] "[33mGET /placement HTTP/1.1[0m" 404 -
2025-07-19 18:46:40,754 - INFO - 127.0.0.1 - - [19/Jul/2025 18:46:40] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-19 18:46:47,698 - INFO - 127.0.0.1 - - [19/Jul/2025 18:46:47] "[33mGET /placements HTTP/1.1[0m" 404 -
2025-07-19 18:47:18,498 - INFO - Scheduler has been shut down
[2025-07-19 18:47:22,403] INFO in app: ==================================================
[2025-07-19 18:47:22,410] INFO in app: Application logging initialized successfully
[2025-07-19 18:47:22,417] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-19 18:47:22,419] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-19 18:47:22,423] INFO in app: System encoding: utf-8
[2025-07-19 18:47:22,425] INFO in app: ==================================================
2025-07-19 18:47:22,795 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-19 18:47:22,799 - INFO - Added job "snapshot_par" to job store "default"
2025-07-19 18:47:22,799 - INFO - Scheduler started
2025-07-19 18:47:22,818 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-19 18:47:22,818 - INFO - [33mPress CTRL+C to quit[0m
2025-07-19 18:47:27,153 - INFO - 127.0.0.1 - - [19/Jul/2025 18:47:27] "GET /placements HTTP/1.1" 200 -
2025-07-19 18:47:28,124 - INFO - 127.0.0.1 - - [19/Jul/2025 18:47:28] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-19 18:48:45,682 - INFO - 127.0.0.1 - - [19/Jul/2025 18:48:45] "GET /placement HTTP/1.1" 200 -
2025-07-19 19:26:20,062 - INFO - Scheduler has been shut down
[2025-07-19 19:26:24,284] INFO in app: ==================================================
[2025-07-19 19:26:24,295] INFO in app: Application logging initialized successfully
[2025-07-19 19:26:24,299] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-19 19:26:24,301] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-19 19:26:24,303] INFO in app: System encoding: utf-8
[2025-07-19 19:26:24,309] INFO in app: ==================================================
2025-07-19 19:26:24,541 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-19 19:26:24,543 - INFO - Added job "snapshot_par" to job store "default"
2025-07-19 19:26:24,544 - INFO - Scheduler started
2025-07-19 19:26:24,560 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-19 19:26:24,560 - INFO - [33mPress CTRL+C to quit[0m
2025-07-19 19:26:48,590 - INFO - 127.0.0.1 - - [19/Jul/2025 19:26:48] "GET / HTTP/1.1" 200 -
2025-07-19 19:27:09,359 - INFO - 127.0.0.1 - - [19/Jul/2025 19:27:09] "[33mGET /placement HTTP/1.1[0m" 404 -
2025-07-19 19:27:09,420 - INFO - 127.0.0.1 - - [19/Jul/2025 19:27:09] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-19 19:27:17,474] ERROR in app: Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: placement.current_balance

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6496, in view_placements
    placements = Placement.query.options(db.joinedload(Placement.client)).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: placement.current_balance
[SQL: SELECT placement.id AS placement_id, placement.client_id AS placement_client_id, placement.amount AS placement_amount, placement.interest_rate AS placement_interest_rate, placement.interest_type AS placement_interest_type, placement.tenure_months AS placement_tenure_months, placement.start_date AS placement_start_date, placement.payment_frequency AS placement_payment_frequency, placement.commission_percentage AS placement_commission_percentage, placement.arrangement_fee AS placement_arrangement_fee, placement.collateral AS placement_collateral, placement.current_balance AS placement_current_balance, placement.status AS placement_status, placement.last_interest_calculation AS placement_last_interest_calculation, client_1.id AS client_1_id, client_1.full_name AS client_1_full_name, client_1.national_id AS client_1_national_id, client_1.phone AS client_1_phone, client_1.email AS client_1_email, client_1.relationship_manager_id AS client_1_relationship_manager_id 
FROM placement LEFT OUTER JOIN client AS client_1 ON client_1.id = placement.client_id]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-19 19:27:17,474 - ERROR - Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: placement.current_balance

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6496, in view_placements
    placements = Placement.query.options(db.joinedload(Placement.client)).all()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: placement.current_balance
[SQL: SELECT placement.id AS placement_id, placement.client_id AS placement_client_id, placement.amount AS placement_amount, placement.interest_rate AS placement_interest_rate, placement.interest_type AS placement_interest_type, placement.tenure_months AS placement_tenure_months, placement.start_date AS placement_start_date, placement.payment_frequency AS placement_payment_frequency, placement.commission_percentage AS placement_commission_percentage, placement.arrangement_fee AS placement_arrangement_fee, placement.collateral AS placement_collateral, placement.current_balance AS placement_current_balance, placement.status AS placement_status, placement.last_interest_calculation AS placement_last_interest_calculation, client_1.id AS client_1_id, client_1.full_name AS client_1_full_name, client_1.national_id AS client_1_national_id, client_1.phone AS client_1_phone, client_1.email AS client_1_email, client_1.relationship_manager_id AS client_1_relationship_manager_id 
FROM placement LEFT OUTER JOIN client AS client_1 ON client_1.id = placement.client_id]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-19 19:27:17,586 - INFO - 127.0.0.1 - - [19/Jul/2025 19:27:17] "[35m[1mGET /placements HTTP/1.1[0m" 500 -
2025-07-19 19:27:17,656 - INFO - 127.0.0.1 - - [19/Jul/2025 19:27:17] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-19 19:30:09,737 - INFO - 127.0.0.1 - - [19/Jul/2025 19:30:09] "GET / HTTP/1.1" 200 -
2025-07-19 19:32:21,941 - INFO - 127.0.0.1 - - [19/Jul/2025 19:32:21] "GET / HTTP/1.1" 200 -
2025-07-19 19:36:33,289 - INFO - Scheduler has been shut down
[2025-07-19 19:36:55,976] INFO in app: ==================================================
[2025-07-19 19:36:55,983] INFO in app: Application logging initialized successfully
[2025-07-19 19:36:55,986] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-19 19:36:55,988] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-19 19:36:55,989] INFO in app: System encoding: utf-8
[2025-07-19 19:36:55,998] INFO in app: ==================================================
2025-07-19 19:36:56,207 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-19 19:36:56,209 - INFO - Added job "snapshot_par" to job store "default"
2025-07-19 19:36:56,209 - INFO - Scheduler started
[2025-07-19 19:37:02,810] INFO in app: ==================================================
[2025-07-19 19:37:02,819] INFO in app: Application logging initialized successfully
[2025-07-19 19:37:02,828] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-19 19:37:02,835] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-19 19:37:02,838] INFO in app: System encoding: utf-8
[2025-07-19 19:37:02,844] INFO in app: ==================================================
2025-07-19 19:37:03,188 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-19 19:37:03,193 - INFO - Added job "snapshot_par" to job store "default"
2025-07-19 19:37:03,193 - INFO - Scheduler started
[2025-07-19 19:37:08,618] INFO in app: ==================================================
[2025-07-19 19:37:08,626] INFO in app: Application logging initialized successfully
[2025-07-19 19:37:08,627] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-19 19:37:08,629] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-19 19:37:08,631] INFO in app: System encoding: utf-8
[2025-07-19 19:37:08,634] INFO in app: ==================================================
2025-07-19 19:37:08,865 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-19 19:37:08,867 - INFO - Added job "snapshot_par" to job store "default"
2025-07-19 19:37:08,867 - INFO - Scheduler started
2025-07-19 19:37:08,890 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-19 19:37:08,891 - INFO - [33mPress CTRL+C to quit[0m
2025-07-19 19:37:18,403 - INFO - 127.0.0.1 - - [19/Jul/2025 19:37:18] "[33mGET /placement HTTP/1.1[0m" 404 -
2025-07-19 19:37:18,454 - INFO - 127.0.0.1 - - [19/Jul/2025 19:37:18] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-19 19:37:23,408] ERROR in app: Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6497, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 2, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 35, in block 'content'
    <td>{{ p.monthly_interest() | format_currency }}</td>
    ^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 92, in from_obj
    if hasattr(obj, "jinja_pass_arg"):
       ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'app.Placement object' has no attribute 'monthly_interest'
2025-07-19 19:37:23,408 - ERROR - Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6497, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 2, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 35, in block 'content'
    <td>{{ p.monthly_interest() | format_currency }}</td>
    ^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 92, in from_obj
    if hasattr(obj, "jinja_pass_arg"):
       ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'app.Placement object' has no attribute 'monthly_interest'
2025-07-19 19:37:23,423 - INFO - 127.0.0.1 - - [19/Jul/2025 19:37:23] "[35m[1mGET /placements HTTP/1.1[0m" 500 -
2025-07-19 19:37:23,670 - INFO - 127.0.0.1 - - [19/Jul/2025 19:37:23] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-19 19:37:31,124 - INFO - 127.0.0.1 - - [19/Jul/2025 19:37:31] "[33mGET /form HTTP/1.1[0m" 404 -
2025-07-19 19:37:31,174 - INFO - 127.0.0.1 - - [19/Jul/2025 19:37:31] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-19 19:37:48,985 - INFO - 127.0.0.1 - - [19/Jul/2025 19:37:48] "GET / HTTP/1.1" 200 -
2025-07-19 19:37:50,604 - INFO - 127.0.0.1 - - [19/Jul/2025 19:37:50] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-19 19:50:23,398 - INFO - 127.0.0.1 - - [19/Jul/2025 19:50:23] "GET / HTTP/1.1" 200 -
2025-07-19 19:54:20,585 - INFO - 127.0.0.1 - - [19/Jul/2025 19:54:20] "GET / HTTP/1.1" 200 -
2025-07-19 19:54:43,227 - INFO - 127.0.0.1 - - [19/Jul/2025 19:54:43] "GET / HTTP/1.1" 200 -
2025-07-19 19:57:16,240 - INFO - 127.0.0.1 - - [19/Jul/2025 19:57:16] "GET / HTTP/1.1" 200 -
2025-07-19 19:58:40,715 - INFO - 127.0.0.1 - - [19/Jul/2025 19:58:40] "GET / HTTP/1.1" 200 -
2025-07-19 20:19:59,326 - INFO - Scheduler has been shut down
[2025-07-19 20:20:02,879] INFO in app: ==================================================
[2025-07-19 20:20:02,887] INFO in app: Application logging initialized successfully
[2025-07-19 20:20:02,889] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-19 20:20:02,890] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-19 20:20:02,892] INFO in app: System encoding: utf-8
[2025-07-19 20:20:02,894] INFO in app: ==================================================
2025-07-19 20:20:03,093 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-19 20:20:03,095 - INFO - Added job "snapshot_par" to job store "default"
2025-07-19 20:20:03,095 - INFO - Scheduler started
2025-07-19 20:20:03,113 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-19 20:20:03,113 - INFO - [33mPress CTRL+C to quit[0m
2025-07-19 20:20:14,528 - INFO - 127.0.0.1 - - [19/Jul/2025 20:20:14] "GET / HTTP/1.1" 200 -
2025-07-19 20:20:18,442 - INFO - 127.0.0.1 - - [19/Jul/2025 20:20:18] "[33mGET /placement HTTP/1.1[0m" 404 -
2025-07-19 20:20:18,513 - INFO - 127.0.0.1 - - [19/Jul/2025 20:20:18] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-19 20:20:37,345] ERROR in app: Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6497, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 2, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 35, in block 'content'
    <td>{{ p.monthly_interest() | format_currency }}</td>
    ^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 92, in from_obj
    if hasattr(obj, "jinja_pass_arg"):
       ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'app.Placement object' has no attribute 'monthly_interest'
2025-07-19 20:20:37,345 - ERROR - Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6497, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 2, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 35, in block 'content'
    <td>{{ p.monthly_interest() | format_currency }}</td>
    ^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 92, in from_obj
    if hasattr(obj, "jinja_pass_arg"):
       ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'app.Placement object' has no attribute 'monthly_interest'
2025-07-19 20:20:37,364 - INFO - 127.0.0.1 - - [19/Jul/2025 20:20:37] "[35m[1mGET /placements HTTP/1.1[0m" 500 -
2025-07-19 20:20:37,421 - INFO - 127.0.0.1 - - [19/Jul/2025 20:20:37] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-19 20:20:58,407 - INFO - Scheduler has been shut down
[2025-07-19 20:21:01,895] INFO in app: ==================================================
[2025-07-19 20:21:01,902] INFO in app: Application logging initialized successfully
[2025-07-19 20:21:01,905] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-19 20:21:01,906] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-19 20:21:01,908] INFO in app: System encoding: utf-8
[2025-07-19 20:21:01,911] INFO in app: ==================================================
2025-07-19 20:21:02,097 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-19 20:21:02,099 - INFO - Added job "snapshot_par" to job store "default"
2025-07-19 20:21:02,099 - INFO - Scheduler started
2025-07-19 20:21:02,117 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-19 20:21:02,117 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-19 20:21:14,612] ERROR in app: Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6506, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 2, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 35, in block 'content'
    <td>{{ p.monthly_interest() | format_currency }}</td>
    ^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1642, in monthly_interest
    return self.current_balance * monthly_rate
           ~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for *: 'NoneType' and 'float'
2025-07-19 20:21:14,612 - ERROR - Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6506, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 2, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 35, in block 'content'
    <td>{{ p.monthly_interest() | format_currency }}</td>
    ^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1642, in monthly_interest
    return self.current_balance * monthly_rate
           ~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for *: 'NoneType' and 'float'
2025-07-19 20:21:14,624 - INFO - 127.0.0.1 - - [19/Jul/2025 20:21:14] "[35m[1mGET /placements HTTP/1.1[0m" 500 -
2025-07-19 20:21:18,197 - INFO - 127.0.0.1 - - [19/Jul/2025 20:21:18] "[33mGET /placement HTTP/1.1[0m" 404 -
2025-07-19 20:21:21,785 - INFO - 127.0.0.1 - - [19/Jul/2025 20:21:21] "[33mGET /form HTTP/1.1[0m" 404 -
2025-07-19 20:24:14,852 - INFO - Scheduler has been shut down
[2025-07-19 20:24:18,634] INFO in app: ==================================================
[2025-07-19 20:24:18,640] INFO in app: Application logging initialized successfully
[2025-07-19 20:24:18,642] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-19 20:24:18,644] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-19 20:24:18,646] INFO in app: System encoding: utf-8
[2025-07-19 20:24:18,652] INFO in app: ==================================================
2025-07-19 20:24:18,846 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-19 20:24:18,848 - INFO - Added job "snapshot_par" to job store "default"
2025-07-19 20:24:18,848 - INFO - Scheduler started
2025-07-19 20:24:18,863 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-19 20:24:18,863 - INFO - [33mPress CTRL+C to quit[0m
2025-07-19 20:24:24,052 - INFO - 127.0.0.1 - - [19/Jul/2025 20:24:24] "[33mGET /placement HTTP/1.1[0m" 404 -
2025-07-19 20:24:24,117 - INFO - 127.0.0.1 - - [19/Jul/2025 20:24:24] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-19 20:24:28,565] ERROR in app: Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6501, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 2, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 35, in block 'content'
    <td>{{ p.monthly_interest() | format_currency }}</td>
    ^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
  File "C:\Users\pc\loan-app\app.py", line 1637, in monthly_interest
    return self.current_balance * (self.interest_rate / 1200)
           ~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for *: 'NoneType' and 'float'
2025-07-19 20:24:28,565 - ERROR - Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6501, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 2, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 35, in block 'content'
    <td>{{ p.monthly_interest() | format_currency }}</td>
    ^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
  File "C:\Users\pc\loan-app\app.py", line 1637, in monthly_interest
    return self.current_balance * (self.interest_rate / 1200)
           ~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for *: 'NoneType' and 'float'
2025-07-19 20:24:28,578 - INFO - 127.0.0.1 - - [19/Jul/2025 20:24:28] "[35m[1mGET /placements HTTP/1.1[0m" 500 -
2025-07-19 20:24:28,807 - INFO - 127.0.0.1 - - [19/Jul/2025 20:24:28] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-19 20:24:32,551] ERROR in app: Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6501, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 2, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 35, in block 'content'
    <td>{{ p.monthly_interest() | format_currency }}</td>
    ^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
  File "C:\Users\pc\loan-app\app.py", line 1637, in monthly_interest
    return self.current_balance * (self.interest_rate / 1200)
           ~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for *: 'NoneType' and 'float'
2025-07-19 20:24:32,551 - ERROR - Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6501, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 2, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 35, in block 'content'
    <td>{{ p.monthly_interest() | format_currency }}</td>
    ^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
  File "C:\Users\pc\loan-app\app.py", line 1637, in monthly_interest
    return self.current_balance * (self.interest_rate / 1200)
           ~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for *: 'NoneType' and 'float'
2025-07-19 20:24:32,581 - INFO - 127.0.0.1 - - [19/Jul/2025 20:24:32] "[35m[1mGET /placements HTTP/1.1[0m" 500 -
2025-07-19 20:33:07,297 - INFO - Scheduler has been shut down
[2025-07-19 20:33:10,865] INFO in app: ==================================================
[2025-07-19 20:33:10,872] INFO in app: Application logging initialized successfully
[2025-07-19 20:33:10,874] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-19 20:33:10,876] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-19 20:33:10,878] INFO in app: System encoding: utf-8
[2025-07-19 20:33:10,881] INFO in app: ==================================================
2025-07-19 20:33:11,070 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-19 20:33:11,072 - INFO - Added job "snapshot_par" to job store "default"
2025-07-19 20:33:11,072 - INFO - Scheduler started
2025-07-19 20:33:11,088 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-19 20:33:11,088 - INFO - [33mPress CTRL+C to quit[0m
2025-07-19 20:33:15,857 - INFO - 127.0.0.1 - - [19/Jul/2025 20:33:15] "[33mGET /placement HTTP/1.1[0m" 404 -
2025-07-19 20:33:15,939 - INFO - 127.0.0.1 - - [19/Jul/2025 20:33:15] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[2025-07-20 18:15:18,789] INFO in app: ==================================================
[2025-07-20 18:15:18,875] INFO in app: Application logging initialized successfully
[2025-07-20 18:15:18,876] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-20 18:15:18,878] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-20 18:15:18,879] INFO in app: System encoding: utf-8
[2025-07-20 18:15:18,881] INFO in app: ==================================================
2025-07-20 18:15:19,198 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-20 18:15:19,200 - INFO - Added job "snapshot_par" to job store "default"
2025-07-20 18:15:19,201 - INFO - Scheduler started
2025-07-20 18:15:19,242 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-20 18:15:19,242 - INFO - [33mPress CTRL+C to quit[0m
2025-07-20 18:15:26,412 - INFO - 127.0.0.1 - - [20/Jul/2025 18:15:26] "GET / HTTP/1.1" 200 -
2025-07-20 18:16:30,964 - INFO - 127.0.0.1 - - [20/Jul/2025 18:16:30] "[33mGET /form HTTP/1.1[0m" 404 -
2025-07-20 18:16:31,092 - INFO - 127.0.0.1 - - [20/Jul/2025 18:16:31] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-20 18:16:36,640 - INFO - 127.0.0.1 - - [20/Jul/2025 18:16:36] "GET / HTTP/1.1" 200 -
2025-07-20 19:19:39,244 - INFO - 127.0.0.1 - - [20/Jul/2025 19:19:39] "[33mGET /placement HTTP/1.1[0m" 404 -
2025-07-20 19:19:48,809 - INFO - 127.0.0.1 - - [20/Jul/2025 19:19:48] "[33mGET /placement HTTP/1.1[0m" 404 -
[2025-07-20 19:19:53,066] ERROR in app: Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6501, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 2, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 35, in block 'content'
    <td>{{ p.monthly_interest() | format_currency }}</td>
    ^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
  File "C:\Users\pc\loan-app\app.py", line 1637, in monthly_interest
    return self.current_balance * (self.interest_rate / 1200)
           ~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for *: 'NoneType' and 'float'
2025-07-20 19:19:53,066 - ERROR - Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6501, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 2, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 35, in block 'content'
    <td>{{ p.monthly_interest() | format_currency }}</td>
    ^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
  File "C:\Users\pc\loan-app\app.py", line 1637, in monthly_interest
    return self.current_balance * (self.interest_rate / 1200)
           ~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for *: 'NoneType' and 'float'
2025-07-20 19:19:53,125 - INFO - 127.0.0.1 - - [20/Jul/2025 19:19:53] "[35m[1mGET /placements HTTP/1.1[0m" 500 -
[2025-07-20 19:19:54,491] ERROR in app: Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6501, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 2, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 35, in block 'content'
    <td>{{ p.monthly_interest() | format_currency }}</td>
    ^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
  File "C:\Users\pc\loan-app\app.py", line 1637, in monthly_interest
    return self.current_balance * (self.interest_rate / 1200)
           ~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for *: 'NoneType' and 'float'
2025-07-20 19:19:54,491 - ERROR - Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6501, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 2, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 35, in block 'content'
    <td>{{ p.monthly_interest() | format_currency }}</td>
    ^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
  File "C:\Users\pc\loan-app\app.py", line 1637, in monthly_interest
    return self.current_balance * (self.interest_rate / 1200)
           ~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for *: 'NoneType' and 'float'
2025-07-20 19:19:54,559 - INFO - 127.0.0.1 - - [20/Jul/2025 19:19:54] "[35m[1mGET /placements HTTP/1.1[0m" 500 -
[2025-07-20 19:19:58,024] ERROR in app: Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6501, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 2, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 35, in block 'content'
    <td>{{ p.monthly_interest() | format_currency }}</td>
    ^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
  File "C:\Users\pc\loan-app\app.py", line 1637, in monthly_interest
    return self.current_balance * (self.interest_rate / 1200)
           ~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for *: 'NoneType' and 'float'
2025-07-20 19:19:58,024 - ERROR - Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6501, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 2, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 35, in block 'content'
    <td>{{ p.monthly_interest() | format_currency }}</td>
    ^^^^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
  File "C:\Users\pc\loan-app\app.py", line 1637, in monthly_interest
    return self.current_balance * (self.interest_rate / 1200)
           ~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for *: 'NoneType' and 'float'
2025-07-20 19:19:58,083 - INFO - 127.0.0.1 - - [20/Jul/2025 19:19:58] "[35m[1mGET /placements HTTP/1.1[0m" 500 -
2025-07-20 19:26:38,193 - INFO - Scheduler has been shut down
[2025-07-20 19:26:48,803] INFO in app: ==================================================
[2025-07-20 19:26:48,885] INFO in app: Application logging initialized successfully
[2025-07-20 19:26:48,887] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-20 19:26:48,891] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-20 19:26:48,894] INFO in app: System encoding: utf-8
[2025-07-20 19:26:48,896] INFO in app: ==================================================
2025-07-20 19:26:49,166 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-20 19:26:49,168 - INFO - Added job "snapshot_par" to job store "default"
2025-07-20 19:26:49,168 - INFO - Scheduler started
2025-07-20 19:26:49,187 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-20 19:26:49,187 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-20 19:26:55,566] ERROR in app: Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6502, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 2, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 36, in block 'content'
    <td>{{ p.accrued_interest() | format_currency }}</td>
    ^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1761, in accrued_interest
    return self.calculate_daily_interest(as_of_date)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1628, in calculate_daily_interest
    days = (as_of_date - self.last_interest_calculation).days
            ~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'datetime.date' and 'NoneType'
2025-07-20 19:26:55,566 - ERROR - Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6502, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 2, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 36, in block 'content'
    <td>{{ p.accrued_interest() | format_currency }}</td>
    ^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1761, in accrued_interest
    return self.calculate_daily_interest(as_of_date)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 1628, in calculate_daily_interest
    days = (as_of_date - self.last_interest_calculation).days
            ~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'datetime.date' and 'NoneType'
2025-07-20 19:26:55,579 - INFO - 127.0.0.1 - - [20/Jul/2025 19:26:55] "[35m[1mGET /placements HTTP/1.1[0m" 500 -
2025-07-20 19:31:49,221 - INFO - Scheduler has been shut down
[2025-07-20 19:31:58,121] INFO in app: ==================================================
[2025-07-20 19:31:58,126] INFO in app: Application logging initialized successfully
[2025-07-20 19:31:58,129] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-20 19:31:58,131] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-20 19:31:58,132] INFO in app: System encoding: utf-8
[2025-07-20 19:31:58,140] INFO in app: ==================================================
2025-07-20 19:31:58,337 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-20 19:31:58,338 - INFO - Added job "snapshot_par" to job store "default"
2025-07-20 19:31:58,338 - INFO - Scheduler started
2025-07-20 19:31:58,357 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-20 19:31:58,357 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-20 19:32:22,629] ERROR in app: Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6504, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 2, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 38, in block 'content'
    {% if p.next_interest_date() %}
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 92, in from_obj
    if hasattr(obj, "jinja_pass_arg"):
       ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'app.Placement object' has no attribute 'next_interest_date'
2025-07-20 19:32:22,629 - ERROR - Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6504, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 2, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 38, in block 'content'
    {% if p.next_interest_date() %}
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 92, in from_obj
    if hasattr(obj, "jinja_pass_arg"):
       ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'app.Placement object' has no attribute 'next_interest_date'
2025-07-20 19:32:22,672 - INFO - 127.0.0.1 - - [20/Jul/2025 19:32:22] "[35m[1mGET /placements HTTP/1.1[0m" 500 -
2025-07-20 19:32:22,721 - INFO - 127.0.0.1 - - [20/Jul/2025 19:32:22] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-20 19:36:09,169 - INFO - Scheduler has been shut down
[2025-07-20 19:36:12,861] INFO in app: ==================================================
[2025-07-20 19:36:12,868] INFO in app: Application logging initialized successfully
[2025-07-20 19:36:12,870] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-20 19:36:12,872] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-20 19:36:12,874] INFO in app: System encoding: utf-8
[2025-07-20 19:36:12,880] INFO in app: ==================================================
2025-07-20 19:36:13,078 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-20 19:36:13,080 - INFO - Added job "snapshot_par" to job store "default"
2025-07-20 19:36:13,080 - INFO - Scheduler started
2025-07-20 19:36:13,095 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-20 19:36:13,095 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-20 19:36:17,819] ERROR in app: Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6511, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 2, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 38, in block 'content'
    {% if p.next_interest_date() %}
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 92, in from_obj
    if hasattr(obj, "jinja_pass_arg"):
       ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'app.Placement object' has no attribute 'next_interest_date'
2025-07-20 19:36:17,819 - ERROR - Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6511, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 2, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 173, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 38, in block 'content'
    {% if p.next_interest_date() %}
    ^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\utils.py", line 92, in from_obj
    if hasattr(obj, "jinja_pass_arg"):
       ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'app.Placement object' has no attribute 'next_interest_date'
2025-07-20 19:36:17,835 - INFO - 127.0.0.1 - - [20/Jul/2025 19:36:17] "[35m[1mGET /placements HTTP/1.1[0m" 500 -
2025-07-20 19:36:17,898 - INFO - 127.0.0.1 - - [20/Jul/2025 19:36:17] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-20 19:47:48,559 - INFO - 127.0.0.1 - - [20/Jul/2025 19:47:48] "[33mGET /form HTTP/1.1[0m" 404 -
2025-07-20 20:02:07,417 - INFO - Scheduler has been shut down
[2025-07-20 20:02:11,468] INFO in app: ==================================================
[2025-07-20 20:02:11,476] INFO in app: Application logging initialized successfully
[2025-07-20 20:02:11,479] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-20 20:02:11,480] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-20 20:02:11,482] INFO in app: System encoding: utf-8
[2025-07-20 20:02:11,487] INFO in app: ==================================================
2025-07-20 20:02:11,676 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-20 20:02:11,677 - INFO - Added job "snapshot_par" to job store "default"
2025-07-20 20:02:11,677 - INFO - Scheduler started
2025-07-20 20:02:11,697 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-20 20:02:11,697 - INFO - [33mPress CTRL+C to quit[0m
2025-07-20 20:02:15,997 - INFO - 127.0.0.1 - - [20/Jul/2025 20:02:15] "GET /placements HTTP/1.1" 200 -
2025-07-20 20:02:17,164 - INFO - 127.0.0.1 - - [20/Jul/2025 20:02:17] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-20 20:02:45,217 - INFO - 127.0.0.1 - - [20/Jul/2025 20:02:45] "[33mGET /placement HTTP/1.1[0m" 404 -
2025-07-20 20:02:51,905 - INFO - 127.0.0.1 - - [20/Jul/2025 20:02:51] "GET /placements HTTP/1.1" 200 -
[2025-07-20 20:08:25,674] INFO in app: ==================================================
[2025-07-20 20:08:25,688] INFO in app: Application logging initialized successfully
[2025-07-20 20:08:25,689] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-20 20:08:25,691] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-20 20:08:25,692] INFO in app: System encoding: utf-8
[2025-07-20 20:08:25,693] INFO in app: ==================================================
2025-07-20 20:08:25,882 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-20 20:08:25,884 - INFO - Added job "snapshot_par" to job store "default"
2025-07-20 20:08:25,884 - INFO - Scheduler started
2025-07-20 20:15:02,355 - INFO - Scheduler has been shut down
[2025-07-20 20:15:05,827] INFO in app: ==================================================
[2025-07-20 20:15:05,832] INFO in app: Application logging initialized successfully
[2025-07-20 20:15:05,834] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-20 20:15:05,836] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-20 20:15:05,838] INFO in app: System encoding: utf-8
[2025-07-20 20:15:05,839] INFO in app: ==================================================
2025-07-20 20:15:06,043 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-20 20:15:06,045 - INFO - Added job "snapshot_par" to job store "default"
2025-07-20 20:15:06,045 - INFO - Scheduler started
2025-07-20 20:15:06,067 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-20 20:15:06,067 - INFO - [33mPress CTRL+C to quit[0m
2025-07-20 20:15:08,902 - INFO - 127.0.0.1 - - [20/Jul/2025 20:15:08] "GET /placements HTTP/1.1" 200 -
2025-07-20 20:15:52,052 - INFO - 127.0.0.1 - - [20/Jul/2025 20:15:52] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-20 20:16:01,874 - INFO - 127.0.0.1 - - [20/Jul/2025 20:16:01] "GET /placements HTTP/1.1" 200 -
2025-07-20 20:16:07,406 - INFO - 127.0.0.1 - - [20/Jul/2025 20:16:07] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-20 20:20:16,637 - INFO - 127.0.0.1 - - [20/Jul/2025 20:20:16] "[33mGET /placement HTTP/1.1[0m" 404 -
2025-07-20 20:20:25,804 - INFO - 127.0.0.1 - - [20/Jul/2025 20:20:25] "GET /placement/new HTTP/1.1" 200 -
2025-07-20 20:20:32,453 - INFO - 127.0.0.1 - - [20/Jul/2025 20:20:32] "GET /placement/new HTTP/1.1" 200 -
2025-07-20 20:21:09,191 - INFO - 127.0.0.1 - - [20/Jul/2025 20:21:09] "[33mGET /placement HTTP/1.1[0m" 404 -
2025-07-20 20:21:09,949 - INFO - 127.0.0.1 - - [20/Jul/2025 20:21:09] "[33mGET /placement HTTP/1.1[0m" 404 -
2025-07-20 20:21:17,454 - INFO - 127.0.0.1 - - [20/Jul/2025 20:21:17] "GET /placement/new HTTP/1.1" 200 -
2025-07-20 20:30:51,047 - INFO - 127.0.0.1 - - [20/Jul/2025 20:30:51] "GET /placement/new HTTP/1.1" 200 -
2025-07-20 20:35:56,260 - INFO - 127.0.0.1 - - [20/Jul/2025 20:35:56] "GET /placements HTTP/1.1" 200 -
2025-07-20 20:53:33,098 - INFO - 127.0.0.1 - - [20/Jul/2025 20:53:33] "GET /placements HTTP/1.1" 200 -
2025-07-20 20:53:37,311 - INFO - 127.0.0.1 - - [20/Jul/2025 20:53:37] "[33mGET /placement HTTP/1.1[0m" 404 -
[2025-07-21 01:35:44,350] INFO in app: ==================================================
[2025-07-21 01:35:44,430] INFO in app: Application logging initialized successfully
[2025-07-21 01:35:44,431] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-21 01:35:44,432] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-21 01:35:44,433] INFO in app: System encoding: utf-8
[2025-07-21 01:35:44,435] INFO in app: ==================================================
2025-07-21 01:35:44,759 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-21 01:35:44,762 - INFO - Added job "snapshot_par" to job store "default"
2025-07-21 01:35:44,762 - INFO - Scheduler started
2025-07-21 01:35:44,814 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-21 01:35:44,814 - INFO - [33mPress CTRL+C to quit[0m
2025-07-21 01:35:49,644 - INFO - 127.0.0.1 - - [21/Jul/2025 01:35:49] "GET /placement/new HTTP/1.1" 200 -
2025-07-21 01:35:49,722 - INFO - 127.0.0.1 - - [21/Jul/2025 01:35:49] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-21 01:35:50,111 - INFO - 127.0.0.1 - - [21/Jul/2025 01:35:50] "GET /placement/new HTTP/1.1" 200 -
2025-07-21 01:35:50,432 - INFO - 127.0.0.1 - - [21/Jul/2025 01:35:50] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-21 01:35:51,693 - INFO - 127.0.0.1 - - [21/Jul/2025 01:35:51] "[33mGET /placement HTTP/1.1[0m" 404 -
2025-07-21 01:35:55,417 - INFO - 127.0.0.1 - - [21/Jul/2025 01:35:55] "GET /placements HTTP/1.1" 200 -
2025-07-21 01:36:00,082 - INFO - 127.0.0.1 - - [21/Jul/2025 01:36:00] "GET /placements HTTP/1.1" 200 -
2025-07-21 01:36:00,588 - INFO - 127.0.0.1 - - [21/Jul/2025 01:36:00] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-21 01:36:03,394 - INFO - 127.0.0.1 - - [21/Jul/2025 01:36:03] "GET /payments HTTP/1.1" 200 -
2025-07-21 01:36:04,835 - INFO - 127.0.0.1 - - [21/Jul/2025 01:36:04] "GET /placements HTTP/1.1" 200 -
2025-07-21 01:56:26,982 - INFO - Scheduler has been shut down
[2025-07-21 01:56:53,851] INFO in app: ==================================================
[2025-07-21 01:56:53,858] INFO in app: Application logging initialized successfully
[2025-07-21 01:56:53,863] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-21 01:56:53,865] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-21 01:56:53,867] INFO in app: System encoding: utf-8
[2025-07-21 01:56:53,869] INFO in app: ==================================================
2025-07-21 01:56:54,112 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-21 01:56:54,113 - INFO - Added job "snapshot_par" to job store "default"
2025-07-21 01:56:54,113 - INFO - Scheduler started
[2025-07-21 01:57:04,612] INFO in app: ==================================================
[2025-07-21 01:57:04,618] INFO in app: Application logging initialized successfully
[2025-07-21 01:57:04,620] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-21 01:57:04,624] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-21 01:57:04,625] INFO in app: System encoding: utf-8
[2025-07-21 01:57:04,627] INFO in app: ==================================================
2025-07-21 01:57:04,815 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-21 01:57:04,817 - INFO - Added job "snapshot_par" to job store "default"
2025-07-21 01:57:04,817 - INFO - Scheduler started
[2025-07-21 01:57:12,855] INFO in app: ==================================================
[2025-07-21 01:57:12,861] INFO in app: Application logging initialized successfully
[2025-07-21 01:57:12,863] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-21 01:57:12,865] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-21 01:57:12,867] INFO in app: System encoding: utf-8
[2025-07-21 01:57:12,872] INFO in app: ==================================================
2025-07-21 01:57:13,069 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-21 01:57:13,071 - INFO - Added job "snapshot_par" to job store "default"
2025-07-21 01:57:13,071 - INFO - Scheduler started
[2025-07-21 02:13:33,339] INFO in app: ==================================================
[2025-07-21 02:13:33,349] INFO in app: Application logging initialized successfully
[2025-07-21 02:13:33,365] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-21 02:13:33,367] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-21 02:13:33,369] INFO in app: System encoding: utf-8
[2025-07-21 02:13:33,371] INFO in app: ==================================================
2025-07-21 02:13:33,631 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-21 02:13:33,633 - INFO - Added job "snapshot_par" to job store "default"
2025-07-21 02:13:33,633 - INFO - Scheduler started
[2025-07-21 02:32:27,645] INFO in app: ==================================================
[2025-07-21 02:32:27,651] INFO in app: Application logging initialized successfully
[2025-07-21 02:32:27,654] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-21 02:32:27,656] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-21 02:32:27,668] INFO in app: System encoding: utf-8
[2025-07-21 02:32:27,670] INFO in app: ==================================================
2025-07-21 02:32:27,852 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-21 02:32:27,854 - INFO - Added job "snapshot_par" to job store "default"
2025-07-21 02:32:27,854 - INFO - Scheduler started
[2025-07-21 02:34:27,820] INFO in app: ==================================================
[2025-07-21 02:34:27,827] INFO in app: Application logging initialized successfully
[2025-07-21 02:34:27,828] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-21 02:34:27,829] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-21 02:34:27,830] INFO in app: System encoding: utf-8
[2025-07-21 02:34:27,842] INFO in app: ==================================================
2025-07-21 02:34:28,030 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-21 02:34:28,032 - INFO - Added job "snapshot_par" to job store "default"
2025-07-21 02:34:28,032 - INFO - Scheduler started
2025-07-21 02:37:27,215 - INFO - Scheduler has been shut down
[2025-07-21 02:37:37,985] INFO in app: ==================================================
[2025-07-21 02:37:37,991] INFO in app: Application logging initialized successfully
[2025-07-21 02:37:37,993] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-21 02:37:37,996] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-21 02:37:37,998] INFO in app: System encoding: utf-8
[2025-07-21 02:37:38,004] INFO in app: ==================================================
2025-07-21 02:37:38,323 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-21 02:37:38,325 - INFO - Added job "snapshot_par" to job store "default"
2025-07-21 02:37:38,325 - INFO - Scheduler started
[2025-07-21 02:37:46,140] INFO in app: ==================================================
[2025-07-21 02:37:46,147] INFO in app: Application logging initialized successfully
[2025-07-21 02:37:46,150] INFO in app: Log directory: C:\Users\pc\loan-app\logs
[2025-07-21 02:37:46,151] INFO in app: Python version: 3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]
[2025-07-21 02:37:46,153] INFO in app: System encoding: utf-8
[2025-07-21 02:37:46,157] INFO in app: ==================================================
2025-07-21 02:37:46,344 - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-21 02:37:46,345 - INFO - Added job "snapshot_par" to job store "default"
2025-07-21 02:37:46,346 - INFO - Scheduler started
2025-07-21 02:37:46,368 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-07-21 02:37:46,368 - INFO - [33mPress CTRL+C to quit[0m
[2025-07-21 02:37:54,867] ERROR in app: Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6519, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 177, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 34, in block 'content'
    <strong>Total Interest Payable:</strong> {{ total_interest | format_currency }}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6526, in format_currency_filter
    return "${:,.2f}".format(value)
           ~~~~~~~~~~~~~~~~~^^^^^^^
TypeError: unsupported format string passed to Undefined.__format__
2025-07-21 02:37:54,867 - ERROR - Exception on /placements [GET]
Traceback (most recent call last):
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6519, in view_placements
    return render_template('placement/list.html', placements=placements)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\pc\loan-app\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "C:\Users\pc\loan-app\templates\base.html", line 177, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\templates\placement\list.html", line 34, in block 'content'
    <strong>Total Interest Payable:</strong> {{ total_interest | format_currency }}
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\loan-app\app.py", line 6526, in format_currency_filter
    return "${:,.2f}".format(value)
           ~~~~~~~~~~~~~~~~~^^^^^^^
TypeError: unsupported format string passed to Undefined.__format__
2025-07-21 02:37:54,879 - INFO - 127.0.0.1 - - [21/Jul/2025 02:37:54] "[35m[1mGET /placements HTTP/1.1[0m" 500 -
2025-07-21 02:37:54,944 - INFO - 127.0.0.1 - - [21/Jul/2025 02:37:54] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-07-21 02:44:56,237 - INFO - Scheduler has been shut down
